
try{(function(){
i$.addOnLoad(function(){
var _1=document.querySelector(".stComplementaryContent");
if(i$.hasClass(_1.ownerDocument.body,"edit-mode")){
var _2=document.querySelectorAll(".stControl");
for(var i=0;i<_2.length;i++){
(function(_3){
if(_3.offsetParent!==null){
i$.bindDomEvt(_3,"onmouseenter",function(){
i$.addClass(_3,"stHover");
});
i$.bindDomEvt(_3,"onmouseleave",function(_4){
var _5=_4.toElement||_4.relatedTarget;
if(!_1.contains(_5)&&!_3.contains(_5)){
i$.removeClass(_3,"stHover");
}
});
var _6=_3.querySelectorAll(".stFocusableLink");
for(var j=0;j<_6.length;j++){
(function(_7){
i$.bindDomEvt(_7,"onfocus",function(){
if(i$.hasClass(_3,"stFocus")){
if(i$.hasClass(_3,"stHeaderVisible")){
i$.removeClass(_3,"stFocus");
}else{
i$.addClass(_3,"stHeaderVisible");
}
}else{
if(i$.hasClass(_3,"stHeaderVisible")){
i$.removeClass(_3,"stHeaderVisible");
}else{
i$.addClass(_3,"stFocus");
}
}
});
})(_6[j]);
}
}
})(_2[i]);
}
}
});
})();


}catch(e){console.log("Module 'st_skin': ",e);}
try{/*
 * On a page using the Simple Theme (or a theme derived from it), a portlet's header should only be visible in "Edit"
 * mode when hovering over the portlet, or tabbing to the portlet. A portlet's header should never be visible in "View"
 * mode.
 * 
 * This behavior is accomplished by adding event handlers to various DOM elements within the portlet. These event
 * handlers respond to a specified event ("mouseenter", "mouseleave", "focus", or "blur") by adding or removing a class
 * attribute from the top-level DOM element for the portlet ("stControl"). The display behavior for these class
 * attributes ("stHover" and "stFocus") is defined by the theme using CSS rules, which are in the file "skinLayout.css".
 */
(function() {
    // Add the skin event handlers after the DOM has been loaded.
    i$.addOnLoad(function () {
        // Only add hover and focus support to show/hide the skin header when the page is in edit mode.
        var complementaryContent = document.querySelector(".stComplementaryContent");
        if (i$.hasClass(complementaryContent.ownerDocument.body, 'edit-mode')) {
            // Find all of the top-level portlet elements (class attribute of "stControl") in the document.
            var portletElements = document.querySelectorAll(".stControl");

            // Add the event handlers to each of the top-level portlet elements.
            for (var i = 0; i < portletElements.length; i++) {
                (function(portletElement) {
                    // Only add event handlers if the portlet is visible (has a value for the "offsetParent" attribute.)
                    if (portletElement.offsetParent !== null) {
                        // Add an event handler to the portlet element for the "mouseenter" event.
                        i$.bindDomEvt(portletElement, "onmouseenter",
                            function() {
                                // Respond to a "mouseenter" event by adding the "stHover" class to the portlet element.
                                i$.addClass(portletElement, "stHover");
                            }
                        );
                        // Add an event handler to the portlet element for the "mouseleave" event.
                        i$.bindDomEvt(portletElement, "onmouseleave",
                            function(evt) {
                                // Respond to a "mouseleave" event by removing the "stHover" class from the portlet element.
                                var node = evt.toElement || evt.relatedTarget;
                                if (!complementaryContent.contains(node) && !portletElement.contains(node)) {
                                    i$.removeClass(portletElement, "stHover");
                                }
                            }
                        );
                        // Find all of the focusable link elements within the portlet.
                        var focusableLinkElements = portletElement.querySelectorAll(".stFocusableLink");

                        // Add the event handlers to each of the focusable link elements.
                        for (var j = 0; j < focusableLinkElements.length; j++) {
                            (function(focusableLinkElement) {
                                // Add an event handler to the focusable link element for the "focus" event.
                                i$.bindDomEvt(focusableLinkElement, "onfocus",
                                    function() {
                                        if (i$.hasClass(portletElement, "stFocus")) {
                                            if (i$.hasClass(portletElement, "stHeaderVisible")) {
                                                // the skin header is already displaying so remove it
                                                i$.removeClass(portletElement, "stFocus");
                                            }
                                            else {
                                                i$.addClass(portletElement, "stHeaderVisible");
                                            }    
                                        }
                                        else {
                                            if (i$.hasClass(portletElement, "stHeaderVisible")) {
                                                // second execution - don't refocus
                                                i$.removeClass(portletElement, "stHeaderVisible");
                                            }
                                            else {
                                                // Respond to a "focus" event by adding the "stFocus" class to the portlet element.
                                                i$.addClass(portletElement, "stFocus");
                                            }
                                        }
                                        
                                    }
                                );
                             })(focusableLinkElements[j]);
                        }
                        
                    }
                })(portletElements[i]);
            };
        }
    });
})();

}catch(e){console.log("Module 'st_skin': ",e);}
try{/* (C) Copyright IBM Corp. 2007  All Rights Reserved.                */
/**
 * This is the JS file for the common semantic tagging service
 */















 



 
var STSPG = {
	lang: "en",
	bidi: "ltr",
	service: "",
    contextUrl: "/wps/semanticTag",
	wpsBaseURL: "/wps",
	externalServiceEntries:'',
	isDynamicLoading : false,
	isC2AHandlerRequired : true,
	isPersonCardHandlerRequired : true,
	isActionHandlerRequired : true,
	isParsingRequired : true,
	newSametimeCommunityServer:true
};

STSPG.service={"entries":[{"id":"com.ibm.portal.action","test":"(globalTestNode.className.match(STSP.actionRE))","js":"","classnames":[".com\\.ibm\\.portal\\.action"]},{"id":"hcard","test":"(globalTestNode.className.match(STSP.hcardRE))","js":"/javascript/semanticTagPerson.js","classnames":[".vcard"]},{"id":"sametime","test":"id:hcard","js":"/javascript/semanticTagAwareness.js","classnames":[]},{"id":"c2a","test":"(globalTestNode.className.match(/(^|\\s)c2a:(source|target)(\\s|$)/)) ","js":"/javascript/semanticTagC2A.js","classnames":[".c2a\\:source",".c2a\\:target"]}]};
var externalEntries;
try{
if(STSPG.externalServiceEntries!=null&&STSPG.externalServiceEntries.length>0){
externalEntries=eval(" ("+STSPG.externalServiceEntries+")");
STSPG.service.entries=STSPG.service.entries.concat(externalEntries);
}else{
}
}
catch(e){
}


var STSP={version:"1.0",lang:STSPG.lang,bidi:STSPG.bidi,tagScope:["*"],service:STSPG.service,scripts:new Array(),actionRegistry:null,refcntAttr:"semtag_refcnt",hoverIdPrefix:"semtag_hover_",hoverIdx:0,liveElemPrefix:"semtag_live_",reMap:new Array(),actionRE:new RegExp("(^|\\s)com.ibm.portal.action(\\s|$)"),hcardRE:new RegExp("(^|\\s)vcard(\\s|$)"),specialMenuProviders:new Array(),parseElem:null,isEnablerObjectAvailable:(typeof com!=="undefined")&&(typeof com.ibm!=="undefined")&&(typeof com.ibm.mashups!=="undefined"),svcEntryPersonCard:null,isSizzleAvailable:((typeof i$!=="undefined")&&(typeof i$.query==="function")),DELAY:10,isMobile:navigator.userAgent.match(/(Android|BlackBerry|iPad|iPhone|iPod|IEMobile|Opera Mini)/ig)?true:false,init:function(_1){
var _2=STSP.DELAY;
if(STSPG.isParsingRequired===false){
STSP.svcEntryPersonCard=STSP.service.entries[1];
if(!STSP.svcEntryPersonCard.nodes){
STSP.svcEntryPersonCard.nodes=[];
}
}
var _3=STSP.isEnablerObjectAvailable;
STSP.isSizzleAvailable=((typeof i$!=="undefined")&&(typeof i$.query==="function"));
if(_3===false){
STSP.parseElem=STSP.getElementFromEvent(_1);
window.setTimeout(STSP.parseDom,STSP.DELAY);
}else{
var _4=STSP.service.entries;
var _5=_4?_4.length:0;
if(STSPG.isDynamicLoading){
for(var k=0;k<_4.length;k++){
var _6=_4[k];
if(_6.id==="hcard"){
STSP.loadScript("/javascript/attributes.js");
STSP.loadScript("/javascript/semanticTagMenu.js");
}
STSP.loadScript(_6.js);
}
}
}
if(STSPG.isActionHandlerRequired){
STSP.setCallback("com.ibm.portal.action",STSP.processActions);
}
if(!STSPG.isDynamicLoading&&STSPG.isPersonCardHandlerRequired&&(typeof SemTagMenu==="object")){
window.setTimeout(SemTagMenu.init,_2);
}
},loadConnScript:function(){
var _7=document.createElement("script");
var _8=STSP.connUrl;
var _9=_8;
_9=_8+"/profiles/portalJS/portalBizCard.js";
_9+=(_9.indexOf("?")==-1)?"?":"&";
_9+="lang="+STSP.lang;
_7.src=_9;
try{
document.body.insertBefore(_7,document.body.firstChild);
}
catch(e){
alert("Svc.loadConnScript caught: "+e);
}
},watchEvent:function(_a,_b,_c,_d){
try{
if(_a.addEventListener){
_a.addEventListener(_b,_c,_d);
}else{
if(_a.attachEvent){
_a.attachEvent("on"+_b,_c);
}
}
}
catch(e){
}
},clearEventWatch:function(_e,_f,_10,_11){
try{
if(_e.removeEventListener){
_e.removeEventListener(_f,_10,_11);
}else{
if(_e.detachEvent){
_e.detachEvent("on"+_f,_10);
}
}
}
catch(e){
}
},parseDomUsingMashupHandler:function(_12,_13){
if(STSP.isSizzleAvailable===true){
}
if(STSPG.isParsingRequired===false){
return false;
}
var _14=STSP.getService(_13);
if(_13==="com.ibm.portal.action"){
STSP.setCallback(_13,STSP.processActions);
}
if(!_14.nodes){
_14.nodes=[];
}
for(var len=0;len<_12.length;len++){
_14.nodes.push(_12[len]);
}
if(_14.callback){
_14.callback.call(this);
}
STSP.loadScript(_14.js);
try{
var _15=STSP.service.entries;
for(var k=0;k<_15.length;k++){
var _16=_15[k];
var _17=false;
if(_16.id===_14.id){
continue;
}
if(_16.test&&_16.test.match(/^id:/)){
var _18=_16.test.substr(3);
if(_18!=_14.id){
continue;
}
var _12=STSP.getNodes(_18);
if(_12&&0<_12.length){
_17=true;
}
}
if(_17&&STSPG.isDynamicLoading){
STSP.loadScript(_16.js);
}
if(_16.callback){
_16.callback.call(this);
}
}
}
catch(e){
}
},parseDom:function(_19,_1a){
if(STSPG.isParsingRequired===false){
return false;
}
if(!_1a&&_19){
_1a=STSP.getElementFromEvent(_19);
}
if(!_1a&&STSP.parseElem){
_1a=STSP.parseElem;
}else{
if(!_1a){
_1a=document;
}else{
if(typeof _1a=="string"){
_1a=document.getElementById(_1a);
}
}
}
var _1b=STSP.service.entries;
for(var j=0;j<_1b.length;j++){
var _1c=_1b[j];
if(!_1c.nodes){
_1c.nodes=[];
}else{
if(_1a==document){
while(0<_1c.nodes.length){
_1c.nodes.pop();
}
}
}
}
var _1d=new Date().getTime();
if(STSP.isSizzleAvailable===false){
STSP.traverseNodes(_1a);
var _1e=new Date().getTime();
}else{
_1d=new Date().getTime();
for(var k=0;k<_1b.length;k++){
var _1c=_1b[k];
if(_1c.classnames==null||_1c.classnames==="undefined"||_1c.classnames.length<1){
continue;
}
var _1f=typeof _1c.classnames;
if(typeof _1c.classnames==="string"){
continue;
}
var _20=_1c.classnames.join(",");
var _21;
_21=i$.query(_1c.classnames.join(","),_1a,_1c.nodes);
if(_1c.nodes.length!=_21.length){
}
}
_1e=new Date().getTime();
var _22=_1e-_1d;
}
for(var k=0;k<_1b.length;k++){
var _1c=_1b[k];
var _23=false;
if(0<_1c.nodes.length){
_23=true;
}else{
if(_1c.test&&_1c.test.match(/^id:/)){
var _24=_1c.test.substr(3);
var _25=STSP.getNodes(_24);
if(_25&&0<_25.length){
_23=true;
}
}
}
if(_23){
if(STSPG.isDynamicLoading){
if(_1c.id=="hcard"){
STSP.loadScript("/javascript/attributes.js");
STSP.loadScript("/javascript/semanticTagMenu.js");
}
var _26=typeof _1c.js;
if(typeof _1c.js==="string"){
STSP.loadScript(_1c.js);
}
}
}
if(_1c.callback){
_1c.callback.call(_1c.nodes);
}
}
STSP.parseElem=null;
},traverseNodes:function(_27){
STSP.traverse_children(_27);
},traverse_tagscope:function(_28){
var _29=STSP.service.entries;
var _2a=_28.getElementsByTagName(STSP.tagScope);
for(var i=0;i<_2a.length;i++){
var _28=_2a[i];
for(var j=0;j<_29.length;j++){
var _2b=_29[j];
if(!_2b.nodes){
_2b.nodes=new Array();
}
if(eval(_2b.test)){
_2b.nodes.push(_28);
}
}
}
},traverse_children:function(_2c){
STSP.testNode(_2c);
var _2d=(_2c&&_2c.childNodes)?_2c.childNodes:null;
if(STSPG.isPersonCardHandlerRequired&&_2c&&_2c.tagName&&_2c.tagName=="IFRAME"){
try{
if(typeof ActiveXObject!="undefined"){
var _2e=document.frames[_2c.id].document;
if(_2e){
_2d=_2e.childNodes;
}
}else{
if(_2c.contentDocument&&_2c.contentDocument.childNodes){
_2d=_2c.contentDocument.childNodes;
}
}
}
catch(e){
_2d=null;
}
var _2f=_2d?_2d.length:"is null";
if(_2d&&0<_2d.length){
var _30=SemTagMenu.includeCSS(_2d[0].parentNode);
if(_30){
STSP.watchEvent(_2c,"load",STSP.parseDom,false);
SemTagMenu.registerMenuEventHandlers(_2d[0].parentNode);
}
}
}
if(_2d==null||_2d=="undefined"){
return;
}
for(var i=0;i<_2d.length;i++){
STSP.traverse_children(_2d[i]);
}
},testNode:function(_31){
globalTestNode=_31;
if(_31==null||_31.className==null||_31.className=="undefined"||_31.tagName==null||_31.tagName=="undefined"){
return;
}
if(typeof _31.className!=="string"){
return;
}
var _32=STSP.service.entries;
for(var j=0;j<_32.length;j++){
var _33=_32[j];
if(_33.test&&!_33.test.match(/^id:/)&&eval(_33.test)){
if(!_31.alreadyadded){
_31.alreadyadded=true;
_33.nodes.push(_31);
}
}
}
},getService:function(_34){
var _35=STSP.service.entries;
for(var i=0;i<_35.length;i++){
var _36=_35[i];
if(_36.id==_34){
return _36;
}
}
},setSemanticTagValue:function(_37,_38,_39){
if(!_38.semTagValues){
_38.semTagValues={};
}
_38.semTagValues[_37]=_39;
},getSemanticTagValues:function(_3a){
return _3a.semTagValues;
},getNodes:function(_3b){
var _3c=STSP.getService(_3b);
if(_3c&&_3c.test&&_3c.test.match(/^id:/)){
_3c=STSP.getService(_3c.test.substr(3));
}
if(_3c){
}
var _3d=_3c?(_3c.nodes?_3c.nodes:[]):null;
return _3d;
},setCallback:function(_3e,_3f){
var _40=STSP.getService(_3e);
if(_40){
_40.callback=_3f;
}else{
}
},loadScript:function(_41,_42){
if(!_41||_41==""){
return;
}
if(_42=="undefined"||_42==null){
_42=false;
}
if(!STSP.scripts[_41]){
STSP.scripts[_41]=true;
var _43=document.createElement("script");
var url=_41.match(/^http/)?_41:STSPG.contextUrl+_41;
url+=(url.indexOf("?")==-1)?"?":"&";
url+="language="+STSP.lang;
_43.src=url;
if(STSPG.isDynamicLoading||_42){
document.body.insertBefore(_43,document.body.firstChild);
}
}
},setSpecialMenuProvider:function(_44){
STSP.specialMenuProviders.push(_44);
},getElementsByClassName:function(_45,_46,_47,_48){
if(!_46){
_46=document.body;
}
if(!_47){
limit=0;
}
if(!_48){
_48=["*"];
}
var _49=STSP.getRegExp(_45);
if(_46&&_46.className&&_46.className.match(_49)){
var _4a=new Array(_46);
return _4a;
}
var _4b=new Array();
for(var t=0;t<_48.length;t++){
var _4c=_46.getElementsByTagName(_48[t]);
for(var i=0;i<_4c.length;i++){
var _4d=_4c[i];
if(_4d.className&&_4d.className.match(_49)){
_4b.push(_4d);
}
if(0<_47&&_47==_4b.length){
break;
}
}
}
return _4b;
},getParentByClassName:function(_4e,_4f){
if(!_4f){
return null;
}
var _50=STSP.getRegExp(_4e);
if(_4f.className&&_4f.className.match(_50)){
return _4f;
}
while(_4f.parentNode){
_4f=_4f.parentNode;
if(_4f.className&&_4f.className.match(_50)){
return _4f;
}
}
return null;
},addHover:function(_51,_52,_53,_54){
while(typeof SemTagMenu==undefined){
alert("waiting...");
}
var _55=_51.getAttribute(STSP.refcntAttr);
var _56=(_52!==null);
if(_55){
_51.setAttribute(STSP.refcntAttr,parseInt(Number(_55)+1));
if(SemTagMenu.staticHover){
var img=SemTagMenu.findHoverFromLiveElement(_51);
if(img){
STSP.watchEvent(img,"click",_53,false);
img.setAttribute("href","javascript:SemTagMenu.a11y()");
}else{
}
}else{
STSP.watchEvent(_51,"mouseover",_52,false);
}
}else{
_51.setAttribute(STSP.refcntAttr,"1");
STSP.hoverIdx++;
_51.setAttribute(STSP.liveElemPrefix+"id",STSP.hoverIdx);
if(SemTagMenu.staticHover){
var img=STSP.createHoverImage(_54);
STSP.watchEvent(img,"click",_53,false);
STSP.watchEvent(img,"keydown",SemTagMenu.a11y,false);
img.setAttribute("href","javascript:void()");
var _57=_51.nextSibling;
if(_57){
_57.parentNode.insertBefore(img,_57);
}else{
_51.parentNode.appendChild(img);
}
_51.setAttribute(STSP.hoverIdPrefix+"idx",parseInt(STSP.hoverIdx));
_51.id=STSP.liveElemPrefix+STSP.hoverIdx;
}else{
var _58=SemTagUtil.getNodeClassValue(_51);
if(_58&&0<_58.length){
_58+=" hasHover";
}else{
_58="hasHover";
}
SemTagUtil.setNodeClassValue(_51,_58);
STSP.watchEvent(_51,"mouseover",_52,false);
_51.setAttribute("tabIndex","0");
STSP.watchEvent(_51,"focus",_52,false);
STSP.watchEvent(_51,"blur",SemTagMenu.mouseout,false);
}
}
},removeHover:function(_59,_5a,_5b){
var _5c=_59.getAttribute(STSP.refcntAttr);
if(_5c){
var _5d=Number(_5c)-1;
if(_5d<0){
}
if(SemTagMenu.staticHover){
var _5e=STSP.getHoverElement(_59);
STSP.clearEventWatch(_5e,"click",_5b,false);
if(_5d==0){
_5e.parentNode.removeChild(_5e);
}
}else{
STSP.clearEventWatch(_59,"mouseover",_5a,false);
STSP.clearEventWatch(_59,"focus",_5a,false);
_59.setAttribute(STSP.refcntAttr,_5d);
if(_5d==0){
var _5f=SemTagUtil.getNodeClassValue(_59);
var _60=_5f.replace(/hasHover/,"");
SemTagUtil.setNodeClassValue(_59,_60);
_59.removeAttribute(STSP.refcntAttr);
_59.removeAttribute("tabIndex");
}
}
}
},createHoverImage:function(_61){
var img=document.createElement("img");
img.id=STSP.hoverIdPrefix+STSP.hoverIdx;
img.className=SemTagMenu.iconName;
img.setAttribute("src",STSPG.contextUrl+"/ui/menu_selected.gif");
img.setAttribute("border","0");
img.setAttribute("alt",_61);
var _62=document.createElement("a");
STSP.watchEvent(_62,"mouseover",SemTagMenu.activateHover,false);
STSP.watchEvent(_62,"mouseout",SemTagMenu.deactivateHover,false);
_62.appendChild(img);
return _62;
},getHoverElement:function(_63){
if(!_63){
return null;
}
if(SemTagMenu.staticHover){
var idx=_63.getAttribute(STSP.hoverIdPrefix+"idx");
var img=document.getElementById(STSP.hoverIdPrefix+idx);
if(img){
var _64=img.parentNode;
return _64;
}
}else{
var _65=SemTagUtil.getNodeClassValue(_63);
if(_65.match(/hasHover/)){
return _63;
}
}
return null;
},showHover:function(_66,_67,_68){
SemTagMenu.showHover(_66,_67,_68);
},setMenuData:function(_69,_6a,_6b,_6c,_6d){
SemTagMenu.setMenuData(_69,_6a,_6b,_6c,_6d);
},getMenuItemJson:function(_6e,_6f,_70,_71){
var o=_70?_70:0;
var i=_71?_71:"";
var _72={"label":_6e,"href":_6f,"order":o,"icon":i};
return _72;
},getMenuHeaderJson:function(_73,_74,_75){
if(_74!="text/html"){
return null;
}
if(_73&&0<_73.length){
var _76={"markup":_73,"order":_75};
return _76;
}else{
null;
}
},getMenuFooterJson:function(_77,_78,_79){
if(_78!="text/html"){
return null;
}
if(_77&&0<_77.length){
var _7a={"markup":_77,"order":_79};
return _7a;
}else{
null;
}
},getElementFromEvent:function(_7b){
var _7c=_7b.target?_7b.target:_7b.srcElement;
if(_7c==window){
_7c=_7c.document;
}
return _7c;
},getLiveElementFromEvent:function(_7d){
var _7e=SemTagMenu.findLiveElementFromEventSource(STSP.getElementFromEvent(_7d));
return _7e;
},getEventAbsoluteX:function(e){
var x=0;
if(e.pageX){
x=e.pageX;
}else{
if(e.clientX){
if(document.body.scrollLeft>document.documentElement.scrollLeft){
x=e.clientX+document.body.scrollLeft;
}else{
x=e.clientX+document.documentElement.scrollLeft;
}
}
}
return x;
},getEventAbsoluteY:function(e){
var y=0;
if(e.pageY){
y=e.pageY;
}else{
if(e.clientY){
if(document.body.scrollTop>document.documentElement.scrollTop){
y=e.clientY+document.body.scrollTop;
}else{
y=e.clientY+document.documentElement.scrollTop;
}
}
}
return y;
},findPosition:function(obj,_7f){
var _80=0,_81=0,_82=0;
var _83=obj.offsetWidth;
var _84;
if(obj.offsetParent){
if(_7f){
_81+=(STSP.bidi=="rtl")?0:_83;
}
_82+=obj.offsetHeight;
while(obj!=null){
_81+=obj.offsetLeft;
_82+=obj.offsetTop;
obj=obj.offsetParent;
_80++;
}
_84=[_81+(STSP.bidi=="rtl"?_83:0),_82];
return _84;
}else{
_84=[obj.x+(STSP.bidi=="rtl"?_83:0),obj.y];
return _84;
}
},createGroupJson:function(ctx,_85){
var _86={"context":ctx,"extenders":_85};
return _86;
},createActionJson:function(id,js,ctx,_87,_88,_89,url,_8a){
var i=(id&&0<id.length)?id[0].innerHTML:null;
var j=(js&&0<js.length)?js[0].innerHTML:null;
var c=(ctx&&0<ctx.length)?ctx[0].innerHTML:null;
var l=(_87&&0<_87.length)?_87[0].innerHTML:null;
var d=(_88&&0<_88.length)?_88[0].innerHTML:null;
var s=(_89&&0<_89.length)?_89[0].innerHTML:null;
var u=(url&&0<url.length)?url[0].innerHTML:null;
var o=(_8a&&0<_8a.length)?parseInt(_8a[0].innerHTML):0;
var _8b={"id":i,"impl":j,"context":c,"label":l,"description":d,"showif":s,"url":u,"order":o};
return _8b;
},parseOrder:function(_8c){
var _8d;
if(_8c==null||_8c.length==0){
_8d=0;
return _8d;
}
if(_8c.charAt(0)=="-"){
_8d=parseInt(_8c.substr(1))*-1;
return _8d;
}else{
_8d=parseInt(_8c);
return _8d;
}
},getActions:function(_8e){
var _8f;
if(!STSP.actionRegistry){
STSP.processActions();
}
for(var i=0;i<STSP.actionRegistry.length;i++){
if(STSP.actionRegistry[i].context==_8e){
_8f=STSP.actionRegistry[i].extenders;
return _8f;
}
}
_8f=STSP.actionRegistry[0].extenders;
return _8f;
},processActions:function(){
if(!STSP.actionRegistry){
STSP.actionRegistry=new Array();
STSP.actionRegistry[0]=STSP.createGroupJson("dummy",new Array());
}
var i;
var _90=STSP.getNodes("com.ibm.portal.action");
while(_90&&0<_90.length){
var _91=_90.pop();
var id=STSP.getElementsByClassName("action-id",_91);
var _92=STSP.getElementsByClassName("action-impl",_91);
var ctx=STSP.getElementsByClassName("action-context",_91);
var _93=STSP.getElementsByClassName("action-label",_91);
var _94=STSP.getElementsByClassName("action-description",_91);
var _95=STSP.getElementsByClassName("action-showif",_91);
var url=STSP.getElementsByClassName("action-url",_91);
var _96=STSP.getElementsByClassName("action-order",_91);
var _97=STSP.createActionJson(id,_92,ctx,_93,_94,_95,url,_96);
for(i=1;i<STSP.actionRegistry.length;i++){
if(STSP.actionRegistry[i].context==_97.context){
var cnt=STSP.actionRegistry[i].extenders.length;
for(var j=0;j<cnt;j++){
if(_97.id==STSP.actionRegistry[i].extenders[j].id){
break;
}
}
if(j==cnt){
STSP.actionRegistry[i].extenders.push(_97);
}
break;
}
}
if(i==STSP.actionRegistry.length){
STSP.actionRegistry[i]=STSP.createGroupJson(ctx[0].innerHTML,new Array());
STSP.actionRegistry[i].extenders.push(_97);
}
if(_97.impl){
STSP.loadScript(_97.impl,true);
}
}
for(i=0;i<STSP.actionRegistry.length;i++){
STSP.actionRegistry[i].extenders.sort(STSP.sortByOrder);
}
},sortByOrder:function(a,b){
if(a.order>b.order){
return 1;
}else{
if(a.order<b.order){
return -1;
}else{
return 0;
}
}
},getTextValue:function(_98){
if(!_98){
return "";
}
return _98.innerHTML.replace(/<[a-zA-Z\/][^>]*>/gi,"");
},getTypedValue:function(_99,_9a){
if(!_9a){
_9a="def";
}
var _9b=new Array();
var _9c=STSP.getElementsByClassName("type",_99);
var _9d=STSP.getElementsByClassName("value",_99);
var _9e="";
if(_9d.length<1){
_9e=STSP.getTextValue(_99);
}
for(var i=0;i<_9d.length;i++){
_9e+=STSP.getTextValue(_9d[i]);
}
if(_9c.length<1){
_9b[_9a]=_9e;
}else{
for(var j=0;j<_9c.length;j++){
var _9f=_9c[j];
var _a0=_9f.tagName.match(/^abbr$/i)?_9f.getAttribute("title"):STSP.getTextValue(_9f);
_9b[_a0.toLowerCase()]=_9e;
}
}
return _9b;
},findNameElementInHcard:function(_a1){
if(_a1.className!="vcard"){
_a1=STSP.getParentByClassName("vcard",_a1);
}
var _a2=STSP.getElementsByClassName("fn",_a1)[0];
if(!_a2){
_a2=STSP.getElementsByClassName("n",_a1)[0];
}
return _a2;
},getEmailFromHcard:function(_a3){
var _a4;
if(!_a3){
_a4="";
return _a4;
}
if(_a3.className!="vcard"){
_a3=STSP.getParentByClassName("vcard",_a3);
}
var _a5="";
if(_a3){
var _a6=STSP.getElementsByClassName("email",_a3)[0];
var _a7=STSP.getTypedValue(_a6,"internet");
_a5=_a7.internet;
}
_a4=_a5;
return _a4;
},findElementByNameInHcard:function(_a8,_a9){
if(_a8.className!="vcard"){
_a8=STSP.getParentByClassName("vcard",_a8);
}
var _aa=STSP.getElementsByClassName(_a9,_a8)[0];
return _aa;
},getRegExp:function(str){
var _ab=STSP.reMap[str];
if(!_ab){
_ab=new RegExp("(^|\\s)"+str+"(\\s|$)");
STSP.reMap[str]=_ab;
}
return _ab;
},addElementToHandler:function(_ac,_ad,_ae){
if(STSPG.isParsingRequired===true){
return false;
}
if(_ac==null||_ac==="undefined"){
return false;
}
var _af=STSP.service.entries;
var _b0=null;
for(var k=0;k<_af.length;k++){
var _b1=_af[k];
if(_b1.id===_ae){
_b0=_b1;
break;
}
}
if(_b0==null){
return false;
}
var _b2;
if(_ac.nodeName==="A"||_ae==="c2a"){
_b2=_ac.parentNode;
}else{
_b2=_ac;
}
if(_b2.getAttribute("alreadyAdded")==null){
if(_b0.nodes==null||_b0.nodes==="undefined"||typeof _b0.nodes!=="array"){
_b0.nodes=[];
}
_b0.nodes.push(_b2);
_b2.setAttribute("alreadyAdded",true);
if(_ae==="c2a"){
var _b3=document.getElementsByClassName("c2a:target");
for(var i=0;i<_b3.length;i++){
_b0.nodes.push(_b3.item(i));
}
}
}
_b0.callback.call(_b0.nodes);
if(_ae==="hcard"){
var _b4=typeof SemTagPerson;
if(STSPG.ifConnUrlExists==="false"&&(typeof SemTagPerson==="object")){
SemTagPerson.showHover(_ad);
}
STSP.stNI=((typeof (stproxy)==="undefined")&&(typeof (prepareSametimeLink)==="undefined"));
var _b5=typeof SemTagAwrns;
if(STSPG.isParsingRequired===false&&STSP.stNI===false&&(typeof SemTagAwrns)){
SemTagAwrns.processHcards([_b2]);
}
}
if(_ae==="c2a"&&SemTagC2A){
SemTagC2A.showHover(_ad);
}
_b0.nodes=[];
return true;
},addElementToPersonCardHandler:function(_b6,_b7){
if(STSPG.isParsingRequired===true){
return false;
}
if(_b6==null||_b6==="undefined"){
return false;
}
var _b8;
if(_b6.nodeName==="A"){
_b8=_b6.parentNode;
}else{
_b8=_b6;
}
if(_b8.getAttribute("alreadyAdded")==null){
STSP.svcEntryPersonCard.nodes.push(_b8);
_b8.setAttribute("alreadyAdded",true);
}
STSP.svcEntryPersonCard.callback.call(STSP.svcEntryPersonCard.nodes);
var _b9=typeof SemTagPerson;
if(STSPG.ifConnUrlExists==="false"&&(typeof SemTagPerson)){
SemTagPerson.showHover(_b7);
}
STSP.stNI=((typeof (stproxy)==="undefined")&&(typeof (prepareSametimeLink)==="undefined"));
var _ba=typeof SemTagAwrns;
if(STSPG.isParsingRequired===false&&STSP.stNI===false&&(typeof SemTagAwrns)){
SemTagAwrns.processHcards([_b8]);
}
STSP.svcEntryPersonCard.nodes.pop();
return true;
},registerService:function(_bb){
var _bc=STSP.service.entries;
_bc[_bc.length]=_bb;
if(STSP.isEnablerObjectAvailable&&typeof dojo!=="undefined"){
try{
dojo.addOnLoad(function(){
var _bd=new com.ibm.mashups.livetext.ConfigEntry(_bb.classnames.join(),false,"portallof",STSPG.contextUrl+"/javascript","portallof.vcard",false,_bb.id);
dojo.publish("/com/ibm/mashups/livetext/configentryadded",[_bd]);
SemTagSvc.parseDom(null,null);
});
}
catch(e){
console.error("Error occurred in registerService for service "+_bb.id+"is :"+e);
}
}
}};
var SemTagSvcConfig=null;
if((STSP.ifConnUrlExists=="true")&&(STSP.isconnServerNew===true)){
SemTagSvcConfig={isPortal:true,baseUrl:STSP.connUrl+"/profiles",loadCssFiles:true,isBidiRTL:false};
}
STSP.watchEvent(window,"load",STSP.init,false);
var SemTagSvc=STSP;
var SemTagSvcPortal=STSP;


var SemTagUtil={isGecko:(document.all?false:true),getNodeClassValue:function(_1){
var rv;
var _2;
if(SemTagUtil.isGecko){
rv=(typeof (_1.getAttribute)!="undefined")?_1.getAttribute("class"):"";
}else{
rv=_1.className;
}
_2=(typeof (rv)!="undefined"&&rv!=null)?rv:"";
return _2;
},setNodeClassValue:function(_3,_4){
if(SemTagUtil.isGecko){
_3.setAttribute("class",_4);
}else{
_3.className=_4;
}
},fireEvent:function(_5,_6){
try{
if(_5.fireEvent){
_5.fireEvent(_6);
}else{
if(_5.dispatchEvent){
_5.dispatchEvent(_6);
}
}
}
catch(e){
}
},getOwnerDocument:function(_7){
if(!_7){
return null;
}
var _8;
if(SemTagUtil.isGecko){
_8=_7.ownerDocument;
return _8;
}else{
var _9=_7;
while(_9.parentNode){
_9=_9.parentNode;
}
_8=_9;
return _8;
}
},getFrameElement:function(_a){
var _b;
if(SemTagUtil.isGecko){
var oD=_a.ownerDocument;
_b=oD.defaultView.frameElement;
return _b;
}else{
var _c=_a;
while(_c.parentNode){
_c=_c.parentNode;
}
_b=_c;
return _b;
}
},getHcardAttributeValue:function(_d,_e){
switch(_d){
case ("email"):
return SemTagUtil.getHcardTypedAttribute(_e,_d,"internet");
case ("tel"):
return SemTagUtil.getHcardTypedAttribute(_e,_d,"voice");
case ("adr"):
return SemTagUtil.getHcardTypedAttribute(_e,_d,"intl");
}
var _f=STSP.getParentByClassName("vcard",_e);
var _10=STSP.getElementsByClassName(_d,_f,1);
if(_10.length>0&&_10[0].tagName.match(/^abbr$/i)){
var _11=_10[0].getAttribute("title");
return _11;
}
switch(_d){
case ("X-person-display-inline"):
if(_10.length>0){
return true;
}else{
return false;
}
case ("fn"):
var fn=SemTagUtil.getSinglePropertyValue(_10[0]);
if(fn){
return fn;
}else{
var _11=SemTagUtil.getHcardAttributeValue("n",_e);
return _11;
}
break;
case ("X-person-header-only"):
case ("X-person-inside-inline"):
var _11=(_10&&0<_10.length);
return _11;
case ("X-sametime-resolve"):
var _12=_10[0];
var _13=(typeof (_12)!="undefined"&&_12!=null);
return _13;
case ("n"):
if(_10.length>0){
var _14=_10[0];
var _15="";
var _16=["honorific-prefix","given-name","additional-name","family-name","honorific-suffix"];
for(var i=0;i<5;i++){
var n=SemTagUtil.getSinglePropertyValue(STSP.getElementsByClassName(_16[i],_14,1)[0]);
if(n){
_15+=n+" ";
}
}
return _15;
}
var _17="";
return _17;
break;
case ("photo"):
var _18=_10[0];
if(_18){
var _13=_18.getAttribute("src");
return _13;
}else{
return;
}
break;
case ("X-sametime-status"):
var _19=_10[0];
var _13;
if(!_19){
_13="";
return _13;
}
var _1a=_19.getAttribute("value");
if(_1a){
_13=_1a;
return _13;
}else{
_13=SemTagUtil.getSinglePropertyValue(_19);
return _13;
}
break;
case ("street-address"):
case ("post-office-box"):
case ("extended-address"):
case ("locality"):
case ("region"):
case ("postal-code"):
case ("country-name"):
case ("title"):
case ("role"):
case ("org"):
default:
var _13=SemTagUtil.getSinglePropertyValue(_10[0]);
return _13;
break;
}
},getHcardTypedAttribute:function(_1b,_1c,_1d){
var _1e=new Object();
var _1f=STSP.getParentByClassName("vcard",_1b);
var _20=STSP.getElementsByClassName(_1c,_1f);
for(var i=0;i<_20.length;i++){
var _21=_20[i];
if(_1c=="email"&&_21.nodeName.toLowerCase()=="a"&&_21.href.match(/^mailto:/)){
var _22=_21.href.indexOf("?");
if(_22>-1){
_1e[_1d]=_21.href.slice(7,_22);
}else{
_1e[_1d]=_21.href.slice(7);
}
continue;
}
_1e=STSP.getTypedValue(_21,_1d);
}
return _1e;
},getSinglePropertyValue:function(_23){
if(!_23){
return false;
}
var _24=_23.innerHTML.replace(/<[a-zA-Z\/][^>]*>/gi,"");
return _24;
},crossDomainRequest:function(){
var _25=new Array();
var _26=new Array();
var _27=this;
createTimeoutFunction=function(_28){
return function(){
_27.cancelRequest(_28);
};
};
this.getScriptId=function(id){
return "_JVLN_"+id;
};
this.getScriptObject=function(id){
var _29=SemTagUtil.isGecko?this.getScriptId(id):this.$_getScriptId(id);
return document.getElementById(_29);
};
this.request=function(url,_2a,_2b,_2c,_2d){
var _2e=this.getScriptId(_2d);
if(_2b){
_25[_2d]=_2b;
}
if(_2c){
_26[_2d]=_2c;
}
var _2f=document.createElement("script");
_2f.id=_2e;
try{
_2f.src=url;
}
catch(e){
return false;
}
document.body.insertBefore(_2f,document.body.firstChild);
if(_2a){
var _30=this;
window.setTimeout(createTimeoutFunction(_2d),_2a);
}
};
this.cancelRequest=function(id){
var _31=_25[id];
_25[id]=null;
var _32=_26[id];
_26[id]=null;
if(_31){
try{
if(_31){
var evt={"target":_32};
_31.call(this,false,null,evt);
}
var _33=this.getScriptObject(id);
if(_33){
document.body.removeChild(_33);
}
}
catch(e){
}
}
};
this.dispatch=function(id,_34){
if(!id){
return;
}
try{
var _35=_25[id];
if(!_35){
}
if(_35){
var evt={"target":_26[id]};
_35.call(this,true,_34,evt);
_25[id]=null;
_26[id]=null;
var _36=this.getScriptObject(id);
if(_36){
document.body.removeChild(_36);
}
}
}
catch(e){
}
};
}};





if(typeof (ibm)=="undefined"){
ibm={};
}
if(typeof (ibm.portal)=="undefined"){
ibm.portal={};
}
if(typeof (ibm.portal.xml)=="undefined"){
ibm.portal.xml={};
}
if(typeof (ibm.portal.xml)=="undefined"){
ibm.portal.xml={};
}
ibm.portal.util={};
ibm.portal.util.cloneObject=function(_1){
var _2={};
for(i in _1){
_2[i]=_1[i];
}
return _2;
};
ibm.portal.resource={};
ibm.portal.resource.str={};
ibm.portal.resource.getString=function(_3,_4){
s=_3[_4];
s=(s==null)?_4:s;
if(arguments.length>=2){
i=1;
do{
s=s.replace("%"+i,arguments[i]);
i=i+1;
}while(i<arguments.length);
}
return s;
};
if(typeof (ibm.portal.xml)=="undefined"){
ibm.portal.xml={};
}
ibm.portal.xml.ie={};
ibm.portal.xml.gecko={};
ibm.portal.xml.getXmlHttpRequest=function(){
var _5=null;
if(typeof ActiveXObject!="undefined"){
_5=new ActiveXObject("Microsoft.XMLHTTP");
}else{
_5=new XMLHttpRequest();
}
return _5;
};
ibm.portal.xml.loadXml=function(_6){
if(typeof ActiveXObject!="undefined"||window.ActiveXObject!==undefined){
return ibm.portal.xml.ie.loadXml(_6);
}else{
return ibm.portal.xml.gecko.loadXml(_6);
}
};
ibm.portal.xml.loadXmlString=function(_7){
if(typeof ActiveXObject!="undefined"||window.ActiveXObject!==undefined){
return ibm.portal.xml.ie.loadXmlString(_7);
}else{
return ibm.portal.xml.gecko.loadXmlString(_7);
}
};
ibm.portal.xml.loadXsl=function(_8){
if(typeof ActiveXObject!="undefined"||window.ActiveXObject!==undefined){
return ibm.portal.xml.ie.loadXsl(_8);
}else{
return ibm.portal.xml.gecko.loadXsl(_8);
}
};
ibm.portal.xml.transform=function(_9,_a,_b,_c,_d){
if(typeof ActiveXObject!="undefined"||window.ActiveXObject!==undefined){
return ibm.portal.xml.ie.transform(_9,_a,_b,_c,_d);
}else{
return ibm.portal.xml.gecko.transform(_9,_a,_b,_c,_d);
}
};
ibm.portal.xml.update=function(_e,_f,xsl,_10,_11){
if(typeof ActiveXObject!="undefined"||window.ActiveXObject!==undefined){
var _12=ibm.portal.xml.ie.transform(_f,xsl,_10,_11,true);
ibm.portal.debug.text("XSLT result: "+_12);
_e.innerHTML+=_12;
}else{
_12=ibm.portal.xml.gecko.transform(_f,xsl,_10,_11,false);
_e.appendChild(_12.documentElement);
}
};
ibm.portal.xml.ie.XSLT_PROG_IDS=["Msxml2.XSLTemplate.6.0","Msxml2.XSLTemplate.4.0","MSXML2.XSLTemplate.3.0","MSXML2.XSLTemplate"];
ibm.portal.xml.ie.DOM_PROG_IDS=["MSXML2.FreeThreadedDOMDocument.6.0","Msxml2.DOMDocument.6.0","Msxml2.DOMDocument.4.0","MSXML2.DOMDocument","MSXML.DOMDocument","Microsoft.XMLDOM"];
ibm.portal.xml.ie.FTDOM_PROG_IDS=["Msxml2.FreeThreadedDOMDocument.6.0","Msxml2.FreeThreadedDOMDocument.4.0","MSXML2.FreeThreadedDOMDocument","MSXML.FreeThreadedDOMDocument","Microsoft.FreeThreadedXMLDOM"];
ibm.portal.xml.ie._getMSXMLImpl=function(_13){
while(_13.length>0){
try{
var _14=new ActiveXObject(_13[0]);
if(_14){
return _14;
}
}
catch(err){
}
_13.splice(0,1);
}
throw new Error("No MSXML implementation exists");
};
ibm.portal.xml.ie.loadXml=function(_15){
var _16=this._getMSXMLImpl(this.DOM_PROG_IDS);
_16.async=0;
_16.resolveExternals=0;
if(!_16.load(_15)){
throw new Error("Error loading xml file "+_15);
}
return _16;
};
ibm.portal.xml.ie.loadXmlString=function(_17){
var _18=this._getMSXMLImpl(this.DOM_PROG_IDS);
_18.async=0;
_18.resolveExternals=0;
if(_17){
if(!_18.loadXML(_17)){
throw new Error("Error loading xml string "+_17);
}
}
return _18;
};
ibm.portal.xml.ie.loadXsl=function(_19){
var _1a=this._getMSXMLImpl(this.FTDOM_PROG_IDS);
_1a.async=0;
_1a.resolveExternals=0;
if(!_1a.load(_19)){
throw new Error("Error loading xsl file "+_19);
}
return _1a;
};
ibm.portal.xml.ie.transform=function(_1b,xsl,_1c,_1d,_1e){
var _1f=_1b;
var _20=xsl;
try{
if(!_20.documentElement){
_20=this.loadXsl(xsl);
}
}
catch(e){
var _21=e.message;
throw new Error(""+_21,""+_21);
}
var _22=this._getMSXMLImpl(this.XSLT_PROG_IDS);
_22.stylesheet=_20;
var _23=_22.createProcessor();
_23.input=_1f;
if(_1d){
for(var p in _1d){
_23.addParameter(p,_1d[p]);
}
}
if(_1c){
_23.addParameter("mode",_1c);
}
if(_1e){
if(!_23.transform()){
throw new Error("Error transforming xml doc "+_1f);
}
return _23.output;
}else{
var _24=this._getMSXMLImpl(this.DOM_PROG_IDS);
_24.async=false;
_24.validateOnParse=false;
_1f.transformNodeToObject(_20,_24);
return _24;
}
};
ibm.portal.xml.gecko.loadXml=function(_25){
var _26=document.implementation.createDocument("","",null);
var xhr=new XMLHttpRequest();
xhr.open("GET",_25,false);
xhr.send(null);
if(xhr.status==200){
_26=xhr.responseXML;
}else{
throw new Error("Error loading "+_25+":"+xhr.status+":"+xhr.statusText);
}
return _26;
};
ibm.portal.xml.gecko.loadXmlString=function(_27){
var _28=new DOMParser();
try{
oXmlDoc=_28.parseFromString(_27,"text/xml");
}
catch(exc){
throw new Error("Error loading xml string "+_27);
}
return oXmlDoc;
};
ibm.portal.xml.gecko.loadXsl=function(_29){
var _2a=document.implementation.createDocument("","",null);
var xhr=new XMLHttpRequest();
xhr.open("GET",_29,false);
xhr.send(null);
if(xhr.status==200){
_2a=xhr.responseXML;
}
return _2a;
};
ibm.portal.xml.gecko.transform=function(_2b,xsl,_2c,_2d,_2e){
try{
var _2f=xsl;
if(!_2f.documentElement){
alert("xslDoc is not a Document, loading it...");
_2f=this.loadXsl(xsl);
}
var _30=new XSLTProcessor();
_30.importStylesheet(_2f);
if(_2d){
for(var p in _2d){
_30.setParameter(null,p,_2d[p]);
}
}
if(_2c){
_30.setParameter(null,"mode",_2c);
}
var _31=_30.transformToDocument(_2b);
if(!_2e){
return _31;
}
resultStr=_31.documentElement.textContent;
}
catch(exc){
throw new Error("Error transforming xml doc "+exc);
}
return resultStr;
};
ibm.portal.xml.setLayerContentByXml=function(_32,xml,xsl,_33,_34){
var _35=ibm.portal.xml.transform(xml,xsl,null,_33,_34);
if(_32.innerHTML){
_32.innerHTML=_35;
}else{
var obj=document.getElementById(_32);
obj.innerHTML=_35;
}
};
ibm.portal.io={};
ibm.portal.io.sAcceptLanguage="";
ibm.portal.io.getResponseHeader=function(_36,_37){
var _38;
try{
_38=_36.getResponseHeader(_37);
}
catch(exc){
_38=null;
}
return _38;
};
ibm.portal.io.checkForError=function(_39){
var _3a=null;
var _3b=ibm.portal.io.getResponseHeader(_39,"X-IBM-REST-Error");
if(_3b){
var _3a="",_3c=ibm.portal.io.getResponseHeader(_39,"X-IBM-REST-MsgArg1");
if(_3c){
_3a=ibm.portal.resource.getString(_3b,window.decodeURIComponent(_3c));
}else{
_3a=ibm.portal.resource.getString(_3b);
}
}
return _3a;
};
ibm.portal.io.asyncRequest=function(_3d,_3e,_3f,_40){
try{
ibm.portal.io.setAsync(_3d,_3e,_3f,_40,true);
}
catch(e){
ibm.portal.io.setAsync(_3d,_3e,_3f,_40,false);
}
};
ibm.portal.io.setAsync=function(_41,_42,_43,_44,_45){
var _46=ibm.portal.xml.getXmlHttpRequest();
_46.open(_41,_42,true);
if(!_45){
_46.setRequestHeader("Accept-language","*");
}
try{
_46.onreadystatechange=function(){
if(_46.readyState==4){
_44.startUpdate();
sError=ibm.portal.io.checkForError(_46);
if(sError){
_44.handleError(""+ibm.portal.resource.getString(sError));
}else{
var _47=_46.responseText;
_44.handleData(_47);
}
}
};
_46.send(_43);
}
catch(e){
throw new Error("","");
}
};
try{
}
catch(e){
console.error(e);
}



}catch(e){console.log("Module 'wp_liveobject_framework_core': ",e);}
try{dojo.provide("portalclient.nls.ui_utils_en");dojo.provide("com.ibm.widgets.nls.GenericDialog");com.ibm.widgets.nls.GenericDialog._built=true;dojo.provide("com.ibm.widgets.nls.GenericDialog.en");com.ibm.widgets.nls.GenericDialog.en={"genDialog":{"okButtonTitle":"OK","cancelLinkText":"Cancel","cancelLinkTitle":"Cancel","okButtonCaption":"OK"}};

}catch(e){console.log("Module 'wp_portal_ui_utils': ",e);}
try{/** Licensed Materials - Property of IBM, 5724-U69, (C) Copyright IBM Corp. 2009, 2010 - All Rights reserved.  **/
dojo.i18n._preloadLocalizations("portalclient.nls.ui_utils",["ROOT","ar","ca","cs","da","de","el","en","es","fi","fr","he","hr","hu","it","ja","kk","ko","nl","no","pl","pt","pt-br","ro","ru","sk","sl","sv","th","tr","uk","xx","zh","zh-tw"]);if(!dojo._hasResource["com.ibm.widgets.ConsoleWrapper"]){dojo._hasResource["com.ibm.widgets.ConsoleWrapper"]=true;dojo.provide("com.ibm.widgets.ConsoleWrapper");dojo.declare("com.ibm.widgets.ConsoleWrapper",[],{_hasLogMethod:false,_hasDebugMethod:false,_hasInfoMethod:false,_hasWarnMethod:false,_hasErrorMethod:false,constructor:function(){if(typeof console=="object"){this._hasLogMethod=(typeof console.log=="function");this._hasDebugMethod=(typeof console.debug=="function");this._hasInfoMethod=(typeof console.info=="function");this._hasWarnMethod=(typeof console.warn=="function");this._hasErrorMethod=(typeof console.error=="function");}else{this.log=function(){};this.debug=function(){};this.info=function(){};this.warn=function(){};this.error=function(){};}},debug:function(_1){if(this._hasDebugMethod){console.debug.apply(console,arguments);}else{this.log.apply(this,arguments);}},error:function(_2){if(this._hasErrorMethod){console.error.apply(console,arguments);}else{this.log.apply(this,arguments);}},info:function(_3){if(this._hasInfoMethod){console.info.apply(console,arguments);}else{this.log.apply(this,arguments);}},log:function(_4){if(this._hasLogMethod){console.log.apply(console,arguments);}},warning:function(_5){if(this._hasWarnMethod){console.warn.apply(console,arguments);}else{this.log.apply(this,arguments);}}});}if(!dojo._hasResource["com.ibm.widgets._Traceable"]){dojo._hasResource["com.ibm.widgets._Traceable"]=true;dojo.provide("com.ibm.widgets._Traceable");dojo.declare("com.ibm.widgets._Traceable",[],{LOGGER:null,LOG_LEVEL:null,LOG_LEVEL_ERROR:1000,LOG_LEVEL_INFO:800,LOG_LEVEL_TRACE:500,LOG_LEVEL_WARNING:900,_consoleWrapper:null,_traceChecker:null,_isSimpleLogging:false,_isLoggable:false,constructor:function(){if(dojo.exists("com.ibm.mashups.enabler.logging.Logger")){this.LOGGER=com.ibm.mashups.enabler.logging.Logger.getLogger(this.declaredClass);this._isSimpleLoggingisSimpleLogging=false;this.LOG_LEVEL_TRACE=com.ibm.mashups.enabler.logging.LogLevel.TRACE;this.LOG_LEVEL_INFO=com.ibm.mashups.enabler.logging.LogLevel.INFO;this.LOG_LEVEL_WARNING=com.ibm.mashups.enabler.logging.LogLevel.WARNING;this.LOG_LEVEL_ERROR=com.ibm.mashups.enabler.logging.LogLevel.SEVERE;}else{if(typeof ibmCfg!="undefined"&&typeof ibmCfg.enablerConfig!="undefined"&&typeof ibmCfg.enablerConfig.traceConfig!="undefined"){this._initConfig(ibmCfg.enablerConfig.traceConfig);}this._isSimpleLogging=true;this._isLoggable=this.isLoggable();this._consoleWrapper=new com.ibm.widgets.ConsoleWrapper();}this.LOG_LEVEL=this.LOG_LEVEL_TRACE;},isTracing:function(){return this.isLogging(this.LOG_LEVEL);},error:function(_6,_7,_8){this.log(this.LOG_LEVEL_ERROR,_6,_7,_8);},info:function(_9,_a,_b){this.log(this.LOG_LEVEL_INFO,_9,_a,_b);},isLoggable:function(){var _c;if(typeof ibmCfg!="undefined"&&typeof ibmCfg.enablerConfig!="undefined"&&typeof ibmCfg.enablerConfig.isDebug!="undefined"){if(!ibmCfg.enablerConfig.isDebug){_c=false;}else{var _d=this._traceChecker;_c=_d&&_d.test(this.declaredClass);}}else{_c=false;}return _c;},isLogging:function(_e){if(this._isSimpleLogging){return this._isLoggable;}else{return this.LOGGER.isLoggable(_e);}},log:function(_f,_10,_11,_12){if(this._isSimpleLogging){this._logSimple(_f,_10,_11,_12);}else{this.LOGGER.log(_f,_10,msg,_12);}},trace:function(_13,_14,_15){var _16=this.isTracing();if(_16){var msg=_14;var _17="";if(_15||(_15===0)||(_15===null)||(_15==="")){if(!dojo.isArray(_15)){_17=_15;}else{if(_15&&_15.length>0){for(var arg in _15){if(_17===""){_17=_17+_15[arg];}else{_17=_17+", "+_15[arg];}}}}msg=msg+" [ "+_17+" ]";}if(this._isSimpleLogging){this._consoleWrapper.debug(this.declaredClass+" "+_13+" : "+msg);}else{this.LOGGER.log(this.LOG_LEVEL,_13,msg);}}},traceEntry:function(_18,_19){if(this._isSimpleLogging){if(this._isLoggable){var msg=" ENTRY";var _1a="";if(_19||(_19===0)||(_19===null)||(_19==="")){if(!dojo.isArray(_19)){_1a=_19;}else{if(_19&&_19.length>0){for(var arg in _19){if(_1a===""){_1a=_1a+_19[arg];}else{_1a=_1a+", "+_19[arg];}}}}msg=msg+" [ "+_1a+" ]";}this._consoleWrapper.debug(this.declaredClass+" "+_18+msg);}}else{var _1b=this.LOGGER.isLoggable(this.LOG_LEVEL_TRACE);if(_1b){this.LOGGER.entering(_18,_19);}}},traceExit:function(_1c,_1d){if(this._isSimpleLogging){if(this._isLoggable){if(_1d||(_1d===0)||(_1d===null)||(_1d==="")){this._consoleWrapper.debug(this.declaredClass+" "+_1c+" EXIT [ "+_1d+" ]");}else{this._consoleWrapper.debug(this.declaredClass+" "+_1c+" EXIT");}}}else{var _1e=this.LOGGER.isLoggable(this.LOG_LEVEL_TRACE);if(_1e){if(typeof _1d==="boolean"){_1d=_1d?"true":"false";}this.LOGGER.exiting(_1c,_1d);}}},warning:function(_1f,_20,_21){this.log(this.LOG_LEVEL_WARNING,_1f,_20,_21);},_initConfig:function(_22){if(_22&&_22.length>0){this._traceChecker=new RegExp(dojo.isArray(_22)?_22.join("|"):_22);}else{this._traceChecker=null;}},_logSimple:function(_23,_24,_25,_26){if(this._isLoggable){if((_26&&!dojo.isArray(_26))||_26===false){_26=[_26];}var _27=_26?dojo.string.substitute(_25,_26):_25;if(_23==this.LOG_LEVEL_ERROR){this._consoleWrapper.error(this.declaredClass+" "+_24+" : "+_27);}else{if(_23==this.LOG_LEVEL_WARNING){this._consoleWrapper.warning(this.declaredClass+" "+_24+" : "+_27);}else{if(_23==this.LOG_LEVEL_INFO){this._consoleWrapper.info(this.declaredClass+" "+_24+" : "+_27);}else{if(_23==this.LOG_LEVEL_TRACE){this._consoleWrapper.debug(this.declaredClass+" "+_24+" : "+_27);}else{this._consoleWrapper.log(this.declaredClass+" "+_24+" : "+_27);}}}}}}});}if(!dojo._hasResource["com.ibm.widgets.GenericDialog"]){dojo._hasResource["com.ibm.widgets.GenericDialog"]=true;dojo.provide("com.ibm.widgets.GenericDialog");dojo.registerModulePath("com.ibm.widgets","../com/ibm/widgets");dojo.require("dijit.Dialog");dojo.require("dijit._Templated");dojo.require("dojo.i18n");dojo.require("dojox.layout.ResizeHandle");dojo.declare("com.ibm.widgets.GenericDialog",[dijit.Dialog,dijit._Templated,com.ibm.widgets._Traceable],{autoClose:true,autofocus:true,blankImgUrl:dojo.moduleUrl("dojo","resources/blank.gif").toString(),duration:200,extractContent:false,isResizable:true,isResized:false,minHeight:400,minWidth:400,namespace:"genDlg",title:"",parseOnLoad:true,preload:true,templateString:null,templateString:"<div dojoAttachPoint=\"GenericDialogDiv\"\n    class=\"lotusDialogBorder lotusui dijitContentPane\"\n    waistate=\"labelledby-${namespace}GenericDialogTitleSpan_id\" wairole=\"dialog\" role=\"dialog\"\n    tabindex=\"-1\" aria-labelledby=\"${namespace}GenericDialogTitleSpan_id\">\n\n    <div id=\"${namespace}GenericDialogContentDiv_id\" name=\"${namespace}GenericDialogContentDiv\" class=\"lotusDialog\">\n        <h1 dojoAttachPoint=\"titleBar\" id=\"${namespace}GenericDialogTitleBar_id\" name=\"${namespace}GenericDialogTitleBar\">\n            <a dojoAttachPoint=\"dialogClose\" href=\"javascript:void(0);\" class=\"lotusBtnImg lotusClose\" title=\"${_nlsUserInterface.genDialog.cancelLinkTitle}\" id=\"${namespace}buttonCancel_id\" name=\"${namespace}buttonCancel\"> \n                <img src=\"${blankImgUrl}\" alt=\"${_nlsUserInterface.genDialog.cancelLinkTitle}\" aria-label=\"${_nlsUserInterface.genDialog.cancelLinkTitle}\" />\n                <span dojoAttachPoint=\"closeText\" id=\"${namespace}buttonCancelSpan_id\" name=\"${namespace}buttonCancelSpan\" class=\"lotusAltText\" title=\"${_nlsUserInterface.genDialog.cancelLinkTitle}\">X</span> \n            </a>\n            <span dojoAttachPoint=\"titleNode\" id=\"${namespace}GenericDialogTitleSpan_id\" name=\"${namespace}GenericDialogTitleSpan\">${title}</span>\n        </h1>\n        \n        <div dojoAttachPoint=\"containerNode\" class=\"lotusDialogContent\"><div dojoAttachPoint=\"widgetNode\"></div></div>\n        \n        <div dojoAttachPoint=\"dialogFooter\" class=\"lotusDialogFooter\">\n            <input dojoAttachPoint=\"dialogConfirm\" class=\"lotusFormButton\" type=\"submit\" value=\"${_nlsUserInterface.genDialog.okButtonCaption}\" role=\"button\" aria-disabled=\"false\" aria-label=\"${_nlsUserInterface.genDialog.okButtonTitle}\" title=\"${_nlsUserInterface.genDialog.okButtonTitle}\" id=\"${namespace}submitDialogSelection_id\" name=\"${namespace}submitDialogSelection\" />\n            <a dojoAttachPoint=\"dialogCancel\" class=\"lotusAction\" href=\"javascript:;\" role=\"link\" id=\"${namespace}cancelDialogSelection_id\" name=\"${namespace}cancelDialogSelection\" aria-disabled=\"false\" aria-label=\"${_nlsUserInterface.genDialog.cancelLinkTitle}\" title=\"${_nlsUserInterface.genDialog.cancelLinkTitle}\">${_nlsUserInterface.genDialog.cancelLinkText}</a>\n        </div>\n    </div>\n</div>\n",_eventHandles:[],_resizeEventHandle:null,_isTracing:false,_lotusui_div:null,_nlsMessages:{},_nlsUserInterface:{},_onCancelCallbackFn:null,_onConfirmCallbackFn:null,_resizeHandler:null,_widget:null,_isDojo19orHigher:false,_dojo19ResizeFn:null,buildRendering:function(){var m="buildRendering()";if(this._isTracing){this.traceEntry(m);}this.inherited(arguments);if(this._widget){this._widget.placeAt(this.widgetNode);this.title=this._widget.getDialogTitle();}if(this._isTracing){this.traceExit(m);}},constructor:function(_28){this._isTracing=this.isTracing();var m="constructor(p_params)";if(this._isTracing){this.traceEntry(m,_28);if(_28){this.trace(m,"p_params.onCancelCallbackFn:",_28.onCancelCallbackFn);this.trace(m,"p_params.onConfirmCallbackFn:",_28.onConfirmCallbackFn);this.trace(m,"p_params.widgetInstance:",_28.widgetInstance);}}if(typeof _28.onConfirmCallbackFn=="function"){this._onConfirmCallbackFn=_28.onConfirmCallbackFn;}if(typeof _28.onCancelCallbackFn=="function"){this._onCancelCallbackFn=_28.onCancelCallbackFn;}if(_28.widgetInstance&&typeof _28.widgetInstance=="object"){this._widget=_28.widgetInstance;}this._initNLS();if(this.resize){this._isDojo19orHigher=true;}if(this._isTracing){this.traceExit(m);}},destroyDialog:function(){var m="destroyDialog()";if(this._isTracing){this.traceEntry(m);}this.destroyRecursive();var _29=dijit.byId("dojoxGlobalResizeHelper");if(_29){_29.destroy();}else{if(this._resizeHandler&&this._resizeHandler._resizeHelper){this._resizeHandler._resizeHelper.destroy();}}if(this._resizeHandler){this._resizeHandler.destroy();this._resizeHandler=null;}this._removeLotusOneUIDiv();if(this._isTracing){this.traceExit(m);}},getNlsMessages:function(){var m="getNlsMessages()";if(this._isTracing){this.traceEntry(m);}var _2a=this._nlsMessages;if(this._isTracing){this.traceExit(m,dojo.toJson(_2a));}return _2a;},getNlsUserInterface:function(){var m="getNlsUserInterface()";if(this._isTracing){this.traceEntry(m);}var _2b=this._nlsUserInterface;if(this._isTracing){this.traceExit(m,dojo.toJson(_2b));}return _2b;},postCreate:function(){var m="postCreate()";if(this._isTracing){this.traceEntry(m);}this.inherited(arguments);this._initEventHandles();this._recreateResizeHandler();if(this._isTracing){this.traceExit(m);}},postMixInProperties:function(){var m="postMixInProperties()";if(this._isTracing){this.traceEntry(m);}this.inherited(arguments);this._addResizeHandleStyles();if(this._isTracing){this.traceExit(m);}},show:function(){var m="show()";if(this._isTracing){this.traceEntry(m);}this.startup();this.inherited(arguments);if(this._isDojo19orHigher){this._dojo19ResizeFn=this.resize;this.resize=function(box){if(!box){this.layout();}else{dojo.setStyle(this.domNode,{"width":box.w+"px","height":box.h+"px"});this.layout();}};}if(this._isTracing){this.traceExit(m);}},uninitialize:function(){var m="uninitialize()";if(this._isTracing){this.traceEntry(m);}this._clearEventHandles();this.inherited(arguments);if(this._isTracing){this.traceExit(m);}},_addResizeHandleStyles:function(){var m="_addStyles()";if(this._isTracing){this.traceEntry(m);}if(!dojo.byId(com.ibm.widgets.GenericDialog.resizeHandleCssId)){if(this._isTracing){this.trace(m,"Resize handle styles have not been loaded yet, adding element to DOM");}var _2c=document.getElementsByTagName("head");var _2d=false;if(_2c){_2c=_2c[0];}else{_2c=document;_2d=true;}var _2e=document.createElement("link");dojo.attr(_2e,"type","text/css");dojo.attr(_2e,"rel","stylesheet");dojo.attr(_2e,"href",dojo.moduleUrl("dojox.layout","resources/ResizeHandle.css").toString());dojo.attr(_2e,"id",com.ibm.widgets.GenericDialog.resizeHandleCssId);if(_2d){var _2f=(_2c.childNodes&&_2c.childNodes[0])?_2c.childNodes[0]:null;_2c.insertBefore(_2e,_2f);}else{_2c.appendChild(_2e);}}else{if(this._isTracing){this.trace(m,"Resize handle styles have already been loaded, not adding link element to DOM again");}}if(this._isTracing){this.traceExit(m);}},_clearEventHandles:function(){var m="_clearEventHandles()";if(this._isTracing){this.traceEntry(m);}dojo.forEach(this._eventHandles,dojo.disconnect);dojo.disconnect(this._resizeEventHandle);this._eventHandles=[];if(this._isTracing){this.traceExit(m);}},_getFocusItems:function(_30){var _31=this.containerNode;this.containerNode=_30;this.inherited(arguments);this.containerNode=_31;},_initEventHandles:function(){var m="_initEventHandles()";if(this._isTracing){this.traceEntry(m);}this._eventHandles.push(dojo.connect(this.dialogClose,"onclick",this,"onCancel"));this._eventHandles.push(dojo.connect(this.dialogCancel,"onclick",this,"onCancel"));this._eventHandles.push(dojo.connect(this,"onCancel",this,"_onCancel"));if(this._isTracing){this.traceExit(m);}},_initNLS:function(){var m="_initNLS()";if(this._isTracing){this.traceEntry(m);}this._nlsUserInterface=dojo.i18n.getLocalization("com.ibm.widgets","GenericDialog");if(this._isTracing){this.trace(m,"Initialized NLS object for user interface elements:",dojo.toJson(this._nlsUserInterface));this.trace(m,"Initialized NLS object for messages:",dojo.toJson(this._nlsMessages));this.traceExit(m);}},_onCancel:function(){var m="_onCancel()";if(this._isTracing){this.traceEntry(m);}var _32={};if(this._widget&&(typeof this._widget.doCancel=="function")){_32=this._widget.doCancel();}if(this._onCancelCallbackFn){if(this._isTracing){this.trace(m,"Dispatching to callback function passing the return values from the widget:",[this._onCancelCallbackFn,_32]);}this._onCancelCallbackFn(_32);}if(this.autoClose){setTimeout(dojo.hitch(this,"destroyDialog"),this.duration);}if(this._isTracing){this.traceExit(m);}},_onConfirm:function(){var m="_onConfirm()";if(this._isTracing){this.traceEntry(m);}var _33={};if(this._widget&&(typeof this._widget.doConfirm=="function")){_33=this._widget.doConfirm();}if(this._isTracing){this.trace(m,"Return values from widget:",_33);}if(this._onConfirmCallbackFn){if(this._isTracing){this.trace(m,"Dispatching to callback function passing the return values from the widget:",[this._onConfirmCallbackFn,_33]);}this._onConfirmCallbackFn(_33);}if(this.autoClose){this.hide();setTimeout(dojo.hitch(this,"destroyDialog"),this.duration);}if(this._isTracing){this.traceExit(m);}},_onResize:function(){this.isResized=true;if(typeof this.layout=="function"){this.layout();}if(this._isDojo19orHigher){this._position();}},_recreateResizeHandler:function(){var m="_recreateResizeHandler()";if(this._isTracing){this.traceEntry(m);}if(this.isResizable){if(this._resizeHandler){this._resizeHandler.destroy();}this._resizeHandler=new dojox.layout.ResizeHandle({"targetId":this.id,"intermediateChanges":false,"activeResize":false,"animateSizing":!this._isDojo19orHigher,"minHeight":this.minHeight,"minWidth":this.minWidth}).placeAt(this.id);this._resizeEventHandle=dojo.connect(this._resizeHandler,"onResize",this,"_onResize");}},_removeLotusOneUIDiv:function(){if(this._lotusui_div){var _34=dojo.query("*",this._lotusui_div);if(_34.length===0){dojo.destroy(this._lotusui_div);this._lotusui_div=null;}}}});com.ibm.widgets.GenericDialog.resizeHandleCssId="com_ibm_widgets_GenericDialog_resizeHandleCssId";}if(!dojo._hasResource["com.ibm.widgets.GenericDialogWidget"]){dojo._hasResource["com.ibm.widgets.GenericDialogWidget"]=true;dojo.provide("com.ibm.widgets.GenericDialogWidget");dojo.registerModulePath("com.ibm.widgets","../com/ibm/widgets");dojo.require("dijit._Widget");dojo.require("dijit._Templated");dojo.declare("com.ibm.widgets.GenericDialogWidget",[dijit._Widget,dijit._Templated,com.ibm.widgets._Traceable],{namespace:"someNamespace",templateString:null,_isTracing:false,_nlsMessages:{},_nlsUserInterface:{},constructor:function(_35){this._isTracing=this.isTracing();var m="constructor(p_params)";if(this._isTracing){this.traceEntry(m,_35);if(_35){this.trace(m,"p_params.nlsMessages:",dojo.toJson(_35.nlsMessages));this.trace(m,"p_params.nlsUserInterface:",dojo.toJson(_35.nlsUserInterface));}}if(_35){if(_35.nlsMessages&&dojo.isObject(_35.nlsMessages)){this._nlsMessages=_35.nlsMessages;}if(_35.nlsUserInterface&&dojo.isObject(_35.nlsUserInterface)){this._nlsUserInterface=_35.nlsUserInterface;}}if(this._isTracing){this.traceExit(m);}},doCancel:function(){var m="doCancel()";if(this._isTracing){this.traceEntry(m);}var _36={"returnCode":-1};if(this._isTracing){this.traceExit(m,_36);}return _36;},doConfirm:function(){var m="doConfirm()";if(this._isTracing){this.traceEntry(m);}var _37={"returnCode":0};if(this._isTracing){this.traceExit(m,_37);}return _37;},getDialogTitle:function(){var m="getDialogTitle()";if(this._isTracing){this.traceEntry(m);}var _38="Generic Dialog Widget's Title";if(this._isTracing){this.traceExit(m,_38);}return _38;},getNlsMessages:function(){var m="getNlsMessages()";if(this._isTracing){this.traceEntry(m);}var _39=this._nlsMessages;if(this._isTracing){this.traceExit(m,dojo.toJson(_39));}return _39;},getNlsUserInterface:function(){var m="getNlsUserInterface()";if(this._isTracing){this.traceEntry(m);}var _3a=this._nlsUserInterface;if(this._isTracing){this.traceExit(m,dojo.toJson(_3a));}return _3a;},postCreate:function(){var m="postCreate()";if(this._isTracing){this.traceEntry(m);}this.inherited(arguments);if(this._isTracing){this.traceExit(m);}},postMixInProperties:function(){var m="postMixInProperties()";if(this._isTracing){this.traceEntry(m);}this.inherited(arguments);if(this._isTracing){this.traceExit(m);}},uninitialize:function(){var m="uninitialize()";if(this._isTracing){this.traceEntry(m);}this.inherited(arguments);if(this._isTracing){this.traceExit(m);}}});}if(!dojo._hasResource["com.ibm.cp.DojoLocalized"]){dojo._hasResource["com.ibm.cp.DojoLocalized"]=true;dojo.provide("com.ibm.cp.DojoLocalized");dojo.require("dojo.i18n");dojo.declare("com.ibm.cp.DojoLocalized",[com.ibm.widgets._Traceable],{bundlePackage:"",bundleName:"",bundleKey:"",constructor:function(_3b){this.bundlePackage=_3b.bundlePackage;this.bundleName=_3b.bundleName;this.bundleKey=_3b.bundleKey;this._locales=[dojo.locale];var _3c=dojo.config&&dojo.config.extraLocale;if(_3c){this._locales.push.apply(this._locales,_3c);}dojo["require"+"Localization"](this.bundlePackage,this.bundleName);},_getBundle:function(_3d){var _3e="_getBundle",ret={};try{ret=dojo.i18n.getLocalization(this.bundlePackage,this.bundleName,_3d);this.trace(_3e,"Found bundle for locale ${0}",[_3d]);}catch(err){this.warning("_getBundle","Bundle not found for locale ${0}",[_3d]);}return ret;},getLocales:function(){var _3f="getLocales";this.traceEntry(_3f,[]);if(!this._locales.filtered){this.trace(_3f,"Filtering locales",[]);this._locales=dojo.filter(this._locales,function(_40){var _41=this._getBundle(_40);var ret=_41[this.bundleKey]||_41[this.bundleKey+"_title"]||_41[this.bundleKey+"_description"];this.trace(_3f,"Does title or description exist for locale ${0}? ${1}",[_40,ret]);return ret;},this);this._locales.filtered=true;}this.traceExit(_3f,[this._locales]);return this._locales;},getTitle:function(_42){var _43="getTitle";this.traceEntry(_43,[_42]);var _44=this._getBundle(_42);var ret=_44[this.bundleKey+"_title"]||_44[this.bundleKey];this.traceExit(_43,[_42]);return ret;},getTitles:function(){},getDescription:function(_45){var _46="getDescription";this.traceEntry(_46,[_45]);var ret=this._getBundle(_45)[this.bundleKey+"_description"];this.traceExit(_46,[_45]);return ret;},getDescriptions:function(_47){}});}

}catch(e){console.log("Module 'wp_portal_ui_utils': ",e);}
try{/** Licensed Materials - Property of IBM, 5724-E76 and 5724-E77, (C) Copyright IBM Corp. 2012 - All Rights reserved.  **/
(function(){
var _1="verticallyCenteredRightHand",_2="horizontallyCenteredBelow",_3="horizontallyBelow";
var _4=function(_5,_6,_7){
var _8=_5._contextMenu.shadowNode||_5,_9=_8.style,_a=_5._contextMenu.css.show;
_9.visibility="hidden";
i$.addClass(_8,_a);
var od=_6.ownerDocument,pw=od.parentWindow||od.defaultView,_b=_6.children[0],_c={name:_7,targetWindow:pw,node:_b,refNode:_5,maxOverLay:0.5,viewMargin:10,positionNode:_6};
wpModules.util.Positioning.handle(_c);
i$.removeClass(_8,_a);
_9.visibility="visible";
};
var _d=function(_e,_f){
_4(_e,_f,_1);
},hcB=function(_10,_11){
_4(_10,_11,_2);
},tb=function(_12,_13){
_4(_12,_13,_3);
},cm=wpModules.contextMenu,_14=cm.registerPositioningHandler;
_14("default",cm._defaultPositioningHandler);
_14(_1,_d);
_14(_2,hcB);
_14(_3,tb);
})();


}catch(e){console.log("Module 'wp_contextmenu_js': ",e);}
try{(function(){
    i$.merge({
	"NO_ITEMS_0":"No items to display",
	"MENU_KEY_PRESS_0":"Press Ctrl+M to activate the menu for this item. Press escape to close the menu.",
	"ERROR_LOADING_0":"Error happened while loading the menu.",
	"LOADING_0":"Loading..."
},i$.fromPath("wpModules.contextMenu.nls",true));
})();
}catch(e){console.log("Module 'wp_contextmenu_js': ",e);}
try{/** Licensed Materials - Property of IBM, 5724-E76 and 5724-E77, (C) Copyright IBM Corp. 2011, 2012 - All Rights reserved.  **/
(function(){
i$.addOnLoad(function(){
var _1="wpthemeControlHeader",_2="contextMenuInSkinIcon",_3="contextMenuInSkin",_4="contextMenu",_5="wpthemeControl",_6=document.getElementById("layoutContainers");
var _7=function(_8){
var n=_8.parentNode;
while(n&&!i$.hasClass(n,_5)){
n=n.parentNode;
}
return n;
};
var _9=i$.query("."+_2,_6);
var _a=i$.query("."+_1,_6);
if(_9.length!=_a.length){
if(_9.length==0){
console.log("Warning: The 'wp_skin_cam' theme module is on, but the skin templates have not been updated to include HTML for the Component Action Menu icon.");
}else{
console.log("Warning: The 'wp_skin_cam' theme module is on, but only some skin templates have been updated to include HTML for the Component Action Menu icon.");
}
}
for(var i in _9){
var _b=_9[i];
var _c=_7(_b);
var _d=i$.query("."+_3,_c);
if(_d.length>0){
var _e=_d[0];
_b.appendChild(_e);
if(i$.query(".wpthemeMenu",_b).length==0){
i$.createDom("span",{"class":"templateId"},i$.query(".params",_e)[0]).innerHTML="skinContentMenuTemplate";
}
i$.removeClass(_e,_3);
i$.addClass(_e,_4);
_b.style.display="";
}
if(SemTagSvc){
SemTagSvc.parseDom("skinCAM",_b);
}else{
console.log("Content Menu: Semantic tag service not available");
}
}
});
})();


}catch(e){console.log("Module 'wp_skin_cam': ",e);}
try{/** Licensed Materials - Property of IBM, 5724-E76 and 5724-E77, (C) Copyright IBM Corp. 2012 - All Rights reserved.  **/
(function(){
var _1=SemTagSvcPortal,_2=i$.hasClass,_3=i$.addClass,_4="contextMenuParsed",cm=wpModules.contextMenu,_5=function(_6){
while((_6=_6.parentNode)!==null){
if(_2(_6,"component-control")){
var m=_6&&(_6.className||"").match(/id-([\S]+)/);
return m&&m[1];
}
}
return null;
};
var _7={handleNodes:function(){
if(_1){
var _8=_1.getNodes("cam");
_7.processNodes(_8);
}
},processNodes:function(_9){
if(!_9){
return;
}
var _a=_7._findNodeRecursive;
for(var i=0,l=_9.length;i<l;++i){
var _b=_9[i],_c=_b.parentNode,_d=_a("menuId",_b);
if(_2(_b,_4)){
continue;
}
if(!_d){
continue;
}
var _e=[],_f=i$.fromPath("wpModules.theme.WindowUtils"),_10=_a("windowId",_b),_11=_10?_10.firstChild.nodeValue:null;
if(_f){
_e=_f.getPageIDs();
}else{
_e.push(ibmCfg.portalConfig.currentPageOID);
}
var _12={"navID":_e[0],"windowID":_11||_5(_c)},_13=_e.length;
if(_13>1){
var _14=[];
for(var j=1;j<_13;j++){
_14.push(_e[j]);
}
_12["additionalNavIDs"]=_14;
}
var _15=_a("query",_b);
var _16=false,_17=false;
if(_15){
i$.each(_15.childNodes,function(_18){
if(_18.className){
_12[_18.className]=_18.firstChild.nodeValue;
}
});
}
var _19={},_1a=_a("params",_b);
if(_1a){
if(_1a.childNodes){
i$.each(_1a.childNodes,function(_1b){
if(_1b.className){
_19[_1b.className]=_1b.firstChild.nodeValue;
}
});
}
}
var _1c=cm.register({"node":_c,"menuId":_d.innerHTML,"params":_19,"jsonQuery":_12});
_3(_b,_4);
}
},_findNodeRecursive:function(_1d,_1e){
var _1f=null,i,_20,_21=function(_22,_23){
var _24=_22.childNodes;
for(i=_24.length-1;i>=0;i--){
if(_1f){
break;
}
_20=_24[i];
if(_2(_20,_1d)){
_1f=_20;
break;
}
if(_20.childNodes){
i=_21(_20,i);
}
}
return _23;
};
_21(_1e);
return _1f;
},_getFirst:function(_25){
if(_25){
return _25[0];
}else{
return null;
}
}};
wpModules.camSemTagHandler=_7;
if(typeof _1!=="undefined"){
_1.registerService({"id":"cam","callback":_7.handleNodes,"classnames":[".contextMenu"],"test":""});
}
cm.registerMenuTrigger({"name":"default","registerHandler":cm._defaultEventRegister,"unregisterHandler":cm._defaultEventUnregister});
})();


}catch(e){console.log("Module 'wp_contextmenu_config_lof': ",e);}
try{dojo.provide("federation.nls.FederatedDocumentsPickerLayer_en");dojo.provide("com.ibm.workplace.wcm.ecm.picker.nls.FederatedDocumentsPickerUserInterface");com.ibm.workplace.wcm.ecm.picker.nls.FederatedDocumentsPickerUserInterface._built=true;dojo.provide("com.ibm.workplace.wcm.ecm.picker.nls.FederatedDocumentsPickerUserInterface.en");com.ibm.workplace.wcm.ecm.picker.nls.FederatedDocumentsPickerUserInterface.en={"docPickerPage":{"docFilterToggleBtnOnTitle":"Hide filter field. Any filtering in effect is deactivated.","fedDocLibTreeHeaderText":"Folders","libFilterTextBoxLabel":"Filter:","docFilterTextBoxTitle":"Enter filter text. Filtering is not case sensitive and affects only expanded folders.","connectingToServerDivText":"Connecting to server...","fedDocTreeHeaderText":"Documents","previewOnLabel":"Preview: On","stepDescriptionWCM":"Select a document.","stepDescriptionPZN":"Select a folder.","pickerSelectedItemLabel":"Selected item:","pickerAuthTypeInfoMsgLabel":"Authentication:","docFilterToggleBtnLabel":"Filter displayed documents","libFilterToggleBtnLabel":"Filter displayed folders","previewOffLabel":"Preview: Off","pickerServerUrlLabel":"Server:","libFilterToggleBtnOffTitle":"Filter displayed folders","fedDocNoItemsInfoTitle":"Information","libFilterTextBoxTitle":"Enter filter text. Filtering is not case sensitive and affects only expanded folders.","previewOnTitle":"Hide documents","fedDocNoItemsInfoImgAlt":"Information","docFilterToggleBtnOffTitle":"Filter displayed documents","connectingToServerImgAlt":"Connecting to server","nothingSelectedText":"Nothing selected","docFilterTextBoxLabel":"Filter:","libFilterToggleBtnOnTitle":"Hide filter field. Any filtering in effect is deactivated.","previewOffTitle":"Display documents in the selected folder","stepLabel":"Step 2 of 2"},"srvConnPage":{"customUrlTextBoxLabel":"Example: http://www.example.com/cmis","authInfoMsgCurrentUser":"Current user","customUrlTextBoxTitle":"URL for the server","authInfoMsgUserPwd":"User name and password","stepDescription":"Select a server and the authentication method.","serverSelectionHeading":"Select a server","presetServerRadioButtonLabel":"Select a predefined server:","stepLabel":"Step 1 of 2","authWidgetSectionTitle":"Change authentication method","altTextInformation":"Information","fedDocPickerAuthTypeInfoMsgLabel":"Authentication:","authInfoMsgNoAuth":"No authentication","customServerRadioButtonLabel":"Enter the URL for the server:","authInfoMsgUnknown":"Unknown authentication method","authInfoMsgVault":"Credential vault (${0})"},"docPickerDialog":{"cancelLinkText":"Cancel","backButtonCaption":"Back","titlePZN":"Select a Folder","wizardErrorDivTitle":"Error","cancelLinkTitle":"Cancel","nextButtonCaption":"Next","detectingFeedTypeImgAlt":"Detecting feed type","finishButtonCaption":"Finish","nextButtonTitle":"Go to next page","gettingVaultDivText":"Getting vault slot...","titleWCM":"Select a Document","gettingVaultImgAlt":"Getting vault slot","detectingFeedTypeDivText":"Detecting feed type...","errorImgAlt":"Error","finishButtonTitle":"Finish","backButtonTitle":"Go to previous page"},"quickrLaunchPage":{"stepDescriptionWCM":"Select a document","stepDetailedInfoText":"To select a folder from a document services server, such as IBM DB2 Content Manager, IBM FileNet or IBM Lotus Quickr, click the <b>Select</b> button to connect to the server and select the folder using the <b>Select a Folder</b> window.","stepDescription":"Select a folder","stepDetailedInfoTextWCM":"To select a document from a document services server, such as IBM DB2 Content Manager, IBM FileNet or IBM Lotus Quickr, click the <b>Select</b> button to connect to the server and select the document using the <b>Select a Document</b> window.","selectedDocumentLabel":"Selected document:","stepLabel":"Step 2 of 2","selectedFolderLabel":"Selected folder:","selectedFolderTitle":"The link to the selected document or folder","selectButtonLabel":"Select...","selectButtonTitle":"Click here to open the Quickr Picker Dialog to select a document or folder"},"authWidget":{"title":"Change authentication method","vaultRadioButtonLabel":"Use credential vault:","noAuthRadioButtonLabel":"No authentication","vaultDropDownListLabel":"Vault Slot:","currentUserRadioButtonLabel":"Use current user","simpleAuthUserLabel":"User name:","simpleAuthPwdLabel":"Password:","userPwdRadioButtonLabel":"Use user name and password:"},"expSectionWidget":{"sectionLinkCollapseTitle":"Click to collapse","sectionLinkExpandTitle":"Click to expand"}};dojo.provide("com.ibm.workplace.wcm.ecm.picker.nls.FederatedDocumentsPickerMessages");com.ibm.workplace.wcm.ecm.picker.nls.FederatedDocumentsPickerMessages._built=true;dojo.provide("com.ibm.workplace.wcm.ecm.picker.nls.FederatedDocumentsPickerMessages.en");com.ibm.workplace.wcm.ecm.picker.nls.FederatedDocumentsPickerMessages.en={"docPickerPage":{"noItemsMessage":"No items found in this folder."},"srvConnPage":{"noServersMessage":"No predefined servers found.","errorVaultSlotMissing":"The configured Credential Vault Slot ID for the selected server is \"${0}\", which does not exist in the system."},"docPickerDialog":{"errorCouldNotGetVault":"An attempt to get the vault slot for the provided authentication information failed.","errorNotAllWidgetsDefined":"One or more page widgets of the Federated Documents Dialog could not be created.","errorQDSNotEnabled":"The selected server uses the document services feed type, but the support of this type of feed is currently disabled. If access to the selected server is required, contact your system administrator.","errorGenericException":"An unknown javascript exception occurred.","errorCouldNotDetectFeedType":"An attempt to detect the feed type for the provided URL failed.","errorUnknownFeedType":"The feed type for the provided URL is unknown."},"srvCommunication":{"attributeNotStringable":"The attribute \"${0}\" of function \"${1}\" cannot be interpreted as a string value.","errorHttp410":"The requested resource is no longer available. (HTTP Status Code 410)","errorHttp411":"The request is invalid: Length Required. (HTTP Status Code 411)","errorHttp412":"The request is invalid: Precondition Failed. (HTTP Status Code 412)","errorHttp413":"The request is invalid: Request Entity Too Large. (HTTP Status Code 413)","errorFetchingData":"Fetching data from backend failed. If the problem persists, contact your system administrator.","errorHttp414":"The request is invalid: Request-URI Too Long. (HTTP Status Code 414)","errorHttp415":"The request is invalid: Unsupported Media Type. (HTTP Status Code 415)","errorHttp416":"The request is invalid: Requested Range Not Satisfiable. (HTTP Status Code 416)","errorHttp417":"The request is invalid: Expectation Failed. (HTTP Status Code 417)","errorDetailsHttp403":"Check the Ajax Proxy configuration.","errorHttp400":"The URL is not valid and could not be processed. (HTTP Status Code 400)","errorDetailsHttps401":"Check the security setup for HTTPS communication.","errorHttp401":"The request is not authorized and requires user authentication. (HTTP Status Code 401)","errorDetailsHttps403":"Check the Ajax Proxy configuration and the security setup for HTTPS communication.","errorHttp403":"The request is forbidden. (HTTP Status Code 403)","errorHttp404":"The requested URL was not found. (HTTP Status Code 404)","errorHttp405":"The request method is not allowed. (HTTP Status Code 405)","errorHttp406":"The request is not acceptable. (HTTP Status Code 406)","errorHttp407":"The request requires proxy authentication. (HTTP Status Code 407)","errorHttp408":"The request timed out. (HTTP Status Code 408)","errorHttp409":"The request could not be completed due to a conflict. (HTTP Status Code 409)","errorHttp500":"The server encountered an internal server error. (HTTP Status Code 500)","errorHttpGeneric":"An unknown error occurred. If the problem persists, contact your system administrator.","errorHttp501":"The server does not implement the functionality to fulfill this request. (HTTP Status Code 501)","errorHttp502":"The server - acting as a gateway - received an invalid response. (HTTP Status Code 502)","errorHttp503":"The server is currently unable to handle the request. (HTTP Status Code 503)","errorHttp504":"The server - acting as a gateway - did not receive a timely response. (HTTP Status Code 504)","errorHttp505":"The server does not support this HTTP version. (HTTP Status Code 505)"},"authWidget":{"errorVaultSlotNotAvailable":"The configured credential Vault slot is not available for selection."}};dojo.provide("com.ibm.workplace.wcm.ecm.quickr.picker.launcher.nls.DocPickerLauncher");com.ibm.workplace.wcm.ecm.quickr.picker.launcher.nls.DocPickerLauncher._built=true;dojo.provide("com.ibm.workplace.wcm.ecm.quickr.picker.launcher.nls.DocPickerLauncher.en");com.ibm.workplace.wcm.ecm.quickr.picker.launcher.nls.DocPickerLauncher.en={"buttonOk":"OK","menuItemViewLink":"Summary Page","menuInsertLink":"Insert Link","menuItemDownloadLink":"Download File","dialogTitleSelectFolder":"Select a Folder","dialogTitleSelectDocument":"Select a Document","dialogTitleDefault":"","dialogTitleFeedUrl":" URL "};

}catch(e){console.log("Module 'wp_federated_documents_picker': ",e);}
try{/** Licensed Materials - Property of IBM, 5724-U69, (C) Copyright IBM Corp. 2009, 2010 - All Rights reserved.  **/
dojo.i18n._preloadLocalizations("federation.nls.FederatedDocumentsPickerLayer",["ROOT","ar","ca","cs","da","de","el","en","es","fi","fr","he","hr","hu","it","ja","kk","ko","nl","no","pl","pt","pt-br","ro","ru","sk","sl","sv","th","tr","uk","xx","zh","zh-tw"]);if(!dojo._hasResource["com.ibm.workplace.wcm.ecm.picker.util.FederatedDocumentsServiceBean"]){dojo._hasResource["com.ibm.workplace.wcm.ecm.picker.util.FederatedDocumentsServiceBean"]=true;dojo.provide("com.ibm.workplace.wcm.ecm.picker.util.FederatedDocumentsServiceBean");dojo.require("com.ibm.widgets._Traceable");dojo.declare("com.ibm.workplace.wcm.ecm.picker.util.FederatedDocumentsServiceBean",[com.ibm.widgets._Traceable],{_customServiceSelectionEnabled:true,_federatedDocumentsServices:[],_feedBaseURL:"",_feedTypeBaseURL:"",_isTracing:false,_portalContextPath:"/wps",_qdsSupportEnabled:true,_serviceDocBaseURL:"",_vaultMgmtDataSinkUrl:"",_vaultSelectionEnabledForPZN:true,_vaultSelectionEnabledForWCM:true,_vaultSlots:[],constructor:function(_1){this._isTracing=this.isTracing();var m="constructor(p_params)";if(this._isTracing){this.traceEntry(m,dojo.toJson(_1));}if(_1&&typeof _1=="object"){if(_1.federatedDocumentsServices&&typeof _1.federatedDocumentsServices=="object"){this._federatedDocumentsServices=_1.federatedDocumentsServices;}if(typeof _1.customServiceSelectionEnabled=="boolean"){this._customServiceSelectionEnabled=_1.customServiceSelectionEnabled;}if(typeof _1.feedBaseURL=="string"){this._feedBaseURL=_1.feedBaseURL;}if(typeof _1.feedTypeBaseURL=="string"){this._feedTypeBaseURL=_1.feedTypeBaseURL;}if(typeof _1.portalContextPath=="string"){this._portalContextPath=_1.portalContextPath;}if(typeof _1.qdsSupportEnabled=="boolean"){this._qdsSupportEnabled=_1.qdsSupportEnabled;}if(typeof _1.serviceDocBaseURL=="string"){this._serviceDocBaseURL=_1.serviceDocBaseURL;}if(typeof _1.vaultMgmtDataSinkUrl=="string"){this._vaultMgmtDataSinkUrl=_1.vaultMgmtDataSinkUrl;}if(typeof _1.vaultSelectionEnabledForPZN=="boolean"){this._vaultSelectionEnabledForPZN=_1.vaultSelectionEnabledForPZN;}if(typeof _1.vaultSelectionEnabledForWCM=="boolean"){this._vaultSelectionEnabledForWCM=_1.vaultSelectionEnabledForWCM;}if(_1.vaultSlots&&typeof _1.vaultSlots=="object"){this._vaultSlots=_1.vaultSlots;}}if(this._isTracing){this.traceExit(m);}},getFederatedDocumentsServices:function(){return this._federatedDocumentsServices;},getFeedBaseURL:function(){return this._feedBaseURL;},getFeedTypeBaseURL:function(){return this._feedTypeBaseURL;},getPortalContextPath:function(){return this._portalContextPath;},getServiceDocumentBaseURL:function(){return this._serviceDocBaseURL;},getVaultMgmtDataSinkUrl:function(){return this._vaultMgmtDataSinkUrl;},getVaultSlots:function(){return this._vaultSlots;},isCustomServiceSelectionEnabled:function(){return this._customServiceSelectionEnabled;},isQDSSupportEnabled:function(){return this._qdsSupportEnabled;},isVaultSelectionEnabledForPZN:function(){return this._vaultSelectionEnabledForPZN;},isVaultSelectionEnabledForWCM:function(){return this._vaultSelectionEnabledForWCM;}});}if(!dojo._hasResource["com.ibm.workplace.wcm.ecm.picker.util.FederatedDocumentsDefinitions"]){dojo._hasResource["com.ibm.workplace.wcm.ecm.picker.util.FederatedDocumentsDefinitions"]=true;dojo.provide("com.ibm.workplace.wcm.ecm.picker.util.FederatedDocumentsDefinitions");dojo.declare("com.ibm.workplace.wcm.ecm.picker.util.FederatedDocumentsDefinitions",null,{});com.ibm.workplace.wcm.ecm.picker.util.FederatedDocumentsDefinitions._atom="atom";com.ibm.workplace.wcm.ecm.picker.util.FederatedDocumentsDefinitions.resEnvTypeCMIS="CMIS";com.ibm.workplace.wcm.ecm.picker.util.FederatedDocumentsDefinitions.resEnvTypeQDS="DocumentServices";com.ibm.workplace.wcm.ecm.picker.util.FederatedDocumentsDefinitions.resEnvTypeATOM="ATOM";com.ibm.workplace.wcm.ecm.picker.util.FederatedDocumentsDefinitions._cmis="cmis";com.ibm.workplace.wcm.ecm.picker.util.FederatedDocumentsDefinitions._proxyVaultSlotParamName="hpaa.slotid";com.ibm.workplace.wcm.ecm.picker.util.FederatedDocumentsDefinitions._pzn="pzn";com.ibm.workplace.wcm.ecm.picker.util.FederatedDocumentsDefinitions._qds="qds";com.ibm.workplace.wcm.ecm.picker.util.FederatedDocumentsDefinitions._qdsentry="qdsentry";com.ibm.workplace.wcm.ecm.picker.util.FederatedDocumentsDefinitions._servicedoc="servicedoc";com.ibm.workplace.wcm.ecm.picker.util.FederatedDocumentsDefinitions._unknown="unknown";com.ibm.workplace.wcm.ecm.picker.util.FederatedDocumentsDefinitions._wcm="wcm";com.ibm.workplace.wcm.ecm.picker.util.FederatedDocumentsDefinitions._dialog="dialog";com.ibm.workplace.wcm.ecm.picker.util.FederatedDocumentsDefinitions._portlet="portlet";}if(!dojo._hasResource["com.ibm.workplace.wcm.ecm.picker.widget.AuthenticationWidget"]){dojo._hasResource["com.ibm.workplace.wcm.ecm.picker.widget.AuthenticationWidget"]=true;dojo.provide("com.ibm.workplace.wcm.ecm.picker.widget.AuthenticationWidget");dojo.registerModulePath("com.ibm.workplace.wcm.ecm.picker.widget","../com/ibm/workplace/wcm/ecm/picker/widget");dojo.require("dijit.form.RadioButton");dojo.require("dijit.form.ComboBox");dojo.require("com.ibm.widgets.GenericDialogWidget");dojo.declare("com.ibm.workplace.wcm.ecm.picker.widget.AuthenticationWidget",[com.ibm.widgets.GenericDialogWidget],{namespace:"authWdgt_",templateString:"<div dojoAttachPoint=\"authenticationWidgetDiv\">\n    <form name=\"${namespace}authenticationWidgetForm\"\n        class=\"lotusForm2 lotusFormTable formBkgr\"\n        id=\"${namespace}authenticationWidgetForm\">\n        <div style=\"display: none;\">\n            <label id=\"${namespace}authSelectionRadioGroupHeading_id\">${_nlsUserInterface.authWidget.title}</label>\n        </div>\n        <div role=\"radiogroup\" aria-labelledby=\"${namespace}authSelectionRadioGroupHeading_id\">\n            <div dojoAttachPoint=\"currentUserDIV\">\n                <input dojoAttachPoint=\"currentUserRadioButton\" dojoType=\"dijit.form.RadioButton\" class=\"lotusCheckbox\" id=\"${namespace}currentUserRadioButton_id\"\n                      type=\"radio\" role=\"radio\" value=\"current\" name=\"feddoc_auth_type\"\n                      aria-labelledby=\"${namespace}auth_type_current.lbl\" aria-checked=\"true\" checked/>\n                <label id=\"${namespace}auth_type_current.lbl\" class=\"lotusCheckbox\" for=\"${namespace}currentUserRadioButton_id\" aria-label=\"${_nlsUserInterface.authWidget.currentUserRadioButtonLabel}\">\n                    <span dojoAttachPoint=\"currentUserRadioButtonLabel\">${_nlsUserInterface.authWidget.currentUserRadioButtonLabel}</span>\n                </label>\n            </div>\n            <div class=\"feddocTopSpaceSmall\" dojoAttachPoint=\"credentialVaultDIV\">\n                <input dojoAttachPoint=\"vaultRadioButton\" dojoType=\"dijit.form.RadioButton\" class=\"lotusCheckbox\" id=\"${namespace}vaultRadioButton_id\"\n                      type=\"radio\" role=\"radio\" value=\"vault\" name=\"feddoc_auth_type\"\n                      aria-labelledby=\"${namespace}auth_type_vault.lbl\" aria-checked=\"false\"/>\n                <label id=\"${namespace}auth_type_vault.lbl\" class=\"lotusCheckbox\" for=\"${namespace}vaultRadioButton_id\" aria-label=\"${_nlsUserInterface.authWidget.vaultRadioButtonLabel}\">\n                    <span dojoAttachPoint=\"vaultRadioButtonLabel\">${_nlsUserInterface.authWidget.vaultRadioButtonLabel}</span>\n                </label><br/>\n                <div class=\"feddocTopSpaceSmall\" style=\"margin-left: 20px;\">\n\t                <label id=\"${namespace}vaultDropDownList.lbl\" for=\"${namespace}vaultDropDownList_id\" aria-label=\"${_nlsUserInterface.authWidget.vaultDropDownListLabel}\">\n\t                    <span dojoAttachPoint=\"vaultDropDownListLabel\" class=\"lotusInactive\">${_nlsUserInterface.authWidget.vaultDropDownListLabel}</span>\n\t                </label>\n\t                <div>\n\t                    <input type=\"select\" dojoAttachPoint=\"vaultDropDownList\" dojoType=\"dijit.form.ComboBox\" class=\"lotusSelect\" id=\"${namespace}vaultDropDownList_id\" name=\"${namespace}vaultDropDownList\" size=\"8\" aria-labelledBy=\"${namespace}vaultDropDownList.lbl\" disabled=\"true\"/>\n\t                </div>\n                </div>\n            </div>\n            <div class=\"feddocTopSpaceSmall\" dojoAttachPoint=\"usernamePasswordDIV\">\n                <input dojoAttachPoint=\"userPwdRadioButton\" dojoType=\"dijit.form.RadioButton\" class=\"lotusCheckbox\" id=\"${namespace}userPwdRadioButton_id\"\n                       type=\"radio\" role=\"radio\" value=\"userPwd\" name=\"feddoc_auth_type\"\n                       aria-labelledby=\"${namespace}auth_type_userPwd.lbl\" aria-checked=\"false\"/>\n                <label id=\"${namespace}auth_type_userPwd.lbl\" class=\"lotusCheckbox\" for=\"${namespace}userPwdRadioButton_id\" aria-label=\"${_nlsUserInterface.authWidget.userPwdRadioButtonLabel}\">\n                    <span dojoAttachPoint=\"userPwdRadioButtonLabel\">${_nlsUserInterface.authWidget.userPwdRadioButtonLabel}</span>\n                </label>\n                <div style=\"margin-left: 20px;\">\n\t                <div class=\"feddocTopSpaceSmall\">\n\t                    <label id=\"${namespace}auth_type_simpleAuthUser.lbl\" for=\"${namespace}simpleAuthUser_id\" aria-label=\"${_nlsUserInterface.authWidget.simpleAuthUserLabel}\">\n\t                        <span dojoAttachPoint=\"simpleAuthUserLabel\" class=\"lotusInactive\">${_nlsUserInterface.authWidget.simpleAuthUserLabel}</span>\n\t                    </label>\n\t                    <input dojoType=\"dijit.form.TextBox\" type=\"text\" role=\"textbox\" aria-labelledby=\"${namespace}auth_type_simpleAuthUser.lbl\" dojoAttachPoint=\"simpleAuthUser\" id=\"${namespace}simpleAuthUser_id\" name=\"${namespace}simpleAuthUser\" disabled=\"true\"/>\n\t                </div> \n\t                <div class=\"feddocTopSpaceSmall\">\n\t                    <label id=\"${namespace}auth_type_simpleAuthPwd.lbl\" for=\"${namespace}simpleAuthPwd_id\" aria-label=\"${_nlsUserInterface.authWidget.simpleAuthPwdLabel}\">\n\t                        <span dojoAttachPoint=\"simpleAuthPwdLabel\" class=\"lotusInactive\">${_nlsUserInterface.authWidget.simpleAuthPwdLabel}</span>\n\t                    </label>\n\t                    <input dojoType=\"dijit.form.TextBox\" type=\"password\" role=\"textbox\" aria-labelledby=\"${namespace}auth_type_simpleAuthPwd.lbl\" dojoAttachPoint=\"simpleAuthPwd\" id=\"${namespace}simpleAuthPwd_id\" name=\"${namespace}simpleAuthPwd\" disabled=\"true\"/>\n\t                </div>\n\t            </div> \n            </div>            \n        </div>            \n    </form>\n</div>\n\n",widgetsInTemplate:true,_allAuthTypes:[],_authProperties:null,_authTypeAvailable:{"authNone":false,"authUserPwd":false,"authSSO":false,"authVault":false},_defaultSlotValue:"",_errorState:false,_eventHandles:[],_isTracing:false,_onChangeAuthenticationMode:null,_onErrorStateChanged:null,_vaultSlots:[],_vaultSlotStore:null,buildRendering:function(){var m="buildRendering()";if(this._isTracing){this.traceEntry(m);}this.inherited(arguments);this._setUpVaultDropDownList();this._showHideAuthTypeSections();if(this._isTracing){this.traceExit(m);}},changeAuthType:function(_2){var m="changeAuthType(p_authType)";if(this._isTracing){this.traceEntry(m,_2);}if(_2){if(_2!=this._authProperties.authType){this._authProperties.authType=_2;this._selectPresetAuthType();this._callbackAuthenticationChangedEvent();this._clearError();}}if(this._isTracing){this.traceExit(m);}},changeVaultSlotID:function(_3){var m="changeVaultSlotID(p_vaultSlotID)";if(this._isTracing){this.traceEntry(m,_3);}if(_3){this.vaultDropDownList.attr("value",_3);var _4=this._vaultSlotStore.fetchItemByIdentity(_3);if(_4&&(_4.length===1)){this._clearError();}else{if(this._onErrorStateChanged&&dojo.isFunction(this._onErrorStateChanged)){this._onErrorStateChanged(this,true,this._nlsMessages.authWidget.errorVaultSlotNotAvailable);}}}if(this._isTracing){this.traceExit(m);}},constructor:function(_5){this._isTracing=this.isTracing();var m="constructor(p_params)";if(this._isTracing){this.traceEntry(m,_5);if(_5){this.trace(m,"p_params.authProperties:",dojo.toJson(_5.authProperties));this.trace(m,"p_params.availableAuthTypes:",dojo.toJson(_5.availableAuthTypes));this.trace(m,"p_params.namespace:",_5.namespace);this.trace(m,"p_params.onChangeAuthenticationMode:",_5.onChangeAuthenticationMode);this.trace(m,"p_params.onErrorStateChanged:",_5.onErrorStateChanged);this.trace(m,"p_params.vaultSlots:",dojo.toJson(_5.vaultSlots));}}if(typeof _5.namespace=="string"){this.namespace=_5.namespace;}this._allAuthTypes.push(com.ibm.workplace.wcm.ecm.picker.widget.AuthenticationWidget._authTypeUserPwd);this._allAuthTypes.push(com.ibm.workplace.wcm.ecm.picker.widget.AuthenticationWidget._authTypeCurrentUser);this._allAuthTypes.push(com.ibm.workplace.wcm.ecm.picker.widget.AuthenticationWidget._authTypeVault);if(_5){if((_5.vaultSlots)&&(dojo.isArray(_5.vaultSlots))){this._vaultSlots=_5.vaultSlots;}if(_5.availableAuthTypes&&dojo.isArray(_5.availableAuthTypes)){this._authTypeAvailable[com.ibm.workplace.wcm.ecm.picker.widget.AuthenticationWidget._authTypeUserPwd]=false;this._authTypeAvailable[com.ibm.workplace.wcm.ecm.picker.widget.AuthenticationWidget._authTypeCurrentUser]=false;this._authTypeAvailable[com.ibm.workplace.wcm.ecm.picker.widget.AuthenticationWidget._authTypeVault]=false;for(var i=0;i<_5.availableAuthTypes.length;i++){var _6=_5.availableAuthTypes[i];if(_6==com.ibm.workplace.wcm.ecm.picker.widget.AuthenticationWidget._authTypeUserPwd){this._authTypeAvailable[com.ibm.workplace.wcm.ecm.picker.widget.AuthenticationWidget._authTypeUserPwd]=true;}if(_6==com.ibm.workplace.wcm.ecm.picker.widget.AuthenticationWidget._authTypeCurrentUser){this._authTypeAvailable[com.ibm.workplace.wcm.ecm.picker.widget.AuthenticationWidget._authTypeCurrentUser]=true;}if(_6==com.ibm.workplace.wcm.ecm.picker.widget.AuthenticationWidget._authTypeVault){this._authTypeAvailable[com.ibm.workplace.wcm.ecm.picker.widget.AuthenticationWidget._authTypeVault]=(this._vaultSlots.length>0);}}}if(_5.authProperties){this._authProperties=dojo.clone(_5.authProperties);}else{this._authProperties={"authType":com.ibm.workplace.wcm.ecm.picker.widget.AuthenticationWidget._authTypeCurrentUser};}if(typeof _5.onChangeAuthenticationMode=="function"){this._onChangeAuthenticationMode=_5.onChangeAuthenticationMode;}if((_5.onErrorStateChanged)&&dojo.isFunction(_5.onErrorStateChanged)){this._onErrorStateChanged=_5.onErrorStateChanged;}}if(this._isTracing){this.traceExit(m);}},destroy:function(){var m="destroy()";if(this._isTracing){this.traceEntry(m);}this.inherited(arguments);if(this._isTracing){this.traceExit(m);}},doCancel:function(){var m="doCancel()";if(this._isTracing){this.traceEntry(m);}var _7={"returnCode":-1};if(this._isTracing){this.traceExit(m,_7);}return _7;},doConfirm:function(){var m="doConfirm()";if(this._isTracing){this.traceEntry(m);}var _8={"returnCode":0};if(this._isTracing){this.traceExit(m,_8);}return _8;},getAuthenticationProperties:function(){var m="getAuthenticationProperties()";if(this._isTracing){this.traceEntry(m);}this._getAuthPropertiesFromUI();var _9=dojo.clone(this._authProperties);if(this._isTracing){this.traceExit(m,dojo.toJson(_9));}return _9;},getDialogTitle:function(){var m="getDialogTitle()";if(this._isTracing){this.traceEntry(m);}var _a=this._nlsUserInterface.authWidget.title;if(this._isTracing){this.traceExit(m,_a);}return _a;},isAuthTypeAvailable:function(_b){var m="isAuthTypeAvailable(p_authType)";if(this._isTracing){this.traceEntry(m,_b);}var _c=(this._authTypeAvailable[_b]===true);if(this._isTracing){this.traceExit(m,_c);}return _c;},isVaultSlotAvailable:function(_d){var m="_isVaultSlotAvailable(p_vaultSlotId)";if(this._isTracing){this.traceEntry(m,[_d]);}var _e=dojo.some(this._vaultSlots,function(_f){if(_f){if(_f.slotid){return (_f.slotid===_d);}else{return false;}}else{return false;}});if(this._isTracing){this.traceExit(m,_e);}return _e;},postCreate:function(){var m="postCreate()";if(this._isTracing){this.traceEntry(m);}this.inherited(arguments);this._initEventHandles();if(this._isTracing){this.traceExit(m);}},setAuthenticationProperties:function(_10){var m="setAuthenticationProperties(p_params)";if(this._isTracing){this.traceEntry(m,_10);if(_10){this.trace(m,"p_params.authProperties:",dojo.toJson(_10.authProperties));}}if(_10.authProperties){var _11=this._authProperties.vaultSlotID;this._authProperties=dojo.clone(_10.authProperties);if((_11)&&(!this._authProperties.vaultSlotID)&&(this._vaultSlots.length>0)){this._authProperties.vaultSlotID=_11;}}this._setAuthPropertiesToUI();this._callbackAuthenticationChangedEvent();if(this._isTracing){this.traceExit(m);}},startup:function(){var m="startup()";if(this._isTracing){this.traceEntry(m);}this.inherited(arguments);this.vaultDropDownList.attr("value",this._defaultSlotValue);if(this._isTracing){this.traceExit(m);}},uninitialize:function(){var m="uninitialize()";if(this._isTracing){this.traceEntry(m);}this._clearEventHandles();this.inherited(arguments);if(this._isTracing){this.traceExit(m);}},_callbackAuthenticationChangedEvent:function(){var m="_callbackAuthenticationChangedEvent()";if(this._isTracing){this.traceEntry(m);}if(this._onChangeAuthenticationMode&&(typeof this._onChangeAuthenticationMode=="function")){if(this._isTracing){this.trace(m,"Dispatching to callback function passing the authentication settings:",[this._onCancelCallbackFn,dojo.toJson(this._authProperties)]);}this._onChangeAuthenticationMode(this._authProperties);this._clearError();}if(this._isTracing){this.traceExit(m);}},_clearError:function(){var m="_clearError()";if(this._isTracing){this.traceEntry(m);}this._errorState=false;if(this._onErrorStateChanged){this._onErrorStateChanged(this,false);}if(this._isTracing){this.traceExit(m);}},_clearEventHandles:function(){var m="_clearEventHandles()";if(this._isTracing){this.traceEntry(m);}dojo.forEach(this._eventHandles,dojo.disconnect);this._eventHandles=[];if(this._isTracing){this.traceExit(m);}},_correctPresetAuthType:function(){var m="_correctPresetAuthType()";if(this._isTracing){this.traceEntry(m);}if(!this.isAuthTypeAvailable(this._authProperties.authType)){for(var i=0;i<this._allAuthTypes.length;i++){var _12=this._allAuthTypes[i];if(_12!=this._authProperties.authType){if(this.isAuthTypeAvailable(_12)){this._authProperties.authType=_12;if(this._isTracing){this.traceExit(m);}return;}}}}if(this._isTracing){this.traceExit(m);}},_disableVaultSlotPicker:function(){var m="_disableVaultSlotPicker()";if(this._isTracing){this.traceEntry(m);}this.vaultDropDownList.attr("disabled",true);dojo.addClass(this.vaultDropDownListLabel,"lotusInactive");if(this._isTracing){this.traceExit(m);}},_disableUnamePwInputFields:function(){var m="_disableUnamePwInputFields()";if(this._isTracing){this.traceEntry(m);}this.simpleAuthUser.attr("disabled",true);dojo.addClass(this.simpleAuthUserLabel,"lotusInactive");this.simpleAuthPwd.attr("disabled",true);dojo.addClass(this.simpleAuthPwdLabel,"lotusInactive");if(this._isTracing){this.traceExit(m);}},_enableVaultSlotPicker:function(){var m="_enableVaultSlotPicker()";if(this._isTracing){this.traceEntry(m);}this.vaultDropDownList.attr("disabled",false);dojo.removeClass(this.vaultDropDownListLabel,"lotusInactive");if(this._isTracing){this.traceExit(m);}},_enableUnamePwInputFields:function(){var m="_enableUnamePwInputFields()";if(this._isTracing){this.traceEntry(m);}this.simpleAuthUser.attr("disabled",false);dojo.removeClass(this.simpleAuthUserLabel,"lotusInactive");this.simpleAuthPwd.attr("disabled",false);dojo.removeClass(this.simpleAuthPwdLabel,"lotusInactive");if(this._isTracing){this.traceExit(m);}},_getAuthPropertiesFromUI:function(){var m="_getAuthPropertiesFromUI()";if(this._isTracing){this.traceEntry(m);}this._authProperties={authType:this._authProperties.authType,username:dojo.attr(this.simpleAuthUser,"value"),password:dojo.attr(this.simpleAuthPwd,"value"),vaultSlotID:this.vaultDropDownList.getValue(),vaultSlotTitle:dojo.attr(this.vaultDropDownList,"title")};if(this._isTracing){this.trace(m,"New authentication settings:",dojo.toJson(this._authProperties));}if(this._isTracing){this.traceExit(m);}},_initEventHandles:function(){var m="_initEventHandles()";if(this._isTracing){this.traceEntry(m);}this._eventHandles.push(dojo.connect(this.currentUserRadioButton.focusNode,"onclick",dojo.hitch(this,"_onSelectAuthType")));this._eventHandles.push(dojo.connect(this.vaultRadioButton.focusNode,"onclick",dojo.hitch(this,"_onSelectAuthType")));this._eventHandles.push(dojo.connect(this.userPwdRadioButton.focusNode,"onclick",dojo.hitch(this,"_onSelectAuthType")));this._eventHandles.push(dojo.connect(this.vaultDropDownList,"onChange",dojo.hitch(this,"_onSelectVaultSlot")));if(this._isTracing){this.traceExit(m);}},_onSelectAuthType:function(_13){var m="_onSelectAuthType(p_evt)";if(this._isTracing){this.traceEntry(m,_13);}if(_13){if(_13.target){if(_13.target==this.currentUserRadioButton.focusNode){this._authProperties.authType=com.ibm.workplace.wcm.ecm.picker.widget.AuthenticationWidget._authTypeCurrentUser;this._disableVaultSlotPicker();this._disableUnamePwInputFields();this._callbackAuthenticationChangedEvent();}else{if(_13.target==this.vaultRadioButton.focusNode){this._authProperties.authType=com.ibm.workplace.wcm.ecm.picker.widget.AuthenticationWidget._authTypeVault;this._enableVaultSlotPicker();this._disableUnamePwInputFields();this._callbackAuthenticationChangedEvent();}else{if(_13.target==this.userPwdRadioButton.focusNode){this._authProperties.authType=com.ibm.workplace.wcm.ecm.picker.widget.AuthenticationWidget._authTypeUserPwd;this._disableVaultSlotPicker();this._enableUnamePwInputFields();this._callbackAuthenticationChangedEvent();}}}}}if(this._isTracing){this.traceExit(m);}},_onSelectVaultSlot:function(){var m="_onSelectVaultSlot()";if(this._isTracing){this.traceEntry(m);}this._authProperties.vaultSlotID=this.vaultDropDownList.getValue();if(this._isTracing){this.trace(m,"New credential vault slot ID:",this._authProperties.vaultSlotID);}this._callbackAuthenticationChangedEvent();if(this._isTracing){this.traceExit(m);}},_selectPresetAuthType:function(){var m="_selectPresetAuthType()";if(this._isTracing){this.traceEntry(m);this.trace(m,"Preset authentication type:",this._authProperties.authType);}if(this._authProperties.authType==com.ibm.workplace.wcm.ecm.picker.widget.AuthenticationWidget._authTypeCurrentUser){this.currentUserRadioButton.setChecked(true);this._disableVaultSlotPicker();this._disableUnamePwInputFields();}else{if(this._authProperties.authType==com.ibm.workplace.wcm.ecm.picker.widget.AuthenticationWidget._authTypeUserPwd){this.userPwdRadioButton.setChecked(true);this._disableVaultSlotPicker();this._enableUnamePwInputFields();}else{if(this._authProperties.authType==com.ibm.workplace.wcm.ecm.picker.widget.AuthenticationWidget._authTypeVault){this._disableUnamePwInputFields();if(this._vaultSlots.length<=0){this.warning(m,"There are no credential vault slots configured in this instance of Portal");}else{this.vaultRadioButton.setChecked(true);this._enableVaultSlotPicker();}}}}if(this._isTracing){this.traceExit(m);}},_setAuthPropertiesToUI:function(){var m="_setAuthPropertiesToUI()";if(this._isTracing){this.traceEntry(m);this.trace(m,"Authentication settings:",dojo.toJson(this._authProperties));}this._correctPresetAuthType();this._selectPresetAuthType();if(this._authProperties){if(this._authProperties.username){dojo.attr(this.simpleAuthUser,"value",this._authProperties.username);}if(this._authProperties.password){dojo.attr(this.simpleAuthPwd,"value",this._authProperties.password);}if(this._authProperties.vaultSlotID){this.vaultDropDownList.setValue(this._authProperties.vaultSlotID);}}else{dojo.attr(this.simpleAuthUser,"value","");dojo.attr(this.simpleAuthPwd,"value","");}if(this._isTracing){this.traceExit(m);}},_showHideAuthTypeSections:function(){var m="_showHideAuthTypeSections()";if(this._isTracing){this.traceEntry(m);this.trace(m,"Available authentication types:",dojo.toJson(this._authTypeAvailable));}if(this._authTypeAvailable[com.ibm.workplace.wcm.ecm.picker.widget.AuthenticationWidget._authTypeCurrentUser]===false){this.currentUserRadioButton.set("disabled",true);dojo.style(this.currentUserDIV,"display","none");dijit.setWaiState(this.currentUserDIV,"hidden",true);}if(this._authTypeAvailable[com.ibm.workplace.wcm.ecm.picker.widget.AuthenticationWidget._authTypeUserPwd]===false){this.userPwdRadioButton.set("disabled",true);dojo.style(this.usernamePasswordDIV,"display","none");dijit.setWaiState(this.usernamePasswordDIV,"hidden",true);}if(this._authTypeAvailable[com.ibm.workplace.wcm.ecm.picker.widget.AuthenticationWidget._authTypeVault]===false){this.vaultRadioButton.set("disabled",true);dojo.style(this.credentialVaultDIV,"display","none");dijit.setWaiState(this.credentialVaultDIV,"hidden",true);}if(this._isTracing){this.traceExit(m);}},_setUpVaultDropDownList:function(){var m="_setUpVaultDropDownList()";if(this._isTracing){this.traceEntry(m);this.trace(m,"Available credential vault slots:",dojo.toJson(this._vaultSlots));}if(this._authTypeAvailable[com.ibm.workplace.wcm.ecm.picker.widget.AuthenticationWidget._authTypeVault]){for(var i=0;i<this._vaultSlots.length;i++){this._vaultSlots[i].name=decodeURIComponent(this._vaultSlots[i].slotid);if(this._defaultSlotValue===""){this._defaultSlotValue=this._vaultSlots[i].name;}}}this._vaultSlotStore=new dojo.data.ItemFileReadStore({data:{"label":"name","identifier":"name","items":this._vaultSlots}});this.vaultDropDownList.attr("store",this._vaultSlotStore);if((!this._authProperties.vaultSlotID)&&(this._vaultSlots.length>0)){this._authProperties.vaultSlotID=this.vaultDropDownList.getValue();if(this._isTracing){this.trace(m,"Set default credential vault slot ID:",this._authProperties.vaultSlotID);}}if(this._isTracing){this.traceExit(m);}}});com.ibm.workplace.wcm.ecm.picker.widget.AuthenticationWidget._authTypeNoAuth="authNone";com.ibm.workplace.wcm.ecm.picker.widget.AuthenticationWidget._authTypeUserPwd="authUserPwd";com.ibm.workplace.wcm.ecm.picker.widget.AuthenticationWidget._authTypeCurrentUser="authSSO";com.ibm.workplace.wcm.ecm.picker.widget.AuthenticationWidget._authTypeVault="authVault";}if(!dojo._hasResource["com.ibm.workplace.wcm.ecm.picker.widget.ExpandableSectionWidget"]){dojo._hasResource["com.ibm.workplace.wcm.ecm.picker.widget.ExpandableSectionWidget"]=true;dojo.provide("com.ibm.workplace.wcm.ecm.picker.widget.ExpandableSectionWidget");dojo.registerModulePath("com.ibm.workplace.wcm.ecm.picker.widget","../com/ibm/workplace/wcm/ecm/picker/widget");dojo.require("dijit._Widget");dojo.require("dijit._Templated");dojo.require("com.ibm.widgets._Traceable");dojo.declare("com.ibm.workplace.wcm.ecm.picker.widget.ExpandableSectionWidget",[dijit._Widget,dijit._Templated,com.ibm.widgets._Traceable],{blankImgUrl:dojo.moduleUrl("dojo","resources/blank.gif").toString(),namespace:"expSctWdgt_",parseOnLoad:true,templateString:"<div role=\"region\" aria-hidden=\"true\" aria-expanded=\"false\" aria-labelledby=\"${namespace}sectionLink_id\" class=\"lotusFirst\" dojoAttachPoint=\"SectionDIV\" id=\"${namespace}SectionDIV\" name=\"${namespace}SectionDIV\" style=\"display: none;\">\n    <a dojoAttachPoint=\"sectionTwisty\" id=\"${namespace}sectionTwisty_id\" \n       name=\"${namespace}sectionTwisty\" class=\"lotusSprite lotusArrow lotusTwistyClosed\" \n       href=\"javascript:void(0);\" title=\"${sectionLinkTitle}\" tabIndex=\"0\" role=\"button\" aria-label=\"${sectionLinkTitle}\"><span dojoAttachPoint=\"sectionTwistySpan\" id=\"${namespace}sectionTwistySpan_id\" name=\"${namespace}sectionTwistySpan\" class=\"lotusAltText\">&#x25bc;</span></a>\n    <a dojoAttachPoint=\"sectionLink\" href=\"javascript:void(0);\" role=\"button\" tabindex=\"0\" \n       id=\"${namespace}sectionLink_id\" name=\"${namespace}sectionLink\" \n       title=\"${_sectionTitleText}\" class=\"lotusAction\" aria-label=\"${_sectionTitleText}\">${_sectionTitleText}</a>\n    <div role=\"region\" aria-labelledby=\"${namespace}sectionLink_id\" dojoAttachPoint=\"sectionBody\" id=\"${namespace}sectionBody_id\" name=\"${namespace}sectionBody\" class=\"lotusSectionBody\">\n        <div class=\"lotusChunk\">\n            <div aria-hidden=\"true\" class=\"lotusFormField\" dojoAttachPoint=\"sectionWidgetDIV\" id=\"${namespace}sectionWidgetDIV\" style=\"display: none; height: 0px; width: 300px; overflow: hidden;\">\n                <div dojoAttachPoint=\"widgetNode, containerNode\"></div>\n            </div>\n        </div>\n    </div>\n</div>\n",_eventHandles:[],_isTracing:false,_nlsMessages:{},_nlsUserInterface:{},_onCollapsed:null,_onExpanded:null,_openHeight:5.5,_openWidth:6.25,_sectionID:"",_sectionTitleText:"",_visible:false,_widget:null,buildRendering:function(){var m="buildRendering()";if(this._isTracing){this.traceEntry(m);}this.inherited(arguments);if(this._widget){this._widget.placeAt(this.widgetNode);}if((this._visible)&&(this._visible===true)){this.showSection();}else{this.hideSection();}if(this._isTracing){this.traceExit(m);}},constructor:function(_14){this._isTracing=this.isTracing();var m="constructor(p_params)";if(this._isTracing){this.traceEntry(m,_14);if(_14){this.traceEntry(m,"p_params.namespace:",_14.namespace);this.traceEntry(m,"p_params.nlsMessages:",dojo.toJson(_14.nlsMessages));this.traceEntry(m,"p_params.nlsUserInterface:",dojo.toJson(_14.nlsUserInterface));this.traceEntry(m,"p_params.onCollapsed:",_14.onCollapsed);this.traceEntry(m,"p_params.onExpanded:",_14.onExpanded);this.traceEntry(m,"p_params.openHeight:",_14.openHeight);this.traceEntry(m,"p_params.openWidth:",_14.openWidth);this.traceEntry(m,"p_params.sectionID:",_14.sectionID);this.traceEntry(m,"p_params.sectionTitleText:",_14.sectionTitleText);this.traceEntry(m,"p_params.visible:",_14.visible);this.traceEntry(m,"p_params.widgetInstance:",_14.widgetInstance);}}if(typeof _14.namespace=="string"){this.namespace=_14.namespace;}if(_14.nlsMessages&&typeof _14.nlsMessages=="object"){this._nlsMessages=_14.nlsMessages;}if(_14.nlsUserInterface&&typeof _14.nlsUserInterface=="object"){this._nlsUserInterface=_14.nlsUserInterface;}if(_14.widgetInstance&&typeof _14.widgetInstance=="object"){this._widget=_14.widgetInstance;}if(typeof _14.openWidth=="number"){this._openWidth=_14.openWidth;}if(typeof _14.openHeight=="number"){this._openHeight=_14.openHeight;}if(typeof _14.sectionTitleText=="string"){this._sectionTitleText=_14.sectionTitleText;}if(typeof _14.sectionID=="string"){this._sectionID=_14.sectionID;}if(typeof _14.visible=="boolean"){this._visible=_14.visible;}if(typeof _14.onExpanded=="function"){this._onExpanded=_14.onExpanded;}if(typeof _14.onCollapsed=="function"){this._onCollapsed=_14.onCollapsed;}if(this._isTracing){this.traceExit(m);}},hideSection:function(){var m="hideSection()";if(this._isTracing){this.traceEntry(m);}this._visible=false;dojo.style(this.SectionDIV,"display","none");dijit.setWaiState(this.SectionDIV,"hidden",true);if(this._isTracing){this.traceExit(m);}},isSectionCollapsed:function(){var m="isSectionCollapsed()";if(this._isTracing){this.traceEntry(m);}var _15=dojo.hasClass(this.sectionTwisty,"lotusTwistyClosed");if(this._isTracing){this.traceExit(m,_15);}return _15;},isSectionExpanded:function(){var m="isSectionExpanded()";if(this._isTracing){this.traceEntry(m);}var _16=dojo.hasClass(this.sectionTwisty,"lotusTwistyOpen");if(this._isTracing){this.traceExit(m,_16);}return _16;},postCreate:function(){var m="postCreate()";if(this._isTracing){this.traceEntry(m);}this.inherited(arguments);this._initEventHandles();this._setSectionClosed();if(this._isTracing){this.traceExit(m);}},postMixInProperties:function(){var m="postMixInProperties()";if(this._isTracing){this.traceEntry(m);}this.inherited(arguments);if((this._sectionID)&&(this.namespace)){this.namespace=this.namespace+this._sectionID;}this.sectionLinkTitle=this._nlsUserInterface.expSectionWidget.sectionLinkExpandTitle;if(this._isTracing){this.traceExit(m);}},showSection:function(){var m="showSection()";if(this._isTracing){this.traceEntry(m);}this._visible=true;dojo.style(this.SectionDIV,"display","block");dijit.setWaiState(this.SectionDIV,"hidden",false);if(this._isTracing){this.traceExit(m);}},uninitialize:function(){var m="uninitialize()";if(this._isTracing){this.traceEntry(m);}this._clearEventHandles();this.inherited(arguments);if(this._isTracing){this.traceExit(m);}},_clearEventHandles:function(){var m="_clearEventHandles()";if(this._isTracing){this.traceEntry(m);}dojo.forEach(this._eventHandles,dojo.disconnect);this._eventHandles=[];if(this._isTracing){this.traceExit(m);}},_closeSection:function(){var m="_closeSection()";if(this._isTracing){this.traceEntry(m);}dojo.animateProperty({"node":dojo.byId(this.namespace+"sectionWidgetDIV"),"duration":500,"properties":{"height":{"end":0,"units":"px"}},"onEnd":dojo.hitch(this,function(){this._setSectionClosed();dojo.style(dojo.byId(this.namespace+"sectionWidgetDIV"),"display","none");if((this._onCollapsed)&&(typeof this._onCollapsed=="function")){this._onCollapsed();}})}).play();if(this._isTracing){this.traceExit(m);}},_initEventHandles:function(){var m="_initEventHandles()";if(this._isTracing){this.traceEntry(m);}this._eventHandles.push(dojo.connect(this.sectionTwisty,"onclick",dojo.hitch(this,"_onOpenCloseSection")));this._eventHandles.push(dojo.connect(this.sectionLink,"onclick",dojo.hitch(this,"_onOpenCloseSection")));if(this._isTracing){this.traceExit(m);}},_onOpenCloseSection:function(){var m="_onOpenCloseSection()";if(this._isTracing){this.traceEntry(m);}var _17=dojo.hasClass(this.sectionTwisty,"lotusTwistyOpen");if(this._isTracing){this.trace(m,"Is section open:",_17);}if(_17){this._closeSection();}else{this._openSection();}if(this._isTracing){this.traceExit(m);}},_openSection:function(){var m="_openSection()";if(this._isTracing){this.traceEntry(m);}this.sectionLinkTitle=this._nlsUserInterface.expSectionWidget.sectionLinkCollapseTitle;var _18=dojo.byId(this.namespace+"sectionWidgetDIV");dojo.style(_18,"display","block");dojo.marginBox(_18,{h:"0ex",w:"0em"});dojo.style(_18,"height","0ex");dojo.style(_18,"width","0em");dojo.animateProperty({"node":_18,"duration":500,"properties":{"width":{"end":this._openWidth,"units":"em"},"height":{"end":this._openHeight,"units":"ex"}},"onEnd":dojo.hitch(this,function(){dojo.removeClass(this.sectionTwisty,"lotusTwistyClosed");dojo.addClass(this.sectionTwisty,"lotusTwistyOpen");dojo.attr(this.sectionTwisty,"title",this.sectionLinkTitle);dojo.attr(this.sectionLink,"title",this._sectionTitleText);dijit.setWaiState(this.sectionTwisty,"label",this.sectionLinkTitle);dijit.setWaiState(this.sectionLink,"label",this._sectionTitleText);dijit.setWaiState(this.SectionDIV,"expanded",true);dijit.setWaiState(this.sectionWidgetDIV,"hidden",false);dojo.attr(this.sectionTwistySpan,"innerHTML","&#x25BC;");dojo.style(_18,"height","auto");if((this._onExpanded)&&(typeof this._onExpanded=="function")){this._onExpanded();}})}).play();if(this._isTracing){this.traceExit(m);}},_setSectionClosed:function(){var m="_setSectionClosed()";if(this._isTracing){this.traceEntry(m);}this.sectionLinkTitle=this._nlsUserInterface.expSectionWidget.sectionLinkExpandTitle;dojo.removeClass(this.sectionTwisty,"lotusTwistyOpen");dojo.addClass(this.sectionTwisty,"lotusTwistyClosed");dojo.attr(this.sectionTwisty,"title",this.sectionLinkTitle);dojo.attr(this.sectionLink,"title",this._sectionTitleText);dijit.setWaiState(this.sectionTwisty,"label",this.sectionLinkTitle);dijit.setWaiState(this.sectionLink,"label",this._sectionTitleText);dijit.setWaiState(this.SectionDIV,"expanded",false);dijit.setWaiState(this.sectionWidgetDIV,"hidden",true);if(this.isRTL){dojo.attr(this.sectionTwistySpan,"innerHTML","&#x25C4;");}else{dojo.attr(this.sectionTwistySpan,"innerHTML","&#x25BA;");}if(this._isTracing){this.traceExit(m);}}});}if(!dojo._hasResource["com.ibm.workplace.wcm.ecm.picker.widget.GenericWizardPageWidget"]){dojo._hasResource["com.ibm.workplace.wcm.ecm.picker.widget.GenericWizardPageWidget"]=true;dojo.provide("com.ibm.workplace.wcm.ecm.picker.widget.GenericWizardPageWidget");dojo.registerModulePath("com.ibm.workplace.wcm.ecm.picker.widget","../com/ibm/workplace/wcm/ecm/picker/widget");dojo.require("dijit._Widget");dojo.require("dijit._Templated");dojo.require("com.ibm.widgets._Traceable");dojo.declare("com.ibm.workplace.wcm.ecm.picker.widget.GenericWizardPageWidget",[dijit._Widget,dijit._Templated,com.ibm.widgets._Traceable],{namespace:"genWzrdPgWdgt_",virtualContainerNodeHeight:null,_dialogTitle:null,_errorState:false,_isTracing:false,_onErrorStateChanged:null,_nlsMessages:{},_nlsUserInterface:{},_onDefaultAction:null,_onLayoutChanged:null,_onReadyStateChanged:null,_pickerContext:com.ibm.workplace.wcm.ecm.picker.util.FederatedDocumentsDefinitions._dialog,_pickerManager:null,_ready:false,_stepDescription:"",_stepLabel:"",constructor:function(_19){this._isTracing=this.isTracing();var m="constructor(p_params)";if(this._isTracing){this.traceEntry(m,_19);if(_19){this.trace(m,"p_params.namespace:",_19.namespace);this.trace(m,"p_params.nlsMessages:",dojo.toJson(_19.nlsMessages));this.trace(m,"p_params.nlsUserInterface:",dojo.toJson(_19.nlsUserInterface));this.trace(m,"p_params.onDefaultAction:",_19.onDefaultAction);this.trace(m,"p_params.onErrorStateChanged",_19.onErrorStateChanged);this.trace(m,"p_params.onLayoutChanged:",_19.onLayoutChanged);this.trace(m,"p_params.onReadyStateChanged:",_19.onReadyStateChanged);this.trace(m,"p_params.pickerContext:",_19.pickerContext);this.trace(m,"p_params.pickerManager",_19.pickerManager);}}if(typeof _19.namespace=="string"){this.namespace=_19.namespace;}if(_19.nlsMessages&&dojo.isObject(_19.nlsMessages)){this._nlsMessages=_19.nlsMessages;}if(_19.nlsUserInterface&&dojo.isObject(_19.nlsUserInterface)){this._nlsUserInterface=_19.nlsUserInterface;}if((_19.onDefaultAction)&&dojo.isFunction(_19.onDefaultAction)){this._onDefaultAction=_19.onDefaultAction;}if((_19.onErrorStateChanged)&&dojo.isFunction(_19.onErrorStateChanged)){this._onErrorStateChanged=_19.onErrorStateChanged;}if((_19.onLayoutChanged)&&dojo.isFunction(_19.onLayoutChanged)){this._onLayoutChanged=_19.onLayoutChanged;}if((_19.onReadyStateChanged)&&dojo.isFunction(_19.onReadyStateChanged)){this._onReadyStateChanged=_19.onReadyStateChanged;}if(typeof _19.pickerContext=="string"){this._pickerContext=_19.pickerContext;}if((_19.pickerManager)&&dojo.isObject(_19.pickerManager)){this._pickerManager=_19.pickerManager;}if(this._isTracing){this.traceExit(m);}},getDialogTitle:function(){var m="getDialogTitle()";if(this._isTracing){this.traceEntry(m);}var _1a=this._dialogTitle;if(this._isTracing){this.traceExit(m,_1a);}return _1a;},getNlsMessages:function(){var m="getNlsMessages()";if(this._isTracing){this.traceEntry(m);}var _1b=this._nlsMessages;if(this._isTracing){this.traceExit(m,dojo.toJson(_1b));}return _1b;},getNlsUserInterface:function(){var m="getNlsUserInterface()";if(this._isTracing){this.traceEntry(m);}var _1c=this._nlsUserInterface;if(this._isTracing){this.traceExit(m,dojo.toJson(_1c));}return _1c;},getStepLabel:function(){var m="getStepLabel()";if(this._isTracing){this.traceEntry(m);}var _1d=this._stepLabel;if(this._isTracing){this.traceExit(m,_1d);}return _1d;},getStepDescription:function(){var m="getStepDescription()";if(this._isTracing){this.traceEntry(m);}var _1e=this._stepDescription;if(this._isTracing){this.traceExit(m,_1e);}return _1e;},initializePage:function(_1f){var m="initializePage()";if(this._isTracing){this.traceEntry(m);}if(this._isTracing){this.traceExit(m);}},isReady:function(){var m="isReady()";if(this._isTracing){this.traceEntry(m);}var _20=this._ready;if(this._isTracing){this.traceExit(m,_20);}return _20;},layout:function(){},setFocus:function(){var m="setFocus()";if(this._isTracing){this.traceEntry(m);}var _21=dijit.getFirstInTabbingOrder(this.domNode);if(_21){dijit.focus(_21);}if(this._isTracing){this.traceExit(m);}},_clearError:function(){var m="_clearError()";if(this._isTracing){this.traceEntry(m);}if(this._errorState===true){this._errorState=false;if(this._onErrorStateChanged){this._onErrorStateChanged(this,false);}}if(this._isTracing){this.traceExit(m);}},_layoutChanged:function(){var m="_layoutChanged()";if(this._isTracing){this.traceEntry(m);}if((this._onLayoutChanged)&&dojo.isFunction(this._onLayoutChanged)){if(this._isTracing){this.trace(m,"Dispatching to callback function:",this._onLayoutChanged);}this._onLayoutChanged();}if(this._isTracing){this.traceExit(m);}},_setReadyValue:function(_22){var m="_setReadyValue(p_isReady)";if(this._isTracing){this.traceEntry(m,_22);this.trace(m,"Current ready state:",this._ready);}if(this._ready!=_22){this._ready=_22;if((this._onReadyStateChanged)&&(dojo.isFunction(this._onReadyStateChanged))){if(this._isTracing){this.trace(m,"Dispatching to callback function passing the new ready state:",[this._onReadyStateChanged,this._ready]);}this._onReadyStateChanged(this._ready,this);}}if(this._isTracing){this.traceExit(m);}},_showError:function(_23,_24){var m="_showError(p_errorMsg, p_errorDetails)";if(this._isTracing){this.traceEntry(m,[_23,_24]);}this._errorState=true;if(this._onErrorStateChanged){this._onErrorStateChanged(this,true,_23,_24);}if(this._isTracing){this.traceExit(m);}}});}if(!dojo._hasResource["com.ibm.workplace.wcm.ecm.picker.util.URLUtils"]){dojo._hasResource["com.ibm.workplace.wcm.ecm.picker.util.URLUtils"]=true;dojo.provide("com.ibm.workplace.wcm.ecm.picker.util.URLUtils");dojo.declare("com.ibm.workplace.wcm.ecm.picker.util.URLUtils",[com.ibm.widgets._Traceable],{downloadAjaxProxyContext:"/cmis_proxy",getProtocol:function(_25){var m="getProtocol(p_url)";if(this._isTracing){this.traceEntry(m,[_25]);}var _26=null;if(_25&&_25.length>0){var pos=_25.indexOf("://");if(pos>0){_26=_25.substring(0,pos);}}if(this._isTracing){this.traceExit(m,_26);}return _26;},getAuthority:function(_27){var m="getAuthority(p_url)";if(this._isTracing){this.traceEntry(m,[_27]);}var _28=null;if(_27&&_27.length>0){var _29=_27.indexOf("//");if(_29>=0){_29=_29+2;var end=_27.indexOf("/",_29);if(end>=_29){_28=_27.substring(_29,end);}else{_28=_27.substring(_29);}}}if(this._isTracing){this.traceExit(m,_28);}return _28;},getHost:function(_2a){var m="getHost(p_url)";if(this._isTracing){this.traceEntry(m,[_2a]);}var _2b=null;var _2c=this.getAuthority(_2a);if(_2c&&_2c.length>0){var end=_2c.indexOf(":");if(end>=0){_2b=_2c.substring(0,end);}else{_2b=_2c;}}if(this._isTracing){this.traceExit(m,_2b);}return _2b;},getPort:function(_2d){var m="getPort(p_url)";if(this._isTracing){this.traceEntry(m,[_2d]);}var _2e=null;var _2f=this.getAuthority(_2d);if(_2f&&_2f.length>0){var _30=_2f.indexOf(":");if(_30>0&&_2f.length>_30+1){_2e=_2f.substring(_30+1);}}if(this._isTracing){this.traceExit(m,_2e);}return _2e;},getFile:function(_31){var m="getFile(p_url)";if(this._isTracing){this.traceEntry(m,[_31]);}var _32=null;if(_31&&_31.length>0){var _33=_31.indexOf("//");if(_33>=0){_33=_33+2;var _34=_31.indexOf("/",_33);if(_34>0){_32=_31.substring(_34);}}else{_32=_31;}}if(this._isTracing){this.traceExit(m,_32);}return _32;},addQueryParameter:function(_35,_36,_37){var m="addQueryParameter(p_url, p_name, p_value)";if(this._isTracing){this.traceEntry(m,[_35,_36,_37]);}var _38=null;if(_35&&_36){var _39=_35.lastIndexOf("#");var _3a=null;if(_39>-1){_3a=_35.substring(_39);_38=_35.substring(0,_39);}else{_38=_35;}var _3b=null;var _3c=_38.indexOf("?");if(_3c!=-1){var _3d=_38.lastIndexOf(";",_3c);if(_3d!=-1){_3b=_38.substring(_3d);_38=_38.substring(0,_3d);}if(_38.length-1>_3c){_38=_38+"&";}}else{_38=_38+"?";}if(_37){if(_37 instanceof Array){for(i=0;i<_37.length;i++){_38=_38+encodeURIComponent(_36)+"="+encodeURIComponent(_37[i]);if(i+1<_37.length){_38=_38+"&";}}}else{_38=_38+encodeURIComponent(_36)+"="+encodeURIComponent(_37);}}else{_38=_38+encodeURIComponent(_36)+"=";}if(_3b){_38=_38+_3b;}if(_3a){_38=_38+_3a;}}else{_38=_35;}if(this._isTracing){this.traceExit(m,_38);}return _38;},appendPath:function(_3e,_3f){var m="appendPath(p_url, p_path)";if(this._isTracing){this.traceEntry(m,[_3e,_3f]);}var _40;if(_3f.length>0){if(_3e.length>0){var _41=_3e.length-1;var _42;if(_3e.charAt(_41)=="/"){_42=_3e.substring(0,_41);}else{_42=_3e;}if(_3f.charAt(0)=="/"){_40=_42+_3f;}else{_40=_42+"/"+_3f;}}else{_40=_3f;}}else{_40=_3e;}if(this._isTracing){this.traceExit(m,_40);}return _40;},generateProxiedUrl:function(_43,_44){var m="generateProxiedUrl(p_url, p_wpsContext)";if(this._isTracing){this.traceEntry(m,[_43,_44]);}var _45=_43;if(_44.length>0){var _46=null;if(_44.charAt(0)=="/"){_46=_44;}else{_46="/"+_44;}_46=_46+this.downloadAjaxProxyContext+"/";var _47=this.getProtocol(_43);if(_47&&_47.length>0){_46=_46+_47+"/";var _48=this.getHost(_43);if(_48&&_48.length>0){_46=_46+_48;var _49=this.getPort(_43);if(_49&&_49.length>0){_46=_46+"%3A"+_49;}var _4a=this.getFile(_43);if(_4a&&_4a.length>0){_46=_46+_4a;}_45=_46;}}}if(this._isTracing){this.traceExit(m,_45);}return _45;},normalizePlaceholders:function(_4b){var m="normalizePlaceholders(p_url)";if(this._isTracing){this.traceEntry(m,_4b);}var _4c=_4b.replace(/%7b/g,"%7B").replace(/%7d/g,"%7D");if(this._isTracing){this.traceExit(m,_4c);}return _4c;}});com.ibm.workplace.wcm.ecm.picker.util.URLUtils._INSTANCE=new com.ibm.workplace.wcm.ecm.picker.util.URLUtils();}if(!dojo._hasResource["com.ibm.workplace.wcm.ecm.picker.widget.ServerConnectionPageWidget"]){dojo._hasResource["com.ibm.workplace.wcm.ecm.picker.widget.ServerConnectionPageWidget"]=true;dojo.provide("com.ibm.workplace.wcm.ecm.picker.widget.ServerConnectionPageWidget");dojo.registerModulePath("com.ibm.workplace.wcm.ecm.picker.widget","../com/ibm/workplace/wcm/ecm/picker/widget");dojo.require("dijit.form.TextBox");dojo.require("dojo.string");dojo.declare("com.ibm.workplace.wcm.ecm.picker.widget.ServerConnectionPageWidget",[com.ibm.workplace.wcm.ecm.picker.widget.GenericWizardPageWidget],{blankImgUrl:dojo.moduleUrl("dojo","resources/blank.gif").toString(),namespace:"srvConnPgWdgt_",templateString:"<div dojoAttachPoint=\"serverConnectionPageDiv, containerNode\" id=\"${namespace}serverConnectionPageDiv_id\" name=\"${namespace}serverConnectionPageDiv\">\n    <form dojoAttachPoint=\"serverConnectionPageForm\"\n          name=\"${namespace}serverConnectionForm\"\n          class=\"lotusForm2 lotusFormTable formBkgr\"\n          id=\"${namespace}serverConnectionForm_id\"\n          style=\"max-height:none;\">\n\n        <div style=\"display: none;\">\n            <label id=\"${namespace}serverSelectionRadioGroupHeader_id\">${_nlsUserInterface.srvConnPage.serverSelectionHeading}</label>\n        </div>\n        <div role=\"radiogroup\" aria-labelledby=\"${namespace}serverSelectionRadioGroupHeader_id\">\n            <div class=\"feddocTopSpace\" dojoAttachPoint=\"presetServerDiv\" name=\"${namespace}presetServerDiv\" id=\"${namespace}presetServerDiv_id\">\n                <input dojoAttachPoint=\"presetServerRadioButton\" dojoType=\"dijit.form.RadioButton\" class=\"lotusCheckbox\" id=\"${namespace}presetServerRadioButton_id\"\n                       type=\"radio\" role=\"radio\" value=\"preset\" name=\"serverType\"\n                       aria-labelledby=\"${namespace}presetServerRadioButton.lbl\" checked aria-checked=\"true\"/>\n                <label id=\"${namespace}presetServerRadioButton.lbl\" class=\"lotusCheckbox\" for=\"${namespace}presetServerRadioButton_id\">\n                    <span dojoAttachPoint=\"presetServerRadioButtonLabel\">${_nlsUserInterface.srvConnPage.presetServerRadioButtonLabel}</span>\n                </label>\n               <div role=\"region\" aria-labelledby=\"${namespace}presetServerRadioButton.lbl\" aria-expanded=\"true\" class=\"feddocTopSpaceSmall\" dojoAttachPoint=\"presetServerSection\" name=\"${namespace}presetServerSection\" id=\"${namespace}presetServerSection_id\" style=\"margin-left: 10px; overflow: hidden;\">\n                    <div dojoAttachPoint=\"fedDocNoServersInfoDiv\" id=\"${namespace}fedDocNoServersInfoDiv_id\" name=\"${namespace}fedDocNoServersInfoDiv\" title=\"${_nlsUserInterface.srvConnPage.altTextInformation}\" style=\"display:none;\" class=\"lotusMessage lotusInfo feddocTopSpaceSmall feddocNoServersInfoBox\">\n                        <img src=\"${blankImgUrl}\" width=\"16\" height=\"16\" class=\"feddocInfoIcon\" alt=\"${_nlsUserInterface.srvConnPage.altTextInformation}\" />\n                        <span>${_nlsMessages.srvConnPage.noServersMessage}</span>\n                    </div>\n                     <div dojoAttachPoint=\"presetServersListDiv\" class=\"feddocServerSelection\" tabindex=\"-1\">\n                        <ul dojoAttachPoint=\"presetServersList\" name=\"${namespace}presetServersList\" id=\"${namespace}presetServersList_id\" class=\"lotusList lotusMeta\" tabindex=\"-1\" style=\"float: left; min-width: 100%;\">\n                        </ul>\n                    </div>\n                </div>\n            </div>\n            <div class=\"feddocTopSpaceSmall\" dojoAttachPoint=\"customServerDiv\" name=\"${namespace}customServerDiv\" id=\"${namespace}customServerDiv_id\">\n                <input dojoAttachPoint=\"customServerRadioButton\" dojoType=\"dijit.form.RadioButton\" class=\"lotusCheckbox\" id=\"${namespace}customServerRadioButton_id\"\n                      type=\"radio\" role=\"radio\" value=\"custom\" name=\"serverType\"\n                      aria-labelledby=\"${namespace}customServerRadioButton.lbl\" aria-checked=\"false\"/>\n                <label id=\"${namespace}customServerRadioButton.lbl\" class=\"lotusCheckbox\" for=\"${namespace}customServerRadioButton_id\">\n                    <span dojoAttachPoint=\"customServerRadioButtonLabel\">${_nlsUserInterface.srvConnPage.customServerRadioButtonLabel}</span>\n                </label>\n                <!-- by using two separate 'style' attributes on the following DIV element, we can avoid the\n                     crop-at-the-top bug in Opera -->\n                <div style=\"padding-top: 1px; margin-left: 10px;\" role=\"region\" aria-labelledby=\"${namespace}customServerRadioButton.lbl\" aria-expanded=\"true\" dojoAttachPoint=\"customServerSection\" name=\"${namespace}customServerSection\" id=\"${namespace}customServerSection_id\" class=\"feddocTopSpaceSmall\" style=\"overflow: hidden;\">\n                    <input role=\"textbox\" aria-labelledby=\"${namespace}customServerRadioButton.lbl\" dojoAttachPoint=\"customUrlTextBox\" dojoType=\"dijit.form.TextBox\" type=\"text\"\n                           name=\"${namespace}customUrlTextBox\" id=\"${namespace}customUrlTextBox_id\"  class=\"lotusText feddocCustomUrlTextBox\"\n                           title=\"${_nlsUserInterface.srvConnPage.customUrlTextBoxTitle}\" intermediateChanges=\"true\"/>\n                    <label id=\"${namespace}customUrlTextBox.lbl\" class=\"lotusInactive feddocSampleText\" for=\"${namespace}customUrlTextBox_id\" aria-label=\"${_nlsUserInterface.srvConnPage.customUrlTextBoxLabel}\">\n                        <span dojoAttachPoint=\"customUrlTextBoxLabel\" class=\"feddocCustomUrlTextBox\">${_nlsUserInterface.srvConnPage.customUrlTextBoxLabel}</span>\n                    </label><br/>\n                </div>\n            </div>\n        </div>\n    </form>\n    <div class=\"feddocTopSpace\">\n        <h4 class=\"feddocHeader4\">\n            <label id=\"${namespace}fedDocPickerAuthTypeInfoMsg.lbl\" aria-label=\"${_nlsUserInterface.srvConnPage.fedDocPickerAuthTypeInfoMsgLabel}\">\n                <span dojoAttachPoint=\"fedDocPickerAuthTypeInfoMsgLabel\"><b>${_nlsUserInterface.srvConnPage.fedDocPickerAuthTypeInfoMsgLabel}</b></span>\n            </label>\n        </h4>\n        <div>\n            <span dojoAttachPoint=\"fedDocPickerAuthInfo\" id=\"${namespace}fedDocPickerAuthTypeInfoMsg_id\" name=\"${namespace}fedDocPickerAuthTypeInfoMsg\" aria-labelledby=\"${namespace}fedDocPickerAuthTypeInfoMsg.lbl\">\n                <!-- being filled with informative text dynamically by the widget -->\n            </span>\n        </div>\n        <!-- Authentication selection section BEGIN -->\n        <div dojoAttachPoint=\"authSelectionSection\" id=\"${namespace}authSelectionSection\" name=\"${namespace}authSelectionSection\"></div>\n        <!-- Authentication selection section END -->\n    </div>\n</div>\n",widgetsInTemplate:true,_allOverrideAuthenticationDisabled:false,_authenticationInfoMsg:"",_authProperties:null,_authWidget:null,_authWidgetSection:null,_authWidgetSectionArguments:null,_availableAuthTypes:[],_callingEnvironment:com.ibm.workplace.wcm.ecm.picker.util.FederatedDocumentsDefinitions._wcm,_customServerSectionHeight:0,_customServiceSelectionEnabled:true,_documentsServices:[],_eventHandles:[],_feedType:String,_isTracing:false,_isAuthWidgetInitialized:false,_presetServerSectionHeight:0,_selectedUrl:"",_selPresetServerIndex:-1,_focusedPresetServerIndex:-1,_quickSearchText:"",_numPresetFocusEvts:0,_numPresetBlurEvts:0,_focusBlurEvtCountTimer:null,_selPresetServerPageSize:5,_selPresetType:com.ibm.workplace.wcm.ecm.picker.util.FederatedDocumentsDefinitions._cmis,_selPresetURL:"",_selServiceId:"",_startUpWasCalled:false,_urlChangesDelay:250,_urlSelectionMode:"preset",_urlStore:null,_urlTextChangedTimerHandle:null,_vaultSelectionEnabled:true,_vaultSlotsAvailable:false,buildRendering:function(){var m="buildRendering()";if(this._isTracing){this.traceEntry(m);}this.inherited(arguments);if(this._isTracing){this.traceExit(m);}},constructor:function(_4d){this._isTracing=this.isTracing();var m="constructor(p_params)";if(this._isTracing){this.traceEntry(m,_4d);if(_4d){this.trace(m,"p_params.authProperties:",dojo.toJson(_4d.authProperties));this.trace(m,"p_params.availableAuthTypes:",dojo.toJson(_4d.availableAuthTypes));this.trace(m,"p_params.callingEnvironment:",_4d.callingEnvironment);this.trace(m,"p_params.customServiceSelectionEnabled:",_4d.customServiceSelectionEnabled);this.trace(m,"p_params.documentsServices:",dojo.toJson(_4d.documentsServices));this.trace(m,"p_params.namespace:",_4d.namespace);this.trace(m,"p_params.vaultSelectionEnabled:",_4d.vaultSelectionEnabled);this.trace(m,"p_params.vaultSelectionEnabledForPZN:",_4d.vaultSelectionEnabledForPZN);this.trace(m,"p_params.vaultSelectionEnabledForWCM:",_4d.vaultSelectionEnabledForWCM);this.trace(m,"p_params.vaultSlots:",dojo.toJson(_4d.vaultSlots));}}this._eventHandles=[];if(typeof _4d.callingEnvironment=="string"){this._callingEnvironment=_4d.callingEnvironment;}if(typeof _4d.customServiceSelectionEnabled=="boolean"){this._customServiceSelectionEnabled=_4d.customServiceSelectionEnabled;}if(typeof _4d.namespace=="string"){this.namespace=_4d.namespace;}this._vaultSlotsAvailable=(_4d.vaultSlots)&&(_4d.vaultSlots.length>0);if(typeof _4d.vaultSelectionEnabled=="boolean"){this._vaultSelectionEnabled=_4d.vaultSelectionEnabled;}else{if(this._isCalledFromWCM()){var _4e=true;if(typeof _4d.vaultSelectionEnabledForWCM=="boolean"){_4e=_4d.vaultSelectionEnabledForWCM;}this._vaultSelectionEnabled=this._vaultSelectionEnabledForWCM;}else{if(this._isCalledFromPZN()){var _4f=true;if(typeof _4d.vaultSelectionEnabledForPZN=="boolean"){_4f=_4d.vaultSelectionEnabledForPZN;}this._vaultSelectionEnabled=_4f;}else{this._vaultSelectionEnabled=false;}}}if(this._isTracing){this.trace(m,"Determined credential vault selection support setting:",this._vaultSelectionEnabled);}this._authProperties={"authType":com.ibm.workplace.wcm.ecm.picker.widget.AuthenticationWidget._authTypeCurrentUser};if(_4d.documentsServices&&dojo.isArray(_4d.documentsServices)){this._documentsServices=_4d.documentsServices;this._allOverrideAuthenticationDisabled=(this._documentsServices.length>0);for(var i=0;i<this._documentsServices.length;i++){if(this._allOverrideAuthenticationDisabled){if(this._documentsServices[i].vaultslot){this._allOverrideAuthenticationDisabled=!this._documentsServices[i].overrideAuthentication;}else{this._allOverrideAuthenticationDisabled=false;}}this._documentsServices[i].decodedurl=decodeURIComponent(this._documentsServices[i].url);this._documentsServices[i].decodedvaultslot=decodeURIComponent(this._documentsServices[i].vaultslot);this._documentsServices[i].decodedtype=this._mapResEnvTypeToJsType(this._documentsServices[i].type);var _50;if(this._documentsServices[i].title){this._documentsServices[i].decodedTitle=decodeURIComponent(this._documentsServices[i].title);this._documentsServices[i].tooltip=this._documentsServices[i].decodedurl;}else{this._documentsServices[i].decodedTitle=this._documentsServices[i].decodedurl;this._documentsServices[i].tooltip=this._documentsServices[i].decodedurl;}}}this._availableAuthTypes=[];if(_4d.availableAuthTypes){this._availableAuthTypes=_4d.availableAuthTypes;}else{this._availableAuthTypes=[com.ibm.workplace.wcm.ecm.picker.widget.AuthenticationWidget._authTypeCurrentUser];if(this._isCalledFromWCM()){this._availableAuthTypes.push(com.ibm.workplace.wcm.ecm.picker.widget.AuthenticationWidget._authTypeUserPwd);}if(this._vaultSelectionEnabled){this._availableAuthTypes.push(com.ibm.workplace.wcm.ecm.picker.widget.AuthenticationWidget._authTypeVault);}}var _51={"authProperties":this._authProperties,"availableAuthTypes":this._availableAuthTypes,"namespace":this.namespace,"nlsMessages":this._nlsMessages,"nlsUserInterface":this._nlsUserInterface,"onChangeAuthenticationMode":dojo.hitch(this,"_onAuthenticationChange"),"onErrorStateChanged":dojo.hitch(this,"_onAuthWidgetErrorStateChanged"),"vaultSlots":_4d.vaultSlots};this._authWidget=new com.ibm.workplace.wcm.ecm.picker.widget.AuthenticationWidget(_51);this._isAuthWidgetInitialized=false;var _52=this._calculateAuthSectionHeight();this._authWidgetSectionArguments={"namespace":this.namespace,"nlsMessages":this._nlsMessages,"nlsUserInterface":this._nlsUserInterface,"onCollapsed":dojo.hitch(this,"_onAuthenticationSectionCollapsed"),"onExpanded":dojo.hitch(this,"_onAuthenticationSectionExpanded"),"openHeight":_52,"openWidth":20,"sectionID":"auth","sectionTitleText":this._nlsUserInterface.srvConnPage.authWidgetSectionTitle,"visible":true,"widgetInstance":this._authWidget};var _53=this._nlsUserInterface.srvConnPage;this._stepLabel=_53.stepLabel;this._stepDescription=_53.stepDescription;this._startUpWasCalled=false;if(this._isTracing){this.traceExit(m);}},destroy:function(){var m="destroy()";if(this._isTracing){this.traceEntry(m);}this.inherited(arguments);if(this._isTracing){this.traceExit(m);}},getSettings:function(){var m="getSettings()";if(this._isTracing){this.traceEntry(m);}var _54=this._authWidget.getAuthenticationProperties();var _55;if(this._urlSelectionMode=="preset"){_55=this._selServiceId;}else{_55="";}var _56={"authProperties":_54,"authInfoMsg":this._authenticationInfoMsg,"feedType":this._feedType,"serverUrl":this._getUrl(),"serverType":this._determineServerType(),"serviceId":_55};if(this._isTracing){this.traceExit(m,_56);}return _56;},layout:function(){var m="layout()";if(this._isTracing){this.traceEntry(m);}var _57=dijit.byId(this.namespace+"customUrlTextBox_id").domNode;var _58=dojo.contentBox(this.customServerSection).w-20;if(_58>=0){dojo.style(_57,"width",_58+"px");}if(this._isTracing){this.traceExit(m);}},postCreate:function(){var m="postCreate()";if(this._isTracing){this.traceEntry(m);}this.inherited(arguments);this._authWidgetSection=new com.ibm.workplace.wcm.ecm.picker.widget.ExpandableSectionWidget(this._authWidgetSectionArguments);if(this._authWidgetSection&&(this._customServiceSelectionEnabled||!this._allOverrideAuthenticationDisabled)){this._authWidgetSection.placeAt(this.authSelectionSection);}this._presetServerSectionHeight=22.5;this._customServerSectionHeight=8;this._setPresetServerSectionVisible(true,false);if(this._customServiceSelectionEnabled){this._setCustomServerSectionVisible(false,false);}else{this._setCustomServerDivVisible(false);}this._buildPresetServerList();if(this._availableAuthTypes.length===0){dojo.style(this.authSelectionSection,"display","none");dijit.setWaiState(this.authSelectionSection,"hidden",true);}this._initEventHandles();if(this._isTracing){this.traceExit(m);}},setFeedType:function(_59){var m="setFeedType(p_feedType)";if(this._isTracing){this.traceEntry(m,_59);}this._feedType=_59;if(this._isTracing){this.traceExit(m);}},startup:function(){var m="startup()";if(this._isTracing){this.traceEntry(m);}if(!this._startUpWasCalled){this._authWidget.startup();this._authWidgetSection.startup();this._onAuthenticationChange(this._authProperties);if(this._documentsServices.length>0){this._selectPresetServerListIndex(0);}this._startUpWasCalled=true;}this.inherited(arguments);if(this._isTracing){this.traceExit(m);}},uninitialize:function(){var m="uninitialize()";if(this._isTracing){this.traceEntry(m);}this._clearEventHandles();this.inherited(arguments);if(this._isTracing){this.traceExit(m);}},_animateCloseSection:function(_5a){var m="_animateCloseSection(p_domNode)";if(this._isTracing){this.traceEntry(m,_5a);}if(!dojo.hasClass(_5a,"lotusHidden")){dojo.style(_5a,"overflow","hidden");dojo.animateProperty({"node":_5a,"duration":800,"properties":{"height":{"end":0,"units":"px"}},"onEnd":dojo.hitch(this,function(){dojo.addClass(_5a,"lotusHidden");dijit.setWaiState(_5a,"hidden",true);dijit.removeWaiState(_5a,"expanded");this._layoutChanged();})}).play();}if(this._isTracing){this.traceExit(m);}},_animateOpenSection:function(_5b,_5c){var m="_animateOpenSection(p_domNode, p_targetHeight)";if(this._isTracing){this.traceEntry(m,[_5b,_5c]);}if(dojo.hasClass(_5b,"lotusHidden")){dojo.style(_5b,"overflow","hidden");dojo.marginBox(_5b,{h:"0ex"});dojo.style(_5b,"height","0ex");dojo.removeClass(_5b,"lotusHidden");dijit.setWaiState(_5b,"hidden",false);dijit.setWaiState(_5b,"expanded",true);dojo.animateProperty({"node":_5b,"duration":800,"properties":{"height":{"end":_5c,"units":"ex"}},"onEnd":dojo.hitch(this,function(){dojo.marginBox(_5b,{h:_5c+"ex"});this._layoutChanged();})}).play();}if(this._isTracing){this.traceExit(m);}},_buildAuthenticationInfoMsg:function(_5d){var m="_buildAuthenticationInfoMsg(p_authProps)";if(this._isTracing){this.traceEntry(m,dojo.toJson(_5d));}if(_5d){if(_5d.authType){switch(_5d.authType){case com.ibm.workplace.wcm.ecm.picker.widget.AuthenticationWidget._authTypeVault:this._authenticationInfoMsg=dojo.string.substitute(this._nlsUserInterface.srvConnPage.authInfoMsgVault,[_5d.vaultSlotID]);break;case com.ibm.workplace.wcm.ecm.picker.widget.AuthenticationWidget._authTypeUserPwd:this._authenticationInfoMsg=this._nlsUserInterface.srvConnPage.authInfoMsgUserPwd;break;case com.ibm.workplace.wcm.ecm.picker.widget.AuthenticationWidget._authTypeCurrentUser:this._authenticationInfoMsg=this._nlsUserInterface.srvConnPage.authInfoMsgCurrentUser;break;default:this._authenticationInfoMsg=this._nlsUserInterface.srvConnPage.authInfoMsgUnknown;break;}}else{this._authenticationInfoMsg="";}}else{this._authenticationInfoMsg="";}if(this._isTracing){this.trace(m,"New authentication information message:",this._authenticationInfoMsg);this.traceExit(m);}},_countEventsTimerFn:function(){if(this._numPresetBlurEvts==this._numPresetFocusEvts){this._quickSearchText="";this._numPresetBlurEvts=0;this._numPresetFocusEvts=0;}},_buildPresetServerList:function(){var m="_buildPresetServerList()";if(this._isTracing){this.traceEntry(m);this.trace(m,"Preset document services:",this._documentsServices);}if(this._documentsServices){for(var i=0;i<this._documentsServices.length;i++){var li=dojo.create("li",{"id":this.namespace+"_presetServer_"+i+"_item_id","name":this.namespace+"_presetServer_"+i+"_item","title":this._documentsServices[i].tooltip},this.presetServersList);var _5e=dojo.create("span",{"id":this.namespace+"_presetServer_"+i+"_item_text_id","name":this.namespace+"_presetServer_"+i+"_item_text","innerHTML":this._documentsServices[i].decodedTitle,"tabindex":(i===0)?"0":"-1"},li);dijit.setWaiState(_5e,"label",this._documentsServices[i].decodedTitle);dojo.place(li,this.presetServersList,"last");dojo.place(_5e,li,"last");dijit.setWaiRole(_5e,"option");dijit.setWaiState(_5e,"selected",false);dijit.setWaiState(_5e,"posinset",(i+1));dijit.setWaiState(_5e,"setsize",this._documentsServices.length);this._documentsServices[i].domNode=li;this._documentsServices[i].focusNode=_5e;this._eventHandles.push(dojo.connect(li,"onclick",dojo.hitch(this,function(i){this._deselectPresetServerItem();this._selectPresetServerItem(i);},i)));this._eventHandles.push(dojo.connect(li,"onmouseover",dojo.hitch(this,function(i){this._setHoverHighlightItem(i,true);},i)));this._eventHandles.push(dojo.connect(li,"onmouseout",dojo.hitch(this,function(i){this._setHoverHighlightItem(i,false);},i)));this._eventHandles.push(dojo.connect(_5e,"onblur",dojo.hitch(this,function(i){this._numPresetBlurEvts++;clearTimeout(this._focusBlurEvtCountTimer);this._focusBlurEvtCountTimer=setTimeout(dojo.hitch(this,"_countEventsTimerFn"),20);},i)));this._eventHandles.push(dojo.connect(_5e,"onfocus",dojo.hitch(this,function(i){this._numPresetFocusEvts++;clearTimeout(this._focusBlurEvtCountTimer);},i)));}}if(!this._documentsServices||(this._documentsServices.length===0)){this._presetServerSectionHeight=8;this._showNoServersMessage();}else{dijit.setWaiRole(this.presetServersList,"listbox");}if(this._isTracing){this.traceExit(m);}},_calculateAuthSectionHeight:function(){var m="_calculateAuthSectionHeight()";if(this._isTracing){this.traceEntry(m);this.trace(m,"Available authentication types:",this._availableAuthTypes);}var hv=0;for(var i=0;i<this._availableAuthTypes.length;i++){switch(this._availableAuthTypes[i]){case com.ibm.workplace.wcm.ecm.picker.widget.AuthenticationWidget._authTypeVault:if(this._vaultSlotsAvailable){hv+=12;}break;case com.ibm.workplace.wcm.ecm.picker.widget.AuthenticationWidget._authTypeUserPwd:hv+=19;break;case com.ibm.workplace.wcm.ecm.picker.widget.AuthenticationWidget._authTypeCurrentUser:hv+=3.5;break;default:break;}}if(this._isTracing){this.traceExit(m,hv);}return hv;},_clearEventHandles:function(){var m="_clearEventHandles()";if(this._isTracing){this.traceEntry(m);}dojo.forEach(this._eventHandles,dojo.disconnect);this._eventHandles=[];if(this._isTracing){this.traceExit(m);}},_unfocusPresetServerItem:function(){if(this._documentsServices){if((this._focusedPresetServerIndex>=0)&&(this._focusedPresetServerIndex<this._documentsServices.length)){var ds=this._documentsServices[this._focusedPresetServerIndex];if(ds){if(ds.domNode){dojo.attr(ds.focusNode,"tabindex","-1");this._focusedPresetServerIndex=-1;}}}}},_deselectPresetServerItem:function(){var m="_deselectPresetServerItem()";if(this._isTracing){this.traceEntry(m);this.trace(m,"Preset document services:",this._documentsServices);}if(this._documentsServices){for(var i=0;i<this._documentsServices.length;i++){var ds=this._documentsServices[i];if(ds.domNode){if(dojo.hasClass(ds.domNode,"lotusSelected")){dojo.removeClass(ds.domNode,"lotusSelected");dijit.setWaiState(ds.focusNode,"selected",false);this._selPresetURL="";this._selPresetType=null;this._selServiceId="";dojo.attr(ds.focusNode,"tabindex","-1");this._selPresetServerIndex=-1;break;}}}}if(this._isTracing){this.traceExit(m);}},_determineReadyState:function(){var m="_determineReadyState()";if(this._isTracing){this.traceEntry(m);this.trace(m,"Current authentication settings:",this._authProperties);}var _5f=false;var _60=this._authWidget.getAuthenticationProperties();if(_60){if(_60.authType){switch(_60.authType){case com.ibm.workplace.wcm.ecm.picker.widget.AuthenticationWidget._authTypeVault:_5f=(_60.vaultSlotID!=="");break;case com.ibm.workplace.wcm.ecm.picker.widget.AuthenticationWidget._authTypeNoAuth:_5f=true;break;case com.ibm.workplace.wcm.ecm.picker.widget.AuthenticationWidget._authTypeUserPwd:_5f=true;break;case com.ibm.workplace.wcm.ecm.picker.widget.AuthenticationWidget._authTypeCurrentUser:_5f=true;break;default:_5f=false;break;}}}if(this._isTracing){this.trace(m,"New authentication ready state:",_5f);this.trace(m,"Selected URL",this._getUrl());}this._setReadyValue((this._getUrl()!=="")&&_5f);if(this._isTracing){this.traceExit(m);}},_determineServerType:function(){var m="_determineServerType()";if(this._isTracing){this.traceEntry(m);}var _61;if(this._feedType!==null){_61=this._feedType;}else{if(this._urlSelectionMode=="preset"){_61=this._selPresetType;}else{_61=null;}}if(this._isTracing){this.traceExit(m,_61);}return _61;},_enableAuthSection:function(_62){var m="_enableAuthSection()";if(this._isTracing){this.traceEntry(m,_62);}if(_62){dojo.style(this.authSelectionSection,"display","block");dojo.removeClass(this.fedDocPickerAuthInfo,"lotusInactive");}else{dojo.style(this.authSelectionSection,"display","none");dojo.addClass(this.fedDocPickerAuthInfo,"lotusInactive");}if(this._isTracing){this.traceExit(m);}},_getConfiguredDocumentsService:function(_63){var m="_getConfiguredDocumentsService(p_url)";if(this._isTracing){this.traceEntry(m,_63);this.trace(m,"Preset document services:",this._documentsServices);}var _64=-1;for(var i=0;i<this._documentsServices.length;i++){if(_63==this._documentsServices[i].decodedurl){_64=i;}}if(this._isTracing){this.traceExit(m,_64);}return _64;},_getUrl:function(){var m="_getUrl()";if(this._isTracing){this.traceEntry(m);}var _65;if(this._urlSelectionMode=="preset"){_65=this._selPresetURL;}else{_65=this.customUrlTextBox.attr("value");}if(this._isTracing){this.trace(m,"Currently selected URL:",_65);}var url;var _66=_65.match("https?://.*");if(_66&&_66.length>0){url=dojo.trim(_66[0]);}else{url=dojo.trim(_65);}if(this._isTracing){this.traceExit(m,url);}return url;},_initEventHandles:function(){var m="_initEventHandles()";if(this._isTracing){this.traceEntry(m);}this._eventHandles.push(dojo.connect(this.presetServersList,"onkeypress",dojo.hitch(this,"_onPresetServerKeyPressed")));this._eventHandles.push(dojo.connect(this.customUrlTextBox,"onChange",dojo.hitch(this,"_onUrlTextBoxChanged")));this._eventHandles.push(dojo.connect(this.presetServerRadioButton,"onClick",dojo.hitch(this,"_onClickPresetServerButton")));this._eventHandles.push(dojo.connect(this.customServerRadioButton,"onClick",dojo.hitch(this,"_onClickCustomServerButton")));this._eventHandles.push(dojo.connect(this.serverConnectionPageForm,"onsubmit",dojo.hitch(this,"_onSubmit")));if(this._isTracing){this.traceExit(m);}},_isCalledFromPZN:function(){var m="_isCalledFromPZN()";if(this._isTracing){this.traceEntry(m);}var _67=this._callingEnvironment===com.ibm.workplace.wcm.ecm.picker.util.FederatedDocumentsDefinitions._pzn;if(this._isTracing){this.traceExit(m,_67);}return _67;},_isCalledFromWCM:function(){var m="_isCalledFromWCM()";if(this._isTracing){this.traceEntry(m);}var _68=this._callingEnvironment===com.ibm.workplace.wcm.ecm.picker.util.FederatedDocumentsDefinitions._wcm;if(this._isTracing){this.traceExit(m,_68);}return _68;},_mapResEnvTypeToJsType:function(_69){var m="_mapResEnvTypeToJsType(p_serverType)";if(this._isTracing){this.traceEntry(m,_69);}var _6a="";if(typeof _69=="string"){switch(_69){case com.ibm.workplace.wcm.ecm.picker.util.FederatedDocumentsDefinitions.resEnvTypeCMIS:_6a=com.ibm.workplace.wcm.ecm.picker.util.FederatedDocumentsDefinitions._cmis;break;case com.ibm.workplace.wcm.ecm.picker.util.FederatedDocumentsDefinitions.resEnvTypeQDS:_6a=com.ibm.workplace.wcm.ecm.picker.util.FederatedDocumentsDefinitions._qds;break;default:_6a=com.ibm.workplace.wcm.ecm.picker.util.FederatedDocumentsDefinitions._cmis;break;}}else{_6a=com.ibm.workplace.wcm.ecm.picker.util.FederatedDocumentsDefinitions._cmis;}if(this._isTracing){this.traceExit(m,_6a);}return _6a;},_focusPresetServerListIndex:function(_6b){var _6c=_6b;if(_6c<0){_6c=0;}if(_6c>this._documentsServices.length-1){_6c=this._documentsServices.length-1;}this._unfocusPresetServerItem();this._focusPresetServerItem(_6c);},_selectPresetServerListIndex:function(_6d){var m="_selectPresetServerListIndex(p_newIndex)";if(this._isTracing){this.traceEntry(m,_6d);}var _6e=_6d;if(_6e<0){_6e=0;}if(_6e>this._documentsServices.length-1){_6e=this._documentsServices.length-1;}this._deselectPresetServerItem();this._selectPresetServerItem(_6e);if(this._isTracing){this.traceExit(m);}},_onAuthWidgetErrorStateChanged:function(_6f,_70,_71,_72){var m="_onAuthWidgetErrorStateChanged(p_sender, p_errorState, p_errorMsg, p_errorDetails)";if(this._isTracing){this.traceEntry(m,[_6f,_70,_71,_72]);}if(_70===true){this._showError(_71,_72);}else{if(_70===false){this._clearError();}else{}}if(this._isTracing){this.traceExit(m);}},_doSearchServerItem:function(_73){if(_73<0){_73=0;}if(_73>this._documentsServices.length-1){_73=0;}idx=_73;var svc;for(var i=0;i<this._documentsServices.length;i++){svc=this._documentsServices[idx];if(svc.decodedTitle&&svc.decodedTitle.toUpperCase().indexOf(this._quickSearchText)===0){this._selectPresetServerListIndex(idx);break;}idx++;if(idx>this._documentsServices.length-1){idx=0;}}},_searchNextServerItem:function(){this._doSearchServerItem(this._selPresetServerIndex+1);},_searchServerItem:function(){this._doSearchServerItem(0);},_onPresetServerKeyPressed:function(_74){var m="_onPresetServerKeyPressed(p_evt)";if(this._isTracing){this.traceEntry(m,[_74]);}if((_74.charCode==dojo.keys.SPACE)&&(this._quickSearchText==="")){dojo.stopEvent(_74);this._selectPresetServerListIndex(this._focusedPresetServerIndex);}if(_74.charCode&&(!_74.ctrlKey)&&String.fromCharCode){var _75=String.fromCharCode(_74.charCode);if(_75){_75=_75.toUpperCase();}if((this._quickSearchText.length==1)&&(_75==this._quickSearchText)){this._searchNextServerItem();}else{this._quickSearchText=this._quickSearchText+_75;this._searchServerItem();}}if(_74.keyCode){var _76=_74.target;switch(_74.keyCode){case dojo.keys.UP_ARROW:dojo.stopEvent(_74);this._quickSearchText="";if(_74.ctrlKey){this._focusPresetServerListIndex(this._focusedPresetServerIndex-1);}else{this._selectPresetServerListIndex(this._focusedPresetServerIndex-1);}break;case dojo.keys.DOWN_ARROW:dojo.stopEvent(_74);this._quickSearchText="";if(_74.ctrlKey){this._focusPresetServerListIndex(this._focusedPresetServerIndex+1);}else{this._selectPresetServerListIndex(this._focusedPresetServerIndex+1);}break;case dojo.keys.PAGE_UP:dojo.stopEvent(_74);this._quickSearchText="";if(_74.ctrlKey){this._focusPresetServerListIndex(this._focusedPresetServerIndex-this._selPresetServerPageSize);}else{this._selectPresetServerListIndex(this._focusedPresetServerIndex-this._selPresetServerPageSize);}break;case dojo.keys.PAGE_DOWN:dojo.stopEvent(_74);this._quickSearchText="";if(_74.ctrlKey){this._focusPresetServerListIndex(this._focusedPresetServerIndex+this._selPresetServerPageSize);}else{this._selectPresetServerListIndex(this._focusedPresetServerIndex+this._selPresetServerPageSize);}break;case dojo.keys.HOME:dojo.stopEvent(_74);this._quickSearchText="";if(_74.ctrlKey){this._focusPresetServerListIndex(0);}else{this._selectPresetServerListIndex(0);}break;case dojo.keys.END:dojo.stopEvent(_74);this._quickSearchText="";if(_74.ctrlKey){this._focusPresetServerListIndex(this._documentsServices.length-1);}else{this._selectPresetServerListIndex(this._documentsServices.length-1);}break;case dojo.keys.ENTER:this._quickSearchText="";if(this._focusedPresetServerIndex!=this._selPresetServerIndex){this._focusPresetServerListIndex(this._selPresetServerIndex);}this._onSubmit(_74);break;default:break;}}if(this._isTracing){this.traceExit(m,false);}},_onSubmit:function(_77){var m="_onSubmit(p_evt)";if(this._isTracing){this.traceEntry(m,[_77]);}dojo.stopEvent(_77);if(this._onDefaultAction&&dojo.isFunction(this._onDefaultAction)){this._onDefaultAction();}if(this._isTracing){this.traceExit(m,false);}return false;},_setAuthTypeForPresetServer:function(){var m="_setAuthTypeForPresetServer()";if(this._isTracing){this.traceEntry(m);}var url=this._getUrl();var _78=false;var _79="";var _7a=false;var _7b=true;var i=this._getConfiguredDocumentsService(url);if(i>=0){_79=this._documentsServices[i].decodedvaultslot;_7a=this._authWidget.isVaultSlotAvailable(_79);_7b=this._documentsServices[i].overrideAuthentication.toLowerCase()!="false";}if((_79)&&(_79!="undefined")&&(_79!=="")){if(_7a){this._authWidget.changeAuthType(com.ibm.workplace.wcm.ecm.picker.widget.AuthenticationWidget._authTypeVault);this._clearError();_78=!_7b;}else{this._authWidget.changeAuthType(com.ibm.workplace.wcm.ecm.picker.widget.AuthenticationWidget._authTypeCurrentUser);this._showError(dojo.string.substitute(this._nlsMessages.srvConnPage.errorVaultSlotMissing,[_79]));}}else{this._authWidget.changeAuthType(com.ibm.workplace.wcm.ecm.picker.widget.AuthenticationWidget._authTypeCurrentUser);this._clearError();}if(((_79)&&(_79!=this._authProperties.vaultSlotID))&&(_7a)){this._authProperties.vaultSlotID=_79;this._authWidget.setAuthenticationProperties({authProperties:this._authProperties});}if(_78){this._enableAuthSection(false);}else{this._enableAuthSection(true);}this._determineReadyState();this._layoutChanged();if(this._isTracing){this.traceExit(m);}},_setHoverHighlightItem:function(_7c,_7d){var m="_setHoverHighlightItem(p_dsIndex, p_isHover)";if(this._isTracing){this.traceEntry(m,[_7c,_7d]);this.trace(m,"Preset document services:",this._documentsServices);}if(this._documentsServices){var ds=this._documentsServices[_7c];if(ds){if(ds.domNode){if(_7d){if(!dojo.hasClass(ds.domNode,"lotusSelected")){dojo.addClass(ds.domNode,"feddocServerItemHover");}}else{dojo.removeClass(ds.domNode,"feddocServerItemHover");}}}}if(this._isTracing){this.traceExit(m);}},_focusPresetServerItem:function(_7e){if(this._documentsServices){var ds=this._documentsServices[_7e];if(ds){if(ds.domNode){dojo.attr(ds.focusNode,"tabindex","0");dijit.focus(ds.focusNode);this._focusedPresetServerIndex=_7e;}}}},_selectPresetServerItem:function(_7f){var m="_selectPresetServerItem(p_dsIndex)";if(this._isTracing){this.traceEntry(m,[_7f]);this.trace(m,"Preset document services:",this._documentsServices);}if(this._documentsServices){var ds=this._documentsServices[_7f];if(ds){if(ds.domNode){dojo.addClass(ds.domNode,"lotusSelected");dijit.setWaiState(ds.focusNode,"selected",true);dojo.removeClass(ds.domNode,"feddocServerItemHover");dojo.attr(ds.focusNode,"tabindex","0");dijit.focus(ds.focusNode);this._selPresetURL=ds.decodedurl;this._selPresetServerIndex=_7f;this._focusedPresetServerIndex=_7f;if(ds.decodedtype){if((ds.decodedtype==com.ibm.workplace.wcm.ecm.picker.util.FederatedDocumentsDefinitions._cmis)||(ds.decodedtype==com.ibm.workplace.wcm.ecm.picker.util.FederatedDocumentsDefinitions._qds)){this._selPresetType=ds.decodedtype;}else{this._selPresetType=com.ibm.workplace.wcm.ecm.picker.util.FederatedDocumentsDefinitions._cmis;}}else{this._selPresetType=com.ibm.workplace.wcm.ecm.picker.util.FederatedDocumentsDefinitions._cmis;}this._selServiceId=ds.serviceId;this._setAuthTypeForPresetServer();}}}if(this._isTracing){this.traceExit(m);}},_onAuthenticationChange:function(_80){var m="_onAuthenticationChange(p_authProps)";if(this._isTracing){this.traceEntry(m,dojo.toJson(_80));}this._authProperties=dojo.clone(_80);this._buildAuthenticationInfoMsg(_80);this._updateAuthenticationInfoMsg();this._determineReadyState();if(this._isTracing){this.traceExit(m);}},_onAuthenticationSectionCollapsed:function(){var m="_onAuthenticationSectionCollapsed()";if(this._isTracing){this.traceEntry(m);}this._layoutChanged();if(this._isTracing){this.traceExit(m);}},_onAuthenticationSectionExpanded:function(){var m="_onAuthenticationSectionExpanded()";if(this._isTracing){this.traceEntry(m);}if(!this._isAuthWidgetInitialized){this._authWidget.setAuthenticationProperties({"authProperties":this._authProperties});this._isAuthWidgetInitialized=true;}this._layoutChanged();if(this._isTracing){this.traceExit(m);}},_onAuthPropertiesChanged:function(_81){var m="_onAuthPropertiesChanged(p_authProperties)";if(this._isTracing){this.traceEntry(m,dojo.toJson(_81));}if(_81){if(_81.authType==com.ibm.workplace.wcm.ecm.picker.widget.AuthenticationWidget._authTypeVault){this._authProperties.vaultSlotID=_81.vaultSlotID;}}if(this._isTracing){this.traceEntry(m,"New credential vault slot ID:",this._authProperties.vaultSlotID);this.traceExit(m);}},_onClickCustomServerButton:function(){var m="_onClickCustomServerButton()";if(this._isTracing){this.traceEntry(m);}this._setPresetServerSectionVisible(false,true);this._setCustomServerSectionVisible(true,true);this._urlSelectionMode="custom";this._enableAuthSection(true);this._authWidget.changeAuthType(com.ibm.workplace.wcm.ecm.picker.widget.AuthenticationWidget._authTypeCurrentUser);this._clearError();this._determineReadyState();this.layout();if(this._isTracing){this.traceExit(m);}},_onClickPresetServerButton:function(){var m="_onClickPresetServerButton()";if(this._isTracing){this.traceEntry(m);}this._setPresetServerSectionVisible(true,true);this._setCustomServerSectionVisible(false,true);this._urlSelectionMode="preset";this._setAuthTypeForPresetServer();this.presetServerRadioButton.focus();if(this._isTracing){this.traceExit(m);}},_onUrlTextBoxChanged:function(){var m="_onUrlTextBoxChanged()";if(this._isTracing){this.traceEntry(m);}this._clearError();clearTimeout(this._urlTextChangedTimerHandle);this._urlTextChangedTimerHandle=setTimeout(dojo.hitch(this,"_determineReadyState"),this._urlChangesDelay);if(this._isTracing){this.traceExit(m);}},_setCustomServerDivVisible:function(_82){var m="_setCustomServerDivVisible(p_isVisible)";if(this._isTracing){this.traceEntry(m,_82);}this._setSectionVisible(this.customServerDiv,_82,false,0);if(this._isTracing){this.traceExit(m);}},_setCustomServerSectionVisible:function(_83,_84){var m="_setCustomServerSectionVisible(p_isVisible, p_animate)";if(this._isTracing){this.traceEntry(m,[_83,_84]);}this._setSectionVisible(this.customServerSection,_83,_84,this._customServerSectionHeight);if(this._isTracing){this.traceExit(m);}},_setPresetServerSectionVisible:function(_85,_86){var m="_setPresetServerSectionVisible(p_isVisible, p_animate)";if(this._isTracing){this.traceEntry(m,[_85,_86]);}this._setSectionVisible(this.presetServerSection,_85,_86,this._presetServerSectionHeight);if(this._isTracing){this.traceExit(m);}},_setSectionVisible:function(_87,_88,_89,_8a){var m="_setSectionVisible(p_sectionDomNode, p_isVisible, p_animate, p_targetHeight)";if(this._isTracing){this.traceEntry(m,[_87,_88,_89,_8a]);}if((_89)&&(_89===true)){if(_88===true){this._animateOpenSection(_87,_8a);}else{this._animateCloseSection(_87);}}else{this._setVisible(_87,_88);}if(this._isTracing){this.traceExit(m);}},_setVisible:function(_8b,_8c){var m="_setVisible(p_domNode, p_isVisible)";if(this._isTracing){this.traceEntry(m,[_8b,_8c]);}if(_8c===true){if(dojo.hasClass(_8b,"lotusHidden")){dojo.removeClass(_8b,"lotusHidden");}dijit.setWaiState(_8b,"hidden",false);dijit.setWaiState(_8b,"expanded",true);}else{if(!dojo.hasClass(_8b,"lotusHidden")){dojo.addClass(_8b,"lotusHidden");}dijit.setWaiState(_8b,"hidden",true);dijit.removeWaiState(_8b,"expanded");}if(this._isTracing){this.traceExit(m);}},_showNoServersMessage:function(){var m="_showNoServersMessage()";if(this._isTracing){this.traceEntry(m);}dojo.style(this.presetServersListDiv,"display","none");dojo.style(this.fedDocNoServersInfoDiv,"display","block");if(this._isTracing){this.traceExit(m);}},_updateAuthenticationInfoMsg:function(){var m="_updateAuthenticationInfoMsg()";if(this._isTracing){this.traceEntry(m);}dojo.attr(this.fedDocPickerAuthInfo,"innerHTML",this._authenticationInfoMsg);if(this._isTracing){this.traceExit(m);}}});}if(!dojo._hasResource["com.ibm.workplace.wcm.ecm.picker.widget.filter._TreeItemFilter"]){dojo._hasResource["com.ibm.workplace.wcm.ecm.picker.widget.filter._TreeItemFilter"]=true;dojo.provide("com.ibm.workplace.wcm.ecm.picker.widget.filter._TreeItemFilter");dojo.require("com.ibm.widgets._Traceable");dojo.declare("com.ibm.workplace.wcm.ecm.picker.widget.filter._TreeItemFilter",[com.ibm.widgets._Traceable],{_isTracing:false,_itemFilter:null,constructor:function(_8d){},isItemAcceptable:function(_8e,_8f){}});}if(!dojo._hasResource["com.ibm.workplace.wcm.ecm.picker.widget.filter.LibFolderTreeItemFilter"]){dojo._hasResource["com.ibm.workplace.wcm.ecm.picker.widget.filter.LibFolderTreeItemFilter"]=true;dojo.provide("com.ibm.workplace.wcm.ecm.picker.widget.filter.LibFolderTreeItemFilter");dojo.declare("com.ibm.workplace.wcm.ecm.picker.widget.filter.LibFolderTreeItemFilter",[com.ibm.workplace.wcm.ecm.picker.widget.filter._TreeItemFilter],{constructor:function(_90){this._isTracing=this.isTracing();var m="constructor(p_params)";if(this._isTracing){this.traceEntry(m,_90);if(_90){this.trace(m,"p_params.itemFilter:",_90.itemFilter);}}if(_90&&(typeof _90==="object")){if(_90.itemFilter&&(typeof _90.itemFilter=="object")){this._itemFilter=_90.itemFilter;}}if(this._isTracing){this.traceExit(m);}},isItemAcceptable:function(_91,_92){var m="isItemAcceptable(p_item, p_store)";if(this._isTracing){this.traceEntry(m,[_91,_92]);}var _93=(_92.isFolderItem(_91)||_92.isRepositoryItem(_91));if(_93&&this._itemFilter){_93=_93&&this._itemFilter.isItemAcceptable(_91,_92);}if(this._isTracing){this.traceExit(m,_93);}return _93;}});}if(!dojo._hasResource["com.ibm.workplace.wcm.ecm.picker.widget.filter.QuickSearchTreeItemFilter"]){dojo._hasResource["com.ibm.workplace.wcm.ecm.picker.widget.filter.QuickSearchTreeItemFilter"]=true;dojo.provide("com.ibm.workplace.wcm.ecm.picker.widget.filter.QuickSearchTreeItemFilter");dojo.declare("com.ibm.workplace.wcm.ecm.picker.widget.filter.QuickSearchTreeItemFilter",[com.ibm.workplace.wcm.ecm.picker.widget.filter._TreeItemFilter],{_labelContains:"",_labelEndsWith:"",_labelStartsWith:"",changeLabelContains:function(_94){var m="changeLabelContains(p_labelContains)";if(this._isTracing){this.traceEntry(m,[_94]);}if(typeof _94=="string"&&_94!==""){this._labelContains=_94.toLowerCase();var _95=this._labelContains.indexOf("*");if(_95>-1){if(_95>0){this.changeLabelStartsWith(this._labelContains.substr(0,_95));}else{this.changeLabelStartsWith("");}if(_95<this._labelContains.length){this.changeLabelEndsWith(this._labelContains.substr(_95+1));}else{this.changeLabelEndsWith("");}}else{this.changeLabelStartsWith("");this.changeLabelEndsWith("");}}else{this._labelContains=_94;}if(this._labelContains===""){this.changeLabelStartsWith("");this.changeLabelEndsWith("");}if(this._isTracing){this.traceExit(m);}},changeLabelEndsWith:function(_96){var m="changeLabelEndsWith(p_labelEndsWith)";if(this._isTracing){this.traceEntry(m,[_96]);}if(typeof _96=="string"&&_96!==""){this._labelEndsWith=_96.toLowerCase();}else{this._labelEndsWith=_96;}if(this._isTracing){this.traceExit(m);}},changeLabelStartsWith:function(_97){var m="changeLabelStartsWith(p_labelStartsWith)";if(this._isTracing){this.traceEntry(m,[_97]);}if(typeof _97=="string"&&_97!==""){this._labelStartsWith=_97.toLowerCase();}else{this._labelStartsWith=_97;}if(this._isTracing){this.traceExit(m);}},constructor:function(_98){this._isTracing=this.isTracing();var m="constructor(p_params)";if(this._isTracing){this.traceEntry(m,_98);if(_98){this.trace(m,"p_params.itemFilter:",_98.itemFilter);this.trace(m,"p_params.labelStartsWith:",_98.labelStartsWith);this.trace(m,"p_params.labelEndsWith:",_98.labelEndsWith);this.trace(m,"p_params.labelContains:",_98.labelContains);}}if(_98&&typeof _98=="object"){if(_98.itemFilter&&typeof _98.itemFilter=="object"){this._itemFilter=_98.itemFilter;}if(typeof _98.labelStartsWith=="string"){this.changeLabelStartsWith(_98.labelStartsWith);}if(typeof _98.labelEndsWith=="string"){this.changeLabelEndsWith(_98.labelEndsWith);}if(typeof _98.labelContains=="string"){this.changeLabelContains(_98.labelContains);}}if(this._isTracing){this.traceExit(m);}},isItemAcceptable:function(_99,_9a){var m="isItemAcceptable(p_item, p_store)";if(this._isTracing){this.traceEntry(m,[_99,_9a]);}var _9b=this._itemMatchesConditions(_99,_9a);if(_9b&&this._itemFilter){_9b=_9b&&this._itemFilter.isItemAcceptable(_99,_9a);}if(this._isTracing){this.traceExit(m,_9b);}return _9b;},_itemMatchesConditions:function(_9c,_9d){var m="_itemMatchesConditions(p_item, p_store)";if(this._isTracing){this.traceEntry(m,[_9c,_9d]);}var _9e=true;var _9f="";var _a0="";var _a1=false;var _a2=false;if((this._labelStartsWith)&&(this._labelStartsWith!=="")){_a1=true;}if((this._labelEndsWith)&&(this._labelEndsWith!=="")){_a2=true;}if((!_a1)&&(!_a2)){this.trace(m,"Running 'contains' check");if((this._labelContains)&&(this._labelContains!=="")){if(this._labelContains=="*"){_9e=true;}else{_9f=_9d.getLabel(_9c);if(_9f&&(_9f!=="")){_a0=_9f.toLowerCase();this.trace(m,"Item label (lowercase): ",_a0);_9e=_9e&&(_a0.indexOf(this._labelContains)>=0);}else{_9e=false;}}}}else{var _a3=false;var _a4=false;if(_a1===true){_9f=_9d.getLabel(_9c);if(_9f&&(_9f!=="")){this.trace(m,"Running 'startsWith' check");_a0=_9f.toLowerCase();this.trace(m,"Item label (lowercase): ",_a0);_a3=(_a0.indexOf(this._labelStartsWith)===0);}}if(_a2===true){_9f=_9d.getLabel(_9c);if(_9f&&(_9f!=="")){this.trace(m,"Running 'endsWith' check");_a0=_9f.toLowerCase();this.trace(m,"Item label (lowercase): ",_a0);var idx=_a0.lastIndexOf(this._labelEndsWith);_a4=((idx>-1)&&(idx===(_a0.length-this._labelEndsWith.length)));}}if((_a1===true)&&(_a2===true)){_9e=_9e&&_a3&&_a4;}else{_9e=_9e&&(_a3||_a4);}}if(this._isTracing){this.traceExit(m,_9e);}return _9e;}});}if(!dojo._hasResource["com.ibm.workplace.wcm.ecm.picker.widget.model.FedDocTreeModel"]){dojo._hasResource["com.ibm.workplace.wcm.ecm.picker.widget.model.FedDocTreeModel"]=true;dojo.provide("com.ibm.workplace.wcm.ecm.picker.widget.model.FedDocTreeModel");dojo.require("dojo.string");dojo.require("dijit.tree.ForestStoreModel");dojo.require("com.ibm.widgets._Traceable");dojo.declare("com.ibm.workplace.wcm.ecm.picker.widget.model.FedDocTreeModel",[dijit.tree.ForestStoreModel,com.ibm.widgets._Traceable],{_allowSubItems:true,_isTracing:false,_itemFilter:null,constructor:function(_a5){this._isTracing=this.isTracing();var m="constructor(p_params)";if(this._isTracing){this.traceEntry(m,_a5);if(_a5){this.trace(m,"p_params.itemFilter:",_a5.itemFilter);this.trace(m,"p_params.allowSubItems:",_a5.allowSubItems);}}if(_a5&&typeof _a5=="object"){if(_a5.itemFilter&&typeof _a5.itemFilter=="object"){this._itemFilter=_a5.itemFilter;}if(typeof _a5.allowSubItems!="undefined"){this._allowSubItems=_a5.allowSubItems;}}if(this._isTracing){this.traceExit(m);}},filterTreeItems:function(_a6){var m="filterTreeItems(parentItem)";if(this._isTracing){this.traceEntry(m,_a6);}var _a7=[];var _a8=dojo.hitch(this,function(_a9){dojo.forEach(_a9,function(_aa){if(this._itemFilter){var _ab=false;if(this._allowSubItems&&(this.store.isFolderItem(_aa)||this.store.isRepositoryItem(_aa))&&(this.store.isItemLoaded(_aa))&&(this.store.isItemExpanded(_aa))){_ab=this.filterTreeItems(_aa);}else{_ab=false;}if((this._itemFilter.isItemAcceptable(_aa,this.store))||(_ab)){_a7.push(_aa);}}else{_a7.push(_aa);}},this);if((this.onChildrenChange)&&(dojo.isFunction(this.onChildrenChange))){this.onChildrenChange(_a6,_a7);}});this.getChildren(_a6,_a8,null,true);_a7=(_a7.length>0);if(this._isTracing){this.traceExit(m,_a7);}return _a7;},getChildren:function(_ac,_ad,_ae,_af){var m="getChildren(parentItem, onComplete, onError, useOriginal)";if(this._isTracing){this.traceEntry(m,[_ac,_ad,_ae,_af]);}var _b0=[];var _b1=_ad;var _b2=dojo.hitch(this,function(_b3){dojo.forEach(_b3,function(_b4){if(this._itemFilter){if(this._itemFilter.isItemAcceptable(_b4,this.store)){_b0.push(_b4);}}else{_b0.push(_b4);}},this);if((_b1)&&(dojo.isFunction(_b1))){_b1(_b0);}});var _b5=((!_af)||(_af&&(_af===false)));if(this._isTracing){this.trace(m,"Use advanced logic:",_b5);}if(_b5){var _b6=arguments;if(_b6[1]){_b6[1]=_b2;}this.inherited(_b6);}else{this.inherited(arguments);}if(this._isTracing){this.traceExit(m);}},mayHaveChildren:function(_b7){var m="mayHaveChildren(p_item)";if(this._isTracing){this.traceEntry(m,_b7);}var _b8=this._allowSubItems&&(this.store.isFolderItem(_b7)||this.store.isRepositoryItem(_b7)||this.inherited(arguments));if(this._isTracing){this.traceExit(m,_b8);}return _b8;}});}if(!dojo._hasResource["com.ibm.workplace.wcm.ecm.picker.util.ErrorMsgUtils"]){dojo._hasResource["com.ibm.workplace.wcm.ecm.picker.util.ErrorMsgUtils"]=true;dojo.provide("com.ibm.workplace.wcm.ecm.picker.util.ErrorMsgUtils");dojo.require("com.ibm.widgets._Traceable");dojo.declare("com.ibm.workplace.wcm.ecm.picker.util.ErrorMsgUtils",[com.ibm.widgets._Traceable],{getErrorMessage:function(_b9,_ba,_bb){var m="getErrorMessage(ioargs, nlsMessages, httpsSpecialMsg)";if(this._isTracing){this.traceEntry(m,[_b9,_ba,_bb]);}var _bc=[];if(_b9.xhr.status>=400){var _bd="errorHttp"+dojo.string.trim(_b9.xhr.status+"");var _be="errorDetailsHttp"+dojo.string.trim(_b9.xhr.status+"");var _bf="errorDetailsHttps"+dojo.string.trim(_b9.xhr.status+"");if(_ba[_bd]){if(_b9.xhr.status==500){var _c0="";if(typeof _b9.xhr.response=="string"){_c0=_b9.xhr.response;}else{if(typeof _b9.xhr.responseText=="string"){_c0=_b9.xhr.responseText;}}_bc[com.ibm.workplace.wcm.ecm.picker.util.ErrorMsgUtils.ErrorMessage]=_ba[_bd];if(_c0.length>500){_c0=_c0.substring(0,499);}_bc[com.ibm.workplace.wcm.ecm.picker.util.ErrorMsgUtils.ErrorDetails]=_c0;}else{_bc[com.ibm.workplace.wcm.ecm.picker.util.ErrorMsgUtils.ErrorMessage]=_ba[_bd];if((_bb)&&(_ba[_bf])){_bc[com.ibm.workplace.wcm.ecm.picker.util.ErrorMsgUtils.ErrorDetails]=_ba[_bf];}else{if(_ba[_be]){_bc[com.ibm.workplace.wcm.ecm.picker.util.ErrorMsgUtils.ErrorDetails]=_ba[_be];}}}}else{_bc[com.ibm.workplace.wcm.ecm.picker.util.ErrorMsgUtils.ErrorMessage]=_ba.errorFetchingData;}}if(this._isTracing){this.traceExit(m,_bc);}return _bc;}});com.ibm.workplace.wcm.ecm.picker.util.ErrorMsgUtils._INSTANCE=new com.ibm.workplace.wcm.ecm.picker.util.ErrorMsgUtils();com.ibm.workplace.wcm.ecm.picker.util.ErrorMsgUtils.ErrorMessage="ErrorMessage";com.ibm.workplace.wcm.ecm.picker.util.ErrorMsgUtils.ErrorDetails="ErrorDetails";}if(!dojo._hasResource["com.ibm.workplace.wcm.ecm.picker.widget.store.FedDocAtomStore"]){dojo._hasResource["com.ibm.workplace.wcm.ecm.picker.widget.store.FedDocAtomStore"]=true;dojo.provide("com.ibm.workplace.wcm.ecm.picker.widget.store.FedDocAtomStore");dojo.require("dojo.string");dojo.declare("com.ibm.workplace.wcm.ecm.picker.widget.store.FedDocAtomStore",[com.ibm.widgets._Traceable],{_credentialVaultParamValue:null,_serviceId:"",_feedBaseURL:"",_feedSvcDocBaseURL:"",_isTracing:false,_items:{},_nlsMessages:{},_nodeTypes:[],_onErrorStateChanged:null,_onRootNodeChanged:null,_typeFilter:"all",_url:null,addNodeTypes:function(_c1){var m="addNodeTypes(p_nodeTypes)";if(this._isTracing){this.traceEntry(m,_c1);}if(dojo.isArray(_c1)){dojo.forEach(_c1,dojo.hitch(this,function(_c2){if(dojo.indexOf(this._nodeTypes,_c2)==-1){this._nodeTypes.push(_c2);}}));this._computeTypeFilter();this._forceItemsReload();}if(this._isTracing){this.traceExit(m);}},close:function(_c3){var m="close(request)";if(this._isTracing){this.traceEntry(m,_c3);}this._items={};if(this._isTracing){this.traceExit(m);}return;},constructor:function(_c4){this._isTracing=this.isTracing();var m="constructor(p_params)";if(this._isTracing){this.traceEntry(m,_c4);if(_c4){this.trace(m,"p_params.url:",_c4.url);this.trace(m,"p_params.feedBaseURL:",_c4.feedBaseURL);this.trace(m,"p_params.feedSvcDocBaseURL",_c4.feedSvcDocBaseURL);this.trace(m,"p_params.nodeTypes:",dojo.toJson(_c4.nodeTypes));this.trace(m,"p_params.nlsMessages",_c4.nlsMessages);this.trace(m,"p_params.credentialVaultParamValue:",_c4.credentialVaultParamValue);this.trace(m,"p_params.serviceId:",_c4.serviceId);}}if(_c4&&typeof _c4=="object"){if(typeof _c4.url=="string"){this._url=_c4.url;}if(typeof _c4.feedBaseURL=="string"){this._feedBaseURL=_c4.feedBaseURL;}if(typeof _c4.feedSvcDocBaseURL=="string"){this._feedSvcDocBaseURL=_c4.feedSvcDocBaseURL;}if(_c4.nodeTypes&&typeof _c4.nodeTypes=="object"){this._nodeTypes=_c4.nodeTypes;}if(typeof _c4.credentialVaultParamValue=="string"){this._credentialVaultParamValue=_c4.credentialVaultParamValue;}if(typeof _c4.serviceId=="string"){this._serviceId=_c4.serviceId;}if((_c4.onErrorStateChanged)&&dojo.isFunction(_c4.onErrorStateChanged)){this._onErrorStateChanged=_c4.onErrorStateChanged;}if((_c4.onRootNodeChanged)&&dojo.isFunction(_c4.onRootNodeChanged)){this._onRootNodeChanged=_c4.onRootNodeChanged;}if((_c4.nlsMessages)&&typeof _c4.nlsMessages=="object"){this._nlsMessages=_c4.nlsMessages;}}this._computeTypeFilter();if(this._isTracing){this.traceExit(m);}},containsValue:function(_c5,_c6,_c7){var m="containsValue(p_item, p_attribute, p_value)";if(this._isTracing){this.traceEntry(m,[_c5,_c6,_c7]);}var _c8=false;if(this.hasAttribute(_c5,_c6)){_c8=dojo.some(this.getValues(_c5,_c6),function(val){return val==_c7;},this);}if(this._isTracing){this.traceExit(m,_c8);}return _c8;},fetch:function(_c9){var m="fetch(p_params)";if(this._isTracing){this.traceEntry(m,_c9);this.trace(m,"Scope:",_c9.scope);this.trace(m,"Scope:",_c9.scope);this.trace(m,"Scope:",_c9.scope);}var _ca=dojo.global;if(_c9.scope){_ca=_c9.scope;}if(_c9.item){if(this._isTracing){this.trace(m,"Remote fetching of items");}this._asyncLoadItemsRemote(_c9.item,_c9.onComplete);}else{if(!_c9.query||(typeof _c9.query=="string"&&_c9.query.match(/^toplevelitems$/i))){if(this._isTracing){this.trace(m,"Remote fetching of items");}this._asyncLoadItemsRemote(null,_c9.onComplete);}else{if(typeof _c9.query=="string"&&(_c9.query.match("^itemID=")=="itemID=")){var ID=_c9.query.substring(7,_c9.query.length);if(this._isTracing){this.trace(m,"Item identity from query:",ID);}if(ID!==""){var _cb=this.fetchItemByIdentity({"identity":ID});if(this._isTracing){this.trace(m,"Item fetched by identity:",_cb);}if(_cb){var _cc=this.isItemLoaded(_cb);if(this._isTracing){this.trace(m,"Is item already loaded:",_cc);}if(_cc){this._clearError();if((_c9.onComplete)&&(dojo.isFunction(_c9.onComplete))){_c9.onComplete(this.getValues(_cb,com.ibm.workplace.wcm.ecm.picker.widget.store.FedDocAtomStore._childrenAttr));}}else{this.loadItem({"item":_cb,"onItem":_c9.onComplete,"topLevelCallback":true});}}else{this.error(m,dojo.string.substitute("Item with ID ${0} was not found in the store.",[ID]));}}}}}if(this._isTracing){this.traceExit(m);}},fetchItemByIdentity:function(_cd){var m="fetchItemByIdentity(p_params)";if(this._isTracing){this.traceEntry(m,_cd);this.trace(m,"Identity:",_cd.identity);this.trace(m,"Scope:",_cd.scope);this.trace(m,"onItem callback:",_cd.onItem);}var id=_cd.identity;if(typeof id!="string"){if(!dojo.isFunction(id.toString)){throw new Error(dojo.string.substitute(this._nlsMessages.srvCommunication.attributeNotStringable,["id","fetchItemByIdentity"]));}id=id.toString();}var _ce=this._items[id];if(typeof _ce=="undefined"){_ce=null;}var _cf=dojo.global;if(_cd.scope){_cf=_cd.scope;}if(dojo.isFunction(_cd.onItem)){_cd.onItem.call(_cf,_ce);}if(this._isTracing){this.traceExit(m,_ce);}return _ce;},getAttributes:function(_d0){var m="getAttributes(p_item)";if(this._isTracing){this.traceEntry(m,_d0);}var _d1=[];var i=0;for(var _d2 in _d0){if((typeof (_d0[_d2])!="undefined")&&(typeof (_d0[_d2])!="function")){_d1[i++]=_d2;}}if(this._isTracing){this.traceExit(m,dojo.toJson(_d1));}return _d1;},getDownloadURL:function(_d3){var m="getDownloadURL(p_item)";if(this._isTracing){this.traceEntry(m,_d3);}var _d4=this.getValue(_d3,com.ibm.workplace.wcm.ecm.picker.widget.store.FedDocAtomStore._downloadURLAttr,"");if(this._isTracing){this.traceExit(m,_d4);}return _d4;},getFeatures:function(){var m="getFeatures()";if(this._isTracing){this.traceEntry(m);}var _d5={"dojo.data.api.Read":true,"dojo.data.api.Identity":true};if(this._isTracing){this.traceExit(m,_d5);}return _d5;},getIdentity:function(_d6){var m="getIdentity(p_item)";if(this._isTracing){this.traceEntry(m,_d6);}var _d7=this.getValue(_d6,com.ibm.workplace.wcm.ecm.picker.widget.store.FedDocAtomStore._idAttr);if(this._isTracing){this.traceExit(m,_d7);}return _d7;},getIdentityAttributes:function(_d8){var m="getIdentityAttributes(p_item)";if(this._isTracing){this.traceEntry(m,_d8);}result=[com.ibm.workplace.wcm.ecm.picker.widget.store.FedDocAtomStore._idAttr];if(this._isTracing){this.traceExit(m,result);}return result;},getLabel:function(_d9){var m="getLabel(p_item)";if(this._isTracing){this.traceEntry(m,_d9);}var _da=this.getValue(_d9,com.ibm.workplace.wcm.ecm.picker.widget.store.FedDocAtomStore._labelAttr);if(this._isTracing){this.traceExit(m,_da);}return _da;},getLabelAttributes:function(_db){var m="getLabelAttributes(p_item)";if(this._isTracing){this.traceEntry(m,_db);}var _dc=[com.ibm.workplace.wcm.ecm.picker.widget.store.FedDocAtomStore._labelAttr];if(this._isTracing){this.traceExit(m,_dc);}return _dc;},getValue:function(_dd,_de,_df){var m="getValue(p_item, p_attribute, p_defaultValue)";if(this._isTracing){this.traceEntry(m,[_dd,_de,_df]);}var _e0=_df;if(typeof _de!="string"){throw new Error(dojo.string.substitute(this._nlsMessages.srvCommunication.attributeNotStringable,["p_attribute","getValue"]));}if(_de==this.PATH){_e0=this.getPath(_dd);}else{if(!this.hasAttribute(_dd,_de)){_e0=_df;}else{_e0=_dd[_de];}}if(this._isTracing){this.traceExit(m,_e0);}return _e0;},getValues:function(_e1,_e2){var m="getValues(p_item, p_attribute)";if(this._isTracing){this.traceEntry(m,[_e1,_e2]);}if(typeof _e2!="string"){throw new Error(dojo.string.substitute(this._nlsMessages.srvCommunication.attributeNotStringable,["p_attribute","getValues"]));}var _e3=this._dereferenceItem(_e1);var _e4=[];if(_e2==com.ibm.workplace.wcm.ecm.picker.widget.store.FedDocAtomStore._childrenAttr){var tmp;if(_e3[com.ibm.workplace.wcm.ecm.picker.widget.store.FedDocAtomStore._childrenAttr]){tmp=[];if(_e3[com.ibm.workplace.wcm.ecm.picker.widget.store.FedDocAtomStore._loadAttr]===true){tmp=_e3[com.ibm.workplace.wcm.ecm.picker.widget.store.FedDocAtomStore._childrenAttr];}}if(typeof tmp!="undefined"){_e4=tmp;}}else{var ret=this.getValue(_e3,_e2);if(typeof ret!="undefined"){_e4=[ret];}}if(this._isTracing){this.traceExit(m,_e4);}return _e4;},getViewURL:function(_e5){var m="getViewURL(p_item)";if(this._isTracing){this.traceEntry(m,_e5);}var _e6=this.getValue(_e5,com.ibm.workplace.wcm.ecm.picker.widget.store.FedDocAtomStore._viewURLAttr,"");if(this._isTracing){this.traceExit(m,_e6);}return _e6;},hasAttribute:function(_e7,_e8){var m="hasAttribute(p_item, p_attribute)";if(this._isTracing){this.traceEntry(m,[_e7,_e8]);}if(typeof _e8!="string"){throw new Error(dojo.string.substitute(this._nlsMessages.srvCommunication.attributeNotStringable,["p_attribute","hasAttribute"]));}var _e9=(typeof _e7[_e8]!="undefined");if(this._isTracing){this.traceExit(m,_e9);}return _e9;},isRepositoryItem:function(_ea){var m="isRepositoryItem(p_item)";if(this._isTracing){this.traceEntry(m,_ea);}var _eb=(this.getValue(_ea,com.ibm.workplace.wcm.ecm.picker.widget.store.FedDocAtomStore._baseTypeAttr,"document")=="repository");if(this._isTracing){this.traceExit(m,_eb);}return _eb;},isFolderItem:function(_ec){var m="isFolderItem(p_item)";if(this._isTracing){this.traceEntry(m,_ec);}var _ed=(this.getValue(_ec,com.ibm.workplace.wcm.ecm.picker.widget.store.FedDocAtomStore._baseTypeAttr,"document")=="folder");if(this._isTracing){this.traceExit(m,_ed);}return _ed;},isItem:function(_ee){var m="isItem(p_obj)";if(this._isTracing){this.traceEntry(m,_ee);}var ret=false;if(_ee&&typeof _ee!="undefined"){ret=typeof _ee[com.ibm.workplace.wcm.ecm.picker.widget.store.FedDocAtomStore._idAttr]=="string";if(ret){var id=_ee[com.ibm.workplace.wcm.ecm.picker.widget.store.FedDocAtomStore._idAttr];ret=(typeof this._items[id]!="undefined");}else{throw new Error(dojo.string.substitute(this._nlsMessages.srvCommunication.attributeNotStringable,["p_obj._idAttr","isItem"]));}}if(this._isTracing){this.traceExit(m,ret);}return ret;},isItemExpanded:function(_ef){var m="isItemExpanded(p_item)";if(this._isTracing){this.traceEntry(m,_ef);}var _f0=this._dereferenceItem(_ef);if(this.isItem(_f0)){result=(this.getValue(_f0,com.ibm.workplace.wcm.ecm.picker.widget.store.FedDocAtomStore._expandedAttr,false)===true);}else{result=false;}if(this._isTracing){this.traceExit(m,result);}return result;},isItemLoaded:function(_f1){var m="isItemLoaded(p_item)";if(this._isTracing){this.traceEntry(m,_f1);}var _f2=this._dereferenceItem(_f1);var _f3=this.isItem(_f2)&&(this.getValue(_f2,com.ibm.workplace.wcm.ecm.picker.widget.store.FedDocAtomStore._loadAttr)===true);if(this._isTracing){this.traceExit(m,_f3);}return _f3;},loadItem:function(_f4){var m="loadItem(p_params)";if(this._isTracing){this.traceEntry(m,_f4);this.trace(m,"Top level callback:",_f4.topLevelCallback);this.trace(m,"Item:",_f4.item);this.trace(m,"onItem callback:",_f4.onItem);}var _f5=false;if(_f4.topLevelCallback){_f5=_f4.topLevelCallback;}if(this._isTracing){this.trace(m,"Remote fetching of items");}this._asyncLoadItemsRemote(_f4.item,_f4.onItem,_f5);if(this._isTracing){this.traceExit(m);}},removeNodeTypes:function(_f6){var m="removeNodeTypes(p_nodeTypes)";if(this._isTracing){this.traceEntry(m,_f6);}if(dojo.isArray(_f6)){var _f7=[];dojo.forEach(this._nodeTypes,dojo.hitch(this,function(_f8){if(dojo.indexOf(_f6,_f8)==-1){_f7.push(_f8);}}));this._nodeTypes=_f7;this._computeTypeFilter();this._forceItemsReload();}if(this._isTracing){this.traceExit(m);}},setItemExpanded:function(_f9,_fa){var m="setItemExpanded(p_item, p_isExpanded)";if(this._isTracing){this.traceEntry(m,[_f9,_fa]);}var _fb=this._dereferenceItem(_f9);if(this.isItem(_fb)){_fb[com.ibm.workplace.wcm.ecm.picker.widget.store.FedDocAtomStore._expandedAttr]=_fa;}if(this._isTracing){this.traceExit(m);}},_asyncLoadItemsRemote:function(_fc,_fd,_fe){var m="_asyncLoadItemsRemote(p_parentItem, p_callback, p_topLevelCallback)";if(this._isTracing){this.traceEntry(m,[_fc,_fd,_fe]);}this._clearError();var _ff;if(_fc===null){_ff=this._generateTargetURL(this._url,true);}else{var url=_fc[com.ibm.workplace.wcm.ecm.picker.widget.store.FedDocAtomStore._viewURLAttr];_ff=this._generateTargetURL(url);}var cb=dojo.hitch(this,function(_100,_101,_102){if(_102.xhr.status==200){if(this._isTracing){this.trace(m,"XHR callback - response:",_101);}var _103;if(_101.length>2){_103=dojo.fromJson(_101);}else{_103=null;}if(this._isTracing){this.trace(m,"XHR callback - backend data:",dojo.toJson(_103));}var _104;if(_103!==null){_104=_103.children;}else{_104=[];}if(_fc!==null){_fc[com.ibm.workplace.wcm.ecm.picker.widget.store.FedDocAtomStore._childrenAttr]=_104;this._processLoadedItems(_fc,_100,_104,null,_fe);}else{if(_103.root){if(!_103.root[com.ibm.workplace.wcm.ecm.picker.widget.store.FedDocAtomStore._viewURLAttr]){_103.root[com.ibm.workplace.wcm.ecm.picker.widget.store.FedDocAtomStore._viewURLAttr]=this._url;}this._processLoadedItems(null,_100,_104,null,_fe);var _105=_103.root;_105.baseType="folder";this._items[_105[com.ibm.workplace.wcm.ecm.picker.widget.store.FedDocAtomStore._idAttr]]=_105;_105[com.ibm.workplace.wcm.ecm.picker.widget.store.FedDocAtomStore._childrenAttr]=_104;this._processLoadedItems(_105,null,_104,null,_fe);if(this._onRootNodeChanged&&dojo.isFunction(this._onRootNodeChanged)){this._onRootNodeChanged(_105);}}else{if(this._onRootNodeChanged&&dojo.isFunction(this._onRootNodeChanged)){this._onRootNodeChanged(null);}this._processLoadedItems(_fc,_100,_104,null,_fe);}}}else{var _106=com.ibm.workplace.wcm.ecm.picker.util.ErrorMsgUtils._INSTANCE.getErrorMessage(_102,this._nlsMessages.srvCommunication,(this._url.substring(0,6).toLowerCase()==="https:"));this._showError(_106[com.ibm.workplace.wcm.ecm.picker.util.ErrorMsgUtils.ErrorMessage],_106[com.ibm.workplace.wcm.ecm.picker.util.ErrorMsgUtils.ErrorDetails]);if(this._isTracing){this.error(m,"Could not setup data backend store.",[_102.xhr.status]);}}},_fd);if(this._isTracing){this.trace(m,"Initiating XHR using target URL:",_ff);}dojo.xhrGet({"url":_ff,"handle":cb,"sync":false});if(this._isTracing){this.traceExit(m);}},_clearError:function(){this._errorState=false;if(this._onErrorStateChanged){this._onErrorStateChanged(this,false);}},_computeTypeFilter:function(){var m="_computeTypeFilter()";if(this._isTracing){this.traceEntry(m);}var _107=(dojo.indexOf(this._nodeTypes,"document")!=-1);if(_107===true){this._typeFilter="all";}else{this._typeFilter="folder";}if(this._isTracing){this.trace(m,"New type filer:",this._typeFilter);this.traceExit(m);}},_dereferenceItem:function(_108){var m="_dereferenceItem(p_item)";if(this._isTracing){this.traceEntry(m,_108);}var _109=null;if(this.isItem(_108)){var id=_108[com.ibm.workplace.wcm.ecm.picker.widget.store.FedDocAtomStore._idAttr];_109=this._items[id];}if(this._isTracing){this.traceExit(m,_109);}return _109;},_findItemForURL:function(_10a){var m="_findItemForURL(p_url)";if(this._isTracing){this.traceEntry(m,_10a);}var _10b=null;for(var id in this._items){var item=this._items[id];var url=this.getValue(item,com.ibm.workplace.wcm.ecm.picker.widget.store.FedDocAtomStore._viewURLAttr,null);if(url==_10a){_10b=item;break;}}if(this._isTracing){this.traceExit(m,_10b);}return _10b;},_forceItemsReload:function(){var m="forceItemsReload()";if(this._isTracing){this.traceEntry(m);}for(var id in this._items){var item=this._items[id];if(this.getValue(item,com.ibm.workplace.wcm.ecm.picker.widget.store.FedDocAtomStore._loadAttr)===true){item[com.ibm.workplace.wcm.ecm.picker.widget.store.FedDocAtomStore._loadAttr]=false;}}if(this._isTracing){this.traceExit(m);}},_generateTargetURL:function(_10c,_10d){var m="_generateTargetURL(p_url, p_useSvcDocUrl)";if(this._isTracing){this.traceEntry(m,[_10c,_10d]);}var _10e=encodeURIComponent(this._encodeUrlIfNeeded(_10c));var _10f;if(_10d===true){_10f=this._feedSvcDocBaseURL;}else{_10f=this._feedBaseURL;}var _110;if(typeof this._credentialVaultParamValue=="string"){_110=encodeURIComponent(this._credentialVaultParamValue);}else{_110="";}var _111=_10f.replace("%7BtypeFilter%7D",this._typeFilter).replace("%7BfeedUrl%7D",_10e).replace("%7BmimeType%7D","application%2Fjson").replace("%7BvaultSlotId%7D",_110).replace("%7BserviceId%7D",this._serviceId);if(this._isTracing){this.traceExit(m,_111);}return _111;},_encodeUrlIfNeeded:function(_112){var m="_encodeUrlIfNeeded(p_url)";if(this._isTracing){this.traceEntry(m,_112);}var _113=_112;if(_112&&typeof _112=="string"&&_112.indexOf("%")==-1){_113=encodeURI(_112);}if(this._isTracing){this.traceExit(m,_113);}return _113;},_processLoadedItems:function(_114,_115,_116,_117,_118){var m="_processLoadedItems(p_parentItem, p_callback, p_items, p_request, p_topLevelCallback)";if(this._isTracing){this.traceEntry(m,[_114,_115,_116,_117,_118]);}var _119=[];var _11a=false;if(_114&&this.isItem(_114)){_114[com.ibm.workplace.wcm.ecm.picker.widget.store.FedDocAtomStore._loadAttr]=true;dojo.forEach(_114[com.ibm.workplace.wcm.ecm.picker.widget.store.FedDocAtomStore._childrenAttr],function(_11b){var _11c=false;if((typeof _11b[com.ibm.workplace.wcm.ecm.picker.widget.store.FedDocAtomStore._baseTypeAttr]!="undefined")&&((_11b[com.ibm.workplace.wcm.ecm.picker.widget.store.FedDocAtomStore._baseTypeAttr]=="folder")||(_11b[com.ibm.workplace.wcm.ecm.picker.widget.store.FedDocAtomStore._baseTypeAttr]=="repository"))){_11c=true;}if(_11c){_11b[com.ibm.workplace.wcm.ecm.picker.widget.store.FedDocAtomStore._loadAttr]=false;}else{_11b[com.ibm.workplace.wcm.ecm.picker.widget.store.FedDocAtomStore._loadAttr]=true;}_119.push(this._items[_11b[com.ibm.workplace.wcm.ecm.picker.widget.store.FedDocAtomStore._idAttr]]=_11b);},this);this._items[_114[com.ibm.workplace.wcm.ecm.picker.widget.store.FedDocAtomStore._idAttr]]=_114;_11a=true;}else{dojo.forEach(_116,function(_11d){var _11e=false;if((typeof _11d[com.ibm.workplace.wcm.ecm.picker.widget.store.FedDocAtomStore._baseTypeAttr]!="undefined")&&((_11d[com.ibm.workplace.wcm.ecm.picker.widget.store.FedDocAtomStore._baseTypeAttr]=="folder")||(_11d[com.ibm.workplace.wcm.ecm.picker.widget.store.FedDocAtomStore._baseTypeAttr]=="repository"))){_11e=true;}if(_11e){_11d[com.ibm.workplace.wcm.ecm.picker.widget.store.FedDocAtomStore._loadAttr]=false;}else{_11d[com.ibm.workplace.wcm.ecm.picker.widget.store.FedDocAtomStore._loadAttr]=true;}_119.push(this._items[_11d[com.ibm.workplace.wcm.ecm.picker.widget.store.FedDocAtomStore._idAttr]]=_11d);},this);}if(_115&&dojo.isFunction(_115)){if((_11a===true)&&(_118===false)){if(this._isTracing){this.trace(m,"Dispatching to callback function passing parent item:",_114);}_115(_114);}else{if(this._isTracing){this.trace(m,"Dispatching to callback function passing processed items and request:",[_114,_117]);}_115(_119,_117);}}if(this._isTracing){this.traceExit(m);}},_showError:function(_11f,_120){this._errorState=true;if(this._onErrorStateChanged){this._onErrorStateChanged(this,true,_11f,_120);}}});com.ibm.workplace.wcm.ecm.picker.widget.store.FedDocAtomStore._labelAttr="title";com.ibm.workplace.wcm.ecm.picker.widget.store.FedDocAtomStore._childrenAttr="children";com.ibm.workplace.wcm.ecm.picker.widget.store.FedDocAtomStore._idAttr="id";com.ibm.workplace.wcm.ecm.picker.widget.store.FedDocAtomStore._baseTypeAttr="baseType";com.ibm.workplace.wcm.ecm.picker.widget.store.FedDocAtomStore._expandedAttr="isExpanded";com.ibm.workplace.wcm.ecm.picker.widget.store.FedDocAtomStore._loadAttr="isLoaded";com.ibm.workplace.wcm.ecm.picker.widget.store.FedDocAtomStore._viewURLAttr="contentLink";com.ibm.workplace.wcm.ecm.picker.widget.store.FedDocAtomStore._downloadURLAttr="contentLink";}if(!dojo._hasResource["com.ibm.workplace.wcm.ecm.picker.widget.CmisDocumentPickerPageWidget"]){dojo._hasResource["com.ibm.workplace.wcm.ecm.picker.widget.CmisDocumentPickerPageWidget"]=true;dojo.provide("com.ibm.workplace.wcm.ecm.picker.widget.CmisDocumentPickerPageWidget");dojo.registerModulePath("com.ibm.workplace.wcm.ecm.picker.widget","../com/ibm/workplace/wcm/ecm/picker/widget");dojo.require("dijit.form.ToggleButton");dojo.require("dijit.layout.BorderContainer");dojo.require("dijit.layout.ContentPane");dojo.require("dijit.Tree");dojo.declare("com.ibm.workplace.wcm.ecm.picker.widget.CmisDocumentPickerPageWidget",[com.ibm.workplace.wcm.ecm.picker.widget.GenericWizardPageWidget],{blankImgUrl:dojo.moduleUrl("dojo","resources/blank.gif").toString(),minTreePaneWidth:100,namespace:"cmisDocPckrPgWdgt_",templateString:"<div dojoAttachPoint=\"pickerPageDiv, containerNode\" id=\"${namespace}pickerPageDiv_id\" name=\"${namespace}pickerPageDiv\" style=\"width: 100%;\">\n    <div class=\"feddocTopSpace\" dojoAttachPoint=\"pickerServerSectionDiv\">\n        <h4 class=\"feddocHeader4\">\n            <label id=\"${namespace}pickerServerUrl.lbl\">\n                <span dojoAttachPoint=\"pickerServerUrlLabel\"><b>${_nlsUserInterface.docPickerPage.pickerServerUrlLabel}</b></span>\n            </label>\n        </h4>\n        <div dojoAttachPoint=\"pickerServerInfoDiv\" name=\"${namespace}pickerServerInfoDiv\" id=\"${namespace}pickerServerInfoDiv_id\">\n            <span dojoAttachPoint=\"pickerServerUrl\" id=\"${namespace}pickerServerUrl_id\" name=\"${namespace}pickerServerUrl\" aria-labelledby=\"${namespace}pickerServerUrl.lbl\">\n                <!-- being filled with informative text dynamically by the widget -->\n            </span>\n        </div>\n    </div>\n    <div class=\"feddocTopSpaceSmall\" dojoAttachPoint=\"pickerAuthenticationSectionDiv\">\n        <h4 class=\"feddocHeader4\">\n            <label id=\"${namespace}pickerAuthTypeInfoMsg.lbl\">\n                <span dojoAttachPoint=\"pickerAuthTypeInfoMsgLabel\"><b>${_nlsUserInterface.docPickerPage.pickerAuthTypeInfoMsgLabel}</b></span>\n            </label>\n        </h4>\n        <div dojoAttachPoint=\"pickerAuthInfoDiv\" name=\"${namespace}pickerAuthInfoDiv\" id=\"${namespace}pickerAuthInfoDiv_id\">\n            <span dojoAttachPoint=\"pickerAuthInfo\" id=\"${namespace}pickerAuthTypeInfoMsg_id\" name=\"${namespace}pickerAuthTypeInfoMsg\" aria-labelledby=\"${namespace}pickerAuthTypeInfoMsg.lbl\">\n                <!-- being filled with informative text dynamically by the widget -->\n            </span>\n        </div>\n    </div>\n    <div dojoAttachPoint=\"fedDocPickerConnectingDiv\" class=\"feddocConnectingBox\">\n        <span class=\"lotusLoading\"><img width=\"21\" height=\"21\" src=\"${blankImgUrl}\" role=\"presentation\" aria-labelledby=\"${namespace}connectingToServerDivText_id\" alt=\"${_nlsUserInterface.docPickerPage.connectingToServerImgAlt}\">\n            </span>&nbsp;<span><span dojoAttachPoint=\"connectingToServerDivText\" id=\"${namespace}connectingToServerDivText_id\">${_nlsUserInterface.docPickerPage.connectingToServerDivText}</span>\n        </span>\n    </div>\n    <form dojoAttachPoint=\"feddocResponseForm\">\n        <div role=\"grid\" class=\"feddocTopSpace\" dojoAttachPoint=\"fedDocPickerResponseContainer\" style=\"height: 300px; min-height: 300px; overflow: auto;\">\n            <div role=\"row\" dojoType=\"dijit.layout.BorderContainer\" dojoAttachPoint=\"fedDocPickerBorderContainer\" name=\"${namespace}fedDocPickerBorderContainer\" id=\"${namespace}fedDocPickerBorderContainer_id\" design=\"sidebar\" gutters=\"false\" style=\"width: 100%; height: 100%;\" tabindex=\"0\">\n                <div style=\"display: none;\" role=\"rowheader\"></div>\n                <div _role_=\"gridcell\" dojoAttachPoint=\"fedDocLibTreePane\" name=\"${namespace}fedDocLibTreePane\" id=\"${namespace}fedDocLibTreePane_id\" class=\"dijitTreeContainerDIV feddocHiddenOverflow\" dojoType=\"dijit.layout.ContentPane\" region=\"center\" style=\"padding: 0px;\">\n                    <div role=\"columnheader\" class=\"feddocViewControl\" dojoAttachPoint=\"fedDocLibTreeHeader\" id=\"${namespace}fedDocLibTreeHeader_id\" name=\"${namespace}fedDocLibTreeHeader\" style=\"white-space:nowrap;\">\n                        <span dojoAttachPoint=\"fedDocLibTreeHeaderText\" style=\"position: absolute; left: 4px; top: 4px;\">${_nlsUserInterface.docPickerPage.fedDocLibTreeHeaderText}</span>\n                        <span dojoAttachPoint=\"fedDocLibTreeHeaderButtons\" style=\"position: absolute; right: 4px; top: 4px;\">\n                            <span aria-hidden=\"true\" dojoAttachPoint=\"fedDocPreviewLinkSpan\" id=\"${namespace}fedDocPreviewLinkSpan_id\" name=\"${namespace}fedDocPreviewLinkSpan\" style=\"display: none; white-space:nowrap;\">\n                                <button type=\"button\" dojoAttachPoint=\"fedDocPreviewLink\" dojoType=\"dijit.form.ToggleButton\" label=\"${_nlsUserInterface.docPickerPage.previewOffLabel}\" showLabel=\"false\" iconClass=\"feddocShowPreviewIcon icon16\" style=\"margin-top: -1px; margin-right: -1px;\"></button>\n                            </span>\n                            <button type=\"button\" dojoAttachPoint=\"fedDocLibQuickFilterToggleButton\" dojoType=\"dijit.form.ToggleButton\" label=\"${_nlsUserInterface.docPickerPage.libFilterToggleBtnLabel}\" showLabel=\"false\" iconClass=\"feddocQuickSearchIcon icon16\" style=\"margin-top: -1px; margin-right: -1px;\"></button>\n                        </span>\n                    </div>\n                    <div role=\"gridcell\" dojoAttachPoint=\"fedDocLibTreeFilterDiv\" id=\"${namespace}fedDocLibTreeFilterDiv_id\" name=\"${namespace}fedDocLibTreeFilterDiv\" class=\"feddocFilterBox\" style=\"white-space:nowrap;\">\n                        <label dojoAttachPoint=\"fedDocLibTreeFilterLabel\" id=\"${namespace}fedDocLibTreeFilter.lbl\" for=\"${namespace}fedDocLibTreeFilterTextBox_id\" aria-label=\"${_nlsUserInterface.docPickerPage.libFilterTextBoxLabel}\" style=\"float: left; white-space:nowrap;\">\n                            ${_nlsUserInterface.docPickerPage.libFilterTextBoxLabel}&nbsp;\n                        </label>\n                        <input role=\"textbox\" aria-labelledby=\"${namespace}fedDocLibTreeFilter.lbl\" dojoAttachPoint=\"fedDocLibTreeFilterTextBox\" dojoType=\"dijit.form.TextBox\" type=\"text\"\n                               name=\"${namespace}fedDocLibTreeFilterTextBox\" id=\"${namespace}fedDocLibTreeFilterTextBox_id\"\n                               title=\"${_nlsUserInterface.docPickerPage.libFilterTextBoxTitle}\" intermediateChanges=\"true\" style=\"width: auto; float: left; white-space:nowrap;\"/>\n                    </div>\n                    <div dojoAttachPoint=\"fedDocLibTreeContainer\" id=\"${namespace}fedDocLibTreeContainer_id\" style=\"height: 85%; overflow: auto; white-space:nowrap;\">\n                    </div>\n                </div>\n                <div _role_=\"gridcell\" dojoAttachPoint=\"fedDocTreePane\" name=\"${namespace}fedDocTreePane\" id=\"${namespace}fedDocTreePane_id\" class=\"dijitTreeContainerDIV feddocHiddenOverflow\" dojoType=\"dijit.layout.ContentPane\" splitter=\"true\" region=\"trailing\" style=\"width: 255px; padding: 0px;\" minSize=\"150\">\n                    <div role=\"columnheader\" class=\"feddocViewControl\" dojoAttachPoint=\"fedDocTreeHeader\" id=\"${namespace}fedDocTreeHeader_id\" name=\"${namespace}fedDocTreeHeader\">\n                        <span dojoAttachPoint=\"fedDocTreeHeaderText\" style=\"position: absolute; left: 4px; top: 4px;\">${_nlsUserInterface.docPickerPage.fedDocTreeHeaderText}</span>\n                        <span dojoAttachPoint=\"fedDocTreeHeaderButtons\" style=\"position: absolute; right: 4px; top: 4px;\">\n                            <button type=\"button\" dojoAttachPoint=\"fedDocQuickFilterToggleButton\" dojoType=\"dijit.form.ToggleButton\" label=\"${_nlsUserInterface.docPickerPage.docFilterToggleBtnLabel}\" showLabel=\"false\" iconClass=\"feddocQuickSearchIcon icon16\" style=\"margin-top: -1px; margin-right: -1px;\"></button>\n                        </span>\n                    </div>\n                    <div role=\"gridcell\" dojoAttachPoint=\"fedDocTreeFilterDiv\" id=\"${namespace}fedDocTreeFilterDiv_id\" name=\"${namespace}fedDocTreeFilterDiv\" class=\"feddocFilterBox\">\n                        <label dojoAttachPoint=\"fedDocTreeFilterLabel\" id=\"${namespace}fedDocTreeFilter.lbl\" for=\"${namespace}fedDocTreeFilterTextBox_id\" aria-label=\"${_nlsUserInterface.docPickerPage.docFilterTextBoxLabel}\" style=\"float: left;\">\n                        ${_nlsUserInterface.docPickerPage.docFilterTextBoxLabel}&nbsp;</label><input role=\"textbox\" aria-labelledby=\"${namespace}fedDocTreeFilter.lbl\" dojoAttachPoint=\"fedDocTreeFilterTextBox\" dojoType=\"dijit.form.TextBox\" type=\"text\"\n                               name=\"${namespace}fedDocTreeFilterTextBox\" id=\"${namespace}fedDocTreeFilterTextBox_id\"\n                               title=\"${_nlsUserInterface.docPickerPage.docFilterTextBoxTitle}\" intermediateChanges=\"true\" style=\"width:auto; float: left;\"/>\n                    </div>\n                    <div dojoAttachPoint=\"fedDocTreeContainer\" id=\"${namespace}fedDocTreeContainerId\" style=\"height: 85%; overflow: auto;\">\n                        <div aria-hidden=\"true\" dojoAttachPoint=\"fedDocNoItemsInfoDiv\" id=\"${namespace}fedDocNoItemsInfoDiv_id\" name=\"${namespace}fedDocNoItemsInfoDiv\" title=\"${_nlsUserInterface.docPickerPage.fedDocNoItemsInfoTitle}\" style=\"display:none; overflow: hidden; margin: 4px 4px 4px 4px;\" class=\"lotusMessage lotusInfo feddocTopSpaceSmall\">\n                            <img role=\"presentation\" src=\"${blankImgUrl}\" width=\"16\" height=\"16\" class=\"feddocInfoIcon\" alt=\"${_nlsUserInterface.docPickerPage.fedDocNoItemsInfoImgAlt}\" />\n                            <span>${_nlsMessages.docPickerPage.noItemsMessage}</span>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class=\"feddocTopSpaceSmall\" dojoAttachPoint=\"pickerSelectedItemDiv\" name=\"${namespace}pickerSelectedItemDiv\" id=\"${namespace}pickerSelectedItemDiv_id\">\n            <h4 class=\"feddocHeader4\">\n                <label id=\"${namespace}pickerSelectedItem.lbl\">\n                    <span dojoAttachPoint=\"pickerSelectedItemLabel\"><b>${_nlsUserInterface.docPickerPage.pickerSelectedItemLabel}</b></span>\n                </label>\n            </h4>\n            <div dojoAttachPoint=\"pickerSelectedItemFullPath\" id=\"${namespace}pickerSelectedItemFullPath_id\" role=\"status\" aria-labelledby=\"${namespace}pickerSelectedItem.lbl\" style=\"width: 100%\">\n                <span class=\"feddocItemPath\" dojoAttachPoint=\"pickerSelectedItemPath\" id=\"${namespace}pickerSelectedItemPath_id\" name=\"${namespace}pickerSelectedItemPath\">\n                    <!-- being filled with informative text dynamically by the widget -->\n                </span>\n                <span dojoAttachPoint=\"pickerSelectedItem\" id=\"${namespace}pickerSelectedItem_id\" name=\"${namespace}pickerSelectedItem\">\n                    <!-- being filled with informative text dynamically by the widget -->\n                </span>\n            </div>\n        </div>\n    </form>\n</div>\n",widgetsInTemplate:true,_authenticationInfoMsg:"",_authProperties:null,_callingEnvironment:com.ibm.workplace.wcm.ecm.picker.util.FederatedDocumentsDefinitions._wcm,_containerWidthAtLastAutoTreeResize:-1,_docTreeSelectedItem:null,_docTree:null,_eventHandles:[],_feedBaseURL:null,_feedType:String,_isA11yMode:false,_isFolderPreviewOn:false,_isRTLMode:false,_isTracing:false,_libFolderItemFilter:null,_libTree:null,_libTreeModel:null,_libTreeSelectedItem:null,_nodeTypes:["document","folder"],_quickFilterDoc:null,_quickFilterLib:null,_selectedItem:null,_selectedPath:[],_serverUrl:"",_serviceId:"",_serviceDocBaseURL:"",_store:null,_treeModel:null,buildRendering:function(){var m="buildRendering()";if(this._isTracing){this.traceEntry(m);}this.inherited(arguments);if(this._isTracing){this.traceExit(m);}},constructor:function(_121){this._isTracing=this.isTracing();var m="constructor(p_params)";if(this._isTracing){this.traceEntry(m,_121);if(_121){this.trace(m,"p_params.namespace:",_121.namespace);this.trace(m,"p_params.nodeTypes:",dojo.toJson(_121.nodeTypes));this.trace(m,"p_params.feedBaseURL:",_121.feedBaseURL);this.trace(m,"p_params.callingEnvironment:",_121.callingEnvironment);}}if(typeof _121.namespace=="string"){this.namespace=_121.namespace;}this._eventHandles=[];this._nodeTypes=["document","folder"];if(dojo.isObject(_121.nodeTypes)){this._nodeTypes=_121.nodeTypes;}if(typeof _121.feedBaseURL=="string"){this._feedBaseURL=_121.feedBaseURL;}else{if(this._isTracing){this.error(m,"Parameter 'feedBaseURL' parameter missing on constructor arguments");}}if(typeof _121.serviceDocBaseURL=="string"){this._serviceDocBaseURL=_121.serviceDocBaseURL;}else{if(this._isTracing){this.error(m,"Parameter 'serviceDocBaseURL' parameter missing on constructor arguments");}}if(_121.callingEnvironment){this._callingEnvironment=_121.callingEnvironment;}if(this._callingEnvironment===com.ibm.workplace.wcm.ecm.picker.util.FederatedDocumentsDefinitions._wcm){this._isFolderPreviewOn=true;}var _122=this._nlsUserInterface.docPickerPage;this._stepLabel=_122.stepLabel;if(this._isCalledFromPZN()){this._stepDescription=_122.stepDescriptionPZN;if(_121.selectedPath){this._selectedPath=_121.selectedPath;}}else{this._stepDescription=_122.stepDescriptionWCM;}if(this._isTracing){this.traceExit(m);}},destroyRecursive:function(){if(!this._isFolderPreviewOn){this.fedDocPickerBorderContainer.addChild(this.fedDocTreePane);}this.inherited(arguments);},destroy:function(){var m="destroy()";if(this._isTracing){this.traceEntry(m);}this.inherited(arguments);if(this._isTracing){this.traceExit(m);}},getLibTree:function(){var m="getLibTree()";if(this._isTracing){this.traceEntry(m);}if(this._isTracing){this.traceExit(m,this._libTree);}return this._libTree;},getSelectedItem:function(){var m="getSelectedItem()";if(this._isTracing){this.traceEntry(m);}if(this._isTracing){this.traceExit(m,this._selectedItem);}return this._selectedItem;},getSelectedItemJSON:function(){var m="getSelectedItemJSON()";if(this._isTracing){this.traceEntry(m);}var _123={"title":this._store.getLabel(this._selectedItem),"url":this._store.getViewURL(this._selectedItem)};if(this._isTracing){this.traceExit(m,_123);}return _123;},initializePage:function(_124){var m="initializePage(p_params)";if(this._isTracing){this.traceEntry(m,_124);if(_124){this.trace(m,"p_params.authProperties: ",dojo.toJson(_124.authProperties));this.trace(m,"p_params.authInfoMsg: ",_124.authInfoMsg);this.trace(m,"p_params.feedType: ",_124.feedType);this.trace(m,"p_params.serverUrl: ",_124.serverUrl);this.trace(m,"p_params.serviceId: ",_124.serviceId);}}var _125=dojo.query("body")[0];if(dojo.hasClass(_125,"dijit_a11y")){this._isA11yMode=true;}else{this._isA11yMode=false;}if(dojo.hasClass(_125,"lotus_rtl")){this._isRTLMode=true;}else{this._isRTLMode=false;}if(this._isTracing){this.trace(m,"dijit_a11y mode: ",this._isA11yMode);this.trace(m,"lotus_rtl mode: ",this._isRTLMode);}if(this._isRTLMode){dojo.style(this.fedDocLibTreeFilterLabel,"float","right");dojo.style(this.fedDocTreeFilterLabel,"float","right");}this._clearSelectedItem();if(_124){if(_124.authProperties){this._authProperties=_124.authProperties;}if(_124.authInfoMsg){this._authInfoMsg=_124.authInfoMsg;dojo.attr(this.pickerAuthInfo,"innerHTML",this._authInfoMsg);}else{dojo.attr(this.pickerAuthInfo,"innerHTML","");}if(_124.serverUrl){this._serverUrl=_124.serverUrl;dojo.attr(this.pickerServerUrl,"innerHTML",this._serverUrl);}else{dojo.attr(this.pickerServerUrl,"innerHTML","");}if(_124.feedType){this._feedType=_124.feedType;}else{this._feedType=null;}if(_124.serviceId){this._serviceId=_124.serviceId;}else{this._serviceId="";}this._connectToServer();}if(this._isTracing){this.traceExit(m);}},layout:function(){var m="layout()";if(this._isTracing){this.traceEntry(m);}if(this.fedDocTreePane&&(this._isFolderPreviewOn===true)){var _126=dojo.contentBox(this.fedDocPickerBorderContainer.domNode).w;if(_126!==this._containerWidthAtLastAutoTreeResize){this._containerWidthAtLastAutoTreeResize=_126;dojo.marginBox(this.fedDocTreePane.domNode,{"w":(_126*0.5)});this.fedDocPickerBorderContainer.resize();this.fedDocPickerBorderContainer.layout();}}if(this.virtualContainerNodeHeight){var _127=dojo.marginBox(this.pickerServerSectionDiv).h+dojo.marginBox(this.pickerAuthenticationSectionDiv).h+dojo.marginBox(this.pickerSelectedItemDiv).h+30;var _128=this.virtualContainerNodeHeight;var _129=dojo.style(this.fedDocPickerResponseContainer,"min-height");var _12a=Math.max(_129,_128-_127);dojo.style(this.fedDocPickerResponseContainer,"height",_12a+"px");}this._updateTreeLayout();if(this._isTracing){this.traceExit(m);}},onShow:function(){var m="onShow()";if(this._isTracing){this.traceEntry(m);}this.inherited(arguments);this.fedDocPickerBorderContainer.resize();if(this._isTracing){this.traceExit(m);}},postCreate:function(){var m="postCreate()";if(this._isTracing){this.traceEntry(m);}this.inherited(arguments);this._setFilterSectionVisible(this.fedDocLibTreeFilterDiv,null,false,false);this._setFilterSectionVisible(this.fedDocTreeFilterDiv,null,false,false);this._initEventHandles();this._quickFilterDoc=new com.ibm.workplace.wcm.ecm.picker.widget.filter.QuickSearchTreeItemFilter({});this._quickFilterLib=new com.ibm.workplace.wcm.ecm.picker.widget.filter.QuickSearchTreeItemFilter({});this._libFolderItemFilter=new com.ibm.workplace.wcm.ecm.picker.widget.filter.LibFolderTreeItemFilter({"itemFilter":this._quickFilterLib});if(this._callingEnvironment===com.ibm.workplace.wcm.ecm.picker.util.FederatedDocumentsDefinitions._pzn){dojo.style(this.fedDocPreviewLinkSpan,"display","inline");dijit.setWaiState(this.fedDocPreviewLinkSpan,"hidden",false);if(!this._isFolderPreviewOn){this._hideDocTreePane();}}this._changeNodeTitleText(this.fedDocQuickFilterToggleButton,this._nlsUserInterface.docPickerPage.docFilterToggleBtnOffTitle);this._changeNodeTitleText(this.fedDocLibQuickFilterToggleButton,this._nlsUserInterface.docPickerPage.libFilterToggleBtnOffTitle);this._changeNodeTitleText(this.fedDocPreviewLink,this._nlsUserInterface.docPickerPage.previewOffTitle);if(this._isTracing){this.traceExit(m);}},startup:function(){var m="startup()";if(this._isTracing){this.traceEntry(m);}this.fedDocPickerBorderContainer.startup();this.inherited(arguments);if(this._isTracing){this.traceExit(m);}},uninitialize:function(){var m="uninitialize()";if(this._isTracing){this.traceEntry(m);}this._clearEventHandles();this.inherited(arguments);if(this._isTracing){this.traceExit(m);}},_adjustTreePaneHeight:function(_12b,_12c,_12d){var m="_adjustTreePaneHeight(p_domNode, p_otherDomNode, p_otherDomNodesHeight)";if(this._isTracing){this.traceEntry(m,[_12b,_12c,_12d]);}if(_12c&&(typeof _12c=="object")){if(_12b.parentNode){var _12e=_12b.parentNode;if(_12b.parentNode.domNode){_12e=_12b.parentNode.domNode;}var _12f=dojo.marginBox(_12b.parentNode).h;var _130=dojo.marginBox(_12b).h;if(dojo.contentBox(_12b).h===0){_130=0;}if(_12d){dojo.marginBox(_12c,{"h":_12f-_130-_12d});}else{dojo.marginBox(_12c,{"h":_12f-_130});}}}if(this._isTracing){this.traceExit(m);}},_animateCloseFilterSection:function(_131,_132,_133){var m="_animateCloseFilterSection(p_domNode, p_otherDomNode, p_otherDomNodesHeight)";if(this._isTracing){this.traceEntry(m,[_131,_132,_133]);}if(!dojo.hasClass(_131,"lotusHidden")){dojo.style(_131,"overflow","hidden");dojo.animateProperty({"node":_131,"duration":500,"properties":{"height":{"end":0,"units":"px"}},"onEnd":dojo.hitch(this,function(){dojo.addClass(_131,"lotusHidden");dijit.setWaiState(_131,"hidden",true);dijit.removeWaiState(_131,"expanded");if(_132&&(typeof _132=="object")){this._adjustTreePaneHeight(_131,_132,_133);}})}).play();}if(this._isTracing){this.traceExit(m);}},_animateOpenFilterSection:function(_134,_135,_136,_137){var m="_animateOpenFilterSection(p_domNode, p_otherDomNode, p_targetHeight, p_otherDomNodesHeight)";if(this._isTracing){this.traceEntry(m,[_134,_135,_136,_137]);}if(dojo.hasClass(_134,"lotusHidden")){dojo.style(_134,"overflow","hidden");dojo.style(_134,"height","0ex");dojo.removeClass(_134,"lotusHidden");dojo.marginBox(_134,{h:0});dijit.setWaiState(_134,"hidden",false);dijit.setWaiState(_134,"expanded",true);dojo.animateProperty({"node":_134,"duration":500,"properties":{"height":{"end":_136,"units":"ex"}},"onEnd":dojo.hitch(this,function(){dojo.marginBox(_134,{h:_136});dojo.style(_134,"height",_136+"ex");if(_135&&(typeof _135=="object")){this._adjustTreePaneHeight(_134,_135,_137);}this._updateFilterLayout();})}).play();}if(this._isTracing){this.traceExit(m);}},_autoResizeLabelAndInput:function(_138,_139,_13a,_13b){var m="_autoResizeLabelAndInput(p_newContainerSize, p_labelNode, p_inputNode, p_minInputWidth)";if(this._isTracing){this.traceEntry(m,[_138,_139,_13a,_13b]);}if(_138&&_138.w){var _13c=Math.max(0,_138.w);var _13d=Math.max(_139.scrollWidth,_139.offsetWidth);var _13e=dojo.marginBox(_139).w;var _13f=dojo.marginBox(_13a).w;var _140=16;if(_13c<_13d+_13b+_140){var _141=Math.max(0,_13c-_13b-_140);if(_141>=0){dojo.style(_139,"width",_141+"px");}dojo.style(_139,"overflow","hidden");if(_13c<_13b+_140){if(_13c>=0){dojo.style(_13a,"width",_13c+"px");}dojo.style(_13a,"overflow","hidden");}else{dojo.style(_13a,"width",_13b+"px");dojo.style(_13a,"overflow","none");}}else{dojo.style(_139,"width","auto");dojo.style(_139,"overflow","visible");var _142=_13c-_13d-_140;if(_142>=0){dojo.style(_13a,"width",_142+"px");}dojo.style(_13a,"overflow","visible");}}},_autoResizeTextAndControl:function(_143,_144,_145){var m="_autoResizeTextAndControl(p_newContainerSize, p_textNode, p_controlNode)";if(this._isTracing){this.traceEntry(m,[_143,_144,_145]);}if(_143&&_143.w){var _146=Math.max(0,_143.w);var _147=Math.max(_144.scrollWidth,_144.offsetWidth);var _148=Math.max(_145.scrollWidth,_145.offsetWidth);var _149=dojo.marginBox(_144).w;var _14a=dojo.marginBox(_145).w;var _14b=10;if(_146<_147+_148+_14b){var _14c=Math.max(0,_146-_148-_14b);if(_14c>=0){dojo.style(_144,"width",_14c+"px");}dojo.style(_144,"overflow","hidden");}else{dojo.style(_144,"width","auto");dojo.style(_144,"overflow","visible");}}},_buildLibTreePath:function(){var m="_buildLibTreePath()";if(this._isTracing){this.traceEntry(m);}var _14d=this._libTree.attr("path");var path="";var file="";var _14e="";var _14f="";var _150=0;var _151=this._libTree.rootNode;if(_151&&_151.item&&(_151.item.root===true)){_150=1;}for(var i=_150;i<_14d.length;i++){var _152=this._store.getLabel(_14d[i]);if(this._isTracing){this.trace(m,i+". item on path:",_152);}file=_152;_14e+=_152;if(i<_14d.length-1){_14e+=" / ";}if(i<_14d.length-1){path+=_152;path+=" / ";}}_14f={"path":path,"file":file,"fullpath":_14e};if(this._isTracing){this.traceExit(m,_14f);}return _14f;},_buildPathForSelectedItem:function(){var m="_buildPathForSelectedItem()";if(this._isTracing){this.traceEntry(m);}var _153=null;if(this._callingEnvironment===com.ibm.workplace.wcm.ecm.picker.util.FederatedDocumentsDefinitions._pzn){_153=this._buildLibTreePath();}else{if(this._isTracing){this.trace(m,"Selected item from library tree:",this._libTreeSelectedItem);this.trace(m,"Selected item from document tree:",this._docTreeSelectedItem);this.trace(m,"Currently selected item:",this._selectedItem);}var _154=this._buildLibTreePath();if(this._docTreeSelectedItem==this._selectedItem){_153={"path":_154.fullpath+" / ","file":this._store.getLabel(this._docTreeSelectedItem),"fullpath":_154.fullpath+" / "+this._store.getLabel(this._docTreeSelectedItem)};}else{_153=_154;}}if(this._isTracing){this.traceExit(m,_153);}return _153;},_calcDomNodesHeight:function(_155){var m="_calcDomNodesHeight(p_domNodes)";if(this._isTracing){this.traceEntry(m,_155);}var _156=0;if(_155&&dojo.isArray(_155)){dojo.forEach(_155,function(_157){if(_157){if(_157.domNode){_156+=dojo.marginBox(_157.domNode).h;}else{_156+=dojo.marginBox(_157).h;}}});}if(this._isTracing){this.traceExit(m,_156);}return _156;},_changeNodeTitleText:function(_158,_159){var m="_changeNodeTitleText(p_domNode, p_newTitleText)";if(this._isTracing){this.traceEntry(m,[_158,_159]);}dojo.attr(_158,"title",_159);if(this._isTracing){this.traceExit(m);}},_clearEventHandles:function(){var m="_clearEventHandles()";if(this._isTracing){this.traceEntry(m);}dojo.forEach(this._eventHandles,dojo.disconnect);this._eventHandles=[];if(this._isTracing){this.traceExit(m);}},_clearSelectedItem:function(){var m="_clearSelectedItem()";if(this._isTracing){this.traceEntry(m);}this._selectedItem=null;this._docTreeSelectedItem=null;this._libTreeSelectedItem=null;var _15a=this._nlsUserInterface.docPickerPage.nothingSelectedText;dojo.addClass(this.pickerSelectedItem,"feddocNoSelection");dojo.attr(this.pickerSelectedItem,"innerHTML",_15a);dojo.attr(this.pickerSelectedItem,"title",_15a);dojo.attr(this.pickerSelectedItemPath,"innerHTML","");dojo.attr(this.pickerSelectedItemPath,"title","");if(this._isTracing){this.traceExit(m);}},_clearTree:function(){var m="_clearTree()";if(this._isTracing){this.traceEntry(m);}var _15b=this.id+"_docTree";var tree=dijit.byId(_15b);if(tree){tree.destroyRecursive(false);}if(this._isTracing){this.traceExit(m);}},_connectToServer:function(){var m="_connectToServer()";if(this._isTracing){this.traceEntry(m);this.trace(m,"Server URL:",this._serverUrl);this.trace(m,"Authentication settings:",dojo.toJson(this._authProperties));}this._setupLibTree(this._serverUrl);if(this._isTracing){this.traceExit(m);}},_getLibTreeIconClass:function(_15c,_15d){var m="_getLibTreeIconClass(p_item, p_opened)";if(this._isTracing){this.traceEntry(m,[_15c,_15d]);}var _15e="";if(_15c){if(this._store.isRepositoryItem(_15c)){_15e=_15d?"dijitRepositoryOpened":"dijitRepositoryClosed";}else{_15e=_15d?"dijitFolderOpened":"dijitFolderClosed";}}if(this._isTracing){this.traceExit(m,_15e);}return _15e;},_getDocTreeIconClass:function(_15f,_160){var m="_getDocTreeIconClass(p_item, p_opened)";if(this._isTracing){this.traceEntry(m,[_15f,_160]);}var _161="";if(_15f){if(this._store.isFolderItem(_15f)){_161=_160?"dijitFolderOpened":"dijitFolderClosed";}else{_161="dijitLeaf";}}if(this._isTracing){this.traceExit(m,_161);}return _161;},_hideConnectingBox:function(){var m="_hideConnectingBox()";if(this._isTracing){this.traceEntry(m);}dojo.style(this.fedDocPickerConnectingDiv,"display","none");dijit.setWaiState(this.fedDocPickerConnectingDiv,"hidden",true);dijit.setWaiState(this.fedDocPickerResponseContainer,"busy",false);if(this._isTracing){this.traceExit(m);}},_hideDocTreePane:function(){var m="_hideDocTreePane()";if(this._isTracing){this.traceEntry(m);}this.fedDocPickerBorderContainer.removeChild(this.fedDocTreePane);this.fedDocPickerBorderContainer.layout();if(this._isTracing){this.traceExit(m);}},_hideNoItemsInfo:function(){var m="_hideNoItemsInfo()";if(this._isTracing){this.traceEntry(m);}dojo.style(this.fedDocNoItemsInfoDiv,"display","none");dijit.setWaiState(this.fedDocNoItemsInfoDiv,"hidden",true);if(this._isTracing){this.traceExit(m);}},_initEventHandles:function(){var m="_initEventHandles()";if(this._isTracing){this.traceEntry(m);}this._eventHandles.push(dojo.connect(this.fedDocQuickFilterToggleButton,"onChange",dojo.hitch(this,"_onQuickFilterDocToggle")));this._eventHandles.push(dojo.connect(this.fedDocLibQuickFilterToggleButton,"onChange",dojo.hitch(this,"_onQuickFilterLibToggle")));this._eventHandles.push(dojo.connect(this.fedDocTreeFilterTextBox,"onChange",dojo.hitch(this,"_onQuickFilterDocTextChanged")));this._eventHandles.push(dojo.connect(this.fedDocLibTreeFilterTextBox,"onChange",dojo.hitch(this,"_onQuickFilterLibTextChanged")));this._eventHandles.push(dojo.connect(this.fedDocPreviewLink,"onChange",dojo.hitch(this,"_onPreviewLinkClicked")));this._eventHandles.push(dojo.connect(this.feddocResponseForm,"onsubmit",dojo.hitch(this,"_onSubmit")));this._eventHandles.push(dojo.connect(this.fedDocLibTreePane,"resize",dojo.hitch(this,"_onLibTreePaneResized")));this._eventHandles.push(dojo.connect(this.fedDocTreePane,"resize",dojo.hitch(this,"_onTreePaneResized")));if(this._isTracing){this.traceExit(m);}},_isCalledFromPZN:function(){var m="_isCalledFromPZN()";if(this._isTracing){this.traceEntry(m);}var _162=this._callingEnvironment===com.ibm.workplace.wcm.ecm.picker.util.FederatedDocumentsDefinitions._pzn;if(this._isTracing){this.traceExit(m,_162);}return _162;},_isCalledFromWCM:function(){var m="_isCalledFromWCM()";if(this._isTracing){this.traceEntry(m);}var _163=this._callingEnvironment===com.ibm.workplace.wcm.ecm.picker.util.FederatedDocumentsDefinitions._wcm;if(this._isTracing){this.traceExit(m,_163);}return _163;},_onCmisPageErrorStateChanged:function(_164,_165,_166,_167){var m="_onCmisPageErrorStateChanged(p_sender, p_errorState, p_errorMsg, p_errorDetails)";if(this._isTracing){this.traceEntry(m,[_164,_165,_166,_167]);}if(_165===true){this._showError(_166,_167);}else{if(_165===false){this._clearError();}else{}}if(this._isTracing){this.traceExit(m);}},_onLibTreeFocused:function(){var m="_onLibTreeFocused()";if(this._isTracing){this.traceEntry(m,[]);}dijit.setWaiState(this.fedDocPickerBorderContainer.domNode,"activedescendant",this._libTree.get("id"));if(this._isTracing){this.traceExit(m);}},_onLibTreeLoaded:function(){var m="_onLibTreeLoaded()";if(this._isTracing){this.traceEntry(m,[p_item,p_node]);}this._hideConnectingBox();if(this._selectedPath&&this._selectedPath.length>0){this._libTree.set("path",this._selectedPath);}else{dijit.focus(dijit.getFirstInTabbingOrder(this._libTree.domNode));}if(this._isTracing){this.traceExit(m);}},_onLibTreeNodeClick:function(_168,_169){var m="_onLibTreeNodeClick(p_item, p_node)";if(this._isTracing){this.traceEntry(m,[_168,_169]);}this._hideConnectingBox();if(this._store.isFolderItem(_168)||this._store.isRepositoryItem(_168)){this._setSelectedItem(_168);this._libTreeSelectedItem=_168;if(this._isFolderPreviewOn){this._setupTree(this._store.getIdentity(_168));}}else{this._clearSelectedItem();}if(this._isTracing){this.traceExit(m);}},_onLibTreeNodeClose:function(_16a,_16b){var m="_onLibTreeNodeClose(p_item, p_node)";if(this._isTracing){this.traceEntry(m,[_16a,_16b]);}this._hideConnectingBox();if(this._store.isFolderItem(_16a)||this._store.isRepositoryItem(_16a)){this._store.setItemExpanded(_16a,false);}this._onLibTreeNodeClick(_16a,_16b);if(this._isTracing){this.traceExit(m);}},_onLibTreeNodeOpen:function(_16c,_16d){var m="_onLibTreeNodeOpen(p_item, p_node)";if(this._isTracing){this.traceEntry(m,[_16c,_16d]);}this._hideConnectingBox();if(this._store.isFolderItem(_16c)||this._store.isRepositoryItem(_16c)){var _16e=this._libTree.attr("selectedItem");if(_16e===_16c){this._setSelectedItem(_16c);this._libTreeSelectedItem=_16c;this._setupTree(this._store.getIdentity(_16c));}this._store.setItemExpanded(_16c,true);}if(this._isTracing){this.traceExit(m);}},_onLibTreePaneResized:function(_16f,_170){var m="_onLibTreePaneResized(p_changeSize, p_resultSize)";if(this._isTracing){this.traceEntry(m,[_16f,_170]);}var _171=dojo.marginBox(this.fedDocLibTreePane.domNode);if(_170&&_170.w){_170.h=_171.h;_170.w=_171.w;}else{_170={w:_171.w,h:_171.h};}this._autoResizeTextAndControl(_170,this.fedDocLibTreeHeaderText,this.fedDocLibTreeHeaderButtons);this._autoResizeLabelAndInput(_170,this.fedDocLibTreeFilterLabel,this.fedDocLibTreeFilterTextBox.domNode,40);if(this._isTracing){this.traceExit(m);}},_onQuickFilterDocTextChanged:function(){var m="_onQuickFilterDocTextChanged()";if(this._isTracing){this.traceEntry(m);}this._onQuickFilterTextChanged(this._docTree,this._treeModel,this._quickFilterDoc,this.fedDocTreeFilterTextBox.attr("value"));if(this._isTracing){this.traceExit(m);}},_onQuickFilterDocToggle:function(_172){var m="_onQuickFilterDocToggle(p_newValue)";if(this._isTracing){this.traceEntry(m,_172);}if(_172===true){var _173=5;this._setFilterSectionVisible(this.fedDocTreeFilterDiv,this.fedDocTreeContainer,true,true,_173,this._calcDomNodesHeight([this.fedDocTreeHeader])+2);this._onQuickFilterTextChanged(this._docTree,this._treeModel,this._quickFilterDoc,this.fedDocTreeFilterTextBox.attr("value"));this._changeNodeTitleText(this.fedDocQuickFilterToggleButton,this._nlsUserInterface.docPickerPage.docFilterToggleBtnOnTitle);}else{this._setFilterSectionVisible(this.fedDocTreeFilterDiv,this.fedDocTreeContainer,false,true,0,this._calcDomNodesHeight([this.fedDocTreeHeader])+2);this._onQuickFilterTextChanged(this._docTree,this._treeModel,this._quickFilterDoc,"");this._changeNodeTitleText(this.fedDocQuickFilterToggleButton,this._nlsUserInterface.docPickerPage.docFilterToggleBtnOffTitle);}if(this._isTracing){this.traceExit(m);}},_onQuickFilterLibTextChanged:function(){var m="_onQuickFilterLibTextChanged()";if(this._isTracing){this.traceEntry(m);}this._onQuickFilterTextChanged(this._libTree,this._libTreeModel,this._quickFilterLib,this.fedDocLibTreeFilterTextBox.attr("value"));if(this._isTracing){this.traceExit(m);}},_onQuickFilterLibToggle:function(_174){var m="_onQuickFilterLibToggle(p_newValue)";if(this._isTracing){this.traceEntry(m,_174);}var _175=5;if(_174===true){this._setFilterSectionVisible(this.fedDocLibTreeFilterDiv,this.fedDocLibTreeContainer,true,true,_175,this._calcDomNodesHeight([this.fedDocLibTreeHeader])+2);this._onQuickFilterTextChanged(this._libTree,this._libTreeModel,this._quickFilterLib,this.fedDocLibTreeFilterTextBox.attr("value"));this._changeNodeTitleText(this.fedDocLibQuickFilterToggleButton,this._nlsUserInterface.docPickerPage.libFilterToggleBtnOnTitle);}else{this._setFilterSectionVisible(this.fedDocLibTreeFilterDiv,this.fedDocLibTreeContainer,false,true,0,this._calcDomNodesHeight([this.fedDocLibTreeHeader])+2);this._onQuickFilterTextChanged(this._libTree,this._libTreeModel,this._quickFilterLib,"");this._changeNodeTitleText(this.fedDocLibQuickFilterToggleButton,this._nlsUserInterface.docPickerPage.libFilterToggleBtnOffTitle);}if(this._isTracing){this.traceExit(m);}},_onQuickFilterTextChanged:function(_176,_177,_178,_179){var m="_onQuickFilterTextChanged(p_tree, p_model, p_filter, p_searchTerm)";if(this._isTracing){this.traceEntry(m,[_176,_177,_178,_179]);}_178.changeLabelContains(_179);var _17a=dojo.version.minor<8;var _17b=null;if(_176){if(_17a){_17b=_176.lastFocused;if(_176.lastFocused!==null){_176.lastFocused.setSelected(false);}_176.lastFocused=null;}_177.filterTreeItems(_177.root);if(_17a){if(_17b){if(_17b.domNode){if(_17b.domNode.parentNode!==null){_176.lastFocused.setSelected(false);_17b.setSelected(true);_176.lastFocused=_17b;}else{}}}}}if(this._isTracing){this.traceExit(m);}},_onPreviewLinkClicked:function(_17c){var m="_onPreviewLinkClicked()";if(this._isTracing){this.traceEntry(m);}if((this._isFolderPreviewOn===true)&&(_17c===false)){this._hideDocTreePane();this._store.removeNodeTypes(["document"]);this._changeNodeTitleText(this.fedDocPreviewLink,this._nlsUserInterface.docPickerPage.previewOffTitle);this._isFolderPreviewOn=false;this._clearTree();}else{if((this._isFolderPreviewOn===false)&&(_17c===true)){this._showDocTreePane();this._store.addNodeTypes(["document"]);this._changeNodeTitleText(this.fedDocPreviewLink,this._nlsUserInterface.docPickerPage.previewOnTitle);this._isFolderPreviewOn=true;var _17d=this._libTreeSelectedItem;if(_17d){this._setupTree(this._store.getIdentity(_17d));}}}if(this._isTracing){this.traceExit(m);}},_onRootNodeChanged:function(_17e){var m="_onRootNodeChanged(p_item)";if(this._isTracing){this.traceEntry(m,_17e);}if(_17e&&_17e.title){this._libTree.showRoot=true;this._libTree.rootNode.attr("label",_17e.title);this._libTree.rootNode.attr("item",_17e);}else{this._libTree.showRoot=false;this._libTree.resize();dojo.style(this._libTree.rootNode.rowNode,"display","none");}if(this._isTracing){this.traceExit(m);}},_onSubmit:function(_17f){dojo.stopEvent(_17f);if(this._onDefaultAction&&dojo.isFunction(this._onDefaultAction)){this._onDefaultAction();}return false;},_onTreeFocused:function(){var m="_onTreeFocused()";if(this._isTracing){this.traceEntry(m,[]);}dijit.setWaiState(this.fedDocPickerBorderContainer.domNode,"activedescendant",this._docTree.get("id"));if(this._isTracing){this.traceExit(m);}},_onTreeLoaded:function(){var m="_onTreeLoaded()";if(this._isTracing){this.traceEntry(m);}this._hideConnectingBox();this._treeModel.getChildren(this._libTreeSelectedItem,dojo.hitch(this,function(_180){if(_180&&_180.length<=0){this._showNoItemsInfo();}else{this._hideNoItemsInfo();}}));if(this._isTracing){this.traceExit(m);}},_onTreeNodeClick:function(_181,_182){var m="_onTreeNodeClick(p_item, p_node)";if(this._isTracing){this.traceEntry(m,[_181,_182]);}this._hideConnectingBox();if(this._isCalledFromWCM()){if(this._isTracing){this.trace(m,"Setting selected item and document tree selected item to the same value");}this._docTreeSelectedItem=_181;this._setSelectedItem(_181);}if(this._isTracing){this.traceExit(m);}},_onTreePaneResized:function(_183,_184){var m="_onTreePaneResized(p_changeSize, p_resultSize)";if(this._isTracing){this.traceEntry(m,[_183,_184]);}var _185=dojo.marginBox(this.fedDocTreePane.domNode);if(_184&&_184.w){_184.h=_185.h;_184.w=_185.w;}else{_184={w:_185.w,h:_185.h};}this._autoResizeTextAndControl(_184,this.fedDocTreeHeaderText,this.fedDocTreeHeaderButtons);this._autoResizeLabelAndInput(_184,this.fedDocTreeFilterLabel,this.fedDocTreeFilterTextBox.domNode,40);if(this._isTracing){this.traceExit(m);}},_setFilterSectionVisible:function(_186,_187,_188,_189,_18a,_18b){var m="_setFilterSectionVisible(p_sectionDomNode, p_otherDomNode, p_isVisible, p_animate, p_targetHeight)";if(this._isTracing){this.traceEntry(m,[_186,_187,_188,_189,_18a]);}if((_189)&&(_189===true)){if(_188===true){this._animateOpenFilterSection(_186,_187,_18a,_18b);}else{this._animateCloseFilterSection(_186,_187,_18b);}}else{this._setVisible(_186,_188);if(_187&&(typeof _187=="object")){if(_186.parentNode){var _18c=_186.parentNode;if(_186.parentNode.domNode){_18c=_186.parentNode.domNode;}var _18d=dojo.marginBox(_186.parentNode).h;var _18e=dojo.marginBox(_186).h;if(dojo.contentBox(p_domNode).h===0){_18e=0;}if(_18b){dojo.marginBox(_187,{"h":_18d-_18e-_18b});}else{dojo.marginBox(_187,{"h":_18d-_18e});}}}}if(this._isTracing){this.traceExit(m);}},_setSelectedItem:function(_18f){var m="_setSelectedItem(p_item)";if(this._isTracing){this.traceEntry(m,_18f);}if((_18f)&&(typeof _18f!="undefined")&&((!_18f.root)||(_18f.root===false))){this._selectedItem=_18f;var _190=this._buildPathForSelectedItem();dojo.removeClass(this.pickerSelectedItem,"feddocNoSelection");dojo.attr(this.pickerSelectedItemPath,"innerHTML",_190.path);dojo.attr(this.pickerSelectedItemPath,"title",_190.fullpath);dojo.attr(this.pickerSelectedItem,"innerHTML",_190.file);dojo.attr(this.pickerSelectedItem,"title",_190.fullpath);if(this._isCalledFromWCM()){this._setReadyValue(!(this._store.isFolderItem(this._selectedItem)||this._store.isRepositoryItem(this._selectedItem)));}else{this._setReadyValue(true);}}if(this._isTracing){this.traceExit(m);}},_setupLibTree:function(_191){var m="_setupLibTree(p_url)";if(this._isTracing){this.traceEntry(m,_191);}var _192=this.id+"_libTree";var _193=dijit.byId(_192);if(_193){_193.destroyRecursive(false);}this._clearTree();this._showConnectingBox();var _194=dojo.clone(this.nodeTypes);_194.push("document");var _195=this._feedBaseURL;var _196=this._feedBaseURL;if(this._feedType&&this._feedType===com.ibm.workplace.wcm.ecm.picker.util.FederatedDocumentsDefinitions._servicedoc){_196=this._serviceDocBaseURL;}var _197={"url":_191,"feedBaseURL":_195,"feedSvcDocBaseURL":_196,"nlsMessages":this._nlsMessages,"nodeTypes":_194,"onErrorStateChanged":dojo.hitch(this,"_onCmisPageErrorStateChanged"),"onRootNodeChanged":dojo.hitch(this,"_onRootNodeChanged"),"serviceId":this._serviceId};if(this._authProperties.authType==com.ibm.workplace.wcm.ecm.picker.widget.AuthenticationWidget._authTypeVault||this._authProperties.authType==com.ibm.workplace.wcm.ecm.picker.widget.AuthenticationWidget._authTypeUserPwd){_197.credentialVaultParamValue=this._authProperties.vaultSlotID;}this._store=new com.ibm.workplace.wcm.ecm.picker.widget.store.FedDocAtomStore(_197);if(!this._isFolderPreviewOn){this._store.removeNodeTypes(["document"]);}var _198={"store":this._store,"deferItemLoadingUntilExpand":true,"itemFilter":this._libFolderItemFilter,"rootLabel":"Folders","rootId":"folders"};this._libTreeModel=new com.ibm.workplace.wcm.ecm.picker.widget.model.FedDocTreeModel(_198);var _199={"id":_192,"model":this._libTreeModel,"showRoot":true,"filteredNodes":[],"adjustFirstNodeForIE":this.adjustFirstNodeForIE,"dir":this._isRTLMode?"rtl":"ltr","persist":false,"onClick":dojo.hitch(this,"_onLibTreeNodeClick"),"onOpen":dojo.hitch(this,"_onLibTreeNodeOpen"),"onClose":dojo.hitch(this,"_onLibTreeNodeClose"),"onLoad":dojo.hitch(this,"_onLibTreeLoaded"),"onFocus":dojo.hitch(this,"_onLibTreeFocused"),"getIconClass":dojo.hitch(this,"_getLibTreeIconClass")};this._libTree=new dijit.Tree(_199);dojo.style(this._libTree.domNode,"overflow","visible");dojo.place(this._libTree.domNode,this.fedDocLibTreeContainer,"last");if(this._isTracing){this.traceExit(m);}},_setupTree:function(p_id){var m="_setupTree(p_id)";if(this._isTracing){this.traceEntry(m,p_id);}this._clearTree();var _19a=this.id+"_docTree";var _19b={store:this._store,query:"itemID="+p_id,deferItemLoadingUntilExpand:true,itemFilter:this._quickFilterDoc,allowSubItems:false};this._treeModel=new com.ibm.workplace.wcm.ecm.picker.widget.model.FedDocTreeModel(_19b);var _19c={"id":_19a,"model":this._treeModel,"showRoot":false,"filteredNodes":[],"adjustFirstNodeForIE":this.adjustFirstNodeForIE,"dir":this._isRTLMode?"rtl":"ltr","persist":false,"onClick":dojo.hitch(this,"_onTreeNodeClick"),"onOpen":dojo.hitch(this,"_onTreeNodeClick"),"onClose":dojo.hitch(this,"_onTreeNodeClick"),"onFocus":dojo.hitch(this,"_onTreeFocused"),"onLoad":dojo.hitch(this,"_onTreeLoaded"),"getIconClass":dojo.hitch(this,"_getDocTreeIconClass")};if(this._callingEnvironment===com.ibm.workplace.wcm.ecm.picker.util.FederatedDocumentsDefinitions._pzn){dojo.addClass(this.fedDocTreeContainer,"disabledTree");dijit.setWaiState(this.fedDocTreeContainer,"disabled",true);}this._docTree=new dijit.Tree(_19c);dojo.style(this._docTree.domNode,"overflow","visible");dojo.place(this._docTree.domNode,this.fedDocTreeContainer,"last");this._updateTreeLayout();if(this._isTracing){this.traceExit(m);}},_setVisible:function(_19d,_19e){var m="_setVisible(p_domNode, p_isVisible)";if(this._isTracing){this.traceEntry(m,[_19d,_19e]);}if(_19e===true){if(dojo.hasClass(_19d,"lotusHidden")){dojo.removeClass(_19d,"lotusHidden");}dijit.setWaiState(_19d,"hidden",false);dijit.setWaiState(_19d,"expanded",true);}else{if(!dojo.hasClass(_19d,"lotusHidden")){dojo.addClass(_19d,"lotusHidden");}dijit.setWaiState(_19d,"hidden",true);dijit.removeWaiState(_19d,"expanded");}if(this._isTracing){this.traceExit(m);}},_showConnectingBox:function(){var m="_showConnectingBox()";if(this._isTracing){this.traceEntry(m);}if(dojo.style(this.fedDocPickerConnectingDiv,"display")!="block"){dojo.style(this.fedDocPickerConnectingDiv,"display","block");}dijit.setWaiState(this.fedDocPickerConnectingDiv,"hidden",false);dijit.setWaiState(this.fedDocPickerResponseContainer,"busy",true);if(this._isTracing){this.traceExit(m);}},_showDocTreePane:function(){var m="_showDocTreePane()";if(this._isTracing){this.traceEntry(m);}this.fedDocPickerBorderContainer.addChild(this.fedDocTreePane);this.fedDocPickerBorderContainer.layout();if(this._isTracing){this.traceExit(m);}},_showError:function(_19f,_1a0){var m="_showError(p_errorMsg, p_errorDetails)";if(this._isTracing){this.traceEntry(m,[_19f,_1a0]);}this._hideConnectingBox();this.inherited(arguments);if(this._isTracing){this.traceExit(m);}},_showNoItemsInfo:function(){var m="_showNoItemsInfo()";if(this._isTracing){this.traceEntry(m);}dojo.style(this.fedDocNoItemsInfoDiv,"display","block");dijit.setWaiState(this.fedDocNoItemsInfoDiv,"hidden",false);if(this._isTracing){this.traceExit(m);}},_updateAuthenticationInfoMsg:function(){var m="_updateAuthenticationInfoMsg()";if(this._isTracing){this.traceEntry(m,p_id);}dojo.attr(this.fedDocPickerAuthInfo,"innerHTML",this._authenticationInfoMsg);if(this._isTracing){this.traceExit(m);}},_updateFilterLayout:function(){var m="_updateFilterLayout()";if(this._isTracing){this.traceEntry(m);}if(!dojo.hasClass(this.fedDocLibTreeFilterDiv,"lotusHidden")){var _1a1=dojo.marginBox(this.fedDocLibTreePane.domNode).w;this._onLibTreePaneResized(null,{w:_1a1});}if(!dojo.hasClass(this.fedDocTreeFilterDiv,"lotusHidden")){var _1a2=dojo.marginBox(this.fedDocTreePane.domNode).w;this._onTreePaneResized(null,{w:_1a2});}if(this._isTracing){this.traceExit(m);}},_updateTreeLayout:function(){var m="_updateTreeLayout()";if(this._isTracing){this.traceEntry(m);}this.fedDocPickerBorderContainer.resize();if(this._libTree){this._adjustTreePaneHeight(this.fedDocLibTreeFilterDiv,this.fedDocLibTreeContainer,this._calcDomNodesHeight([this.fedDocLibTreeHeader])+2);}if(this._docTree){this._adjustTreePaneHeight(this.fedDocTreeFilterDiv,this.fedDocTreeContainer,this._calcDomNodesHeight([this.fedDocTreeHeader])+2);}this._updateFilterLayout();if(this._isTracing){this.traceExit(m);}}});}if(!dojo._hasResource["com.ibm.workplace.wcm.ecm.picker.widget.QuickrDocumentPickerPageWidget"]){dojo._hasResource["com.ibm.workplace.wcm.ecm.picker.widget.QuickrDocumentPickerPageWidget"]=true;dojo.provide("com.ibm.workplace.wcm.ecm.picker.widget.QuickrDocumentPickerPageWidget");dojo.registerModulePath("com.ibm.workplace.wcm.ecm.picker.widget","../com/ibm/workplace/wcm/ecm/picker/widget");dojo.declare("com.ibm.workplace.wcm.ecm.picker.widget.QuickrDocumentPickerPageWidget",[com.ibm.workplace.wcm.ecm.picker.widget.GenericWizardPageWidget],{namespace:"qckrDocPckrPgWdgt_",templateString:"<div dojoAttachPoint=\"quickrPickerLaunchPageDiv\" id=\"${namespace}quickrPickerLaunchPageDiv_id\" name=\"${namespace}quickrPickerLaunchPageDiv\">\n    <div dojoAttachPoint=\"quickrPickerInfoMsgDiv\" name=\"${namespace}quickrPickerInfoMsgDiv\" id=\"${namespace}quickrPickerInfoMsgDiv_id\" style=\"margin-top: 15px; margin-bottom: 15px; width: 480px;\">\n    ${_nlsUserInterface.quickrLaunchPage.stepDetailedInfoText}\n    </div>\n    <div dojoAttachPoint=\"quickrPickerUrlDiv\" name=\"${namespace}quickrPickerUrlDiv\" id=\"${namespace}quickrPickerUrlDiv_id\" style=\"margin-top: 15px; margin-bottom: 15px;\">\n        <h4 class=\"feddocHeader4\">\n            <label id=\"${namespace}quickrPickerUrl.lbl\"\n                   for=\"${namespace}quickrUrlTextBox_id\"\n                   dojoAttachPoint=\"quickrPickerUrlLabel\"\n                   aria-label=\"${_nlsUserInterface.quickrLaunchPage.selectedFolderLabel}\">${_nlsUserInterface.quickrLaunchPage.selectedFolderLabel}</label><p/>\n        </h4>\n        <input type=\"text\" role=\"textbox\" aria-readonly=\"true\" dojoType=\"dijit.form.TextBox\" dojoAttachPoint=\"quickrUrlTextBox\" name=\"${namespace}quickrUrlTextBox\" id=\"${namespace}quickrUrlTextBox_id\" title=\"${_nlsUserInterface.quickrLaunchPage.selectedFolderTitle}\" intermediateChanges=\"false\" readOnly style=\"width: 300px;\" tabIndex=\"-1\"/>\n        <span class=\"lotusBtn lotusBtnAction\" role=\"button\" aria-label=\"${_nlsUserInterface.quickrLaunchPage.selectButtonTitle}\">\n            <a dojoAttachPoint=\"quickrPickerLaunchBtn\" href=\"javascript:void(0);\" title=\"${_nlsUserInterface.quickrLaunchPage.selectButtonTitle}\" id=\"${namespace}quickrPickerLaunchBtn\" name=\"${namespace}quickrPickerLaunchBtn\" tabIndex=\"0\">${_nlsUserInterface.quickrLaunchPage.selectButtonLabel}</a>\n        </span>\n    </div>\n</div>\n",widgetsInTemplate:true,_authenticationInfoMsg:"",_authProperties:null,_callingEnvId:com.ibm.workplace.wcm.ecm.picker.util.FederatedDocumentsDefinitions._wcm,_dsPickerArgs:{},_eventHandles:[],_fedDocsPickerArgs:{},_federatedDocumentsServiceBean:null,_isTracing:false,_selectedUrl:null,_serverUrl:"",_portalContextPath:"/wps",constructor:function(_1a3){this._isTracing=this.isTracing();var m="constructor(p_params)";if(this._isTracing){this.traceEntry(m,_1a3);if(_1a3){this.trace(m,"p_params.callingEnvId:",_1a3.callingEnvironment);this.trace(m,"p_params.namespace:",_1a3.namespace);this.trace(m,"p_params.portalContextPath:",_1a3.portalContextPath);}}if(typeof _1a3.callingEnvironment=="string"){this._callingEnvId=_1a3.callingEnvironment;}if(typeof _1a3.namespace=="string"){this.namespace=_1a3.namespace;}var _1a4=this._nlsUserInterface.quickrLaunchPage;this._stepLabel=_1a4.stepLabel;if(this._callingEnvId===com.ibm.workplace.wcm.ecm.picker.util.FederatedDocumentsDefinitions._wcm){this._stepDescription=_1a4.stepDescriptionWCM;}else{this._stepDescription=_1a4.stepDescription;}this._portalContextPath=_1a3.portalContextPath;if(this._isTracing){this.traceExit(m);}},getSelectedItemJSON:function(){var m="getSelectedItemJSON()";if(this._isTracing){this.traceEntry(m);}var _1a5={"title":"","url":this._selectedUrl};if(this._isTracing){this.traceExit(m,_1a5);}return _1a5;},initializePage:function(_1a6){var m="initializePage(p_params)";if(this._isTracing){this.traceEntry(m,_1a6);if(_1a6){this.trace(m,"p_params.serverUrl:",_1a6.serverUrl);}}this._selectedUrl=null;this._showSelectedUrl("");if(_1a6){if(_1a6.serverUrl){this._serverUrl=_1a6.serverUrl;}else{this._serverUrl="";}}if(this._callingEnvId===com.ibm.workplace.wcm.ecm.picker.util.FederatedDocumentsDefinitions._wcm){dojo.attr(this.quickrPickerInfoMsgDiv,"innerHTML",this._nlsUserInterface.quickrLaunchPage.stepDetailedInfoTextWCM);dojo.attr(this.quickrPickerUrlLabel,"innerHTML","<b>"+this._nlsUserInterface.quickrLaunchPage.selectedDocumentLabel+"</b>");}else{dojo.attr(this.quickrPickerInfoMsgDiv,"innerHTML",this._nlsUserInterface.quickrLaunchPage.stepDetailedInfoText);dojo.attr(this.quickrPickerUrlLabel,"innerHTML","<b>"+this._nlsUserInterface.quickrLaunchPage.selectedFolderLabel+"</b>");}if(this._isTracing){this.traceExit(m);}},layout:function(){var m="layout()";if(this._isTracing){this.traceEntry(m);}var _1a7=dojo.marginBox(this.domNode).w;var _1a8=_1a7-30;dojo.marginBox(this.quickrPickerInfoMsgDiv,{w:_1a8});var _1a9=dojo.marginBox(this.quickrPickerLaunchBtn).w;var _1aa=_1a7-_1a9-30;if(_1aa>=0){dojo.style(this.quickrUrlTextBox.domNode,"width",_1aa+"px");}if(this._isTracing){this.traceExit(m);}},postCreate:function(){var m="postCreate()";if(this._isTracing){this.traceEntry(m);}this.inherited(arguments);this._initEventHandles();if(this._isTracing){this.traceExit(m);}},uninitialize:function(){var m="uninitialize()";if(this._isTracing){this.traceEntry(m);}this._clearEventHandles();this.inherited(arguments);if(this._isTracing){this.traceExit(m);}},_clearEventHandles:function(){var m="_clearEventHandles()";if(this._isTracing){this.traceEntry(m);}dojo.forEach(this._eventHandles,dojo.disconnect);this._eventHandles=[];if(this._isTracing){this.traceExit(m);}},_fixUpDlgUnderlay:function(){var m="_fixUpDlgUnderlay()";if(this._isTracing){this.traceEntry(m);}if(dijit._underlay){var zIdx=dojo.style(dijit._underlay.domNode,"zIndex");if(zIdx){dojo.style(dijit._underlay.domNode,"zIndex",zIdx-2);}dojo.style(dijit._underlay.domNode,"display","block");}if(this._isTracing){this.traceExit(m);}},_initEventHandles:function(){var m="_initEventHandles()";if(this._isTracing){this.traceEntry(m);}this._eventHandles.push(dojo.connect(this.quickrPickerLaunchBtn,"onclick",dojo.hitch(this,"_onLaunchButtonClicked")));if(this._isTracing){this.traceExit(m);}},_onConfirmQuickrPicker:function(_1ab,_1ac,_1ad){var m="_onConfirmQuickrPicker(p_title, p_url)";if(this._isTracing){this.traceEntry(m,[_1ab,_1ac]);}if(this._callingEnvId===com.ibm.workplace.wcm.ecm.picker.util.FederatedDocumentsDefinitions._wcm&&_1ad!="view"){this._selectedUrl=com.ibm.workplace.wcm.ecm.picker.util.URLUtils._INSTANCE.generateProxiedUrl(_1ac,this._portalContextPath);}else{this._selectedUrl=_1ac;}this._showSelectedUrl(this._selectedUrl);if(this._isTracing){this.traceExit(m);}},_onLaunchButtonClicked:function(){var m="_onLaunchButtonClicked()";if(this._isTracing){this.traceEntry(m);}if(this._pickerManager&&dojo.isFunction(this._pickerManager.launchDocumentServicesPickerDialog)){var _1ae=dojo.hitch(this,"_onConfirmQuickrPicker");var _1af;if(this._pickerContext===com.ibm.workplace.wcm.ecm.picker.util.FederatedDocumentsDefinitions._dialog){_1af=dojo.hitch(this,"_fixUpDlgUnderlay");}else{if(this._pickerContext===com.ibm.workplace.wcm.ecm.picker.util.FederatedDocumentsDefinitions._portlet){_1af=this._prepareDialog();}}var _1b0=this._serverUrl;if(_1b0&&_1b0.charAt(_1b0.length-1)=="/"){_1b0=_1b0.substring(0,_1b0.length-1);}var _1b1=this._pickerManager.launchDocumentServicesPickerDialog(_1b0,_1ae,_1af);}if(this._isTracing){this.traceExit(m);}},_resizeWindow:function(_1b2){if(this.domNode&&this.domNode.style&&typeof _1b2=="string"){this.domNode.style.height=_1b2;if(window.resize){window.resize();}}},_prepareDialog:function(){var m="_prepareDialog()";if(this._isTracing){this.traceEntry(m,p_url);}var _1b3;if(this.domNode&&this.domNode.style){var _1b4=this.domNode.style.height;this._resizeWindow("500px");_1b3=dojo.hitch(this,function(){this._resizeWindow(_1b4);});}if(this._isTracing){this.traceExit(m);}return _1b3;},_showSelectedUrl:function(_1b5){var m="_showSelectedUrl(p_url)";if(this._isTracing){this.traceEntry(m,_1b5);}if(((typeof _1b5)=="undefined")||(_1b5===null)){_1b5="";}this.quickrUrlTextBox.attr("value",_1b5);if(_1b5!==""){this._setReadyValue(true);}if(this._isTracing){this.traceExit(m);}}});}if(!dojo._hasResource["com.ibm.workplace.wcm.ecm.picker.dialog.FederatedDocumentsPickerDialog"]){dojo._hasResource["com.ibm.workplace.wcm.ecm.picker.dialog.FederatedDocumentsPickerDialog"]=true;dojo.provide("com.ibm.workplace.wcm.ecm.picker.dialog.FederatedDocumentsPickerDialog");dojo.registerModulePath("com.ibm.workplace.wcm.ecm.picker.dialog","../com/ibm/workplace/wcm/ecm/picker/dialog");dojo.require("dijit.layout.ContentPane");dojo.require("dijit.layout.StackContainer");dojo.require("com.ibm.widgets.GenericDialog");dojo.declare("com.ibm.workplace.wcm.ecm.picker.dialog.FederatedDocumentsPickerDialog",[com.ibm.widgets.GenericDialog],{lotusui_id:"dijitDialog_lotusui30_fedDocDlg_container",lotusui_class:"lotusui30",namespace:"fedDocsPckrDlg_",templateString:dojo.cache("com.ibm.workplace.wcm.ecm.picker.dialog","template/FederatedDocumentsPickerDialog.html","<div dojoAttachPoint=\"GenericDialogDiv\"\n    class=\"lotusDialogBorder com_ibm_workplace_wcm_ecm_picker_dialog\"\n    waistate=\"labelledby-${namespace}GenericDialogTitleSpan_id\" wairole=\"dialog\" role=\"dialog\"\n    tabindex=\"-1\" aria-labelledby=\"${namespace}GenericDialogTitleSpan_id\" style=\"max-width: none; max-height: none;\">\n\n    <div id=\"${namespace}GenericDialogContentDiv_id\" name=\"${namespace}GenericDialogContentDiv\" class=\"lotusDialog\">\n        <div class=\"lotusDialogHeader\" dojoAttachPoint=\"titleBar\">\n            <h1 class=\"lotusHeading\" id=\"${namespace}GenericDialogTitleBar_id\" name=\"${namespace}GenericDialogTitleBar\">\n                <span dojoAttachPoint=\"titleNode\" id=\"${namespace}GenericDialogTitleSpan_id\" name=\"${namespace}GenericDialogTitleSpan\">${title}</span>\n            </h1>\n            <a role=\"button\" aria-label=\"${_nlsUserInterface.docPickerDialog.cancelLinkTitle}\" dojoAttachPoint=\"dialogClose, closeButtonNode\" href=\"javascript:void(0);\" class=\"lotusDialogClose\" title=\"${_nlsUserInterface.docPickerDialog.cancelLinkTitle}\" id=\"${namespace}buttonCancel_id\" name=\"${namespace}buttonCancel\">\n                <img src=\"${blankImgUrl}\" alt=\"\" role=\"presentation\" />\n                <span dojoAttachPoint=\"closeText\" id=\"${namespace}buttonCancelSpan_id\" name=\"${namespace}buttonCancelSpan\" class=\"lotusAltText\" title=\"${_nlsUserInterface.docPickerDialog.cancelLinkTitle}\">X</span>\n            </a>\n        </div>\n\n        <div dojoAttachPoint=\"containerNode\" class=\"lotusDialogContent\" id=\"${namespace}containerNode_id\" name=\"${namespace}containerNode\">\n            <div dojoAttachPoint=\"wizardErrorDiv\" waiRole=\"alert\" role=\"alert\" aria-hidden=\"true\" id=\"${namespace}wizardErrorDiv_id\" name=\"${namespace}wizardErrorDiv\"\n                 title=\"${_nlsUserInterface.docPickerDialog.wizardErrorDivTitle}\" style=\"display:none; max-height: 200px; overflow: auto;\"\n                 class=\"lotusMessage feddocTopSpaceSmall\">\n                <img class=\"feddocErrorIcon\" src=\"${blankImgUrl}\" width=\"16\" height=\"16\" alt=\"${_nlsUserInterface.docPickerDialog.errorImgAlt}\" role=\"img\" />\n                <span dojoAttachPoint=\"wizardErrorSpan\" name=\"${namespace}wizardErrorSpan\" id=\"${namespace}wizardErrorSpan_id\"></span>\n                <div aria-hidden=\"true\" dojoAttachPoint=\"wizardErrorDetailsDiv\" name=\"${namespace}wizardErrorDetailsDiv\" id=\"${namespace}wizardErrorDetailsDiv_id\" style=\"display: none;\"> <!-- style=\"background-color: white;\" -->\n                  <span dojoAttachPoint=\"wizardErrorDetailsSpan\" name=\"${namespace}wizardErrorDetailsSpan\" id=\"${namespace}wizardErrorDetailsSpan_id\"></span>\n                </div>\n            </div>\n            <div dojoAttachPoint=\"wizardStepHeader\" id=\"${namespace}wizardStepHeader_id\" name=\"${namespace}wizardStepHeader\">\n                <h4 class=\"feddocHeader4\"><span dojoAttachPoint=\"wizardStepLabel\" id=\"${namespace}wizardStepLabel_id\"><!-- dynamically set --></span></h4>\n                <div><span dojoAttachPoint=\"wizardStepDescription\" id=\"${namespace}wizardStepDescr_id\"><!-- dynamically set --></span></div>\n            </div>\n            <div dojoAttachPoint=\"fedDocPickerDetectingDiv\" class=\"feddocConnectingBox\">\n                <span class=\"lotusLoading\"><img width=\"21\" height=\"21\" src=\"${blankImgUrl}\" role=\"presentation\" aria-labelledby=\"${namespace}detectingFeedTypeDivText_id\" alt=\"${_nlsUserInterface.docPickerDialog.detectingFeedTypeImgAlt}\">\n                    </span>&nbsp;<span><span dojoAttachPoint=\"detectingFeedTypeDivText\" id=\"${namespace}detectingFeedTypeDivText_id\">${_nlsUserInterface.docPickerDialog.detectingFeedTypeDivText}</span>\n                </span>\n            </div>\n            <div dojoAttachPoint=\"fedDocPickerGettingVaultDiv\" class=\"feddocConnectingBox\">\n                <span class=\"lotusLoading\"><img width=\"21\" height=\"21\" src=\"${blankImgUrl}\" role=\"presentation\" aria-labelledby=\"${namespace}gettingVaultDivText_id\" alt=\"${_nlsUserInterface.docPickerDialog.gettingVaultImgAlt}\">\n                    </span>&nbsp;<span><span dojoAttachPoint=\"gettingVaultDivText\" id=\"${namespace}gettingVaultDivText_id\">${_nlsUserInterface.docPickerDialog.gettingVaultDivText}</span>\n                </span>\n            </div>\n            <div role=\"region\" aria-describedby=\"${namespace}wizardStepDescr_id\" aria-labelledby=\"${namespace}wizardStepLabel_id\" dojoAttachPoint=\"wizardPageContainer\" dojoType=\"dijit.layout.StackContainer\" id=\"${namespace}wizardPageContainer_id\" name=\"${namespace}wizardPageContainer\" doLayout=\"false\" style=\"min-width: 540px;\">\n            </div>\n        </div>\n\n        <div dojoAttachPoint=\"dialogFooter\" class=\"lotusDialogFooter\" id=\"${namespace}dialogFooter_id\" name=\"${namespace}dialogFooter\">\n            <form dojoAttachPoint=\"dialogFooterForm\">\n                <input dojoAttachPoint=\"dialogPrevious\" class=\"lotusFormButton\" type=\"submit\" value=\"${_nlsUserInterface.docPickerDialog.backButtonCaption}\" role=\"button\" title=\"${_nlsUserInterface.docPickerDialog.backButtonTitle}\" id=\"${namespace}dialogGotoPreviousPage_id\" name=\"${namespace}dialogGotoPreviousPage\" />\n                <input dojoAttachPoint=\"dialogNext\" class=\"lotusFormButton\" type=\"submit\" value=\"${_nlsUserInterface.docPickerDialog.nextButtonCaption}\" role=\"button\" title=\"${_nlsUserInterface.docPickerDialog.nextButtonTitle}\" id=\"${namespace}dialogGotoNextPage_id\" name=\"${namespace}dialogGotoNextPage\" />\n                <input dojoAttachPoint=\"dialogConfirm\" class=\"lotusFormButton feddocButtonLargeDistance\" type=\"submit\" value=\"${_nlsUserInterface.docPickerDialog.finishButtonCaption}\" role=\"button\" title=\"${_nlsUserInterface.docPickerDialog.finishButtonTitle}\" id=\"${namespace}submitDialogSelection_id\" name=\"${namespace}submitDialogSelection\" />\n                <input dojoAttachPoint=\"dialogCancel\" class=\"lotusBtn\" type=\"button\" role=\"button\" \n                       id=\"${namespace}cancelDialogSelection_id\"   name=\"${namespace}cancelDialogSelection\" \n                       aria-label=\"${_nlsUserInterface.docPickerDialog.cancelLinkTitle}\" title=\"${_nlsUserInterface.docPickerDialog.cancelLinkTitle}\" \n                       value=\"${_nlsUserInterface.docPickerDialog.cancelLinkText}\" />\n            </form>\n        </div>\n    </div>\n</div>\n"),widgetsInTemplate:true,_callingEnvironment:com.ibm.workplace.wcm.ecm.picker.util.FederatedDocumentsDefinitions._wcm,_currentPage:-1,_defaultButton:null,_dialogBorderWidth:2,_errorState:false,_nlsMessages:{},_nlsUserInterface:{},_maxErrorChars:768,_pageParams:{},_pages:[],_pickerContext:com.ibm.workplace.wcm.ecm.picker.util.FederatedDocumentsDefinitions._dialog,_qdsSupportEnabled:true,_serverTypeMap:{},_selectedPath:[],_transientSlotId:String,_vaultMgmtDataSinkUrl:String,_widgets:[],_usePresetUrl:false,buildRendering:function(){var m="buildRendering()";if(this._isTracing){this.traceEntry(m);}this.inherited(arguments);var _1b6;if(this._isCalledFromPZN()){_1b6=this._nlsUserInterface.docPickerDialog.titlePZN;}else{_1b6=this._nlsUserInterface.docPickerDialog.titleWCM;}this.title=_1b6;this._hideDetectingBox();this._hideGettingVaultBox();if(this._isTracing){this.traceExit(m);}},constructor:function(_1b7){this._isTracing=this.isTracing();var m="constructor";if(this._isTracing){this.traceEntry(m,_1b7);if(_1b7){this.trace(m,"p_params.availableAuthTypes",_1b7.availableAuthTypes);this.trace(m,"p_params.callingEnvironment",_1b7.callingEnvironment);this.trace(m,"p_params.customServiceSelectionEnabled",_1b7.customServiceSelectionEnabled);this.trace(m,"p_params.documentsServices",_1b7.documentsServices);this.trace(m,"p_params.feedBaseURL",_1b7.feedBaseURL);this.trace(m,"p_params.feedType",_1b7.feedType);this.trace(m,"p_params.feedTypeBaseURL",_1b7.feedTypeBaseURL);this.trace(m,"p_params.namespace",_1b7.namespace);this.trace(m,"p_params.nodeTypes",dojo.toJson(_1b7.nodeTypes));this.trace(m,"p_params.pickerManager",_1b7.pickerManager);this.trace(m,"p_params.portalContextPath",_1b7.portalContextPath);this.trace(m,"p_params.qdsSupportEnabled",_1b7.qdsSupportEnabled);this.trace(m,"p_params.selectedPath",_1b7.selectedPath);this.trace(m,"p_params.serviceDocBaseURL",_1b7.serviceDocBaseURL);this.trace(m,"p_params.vaultSelectionEnabled",_1b7.vaultSelectionEnabled);this.trace(m,"p_params.vaultSelectionEnabledForPZN",_1b7.vaultSelectionEnabledForPZN);this.trace(m,"p_params.vaultSelectionEnabledForWCM",_1b7.vaultSelectionEnabledForWCM);this.trace(m,"p_params.vaultSlots",_1b7.vaultSlots);this.trace(m,"p_params.usePresetUrl",_1b7.usePresetUrl);}}this._eventHandles=[];this._widgets=[];this._pages=[];this._serverTypeMap={};this._defaultButton=null;this._transientSlotId=null;if(typeof _1b7.callingEnvironment=="string"){this._callingEnvironment=_1b7.callingEnvironment;}if(typeof _1b7.namespace=="string"){this.namespace=_1b7.namespace;}if(typeof _1b7.qdsSupportEnabled=="boolean"){this._qdsSupportEnabled=_1b7.qdsSupportEnabled;}if(typeof _1b7.vaultMgmtDataSinkUrl=="string"){this._vaultMgmtDataSinkUrl=_1b7.vaultMgmtDataSinkUrl;}if(typeof _1b7.usePresetUrl=="boolean"){this._usePresetUrl=_1b7.usePresetUrl;}if(_1b7.selectedPath){this._selectedPath=_1b7.selectedPath;}var _1b8=com.ibm.workplace.wcm.ecm.picker.util.URLUtils._INSTANCE.normalizePlaceholders(_1b7.feedBaseURL);var _1b9=com.ibm.workplace.wcm.ecm.picker.util.URLUtils._INSTANCE.normalizePlaceholders(_1b7.feedTypeBaseURL);var _1ba=com.ibm.workplace.wcm.ecm.picker.util.URLUtils._INSTANCE.normalizePlaceholders(_1b7.serviceDocBaseURL);this._pageParams={"availableAuthTypes":_1b7.availableAuthTypes,"callingEnvironment":_1b7.callingEnvironment,"customServiceSelectionEnabled":_1b7.customServiceSelectionEnabled,"documentsServices":_1b7.documentsServices,"feedBaseURL":_1b8,"feedType":null,"feedTypeBaseURL":_1b9,"namespace":this.namespace,"nlsMessages":this._nlsMessages,"nlsUserInterface":this._nlsUserInterface,"nodeTypes":_1b7.nodeTypes,"onDefaultAction":dojo.hitch(this,"_onDefaultAction"),"onErrorStateChanged":dojo.hitch(this,"_onErrorStateChanged"),"onLayoutChanged":dojo.hitch(this,"layout"),"onReadyStateChanged":dojo.hitch(this,"_onReadyStateChanged"),"pickerContext":this._pickerContext,"portalContextPath":_1b7.portalContextPath,"pickerManager":_1b7.pickerManager,"selectedPath":_1b7.selectedPath,"serviceDocBaseURL":_1ba,"vaultSelectionEnabled":_1b7.vaultSelectionEnabled,"vaultSelectionEnabledForPZN":_1b7.vaultSelectionEnabledForPZN,"vaultSelectionEnabledForWCM":_1b7.vaultSelectionEnabledForWCM,"vaultSlots":_1b7.vaultSlots};this.cssStateNodes={};if(this._isTracing){this.traceExit(m);}},getSelectedItemJSON:function(){var m="getSelectedItemJSON()";if(this._isTracing){this.traceEntry(m);}var _1bb=null;if(this._currentPage==1){_1bb=this._widgets[1].getSelectedItemJSON();}else{if(this._currentPage==2){_1bb=this._widgets[2].getSelectedItemJSON();}}if(this._isTracing){this.traceExit(m,_1bb);}return _1bb;},layout:function(){var m="layout()";if(this._isTracing){this.traceEntry(m);}this.inherited(arguments);var _1bc=Math.round(dijit.getViewport().h*0.9);var _1bd=Math.round(dijit.getViewport().w*0.9);var _1be=dojo.marginBox(this.titleBar).h;var _1bf=dojo.marginBox(this.dialogFooter).h;if(this._isTracing){this.trace(m,"headerHeight: ",_1be);this.trace(m,"footerHeight: ",_1bf);this.trace(m,"maxAllowedHeight: ",_1bc);this.trace(m,"maxAllowedWidth: ",_1bd);}if(this.isResized===true){this._layoutManualResize(_1be,_1bf,_1bc,_1bd);}else{this._layoutAutoResize(_1be,_1bf,_1bc,_1bd);}var _1c0=dojo.marginBox(this.wizardErrorDiv).w-dojo.contentBox(this.wizardErrorDiv).w;var _1c1=dojo.contentBox(this.containerNode).w-_1c0;if(_1c1>=0){dojo.style(this.wizardErrorDiv,"width",_1c1+"px");}var _1c2=dojo.marginBox(this.wizardErrorDiv).h+dojo.marginBox(this.wizardStepHeader).h+20;var _1c3=dojo.marginBox(this.containerNode).h;if(this.wizardPageContainer){this.wizardPageContainer.layout();}if((this._currentPage>-1)&&(this._currentPage<this._widgets.length)){this._widgets[this._currentPage].virtualContainerNodeHeight=Math.max(_1c3-_1c2,300);this._widgets[this._currentPage].layout();}if(this._isTracing){this.traceExit(m);}},postCreate:function(){var m="postCreate()";if(this._isTracing){this.traceEntry(m);}this.inherited(arguments);this._initializePages(this._pageParams);if(this._widgets.length<3){throw new Error(this._nlsMessages.docPickerDialog.errorNotAllWidgetsDefined);}else{for(var i=0;i<3;i++){this._addPageForWidget(i);}}dojo.place(this.domNode,this._findOrCreateLotusUIDIV(),"last");if(this._isTracing){this.traceExit(m);}},postMixInProperties:function(){var m="postMixInProperties()";if(this._isTracing){this.traceEntry(m);}this.inherited(arguments);if(this._isTracing){this.traceExit(m);}},show:function(){var m="show()";if(this._isTracing){this.traceEntry(m);}this.inherited(arguments);setTimeout(dojo.hitch(this,"_onFocusFirstItem"),this.duration+200);if(this._isTracing){this.traceExit(m);}},startup:function(){var m="startup()";if(this._isTracing){this.traceEntry(m);}if(this.wizardPageContainer){this.wizardPageContainer.startup();this._currentPage=-1;if(this._usePresetUrl){this._widgets[0]._authWidget.changeAuthType(com.ibm.workplace.wcm.ecm.picker.widget.AuthenticationWidget._authTypeUserPwd);this._widgets[0]._authWidget.setAuthenticationProperties({authProperties:this.authProperties});this._widgets[0]._authWidget._authProperties.authType=com.ibm.workplace.wcm.ecm.picker.widget.AuthenticationWidget._authTypeUserPwd;this._onGoFwdPrep();}else{this._widgets[0].setFeedType(null);this._switchToPage(0);}}this.layout();this.inherited(arguments);if(this._isTracing){this.traceExit(m);}},uninitialize:function(){var m="uninitialize()";if(this._isTracing){this.traceEntry(m);}this.inherited(arguments);if(this._isTracing){this.traceExit(m);}},_addPageForWidget:function(_1c4){var m="_addPageForWidget(p_widgetIndex)";if(this._isTracing){this.traceEntry(m,_1c4);}var _1c5=this._widgets[_1c4];if(this._isTracing){this.trace(m,"Widget for index:",_1c5);}if(_1c5){page=new dijit.layout.ContentPane();page.onShow=dojo.hitch(this,function(){_1c5.onShow();});this._pages.push(page);this.wizardPageContainer.addChild(page);_1c5.placeAt(page.domNode);}if(this._isTracing){this.traceExit(m);}},_clearError:function(){var m="_clearError()";if(this._isTracing){this.traceEntry(m);}this._errorState=false;dojo.style(this.wizardErrorDetailsDiv,"display","none");dojo.style(this.wizardErrorDiv,"display","none");dijit.setWaiState(this.wizardErrorDiv,"hidden",true);dijit.setWaiState(this.wizardErrorDetailsDiv,"hidden",true);this._enableDisableButtons();this.layout();if(this._isTracing){this.traceExit(m);}},_deleteTransientSlot:function(){var m="_deleteTransientSlot()";if(this._isTracing){this.traceEntry(m);}if(this._transientSlotId!==null){postData="slotid="+this._encodePostDataItem(this._transientSlotId);var _1c6={"Content-Type":"text/plain","Accept":"text/plain"};dojo.xhrPost({"url":this._vaultMgmtDataSinkUrl,"postData":postData,"handleAs":"text","headers":_1c6,"sync":false});}if(this._isTracing){this.traceExit(m);}},_enableDisableButtons:function(){var m="_enableDisableButtons()";if(this._isTracing){this.traceEntry(m);this.trace(m,"Current page:",this._currentPage);}if(this._currentPage===0){this._setBackBtnEnabled(false);this._setFinishBtnEnabled(false);if(this._isCurrentPageReady()&&(!this._errorState)){this._setNextBtnEnabled(true);}else{this._setNextBtnEnabled(false);}}else{this._setBackBtnEnabled(true);if(this._isCurrentPageReady()&&(!this._errorState)){this._setNextBtnEnabled(false);this._setFinishBtnEnabled(true);}else{this._setNextBtnEnabled(false);this._setFinishBtnEnabled(false);}}if(this._isTracing){this.traceExit(m);}},_encodePostDataItem:function(_1c7){var m="_encodePostDataItem(string)";if(this._isTracing){this.traceEntry(m,_1c7);}var ret=encodeURIComponent(_1c7);if(this._isTracing){this.traceExit(m,ret);}return ret;},_encodeUrlIfNeeded:function(_1c8){var m="_encodeUrlIfNeeded(p_url)";if(this._isTracing){this.traceEntry(m,_1c8);}var _1c9=_1c8;if(_1c8&&typeof _1c8=="string"&&_1c8.indexOf("%")==-1){_1c9=encodeURI(_1c8);}if(this._isTracing){this.traceExit(m,_1c9);}return _1c9;},_fetchServerType:function(_1ca){var m="_fetchServerType(p_url)";if(this._isTracing){this.traceEntry(m,_1ca);}var _1cb=this._generateDetectionURL(_1ca);this._showDetectingBox();try{dojo.xhrGet({"url":_1cb,"handleAs":"json","sync":false,"load":dojo.hitch(this,function(_1cc){this._fetchServerTypeLoadCallback(_1ca,_1cc);}),"error":dojo.hitch(this,function(_1cd,_1ce){this._fetchServerTypeErrorCallback(_1ca,_1cd,_1ce);})});}catch(e){if(e.name&&e.message){this._showError(e.name,e.message);}else{this._showError(this._nlsMessages.docPickerDialog.errorGenericException,e);}}if(this._isTracing){this.traceExit(m);}},_fetchServerTypeErrorCallback:function(_1cf,_1d0,_1d1){var m="_fetchServerTypeErrorCallback(p_url, p_error, p_ioargs)";if(this._isTracing){this.traceEntry(m,[_1cf,_1d0,_1d1]);}this._hideDetectingBox();if(_1d1.xhr.status==404){if(_1cf.indexOf("/dm/atom/libraries/feed")==-1){var _1d2=com.ibm.workplace.wcm.ecm.picker.util.URLUtils._INSTANCE.appendPath(_1cf,"/dm/atom/libraries/feed");this._fetchServerType(_1d2);}else{this._showErrorForXHRRequest(_1d1);}}else{this._showErrorForXHRRequest(_1d1);}if(this._isTracing){this.traceExit(m);}},_fetchServerTypeLoadCallback:function(_1d3,_1d4){var m="_fetchServerTypeLoadCallback(p_url, p_data)";if(this._isTracing){this.traceEntry(m,[_1d3,_1d4]);}this._hideDetectingBox();var _1d5=_1d4.feedType;if(_1d5){if(_1d5===com.ibm.workplace.wcm.ecm.picker.util.FederatedDocumentsDefinitions._unknown){if(_1d3.indexOf("/dm/atom/libraries/feed")==-1){var _1d6=com.ibm.workplace.wcm.ecm.picker.util.URLUtils._INSTANCE.appendPath(_1d3,"/dm/atom/libraries/feed");this._fetchServerType(_1d6);}else{this._showError(this._nlsMessages.docPickerDialog.errorUnknownFeedType,_1d5);}}else{this._serverTypeMap[_1d3]=_1d5;this._widgets[0].setFeedType(_1d5);if(this._isQuickrFeedType(_1d5)){this._switchToQuickrPage();}else{this.isResized=false;this._switchToPage(1);}}}else{this._showError(this._nlsMessages.docPickerDialog.errorCouldNotDetectFeedType,"");}if(this._isTracing){this.traceExit(m);}},_findOrCreateLotusUIDIV:function(){var m="_findOrCreateLotusUIDIV()";if(this._isTracing){this.traceEntry(m);}var _1d7=dojo.byId(this.lotusui_id);if(!_1d7){_1d7=dojo.create("div",{"id":this.lotusui_id,"class":this.lotusui_class,"wairole":"region","role":"region"},dojo.body());}dijit.setWaiState(_1d7,"labelledby",this.namespace+"GenericDialogTitleSpan_id");this._lotusui_div=_1d7;if(this._isTracing){this.traceExit(m,_1d7);}return _1d7;},_generateDetectionURL:function(_1d8){var m="_generateDetectionURL(p_url)";if(this._isTracing){this.traceEntry(m,_1d8);}var url=_1d8;url=encodeURIComponent(this._encodeUrlIfNeeded(url));var _1d9;var _1da=this._widgets[0].getSettings();if((_1da.authProperties.authType==com.ibm.workplace.wcm.ecm.picker.widget.AuthenticationWidget._authTypeVault)&&(_1da.authProperties.vaultSlotID)){_1d9=encodeURIComponent(_1da.authProperties.vaultSlotID);}else{if((_1da.authProperties.authType==com.ibm.workplace.wcm.ecm.picker.widget.AuthenticationWidget._authTypeUserPwd)&&(this._transientSlotId)){_1d9=encodeURIComponent(this._transientSlotId);}else{_1d9="";}}var _1db=this._pageParams.feedTypeBaseURL.replace("%7BtypeFilter%7D","all").replace("%7BfeedUrl%7D",url).replace("%7BmimeType%7D","application%2Fjson").replace("%7BvaultSlotId%7D",_1d9).replace("%7BserviceId%7D",_1da.serviceId);if(this._isTracing){this.traceExit(m,_1db);}return _1db;},_getDefaultButton:function(){var m="_getDefaultButton()";if(this._isTracing){this.traceEntry(m);}var _1dc=dojo.hasClass(this.dialogConfirm,"lotusBtnDisabled");var _1dd=dojo.hasClass(this.dialogNext,"lotusBtnDisabled");if(_1dc&&_1dd){this._defaultButton=null;}else{if(_1dd){this._defaultButton=this.dialogConfirm;}else{this._defaultButton=this.dialogNext;}}if(this._isTracing){this.traceExit(m,this._defaultButton);}return this._defaultButton;},_getTransientSlot:function(_1de,_1df){var m="_getTransientSlot(userid, password)";if(this._isTracing){this.traceEntry(m,_1de,_1df);}var _1e0="name="+this._encodePostDataItem(_1de);if(_1df!==null){_1e0=_1e0+"&pw="+this._encodePostDataItem(_1df);}if(this._transientSlotId!==null){_1e0=_1e0+"&slotid="+this._encodePostDataItem(this._transientSlotId);}var _1e1={"Content-Type":"text/plain","Accept":"text/plain"};this._showGettingVaultBox();dojo.xhrPost({"url":this._vaultMgmtDataSinkUrl,"postData":_1e0,"handleAs":"text","headers":_1e1,"sync":false,"load":dojo.hitch(this,function(_1e2){this._hideGettingVaultBox();this._transientSlotId=_1e2;if(this.usePresetUrl){var _1e3=this._widgets[0].getSettings();var url=_1e3.serverUrl;this._fetchServerType(url);}else{this._onGoFwd();}}),"error":dojo.hitch(this,function(_1e4){this._hideGettingVaultBox();this._showError(this._nlsMessages.docPickerDialog.errorCouldNotGetVault,_1e4);})});if(this._isTracing){this.traceExit(m);}},_hideDetectingBox:function(){var m="_hideDetectingBox()";if(this._isTracing){this.traceEntry(m);}dojo.style(this.fedDocPickerDetectingDiv,"display","none");dijit.setWaiState(this.fedDocPickerDetectingDiv,"hidden",true);dijit.setWaiState(this.wizardPageContainer,"busy",false);if(this._isTracing){this.traceExit(m);}},_hideGettingVaultBox:function(){var m="_hideGettingVaultBox()";if(this._isTracing){this.traceEntry(m);}dojo.style(this.fedDocPickerGettingVaultDiv,"display","none");dijit.setWaiState(this.fedDocPickerGettingVaultDiv,"hidden",true);dijit.setWaiState(this.wizardPageContainer,"busy",false);if(this._isTracing){this.traceExit(m);}},_initEventHandles:function(){var m="_initEventHandles()";if(this._isTracing){this.traceEntry(m);}this.inherited(arguments);this._eventHandles.push(dojo.connect(this.dialogPrevious,"onclick",this,"_onGoBack"));this._eventHandles.push(dojo.connect(this.dialogFooterForm,"onsubmit",this,"_onSubmit"));if(this._isTracing){this.traceExit(m);}},_initializePages:function(_1e5){var m="_initializePages(p_params)";if(this._isTracing){this.traceEntry(m,_1e5);if(_1e5){this.trace(m,"p_params.authProperties:",dojo.toJson(_1e5.authProperties));this.trace(m,"p_params.availableAuthTypes:",dojo.toJson(_1e5.availableAuthTypes));this.trace(m,"p_params.callingEnvironment:",_1e5.callingEnvironment);this.trace(m,"p_params.customServiceSelectionEnabled:",_1e5.customServiceSelectionEnabled);this.trace(m,"p_params.documentsServices:",dojo.toJson(_1e5.documentsServices));this.trace(m,"p_params.feedBaseURL:",_1e5.feedBaseURL);this.trace(m,"p_params.feedTypeBaseURL:",_1e5.feedTypeBaseURL);this.trace(m,"p_params.nlsMessages:",dojo.toJson(_1e5.nlsMessages));this.trace(m,"p_params.nlsUserInterface:",dojo.toJson(_1e5.nlsUserInterface));this.trace(m,"p_params.namespace:",_1e5.namespace);this.trace(m,"p_params.nodeTypes:",dojo.toJson(_1e5.nodeTypes));this.trace(m,"p_params.onErrorStateChanged",_1e5.onErrorStateChanged);this.trace(m,"p_params.onLayoutChanged:",_1e5.onLayoutChanged);this.trace(m,"p_params.onReadyStateChanged:",_1e5.onReadyStateChanged);this.trace(m,"p_params.pickerContext:",_1e5.pickerContext);this.trace(m,"p_params.portalContextPath:",_1e5.portalContextPath);this.trace(m,"p_params.pickerManager:",_1e5.pickerManager);this.trace(m,"p_params.serviceDocBaseURL:",_1e5.serviceDocBaseURL);this.trace(m,"p_params.vaultMgmtDataSinkUrl:",_1e5.vaultMgmtDataSinkUrl);this.trace(m,"p_params.vaultSelectionEnabled:",_1e5.vaultSelectionEnabled);this.trace(m,"p_params.vaultSelectionEnabledForPZN:",_1e5.vaultSelectionEnabledForPZN);this.trace(m,"p_params.vaultSelectionEnabledForWCM:",_1e5.vaultSelectionEnabledForWCM);this.trace(m,"p_params.vaultSlots:",dojo.toJson(_1e5.vaultSlots));}}var _1e6;_1e6=new com.ibm.workplace.wcm.ecm.picker.widget.ServerConnectionPageWidget(_1e5);this._widgets.push(_1e6);_1e6=new com.ibm.workplace.wcm.ecm.picker.widget.CmisDocumentPickerPageWidget(_1e5);this._widgets.push(_1e6);_1e6=new com.ibm.workplace.wcm.ecm.picker.widget.QuickrDocumentPickerPageWidget(_1e5);this._widgets.push(_1e6);if(this._isTracing){this.traceExit(m);}},_initNLS:function(){var m="_initNLS()";if(this._isTracing){this.traceEntry(m);}this._nlsUserInterface=dojo.i18n.getLocalization("com.ibm.workplace.wcm.ecm.picker","FederatedDocumentsPickerUserInterface");this._nlsMessages=dojo.i18n.getLocalization("com.ibm.workplace.wcm.ecm.picker","FederatedDocumentsPickerMessages");if(this._isTracing){this.trace(m,"Initialized NLS object for user interface elements:",dojo.toJson(this._nlsUserInterface));this.trace(m,"Initialized NLS object for messages:",dojo.toJson(this._nlsMessages));this.traceExit(m);}},_isCalledFromPZN:function(){var m="_isCalledFromPZN()";if(this._isTracing){this.traceEntry(m);}var _1e7=(this._callingEnvironment===com.ibm.workplace.wcm.ecm.picker.util.FederatedDocumentsDefinitions._pzn);if(this._isTracing){this.traceExit(m,_1e7);}return _1e7;},_isCalledFromWCM:function(){var m="_isCalledFromWCM()";if(this._isTracing){this.traceEntry(m);}var _1e8=(this._callingEnvironment===com.ibm.workplace.wcm.ecm.picker.util.FederatedDocumentsDefinitions._wcm);if(this._isTracing){this.traceExit(m,_1e8);}return _1e8;},_isCurrentPageReady:function(){var m="_isCurrentPageReady()";if(this._isTracing){this.traceEntry(m);this.trace(m,"Current page:",this._currentPage);}var _1e9=false;if((this._currentPage>-1)&&(this._currentPage<this._pages.length)){var _1ea=this._widgets[this._currentPage];_1e9=_1ea.isReady();}if(this._isTracing){this.traceExit(m,_1e9);}return _1e9;},_isQuickrFeedType:function(_1eb){var _1ec;if((_1eb===com.ibm.workplace.wcm.ecm.picker.util.FederatedDocumentsDefinitions._qds)||(_1eb===com.ibm.workplace.wcm.ecm.picker.util.FederatedDocumentsDefinitions._qdsentry)){_1ec=true;}else{_1ec=false;}return _1ec;},_layoutAutoResize:function(_1ed,_1ee,_1ef,_1f0){var m="_layoutAutoResize(p_headerHeight, p_footerHeight, p_maxAllowedHeight, p_maxAllowedWidth)";if(this._isTracing){this.traceEntry(m,[_1ed,_1ee,_1ef,_1f0]);}var _1f1=Math.max(this.containerNode.scrollHeight,this.containerNode.offsetHeight);var _1f2=Math.max(this.containerNode.scrollWidth,this.containerNode.offsetWidth);var _1f3=dojo.marginBox(this.containerNode).h;var _1f4=_1ed+_1f1+_1ee;var _1f5=this._dialogBorderWidth+_1f2;var _1f6=_1ed+_1f3+_1ee;var _1f7=dojo.marginBox(this.containerNode).w;var _1f8=_1f7+this._dialogBorderWidth;if(this._isTracing){this.trace(m,"contentHeight:",_1f1);this.trace(m,"currentContentHeight:",_1f3);this.trace(m,"currentContentWidth:",_1f7);this.trace(m,"dialogHeight:",_1f4);this.trace(m,"currentDialogHeight:",_1f6);this.trace(m,"currentDialogWidth:",_1f8);}if(this.isResized===false){dojo.style(this.GenericDialogDiv,"height","auto");dojo.style(this.GenericDialogDiv,"width","auto");if(_1f6>_1ef){var _1f9=_1ef-_1ed-_1ee;if(this._isTracing){this.trace(m,"Reducing the dialog container node height to:",_1f9);}dojo.marginBox(this.containerNode,{"h":_1f9});}else{if(_1f6>=_1f4){if(this._isTracing){this.trace(m,"Setting the dialog container node height 'auto'");}dojo.style(this.containerNode,"height","auto");}else{if((_1f6<_1ef)&&(_1f6<_1f4)){var _1fa=Math.min(_1ef-_1ed-_1ee,_1f4+1-_1ed-_1ee);if(this._isTracing){this.trace(m,"Increasing the dialog container node height to:",_1fa);}dojo.marginBox(this.containerNode,{"h":_1fa});}}}if(_1f8>_1f0){var _1fb=_1f0-this._dialogBorderWidth;if(this._isTracing){this.trace(m,"Reducing the dialog container node width to:",_1fb);}dojo.marginBox(this.containerNode,{"w":_1fb});}else{if(_1f8>=_1f5){if(this._isTracing){this.trace(m,"Setting the dialog container node Width 'auto'");}dojo.style(this.containerNode,"width","auto");}else{if((_1f8<_1f0)&&(_1f8<_1f5)){var _1fc=Math.min(_1f0-this._dialogBorderWidth,_1f5+1-this._dialogBorderWidth);if(this._isTracing){this.trace(m,"Increasing the dialog container node width to:",_1fc);}dojo.marginBox(this.containerNode,{"w":_1fc});}}}if(this.wizardPageContainer){this.wizardPageContainer.layout();}}if(this._isTracing){this.traceExit(m);}},_layoutManualResize:function(_1fd,_1fe,_1ff,_200){var m="_layoutManualResize(p_headerHeight, p_footerHeight, p_maxAllowedHeight, p_maxAllowedWidth)";if(this._isTracing){this.traceEntry(m,[_1fd,_1fe,_1ff,_200]);}var _201=Math.max(dojo.contentBox(this.wizardErrorDiv).h,0);var _202=_1fd;var _203=_1fd+_201+_202+_1fe;var _204=dojo.marginBox(this.GenericDialogDiv).h;var _205=Math.max(_204,_203);_205=Math.min(_205,_1ff);var _206=_205-_1fd-_1fe-this._dialogBorderWidth;if(this._isTracing){this.trace(m,"errorHeight:",_201);this.trace(m,"stepHeaderHeight:",_202);this.trace(m,"dialogBoxHeight:",_204);this.trace(m,"dialogBoxHeightNew:",_205);this.trace(m,"contentHeightNew:",_206);}dojo.marginBox(this.GenericDialogDiv,{h:_205});dojo.marginBox(this.containerNode,{h:_206});this.wizardPageContainer.layout();if(this._isTracing){this.traceExit(m);}},_normalizeFeedTypeParam:function(_207){var m="_normalizeFeedTypeParam(p_feedType)";if(this._isTracing){this.traceEntry(m);}var _208="";if(typeof _207=="string"){var _209=_207.toLowerCase();if((_209==="cmis")||(_209==="servicedoc")){_208="cmis";}else{if((_209==="qds")||(_209==="qdsentry")){_208="qds";}}}else{_208="";}if(this._isTracing){this.traceExit(m,_208);}return _208;},_onCancel:function(){var m="_onCancel()";if(this._isTracing){this.traceEntry(m);}this._deleteTransientSlot();if(this._onCancelCallbackFn&&dojo.isFunction(this._onCancelCallbackFn)){if(this._isTracing){this.trace(m,"Dispatching to callback function:",this._onCancelCallbackFn);}this._onCancelCallbackFn();}if(this.autoClose){this.hide();setTimeout(dojo.hitch(this,"destroyDialog"),this.duration+200);}if(this._isTracing){this.traceExit(m);}},_onConfirm:function(){var m="_onConfirm()";if(this._isTracing){this.traceEntry(m);}this._deleteTransientSlot();if(!dojo.hasClass(this.dialogConfirm,"lotusBtnDisabled")){var _20a="";var _20b="";var url="";var _20c=this.getSelectedItemJSON();if(this._isTracing){this.trace(m,"Selected item:",_20c);}if(_20c!==null){_20b=_20c.title;url=_20c.url;if(this._isCalledFromPZN()){var _20d=this._widgets[0].getSettings();_20a=com.ibm.workplace.wcm.ecm.picker.util.URLUtils._INSTANCE.addQueryParameter(url,"feedType",this._normalizeFeedTypeParam(_20d.serverType));if((_20d.authProperties.authType==com.ibm.workplace.wcm.ecm.picker.widget.AuthenticationWidget._authTypeVault)&&(_20d.authProperties.vaultSlotID)){_20a=com.ibm.workplace.wcm.ecm.picker.util.URLUtils._INSTANCE.addQueryParameter(_20a,com.ibm.workplace.wcm.ecm.picker.util.FederatedDocumentsDefinitions._proxyVaultSlotParamName,_20d.authProperties.vaultSlotID);}var dlg=this;this._widgets[1].getLibTree().path.forEach(function(node,i){dlg._selectedPath[i++]=node.id;});}else{_20a=url;}}if(this._onConfirmCallbackFn&&dojo.isFunction(this._onConfirmCallbackFn)){if(this._isTracing){this.trace(m,"Dispatching to callback function passing title and URL of selection:",[this._onConfirmCallbackFn,_20b,_20a]);}this._onConfirmCallbackFn(_20b,_20a,this._selectedPath);}if(this.autoClose){this.hide();setTimeout(dojo.hitch(this,"destroyDialog"),this.duration+200);}}if(this._isTracing){this.traceExit(m);}},_onDefaultAction:function(){var m="_onDefaultAction()";if(this._isTracing){this.traceEntry(m);}var _20e=this._getDefaultButton();if(_20e===this.dialogConfirm){this._onConfirm();}else{if(_20e===this.dialogNext){this._onGoFwdPrep();}}if(this._isTracing){this.traceExit(m);}},_onErrorStateChanged:function(_20f,_210,_211,_212){var m="_onErrorStateChanged(p_sender, p_errorState, p_errorMsg, p_errorDetails)";if(this._isTracing){this.traceEntry(m,[_20f,_210,_211,_212]);}if(_210===true){this._showError(_211,_212);}else{if(_210===false){this._clearError();}else{}}if(this._isTracing){this.traceExit(m);}},_onFocusFirstItem:function(){var m="_onFocusFirstItem()";if(this._isTracing){this.traceEntry(m);}if((this._currentPage>-1)&&(this._currentPage<3)){if(this._widgets[this._currentPage]&&dojo.isFunction(this._widgets[this._currentPage].setFocus)){this._widgets[this._currentPage].setFocus();}}if(this._isTracing){this.traceExit(m);}},_onGoBack:function(_213){var m="_onGoBack()";if(this._isTracing){this.traceEntry(m);this.trace(m,"Current page:",this._currentPage);}dojo.stopEvent(_213);if(!dojo.hasClass(this.dialogPrevious,"lotusBtnDisabled")){if(this._currentPage>0){this.isResized=false;this._widgets[0].setFeedType(null);this._switchToPage(0);}}if(this._isTracing){this.traceExit(m);}return false;},_onGoFwdPrep:function(){var m="_onGoFwdPrep()";if(this._isTracing){this.traceEntry(m);this.trace(m,"Current page:",this._currentPage);}if(this.usePresetUrl||(!dojo.hasClass(this.dialogNext,"lotusBtnDisabled"))&&(this._currentPage<this._pages.length-1)){var _214=this._widgets[0].getSettings();if(_214.authProperties.authType==com.ibm.workplace.wcm.ecm.picker.widget.AuthenticationWidget._authTypeUserPwd){var _215=_214.authProperties.username;var _216=_214.authProperties.password;this._getTransientSlot(_215,_216);}else{this._onGoFwd();}}if(this._isTracing){this.traceExit(m);}},_onGoFwd:function(){var m="_onGoFwd()";if(this._isTracing){this.traceEntry(m);this.trace(m,"Current page:",this._currentPage);}if(!dojo.hasClass(this.dialogNext,"lotusBtnDisabled")){if(this._currentPage<this._pages.length-1){var _217=this._widgets[0].getSettings();var url=_217.serverUrl;var _218=this._serverTypeMap[url];if(_218){this._widgets[0].setFeedType(_218);if(this._isQuickrFeedType(_218)){this._switchToQuickrPage();}else{this.isResized=false;this._switchToPage(1);}}else{var _219=_217.serverType;if(_219===com.ibm.workplace.wcm.ecm.picker.util.FederatedDocumentsDefinitions._qds){this._serverTypeMap[url]=_219;this._widgets[0].setFeedType(_219);this._switchToQuickrPage();}else{this._fetchServerType(url);}}}}if(this._isTracing){this.traceExit(m);}},_onReadyStateChanged:function(_21a,_21b){var m="_onReadyStateChanged(p_readyState, p_widgetRef)";if(this._isTracing){this.traceEntry(m,[_21a,_21b]);}this._enableDisableButtons();if(this._isTracing){this.traceExit(m);}},_onSubmit:function(_21c){var m="_onSubmit(p_evt)";if(this._isTracing){this.traceEntry(m,[_21c]);}dojo.stopEvent(_21c);this._onDefaultAction();if(this._isTracing){this.traceExit(m,false);}return false;},_setBackBtnEnabled:function(_21d){var m="_setBackBtnEnabled(p_isEnabled)";if(this._isTracing){this.traceEntry(m,[_21d]);}this._setBtnEnabled(this.dialogPrevious,_21d);if(this._isTracing){this.traceExit(m);}},_setBtnEnabled:function(_21e,_21f){var m="_setBtnEnabled(p_Btn, p_isEnabled)";if(this._isTracing){this.traceEntry(m,[_21e,_21f]);}if(_21f){dojo.removeClass(_21e,"lotusBtnDisabled");dojo.removeAttr(_21e,"disabled");dijit.removeWaiState(_21e,"disabled");}else{dojo.addClass(_21e,"lotusBtnDisabled");dojo.attr(_21e,"disabled","disabled");dijit.setWaiState(_21e,"disabled",true);}if(this._isTracing){this.traceExit(m);}},_setFinishBtnEnabled:function(_220){var m="_setFinishBtnEnabled(p_isEnabled)";if(this._isTracing){this.traceEntry(m,[_220]);}this._setBtnEnabled(this.dialogConfirm,_220);if(this._isTracing){this.traceExit(m);}},_setNextBtnEnabled:function(_221){var m="_setNextBtnEnabled(p_isEnabled)";if(this._isTracing){this.traceEntry(m,[_221]);}this._setBtnEnabled(this.dialogNext,_221);if(this._isTracing){this.traceExit(m);}},_showDetectingBox:function(){var m="_showDetectingBox()";if(this._isTracing){this.traceEntry(m);}if(dojo.style(this.fedDocPickerDetectingDiv,"display")!="block"){dojo.style(this.fedDocPickerDetectingDiv,"display","block");}dijit.setWaiState(this.fedDocPickerDetectingDiv,"hidden",false);dijit.setWaiState(this.wizardPageContainer,"busy",true);if(this._isTracing){this.traceExit(m);}},_showError:function(_222,_223){var m="_showError(p_errorMsg, p_errorDetails)";if(this._isTracing){this.traceEntry(m,[_222,_223]);}this._hideDetectingBox();this._hideGettingVaultBox();if(typeof _222=="string"){var _224=_222.substring(0,Math.min(this._maxErrorChars,_222.length));dojo.attr(this.wizardErrorSpan,"innerHTML",_224);dojo.style(this.wizardErrorDiv,"opacity","1");dojo.style(this.wizardErrorDiv,"display","block");dijit.setWaiState(this.wizardErrorDiv,"hidden",false);if(typeof _223=="string"){var _225=_223.substring(0,Math.min(this._maxErrorChars,_223.length));dojo.attr(this.wizardErrorDetailsSpan,"innerHTML",_225);dojo.style(this.wizardErrorDetailsDiv,"display","block");dijit.setWaiState(this.wizardErrorDetailsDiv,"hidden",false);}}else{this.trace(m,"_showError was called with an undefined error message.");}this._errorState=true;if((this._currentPage>=0)&&(this._currentPage<=2)){this._widgets[this._currentPage]._errorState=true;}this._enableDisableButtons();this.layout();if(this._isTracing){this.traceExit(m);}},_showErrorForXHRRequest:function(_226){var m="_showErrorForXHRRequest()";if(this._isTracing){this.traceEntry(m,_226);}var _227=com.ibm.workplace.wcm.ecm.picker.util.ErrorMsgUtils._INSTANCE.getErrorMessage(_226,this._nlsMessages.srvCommunication,(this._widgets[0].getSettings().serverUrl.substring(0,6).toLowerCase()==="https:"));this._showError(_227[com.ibm.workplace.wcm.ecm.picker.util.ErrorMsgUtils.ErrorMessage],_227[com.ibm.workplace.wcm.ecm.picker.util.ErrorMsgUtils.ErrorDetails]);if(this._isTracing){this.traceExit(m);}},_showGettingVaultBox:function(){var m="_showGettingVaultBox()";if(this._isTracing){this.traceEntry(m);}if(dojo.style(this.fedDocPickerGettingVaultDiv,"display")!="block"){dojo.style(this.fedDocPickerGettingVaultDiv,"display","block");}dijit.setWaiState(this.fedDocPickerGettingVaultDiv,"hidden",false);dijit.setWaiState(this.wizardPageContainer,"busy",true);if(this._isTracing){this.traceExit(m);}},_switchToPage:function(_228,_229){var m="_switchToPage(p_pageIndex)";if(this._isTracing){this.traceEntry(m,[_228]);this.trace(m,"Current page:",this._currentPage);}if((_228>-1)&&(_228<this._pages.length)){this._clearError();this._hideDetectingBox();this._hideGettingVaultBox();this._currentPage=_228;var _22a=this._widgets[this._currentPage];this._updateStepLabel(_22a.getStepLabel());this._updateStepDescription(_22a.getStepDescription());this.wizardPageContainer.selectChild(this._pages[this._currentPage]);if(this._currentPage>0){var _22b=this._widgets[0].getSettings();if((_22b.authProperties.authType==com.ibm.workplace.wcm.ecm.picker.widget.AuthenticationWidget._authTypeUserPwd)&&(this._transientSlotId)){_22b.authProperties.vaultSlotID=this._transientSlotId;}this._widgets[this._currentPage].initializePage(_22b);}else{}this._enableDisableButtons();this.layout();}if(this._isTracing){this.traceExit(m);}},_switchToQuickrPage:function(){var m="_switchToQuickrPage()";if(this._isTracing){this.traceEntry(m);}if(this._qdsSupportEnabled){this.isResized=false;this._switchToPage(2);}else{this._showError(this._nlsMessages.docPickerDialog.errorQDSNotEnabled,"");}if(this._isTracing){this.traceExit(m);}},_updateStepDescription:function(_22c){var m="_updateStepDescription(p_descrText)";if(this._isTracing){this.traceEntry(m,_22c);}dojo.attr(this.wizardStepDescription,"innerHTML",_22c);if(this._isTracing){this.traceExit(m);}},_updateStepLabel:function(_22d){var m="_updateStepLabel(p_labelText)";if(this._isTracing){this.traceEntry(m,_22d);}dojo.attr(this.wizardStepLabel,"innerHTML","<b>"+_22d+"</b>");if(this._isTracing){this.traceExit(m);}}});}if(!dojo._hasResource["com.ibm.workplace.wcm.ecm.quickr.picker.launcher.DocPickerLauncher"]){dojo._hasResource["com.ibm.workplace.wcm.ecm.quickr.picker.launcher.DocPickerLauncher"]=true;dojo.provide("com.ibm.workplace.wcm.ecm.quickr.picker.launcher.DocPickerLauncher");dojo.declare("com.ibm.workplace.wcm.ecm.quickr.picker.launcher.DocPickerLauncher",null,{_onConfirmCallbackFn:null,_onCloseCallbackFn:null,_dialogTitleKey:"dialogTitleDefault",_locale:null,_showPlaces:false,_showNodePath:true,_nodeTypes:[],_downloadTypes:[],_viewTypes:[],_forceSSO:false,_isMovable:true,_allowCustomServers:true,_allowedHosts:[],_cookieName:"QuickrPickerRecentHosts",_lastHostCookie:"qkrMRHU",_proxyUrl:"/wps/proxy",_pageSize:10,_timeout:15000,_linkType:null,_currentItem:null,_nodeType2Selector:{place:"new quickr.picker.data.filter.PlaceSelector()",library:"new quickr.picker.data.filter.LibrarySelector()",folder:"new quickr.picker.data.filter.FolderSelector()",doclink:"new quickr.picker.data.filter.DocLinkSelector()",document:"new quickr.picker.data.filter.DocumentSelector()"},_nlsStrings:null,_onCloseHdl:null,_onShowHdl:null,_pickerDialog:null,_feedUrl:"",constructor:function(_22e,_22f,_230){if(typeof _22e=="function"){this._onConfirmCallbackFn=_22e;}if(typeof _22f=="function"){this._onCloseCallbackFn=_22f;}this._evalArgs(_230);this._loadPrereqs();},launchDocumentPicker:function(_231){var _232;this._feedUrl=_231;inst=this;if(this._downloadTypes.length>0&&this._viewTypes.length>0){this._linkType="any";var _233={displayText:this._nlsStrings.menuItemViewLink,onClick:function(_234){inst._confirmSelection(_234,"view");},onItemSelected:function(_235,_236,_237){inst._onItemSelected(_235,_236,_237);}};var _238={displayText:this._nlsStrings.menuItemDownloadLink,onClick:function(_239){inst._confirmSelection(_239,"download");},onItemSelected:function(_23a,_23b,_23c){inst._onItemSelected(_23a,_23b,_23c);}};_232={displayType:"menubutton",displayText:this._nlsStrings.menuInsertLink,menuItems:[_233,_238]};}else{if(this._downloadTypes.length>0){this._linkType="download";}else{if(this._viewTypes.length>0){this._linkType="view";}}if(this._linkType){_232={displayType:"button",displayText:this._nlsStrings.buttonOk,onClick:function(_23d){inst._confirmSelection(_23d,inst._linkType);},onItemSelected:function(_23e,_23f,_240){inst._onItemSelected(_23e,_23f,_240);}};}}var _241=quickr.picker.widgets.PickerDialog.getCancelAction();var _242;if(typeof _232!="undefined"){_242=[_232,_241];}else{_242=[_241];}var _243={filterAttribute:"category"};if(this._nodeTypes.length===0){_243.place=[new quickr.picker.data.filter.PlaceSelector()];_243.library=[new quickr.picker.data.filter.LibrarySelector()];_243.folder=[new quickr.picker.data.filter.FolderSelector()];_243.doclink=[new quickr.picker.data.filter.DocLinkSelector()];_243.document=[new quickr.picker.data.filter.DocumentSelector()];}else{for(i=0;i<this._nodeTypes.length;i++){var _244=this._nodeTypes[i];var _245=this._nodeType2Selector[_244];if(typeof _245=="string"){_243[_244]=eval("["+_245+"]");}}}var args={title:this._nlsStrings[this._dialogTitleKey],pickerfilters:_243,isBrowseLocalOnly:false,showSummary:this._showNodePath,showPlaces:this._showPlaces,isMovable:this._isMovable,actions:_242,forceSSO:this._forceSSO,allowCustomServers:this._allowCustomServers,allowedHosts:this._allowedHosts,cookieName:this._cookieName,lastHostCookie:this._lastHostCookie,proxyUrl:this._proxyUrl,pageSize:this._pageSize,timeout:this._timeout,useInternalProxy:false,fillLastHost:false,portalContext:true};this._pickerDialog=new quickr.picker.widgets.PickerDialog(args);this._onCloseHdl=dojo.connect(this._pickerDialog,"hide",this,"_onClose");this._onShowHdl=dojo.connect(this._pickerDialog,"onShow",this,"_injectUrl");var _246=this;setTimeout(function(){_246._pickerDialog.show();},150);return this._pickerDialog;},_onClose:function(){if(this._onCloseHdl){dojo.disconnect(this._onCloseHdl);}this._onCloseHdl=null;if(this._onShowHdl){dojo.disconnect(this._onShowHdl);}this._onShowHdl=null;this._currentItem=null;if(this._onCloseCallbackFn){this._onCloseCallbackFn();}},_confirmSelection:function(_247,_248){if(this._currentItem){var url;if(_248=="view"){url=this._currentItem.viewUrl;}else{url=this._currentItem.downloadUrl;}if(this._onConfirmCallbackFn){this._onConfirmCallbackFn(this._currentItem.title,url,_248);}}_247.hide();_247.destroy();},_injectUrl:function(){if(this._pickerDialog&&this._feedUrl&&dojo.isString(this._feedUrl)){if(this._pickerDialog.picker){if(this._pickerDialog.picker.recentHosts&&dojo.isFunction(this._pickerDialog.picker.recentHosts.attr)){this._pickerDialog.picker.recentHosts.attr("value",this._feedUrl);}}}},_onItemSelected:function(_249,_24a,_24b){var item=_24b.getCurrentItem();var _24c=_24b.store.getLabel(item);var path=_24b.store.getPath(item);var _24d=_24b.store.getValue(item,"category");var _24e=_24b.store.getValue(item,"downloadurl");var _24f=_24b.store.getValue(item,"viewurl");this._currentItem={title:_24c,path:path,category:_24d[0],downloadUrl:_24e,viewUrl:_24f};var _250=true;if(this._linkType=="view"||(this._linkType=="any"&&_249.label==this._nlsStrings.menuItemViewLink)){_250=this._containsString(this._viewTypes,_24d[0]);}else{if(this._linkType=="download"||(this._linkType=="any"&&_249.label==this._nlsStrings.menuItemDownloadLink)){_250=this._containsString(this._downloadTypes,_24d[0]);}}_249.setDisabled(!_250);},_evalArgs:function(_251){if(typeof _251!="undefined"&&_251){if(typeof _251.dialogTitleKey=="string"){this._dialogTitleKey=_251.dialogTitleKey;}if(typeof _251.locale=="string"){this._locale=_251.locale;}else{this._locale=dojo.config.locale;}if(typeof _251.showPlaces=="boolean"){this._showPlaces=_251.showPlaces;}if(typeof _251.showNodePath=="boolean"){this._showNodePath=_251.showNodePath;}if(typeof _251.nodeTypes=="object"&&_251.nodeTypes){this._nodeTypes=_251.nodeTypes;}if(typeof _251.downloadTypes=="object"&&_251.downloadTypes){this._downloadTypes=_251.downloadTypes;}if(typeof _251.viewTypes=="object"&&_251.viewTypes){this._viewTypes=_251.viewTypes;}if(typeof _251.forceSSO=="boolean"){this._forceSSO=_251.forceSSO;}if(typeof _251.isMovable=="boolean"){this._isMovable=_251.isMovable;}if(typeof _251.allowCustomServers=="boolean"){this._allowCustomServers=_251.allowCustomServers;}if(typeof _251.allowedHosts=="object"&&_251.allowedHosts){this._allowedHosts=_251.allowedHosts;}if(typeof _251.cookieName=="string"){this._cookieName=_251.cookieName;}if(typeof _251.proxyUrl=="string"){this._proxyUrl=_251.proxyUrl;}if(typeof _251.lastHostCookie=="string"){this._lastHostCookie=_251.lastHostCookie;}if(typeof _251.pageSize=="integer"){this._pageSize=_251.pageSize;}if(typeof _251.timeout=="integer"){this._timeout=_251.timeout;}}},_loadPrereqs:function(){dojo.require("dojo.i18n");this._nlsStrings=dojo.i18n.getLocalization("com.ibm.workplace.wcm.ecm.quickr.picker.launcher","DocPickerLauncher");},_containsString:function(_252,_253){if((typeof _252=="object")&&(_252!==null)&&(typeof _253=="string")){for(i=0;i<_252.length;i++){if(_252[i]==_253){return true;}}}return false;}});}if(!dojo._hasResource["com.ibm.workplace.wcm.ecm.picker.util.FederatedDocumentsPickerManager"]){dojo._hasResource["com.ibm.workplace.wcm.ecm.picker.util.FederatedDocumentsPickerManager"]=true;dojo.provide("com.ibm.workplace.wcm.ecm.picker.util.FederatedDocumentsPickerManager");dojo.require("com.ibm.widgets._Traceable");dojo.declare("com.ibm.workplace.wcm.ecm.picker.util.FederatedDocumentsPickerManager",[com.ibm.widgets._Traceable],{_callingEnvId:com.ibm.workplace.wcm.ecm.picker.util.FederatedDocumentsDefinitions._wcm,_dsPickerArgs:{},_fedDocsPickerArgs:{},_federatedDocumentsServiceBean:null,_isTracing:false,_namespace:"fedDocsPckrDlg_",_onCancelCallbackFn:null,_onConfirmCallbackFn:null,constructor:function(_254){this._isTracing=this.isTracing();var m="constructor(p_params)";if(this._isTracing){this.traceEntry(m,_254);if(_254){this.trace(m,"p_params.callingEnvId:",_254.callingEnvId);this.trace(m,"p_params.documentServicesPickerArgs:",_254.documentServicesPickerArgs);this.trace(m,"p_params.federatedDocumentsPickerArgs:",_254.federatedDocumentsPickerArgs);this.trace(m,"p_params.federatedDocumentsServiceBean:",_254.federatedDocumentsServiceBean);this.trace(m,"p_params.namespace:",_254.namespace);this.trace(m,"p_params.onCancelCallbackFn:",_254.onCancelCallbackFn);this.trace(m,"p_params.onConfirmCallbackFn:",_254.onConfirmCallbackFn);}}if(typeof _254.callingEnvId=="string"){this._callingEnvId=_254.callingEnvId;}if(_254.federatedDocumentsServiceBean&&typeof _254.federatedDocumentsServiceBean=="object"){this._federatedDocumentsServiceBean=_254.federatedDocumentsServiceBean;}if(typeof _254.namespace=="string"){this._namespace=_254.namespace;}if(typeof _254.onCancelCallbackFn=="function"){this._onCancelCallbackFn=_254.onCancelCallbackFn;}if(typeof _254.onConfirmCallbackFn=="function"){this._onConfirmCallbackFn=_254.onConfirmCallbackFn;}if(this._federatedDocumentsServiceBean.isQDSSupportEnabled()){this._initFederatedDocumentsPickerArgs(_254.federatedDocumentsPickerArgs);this._initDocumentServicesPickerArgs(_254.documentServicesPickerArgs);}else{this._initFederatedDocumentsPickerArgs(_254.federatedDocumentsPickerArgs);}if(this._isTracing){this.traceExit(m);}},launchDocumentServicesPickerDialog:function(_255,_256,_257){var m="launchDocumentServicesPickerDialog(p_url, p_onConfirmCallbackFn, p_onCloseCallbackFn)";if(this._isTracing){this.traceEntry(m,[_255,_256,_257]);}var _258=null;var _259=null;if(typeof _256=="function"){_258=_256;}if(typeof _257=="function"){_259=_257;}if(this._isTracing){this.trace(m,"Confirm callback function: ",_258);this.trace(m,"Close callback function: ",_259);}var _25a=new com.ibm.workplace.wcm.ecm.quickr.picker.launcher.DocPickerLauncher(_258,_259,this._dsPickerArgs);_25a.launchDocumentPicker(_255);if(this._isTracing){this.traceExit(m);}},launchFederatedDocumentsPickerDialog:function(){var m="launchFederatedDocumentsPickerDialog()";if(this._isTracing){this.traceEntry(m);}var _25b=new com.ibm.workplace.wcm.ecm.picker.dialog.FederatedDocumentsPickerDialog(this._fedDocsPickerArgs);_25b.show();if(this._isTracing){this.traceExit(m);}},_initDocumentServicesPickerArgs:function(_25c){var m="_initDocumentServicesPickerArgs(p_dsPickerArgs)";if(this._isTracing){this.traceEntry(m,_25c);if(_25c){this.trace(m,"p_dsPickerArgs.dialogTitleKey",_25c.dialogTitleKey);this.trace(m,"p_dsPickerArgs.showNodePath",_25c.showNodePath);this.trace(m,"p_dsPickerArgs.showPlaces",_25c.showPlaces);this.trace(m,"p_dsPickerArgs.nodeTypes",dojo.toJson(_25c.nodeTypes));this.trace(m,"p_dsPickerArgs.downloadTypes",dojo.toJson(_25c.downloadTypes));this.trace(m,"p_dsPickerArgs.viewTypes",dojo.toJson(_25c.viewTypes));this.trace(m,"p_dsPickerArgs.proxyUrl",_25c.proxyUrl);}}var _25d=this._federatedDocumentsServiceBean.getPortalContextPath()+"/proxy";if(this._callingEnvId===com.ibm.workplace.wcm.ecm.picker.util.FederatedDocumentsDefinitions._pzn){this._dsPickerArgs={"dialogTitleKey":"dialogTitleSelectFolder","showNodePath":true,"showPlaces":true,"nodeTypes":["place","library","folder"],"downloadTypes":["library","folder"],"viewTypes":[],"proxyUrl":_25d};}else{if(this._callingEnvId===com.ibm.workplace.wcm.ecm.picker.util.FederatedDocumentsDefinitions._wcm){this._dsPickerArgs={"dialogTitleKey":"dialogTitleSelectDocument","showNodePath":true,"showPlaces":true,"nodeTypes":["place","library","folder","document","doclink"],"downloadTypes":["document"],"viewTypes":["library","folder","document","doclink"],"proxyUrl":_25d};}}if(_25c&&typeof _25c=="object"){this._mergeArguments(_25c,this._dsPickerArgs);}if(this._isTracing){this.trace(m,"Document services picker arguments initialized:",this._dsPickerArgs);if(this._dsPickerArgs){this.trace(m,"_dsPickerArgs.dialogTitleKey",this._dsPickerArgs.dialogTitleKey);this.trace(m,"_dsPickerArgs.showNodePath",this._dsPickerArgs.showNodePath);this.trace(m,"_dsPickerArgs.showPlaces",this._dsPickerArgs.showPlaces);this.trace(m,"_dsPickerArgs.nodeTypes",dojo.toJson(this._dsPickerArgs.nodeTypes));this.trace(m,"_dsPickerArgs.downloadTypes",dojo.toJson(this._dsPickerArgs.downloadTypes));this.trace(m,"_dsPickerArgs.viewTypes",dojo.toJson(this._dsPickerArgs.viewTypes));this.trace(m,"_dsPickerArgs.proxyUrl",this._dsPickerArgs.proxyUrl);}this.traceExit(m);}},_initFederatedDocumentsPickerArgs:function(_25e){var m="_initFederatedDocumentsPickerArgs(p_fedDocsPickerArgs)";if(this._isTracing){this.traceEntry(m,_25e);if(_25e){this.trace(m,"p_fedDocsPickerArgs.callingEnvironment",_25e.callingEnvironment);this.trace(m,"p_fedDocsPickerArgs.customServiceSelectionEnabled",_25e.customServiceSelectionEnabled);this.trace(m,"p_fedDocsPickerArgs.documentsServices",_25e.documentsServices);this.trace(m,"p_fedDocsPickerArgs.feedBaseURL",_25e.feedBaseURL);this.trace(m,"p_fedDocsPickerArgs.feedTypeBaseURL",_25e.feedTypeBaseURL);this.trace(m,"p_fedDocsPickerArgs.nodeTypes",dojo.toJson(_25e.nodeTypes));this.trace(m,"p_fedDocsPickerArgs.onCancelCallbackFn",_25e.onCancelCallbackFn);this.trace(m,"p_fedDocsPickerArgs.onConfirmCallbackFn",_25e.onConfirmCallbackFn);this.trace(m,"p_fedDocsPickerArgs.pickerManager",_25e.pickerManager);this.trace(m,"p_fedDocsPickerArgs.qdsSupportEnabled",_25e.qdsSupportEnabled);this.trace(m,"p_fedDocsPickerArgs.serviceDocBaseURL",_25e.serviceDocBaseURL);this.trace(m,"p_fedDocsPickerArgs.vaultMgmtDataSinkUrl",_25e.vaultMgmtDataSinkUrl);this.trace(m,"p_fedDocsPickerArgs.vaultSelectionEnabled",_25e.vaultSelectionEnabled);this.trace(m,"p_fedDocsPickerArgs.vaultSelectionEnabledForPZN",_25e.vaultSelectionEnabledForPZN);this.trace(m,"p_fedDocsPickerArgs.vaultSelectionEnabledForWCM",_25e.vaultSelectionEnabledForWCM);this.trace(m,"p_fedDocsPickerArgs.vaultSlots",_25e.vaultSlots);this.trace(m,"p_fedDocsPickerArgs.portalContextPath",_25e.portalContextPath);this.trace(m,"p_fedDocsPickerArgs.usePresetUrl",_25e.usePresetUrl);}}var _25f=this._federatedDocumentsServiceBean.isCustomServiceSelectionEnabled();var _260=this._federatedDocumentsServiceBean.getFederatedDocumentsServices();var _261=this._federatedDocumentsServiceBean.getFeedBaseURL();var _262=this._federatedDocumentsServiceBean.getFeedTypeBaseURL();var _263=this._federatedDocumentsServiceBean.isQDSSupportEnabled();var _264=this._federatedDocumentsServiceBean.isVaultSelectionEnabledForPZN();var _265=this._federatedDocumentsServiceBean.isVaultSelectionEnabledForWCM();var _266=this._federatedDocumentsServiceBean.getServiceDocumentBaseURL();var _267=this._federatedDocumentsServiceBean.getVaultMgmtDataSinkUrl();var _268=this._federatedDocumentsServiceBean.getVaultSlots();var _269=this._federatedDocumentsServiceBean.getPortalContextPath();var _26a=false;if(_25e&&_25e.usePresetUrl){_26a=_25e.usePresetUrl;}if(this._callingEnvId===com.ibm.workplace.wcm.ecm.picker.util.FederatedDocumentsDefinitions._pzn){this._fedDocsPickerArgs={"callingEnvironment":this._callingEnvId,"customServiceSelectionEnabled":_25f,"documentsServices":_260,"feedBaseURL":_261,"feedTypeBaseURL":_262,"namespace":this._namespace,"nodeTypes":["repository","folder"],"onCancelCallbackFn":this._onCancelCallbackFn,"onConfirmCallbackFn":this._onConfirmCallbackFn,"pickerManager":this,"qdsSupportEnabled":_263,"serviceDocBaseURL":_266,"vaultMgmtDataSinkUrl":_267,"vaultSelectionEnabled":_264,"vaultSelectionEnabledForPZN":_264,"vaultSelectionEnabledForWCM":_265,"vaultSlots":_268,"portalContextPath":_269,"usePresetUrl":_26a};}else{if(this._callingEnvId===com.ibm.workplace.wcm.ecm.picker.util.FederatedDocumentsDefinitions._wcm){this._fedDocsPickerArgs={"callingEnvironment":this._callingEnvId,"customServiceSelectionEnabled":_25f,"documentsServices":_260,"feedBaseURL":_261,"feedTypeBaseURL":_262,"namespace":this._namespace,"nodeTypes":["repository","folder","document"],"onCancelCallbackFn":this._onCancelCallbackFn,"onConfirmCallbackFn":this._onConfirmCallbackFn,"pickerManager":this,"qdsSupportEnabled":_263,"serviceDocBaseURL":_266,"vaultMgmtDataSinkUrl":_267,"vaultSelectionEnabled":_265,"vaultSelectionEnabledForPZN":_264,"vaultSelectionEnabledForWCM":_265,"vaultSlots":_268,"portalContextPath":_269,"usePresetUrl":_26a};}}if(_25e&&typeof _25e=="object"){this._mergeArguments(_25e,this._fedDocsPickerArgs);}if(this._isTracing){this.trace(m,"Federated documents picker arguments initialized:",this._fedDocsPickerArgs);if(this._fedDocsPickerArgs){this.trace(m,"this._fedDocsPickerArgs.callingEnvironment",this._fedDocsPickerArgs.callingEnvironment);this.trace(m,"this._fedDocsPickerArgs.customServiceSelectionEnabled",this._fedDocsPickerArgs.customServiceSelectionEnabled);this.trace(m,"this._fedDocsPickerArgs.documentsServices",this._fedDocsPickerArgs.documentsServices);this.trace(m,"this._fedDocsPickerArgs.feedBaseURL",this._fedDocsPickerArgs.feedBaseURL);this.trace(m,"this._fedDocsPickerArgs.feedTypeBaseURL",this._fedDocsPickerArgs.feedTypeBaseURL);this.trace(m,"this._fedDocsPickerArgs.namespace",this._fedDocsPickerArgs.namespace);this.trace(m,"this._fedDocsPickerArgs.nodeTypes",dojo.toJson(this._fedDocsPickerArgs.nodeTypes));this.trace(m,"this._fedDocsPickerArgs.onCancelCallbackFn",this._fedDocsPickerArgs.onCancelCallbackFn);this.trace(m,"this._fedDocsPickerArgs.onConfirmCallbackFn",this._fedDocsPickerArgs.onConfirmCallbackFn);this.trace(m,"this._fedDocsPickerArgs.pickerManager",this._fedDocsPickerArgs.pickerManager);this.trace(m,"this._fedDocsPickerArgs.qdsSupportEnabled",this._fedDocsPickerArgs.qdsSupportEnabled);this.trace(m,"this._fedDocsPickerArgs.serviceDocBaseURL",this._fedDocsPickerArgs.serviceDocBaseURL);this.trace(m,"this._fedDocsPickerArgs.vaultMgmtDataSinkUrl",this._fedDocsPickerArgs.vaultMgmtDataSinkUrl);this.trace(m,"this._fedDocsPickerArgs.vaultSelectionEnabled",this._fedDocsPickerArgs.vaultSelectionEnabled);this.trace(m,"this._fedDocsPickerArgs.vaultSelectionEnabledForPZN",this._fedDocsPickerArgs.vaultSelectionEnabledForPZN);this.trace(m,"this._fedDocsPickerArgs.vaultSelectionEnabledForWCM",this._fedDocsPickerArgs.vaultSelectionEnabledForWCM);this.trace(m,"this._fedDocsPickerArgs.vaultSlots",this._fedDocsPickerArgs.vaultSlots);this.trace(m,"this._fedDocsPickerArgs.portalContextPath",this._fedDocsPickerArgs.portalContextPath);this.trace(m,"this._fedDocsPickerArgs.usePresetUrl",this._fedDocsPickerArgs.usePresetUrl);}this.traceExit(m);}},_mergeArguments:function(_26b,_26c){var m="_mergeArguments(p_sourceArgs, p_targetArgs)";if(this._isTracing){this.traceEntry(m,[_26b,_26c]);}for(var _26d in _26b){_26c[_26d]=_26b[_26d];}if(this._isTracing){this.trace(m,"New set of target arguments:",_26c);this.traceExit(m);}}});}if(!dojo._hasResource["com.ibm.workplace.wcm.ecm.picker.widget.FederatedDocumentsPickerDialogWidget"]){dojo._hasResource["com.ibm.workplace.wcm.ecm.picker.widget.FederatedDocumentsPickerDialogWidget"]=true;dojo.provide("com.ibm.workplace.wcm.ecm.picker.widget.FederatedDocumentsPickerDialogWidget");dojo.registerModulePath("com.ibm.workplace.wcm.ecm.picker.widget","../com/ibm/workplace/wcm/ecm/picker/widget");dojo.require("dijit.layout.ContentPane");dojo.require("dijit.layout.StackContainer");dojo.require("com.ibm.widgets.GenericDialogWidget");dojo.declare("com.ibm.workplace.wcm.ecm.picker.widget.FederatedDocumentsPickerDialogWidget",[com.ibm.widgets.GenericDialogWidget],{blankImgUrl:dojo.moduleUrl("dojo","resources/blank.gif").toString(),lotusui_id:"dijitDialog_lotusui30_fedDocDlg_container",lotusui_class:"lotusui30",namespace:"fedDocsPckrDlg_",templateString:dojo.cache("com.ibm.workplace.wcm.ecm.picker.widget","template/FederatedDocumentsPickerDialogWidget.html","    <div dojoAttachPoint=\"FedDocsPickerDialogWidgetDiv\" id=\"${namespace}GenericDialogContentDiv_id\" name=\"${namespace}GenericDialogContentDiv\">\n\n        <div dojoAttachPoint=\"containerNode\" class=\"lotusDialogContent\" id=\"${namespace}containerNode_id\" name=\"${namespace}containerNode\" style=\"overflow:visible; max-height:none;\">\n            <div dojoAttachPoint=\"wizardErrorDiv\" waiRole=\"alert\" role=\"alert\" aria-hidden=\"true\" id=\"${namespace}wizardErrorDiv_id\" name=\"${namespace}wizardErrorDiv\"\n                 title=\"${_nlsUserInterface.docPickerDialog.wizardErrorDivTitle}\" style=\"display:none; max-height: 200px; overflow: auto;\"\n                 class=\"lotusMessage feddocTopSpaceSmall\">\n                <img class=\"feddocErrorIcon\" src=\"${blankImgUrl}\" width=\"16\" height=\"16\" alt=\"${_nlsUserInterface.docPickerDialog.errorImgAlt}\" role=\"img\" />\n                <span dojoAttachPoint=\"wizardErrorSpan\" name=\"${namespace}wizardErrorSpan\" id=\"${namespace}wizardErrorSpan_id\"></span>\n                <div aria-hidden=\"true\" dojoAttachPoint=\"wizardErrorDetailsDiv\" name=\"${namespace}wizardErrorDetailsDiv\" id=\"${namespace}wizardErrorDetailsDiv_id\" style=\"display: none;\"> <!-- style=\"background-color: white;\" -->\n                  <span dojoAttachPoint=\"wizardErrorDetailsSpan\" name=\"${namespace}wizardErrorDetailsSpan\" id=\"${namespace}wizardErrorDetailsSpan_id\"></span>\n                </div>\n            </div>\n            <div dojoAttachPoint=\"wizardStepHeader\" id=\"${namespace}wizardStepHeader_id\" name=\"${namespace}wizardStepHeader\">\n                <h4 class=\"feddocHeader4\"><span dojoAttachPoint=\"wizardStepLabel\" id=\"${namespace}wizardStepLabel_id\"><!-- dynamically set --></span></h4>\n                <div><span dojoAttachPoint=\"wizardStepDescription\" id=\"${namespace}wizardStepDescr_id\"><!-- dynamically set --></span></div>\n            </div>\n            <div dojoAttachPoint=\"fedDocPickerDetectingDiv\" class=\"feddocConnectingBox\">\n                <span class=\"lotusLoading\"><img width=\"21\" height=\"21\" src=\"${blankImgUrl}\" role=\"presentation\" aria-labelledby=\"${namespace}detectingFeedTypeDivText_id\" alt=\"${_nlsUserInterface.docPickerDialog.detectingFeedTypeImgAlt}\">\n                    </span>&nbsp;<span><span dojoAttachPoint=\"detectingFeedTypeDivText\" id=\"${namespace}detectingFeedTypeDivText_id\">${_nlsUserInterface.docPickerDialog.detectingFeedTypeDivText}</span>\n                </span>\n            </div>\n            <div dojoAttachPoint=\"fedDocPickerGettingVaultDiv\" class=\"feddocConnectingBox\">\n                <span class=\"lotusLoading\"><img width=\"21\" height=\"21\" src=\"${blankImgUrl}\" role=\"presentation\" aria-labelledby=\"${namespace}gettingVaultDivText_id\" alt=\"${_nlsUserInterface.docPickerDialog.gettingVaultImgAlt}\">\n                    </span>&nbsp;<span><span dojoAttachPoint=\"gettingVaultDivText\" id=\"${namespace}gettingVaultDivText_id\">${_nlsUserInterface.docPickerDialog.gettingVaultDivText}</span>\n                </span>\n            </div>\n            <div role=\"region\" aria-describedby=\"${namespace}wizardStepDescr_id\" aria-labelledby=\"${namespace}wizardStepLabel_id\" dojoAttachPoint=\"wizardPageContainer\" dojoType=\"dijit.layout.StackContainer\" id=\"${namespace}wizardPageContainer_id\" name=\"${namespace}wizardPageContainer\" doLayout=\"false\" style=\"min-width: 540px;\">\n            </div>\n        </div>\n\n        <div dojoAttachPoint=\"dialogFooter\" class=\"lotusDialogFooter\" id=\"${namespace}dialogFooter_id\" name=\"${namespace}dialogFooter\">\n            <form dojoAttachPoint=\"dialogFooterForm\">\n                <input dojoAttachPoint=\"dialogPrevious\" class=\"lotusFormButton\" type=\"submit\" value=\"${_nlsUserInterface.docPickerDialog.backButtonCaption}\" role=\"button\" title=\"${_nlsUserInterface.docPickerDialog.backButtonTitle}\" id=\"${namespace}dialogGotoPreviousPage_id\" name=\"${namespace}dialogGotoPreviousPage\" />\n                <input dojoAttachPoint=\"dialogNext\" class=\"lotusFormButton\" type=\"submit\" value=\"${_nlsUserInterface.docPickerDialog.nextButtonCaption}\" role=\"button\" title=\"${_nlsUserInterface.docPickerDialog.nextButtonTitle}\" id=\"${namespace}dialogGotoNextPage_id\" name=\"${namespace}dialogGotoNextPage\" />\n                <input dojoAttachPoint=\"dialogConfirm\" class=\"lotusFormButton feddocButtonLargeDistance\" type=\"submit\" value=\"${_nlsUserInterface.docPickerDialog.finishButtonCaption}\" role=\"button\" title=\"${_nlsUserInterface.docPickerDialog.finishButtonTitle}\" id=\"${namespace}submitDialogSelection_id\" name=\"${namespace}submitDialogSelection\" />\n                <input dojoAttachPoint=\"dialogCancel\" class=\"lotusBtn\" type=\"button\" role=\"button\" \n                       id=\"${namespace}cancelDialogSelection_id\"   name=\"${namespace}cancelDialogSelection\" \n                       aria-label=\"${_nlsUserInterface.docPickerDialog.cancelLinkTitle}\" title=\"${_nlsUserInterface.docPickerDialog.cancelLinkTitle}\" \n                       value=\"${_nlsUserInterface.docPickerDialog.cancelLinkText}\" />\n            </form>\n        </div>\n    </div>\n"),widgetsInTemplate:true,_callingEnvironment:com.ibm.workplace.wcm.ecm.picker.util.FederatedDocumentsDefinitions._wcm,_currentPage:-1,_defaultButton:null,_dialogBorderWidth:2,_errorState:false,_eventHandles:[],_nlsMessages:{},_nlsUserInterface:{},_maxErrorChars:768,_onCancelCallbackFn:null,_onConfirmCallbackFn:null,_pageParams:{},_pages:[],_pickerContext:com.ibm.workplace.wcm.ecm.picker.util.FederatedDocumentsDefinitions._portlet,_qdsSupportEnabled:true,_serverTypeMap:{},_selectedPath:[],_transientSlotId:String,_vaultMgmtDataSinkUrl:String,_widgets:[],_usePresetUrl:false,buildRendering:function(){var m="buildRendering()";if(this._isTracing){this.traceEntry(m);}this.inherited(arguments);var _26e;if(this._isCalledFromPZN()){_26e=this._nlsUserInterface.docPickerDialog.titlePZN;}else{_26e=this._nlsUserInterface.docPickerDialog.titleWCM;}this.title=_26e;this._hideDetectingBox();this._hideGettingVaultBox();if(this._isTracing){this.traceExit(m);}},constructor:function(_26f){this._isTracing=this.isTracing();var m="constructor";if(this._isTracing){this.traceEntry(m,_26f);if(_26f){this.trace(m,"p_params.availableAuthTypes",_26f.availableAuthTypes);this.trace(m,"p_params.callingEnvironment",_26f.callingEnvironment);this.trace(m,"p_params.customServiceSelectionEnabled",_26f.customServiceSelectionEnabled);this.trace(m,"p_params.documentsServices",_26f.documentsServices);this.trace(m,"p_params.feedBaseURL",_26f.feedBaseURL);this.trace(m,"p_params.feedType",_26f.feedType);this.trace(m,"p_params.feedTypeBaseURL",_26f.feedTypeBaseURL);this.trace(m,"p_params.namespace",_26f.namespace);this.trace(m,"p_params.nodeTypes",dojo.toJson(_26f.nodeTypes));this.trace(m,"p_params.onCancelCallbackFn:",_26f.onCancelCallbackFn);this.trace(m,"p_params.onConfirmCallbackFn:",_26f.onConfirmCallbackFn);this.trace(m,"p_params.pickerManager",_26f.pickerManager);this.trace(m,"p_params.portalContextPath",_26f.portalContextPath);this.trace(m,"p_params.qdsSupportEnabled",_26f.qdsSupportEnabled);this.trace(m,"p_params.selectedPath",_26f.selectedPath);this.trace(m,"p_params.serviceDocBaseURL",_26f.serviceDocBaseURL);this.trace(m,"p_params.vaultSelectionEnabled",_26f.vaultSelectionEnabled);this.trace(m,"p_params.vaultSelectionEnabledForPZN",_26f.vaultSelectionEnabledForPZN);this.trace(m,"p_params.vaultSelectionEnabledForWCM",_26f.vaultSelectionEnabledForWCM);this.trace(m,"p_params.vaultSlots",_26f.vaultSlots);this.trace(m,"p_params.usePresetUrl",_26f.usePresetUrl);}}this._initNLS();this._eventHandles=[];this._widgets=[];this._pages=[];this._serverTypeMap={};this._defaultButton=null;this._transientSlotId=null;if(typeof _26f.callingEnvironment=="string"){this._callingEnvironment=_26f.callingEnvironment;}if(typeof _26f.namespace=="string"){this.namespace=_26f.namespace;}if(typeof _26f.onConfirmCallbackFn=="function"){this._onConfirmCallbackFn=_26f.onConfirmCallbackFn;}if(typeof _26f.onCancelCallbackFn=="function"){this._onCancelCallbackFn=_26f.onCancelCallbackFn;}if(typeof _26f.qdsSupportEnabled=="boolean"){this._qdsSupportEnabled=_26f.qdsSupportEnabled;}if(typeof _26f.vaultMgmtDataSinkUrl=="string"){this._vaultMgmtDataSinkUrl=_26f.vaultMgmtDataSinkUrl;}if(typeof _26f.usePresetUrl=="boolean"){this._usePresetUrl=_26f.usePresetUrl;}if(_26f.selectedPath){this._selectedPath=_26f.selectedPath;}var _270=com.ibm.workplace.wcm.ecm.picker.util.URLUtils._INSTANCE.normalizePlaceholders(_26f.feedBaseURL);var _271=com.ibm.workplace.wcm.ecm.picker.util.URLUtils._INSTANCE.normalizePlaceholders(_26f.feedTypeBaseURL);var _272=com.ibm.workplace.wcm.ecm.picker.util.URLUtils._INSTANCE.normalizePlaceholders(_26f.serviceDocBaseURL);this._pageParams={"availableAuthTypes":_26f.availableAuthTypes,"callingEnvironment":_26f.callingEnvironment,"customServiceSelectionEnabled":_26f.customServiceSelectionEnabled,"documentsServices":_26f.documentsServices,"feedBaseURL":_270,"feedType":null,"feedTypeBaseURL":_271,"namespace":this.namespace,"nlsMessages":this._nlsMessages,"nlsUserInterface":this._nlsUserInterface,"nodeTypes":_26f.nodeTypes,"onDefaultAction":dojo.hitch(this,"_onDefaultAction"),"onErrorStateChanged":dojo.hitch(this,"_onErrorStateChanged"),"onLayoutChanged":dojo.hitch(this,"layout"),"onReadyStateChanged":dojo.hitch(this,"_onReadyStateChanged"),"pickerContext":this._pickerContext,"pickerManager":_26f.pickerManager,"portalContextPath":_26f.portalContextPath,"selectedPath":_26f.selectedPath,"serviceDocBaseURL":_272,"vaultSelectionEnabled":_26f.vaultSelectionEnabled,"vaultSelectionEnabledForPZN":_26f.vaultSelectionEnabledForPZN,"vaultSelectionEnabledForWCM":_26f.vaultSelectionEnabledForWCM,"vaultSlots":_26f.vaultSlots};this.cssStateNodes={};this.inherited(arguments);if(this._isTracing){this.traceExit(m);}},getSelectedItemJSON:function(){var m="getSelectedItemJSON()";if(this._isTracing){this.traceEntry(m);}var _273=null;if(this._currentPage==1){_273=this._widgets[1].getSelectedItemJSON();}else{if(this._currentPage==2){_273=this._widgets[2].getSelectedItemJSON();}}if(this._isTracing){this.traceExit(m,_273);}return _273;},layout:function(){var m="layout()";if(this._isTracing){this.traceEntry(m);}this.inherited(arguments);var _274=dojo.marginBox(this.wizardErrorDiv).w-dojo.contentBox(this.wizardErrorDiv).w;var _275=dojo.contentBox(this.containerNode).w-_274;if(_275>=0){dojo.style(this.wizardErrorDiv,"width",_275+"px");}var _276=dojo.marginBox(this.wizardErrorDiv).h+dojo.marginBox(this.wizardStepHeader).h+20;var _277=dojo.marginBox(this.containerNode).h;if(this.wizardPageContainer){this.wizardPageContainer.layout();}if((this._currentPage>-1)&&(this._currentPage<this._widgets.length)){this._widgets[this._currentPage].virtualContainerNodeHeight=Math.max(_277-_276,300);this._widgets[this._currentPage].layout();}if(window.resize){window.resize();}if(this._isTracing){this.traceExit(m);}},postCreate:function(){var m="postCreate()";if(this._isTracing){this.traceEntry(m);}this.inherited(arguments);this._initEventHandles();this._initializePages(this._pageParams);if(this._widgets.length<3){throw new Error(this._nlsMessages.docPickerDialog.errorNotAllWidgetsDefined);}else{for(var i=0;i<3;i++){this._addPageForWidget(i);}}if(this._isTracing){this.traceExit(m);}},postMixInProperties:function(){var m="postMixInProperties()";if(this._isTracing){this.traceEntry(m);}this.inherited(arguments);if(this._isTracing){this.traceExit(m);}},show:function(){var m="show()";if(this._isTracing){this.traceEntry(m);}this.startup();this.inherited(arguments);setTimeout(dojo.hitch(this,"_onFocusFirstItem"),this.duration+200);if(this._isTracing){this.traceExit(m);}},startup:function(){var m="startup()";if(this._isTracing){this.traceEntry(m);}if(this.wizardPageContainer){this.wizardPageContainer.startup();this._currentPage=-1;if(this._usePresetUrl){this._widgets[0]._authWidget.changeAuthType(com.ibm.workplace.wcm.ecm.picker.widget.AuthenticationWidget._authTypeUserPwd);this._widgets[0]._authWidget.setAuthenticationProperties({authProperties:this.authProperties});this._widgets[0]._authWidget._authProperties.authType=com.ibm.workplace.wcm.ecm.picker.widget.AuthenticationWidget._authTypeUserPwd;this._onGoFwdPrep();}else{this._widgets[0].setFeedType(null);this._switchToPage(0);}}this.layout();this.inherited(arguments);if(this._isTracing){this.traceExit(m);}},uninitialize:function(){var m="uninitialize()";if(this._isTracing){this.traceEntry(m);}this._clearEventHandles();this.inherited(arguments);if(this._isTracing){this.traceExit(m);}},_addPageForWidget:function(_278){var m="_addPageForWidget(p_widgetIndex)";if(this._isTracing){this.traceEntry(m,_278);}var _279=this._widgets[_278];if(this._isTracing){this.trace(m,"Widget for index:",_279);}if(_279){page=new dijit.layout.ContentPane();page.onShow=dojo.hitch(this,function(){_279.onShow();});this._pages.push(page);this.wizardPageContainer.addChild(page);_279.placeAt(page.domNode);}if(this._isTracing){this.traceExit(m);}},_clearError:function(){var m="_clearError()";if(this._isTracing){this.traceEntry(m);}this._errorState=false;dojo.style(this.wizardErrorDetailsDiv,"display","none");dojo.style(this.wizardErrorDiv,"display","none");dijit.setWaiState(this.wizardErrorDiv,"hidden",true);dijit.setWaiState(this.wizardErrorDetailsDiv,"hidden",true);this._enableDisableButtons();this.layout();if(this._isTracing){this.traceExit(m);}},_deleteTransientSlot:function(){var m="_deleteTransientSlot()";if(this._isTracing){this.traceEntry(m);}if(this._transientSlotId!==null){postData="slotid="+this._encodePostDataItem(this._transientSlotId);var _27a={"Content-Type":"text/plain","Accept":"text/plain"};dojo.xhrPost({"url":this._vaultMgmtDataSinkUrl,"postData":postData,"handleAs":"text","headers":_27a,"sync":false});}if(this._isTracing){this.traceExit(m);}},_enableDisableButtons:function(){var m="_enableDisableButtons()";if(this._isTracing){this.traceEntry(m);this.trace(m,"Current page:",this._currentPage);}if(this._currentPage===0){this._setBackBtnEnabled(false);this._setFinishBtnEnabled(false);if(this._isCurrentPageReady()&&(!this._errorState)){this._setNextBtnEnabled(true);}else{this._setNextBtnEnabled(false);}}else{this._setBackBtnEnabled(true);if(this._isCurrentPageReady()&&(!this._errorState)){this._setNextBtnEnabled(false);this._setFinishBtnEnabled(true);}else{this._setNextBtnEnabled(false);this._setFinishBtnEnabled(false);}}if(this._isTracing){this.traceExit(m);}},_encodePostDataItem:function(_27b){var m="_encodePostDataItem(string)";if(this._isTracing){this.traceEntry(m,_27b);}var ret=encodeURIComponent(_27b);if(this._isTracing){this.traceExit(m,ret);}return ret;},_encodeUrlIfNeeded:function(_27c){var m="_encodeUrlIfNeeded(p_url)";if(this._isTracing){this.traceEntry(m,_27c);}var _27d=_27c;if(_27c&&typeof _27c=="string"&&_27c.indexOf("%")==-1){_27d=encodeURI(_27c);}if(this._isTracing){this.traceExit(m,_27d);}return _27d;},_fetchServerType:function(_27e){var m="_fetchServerType(p_url)";if(this._isTracing){this.traceEntry(m,_27e);}var _27f=this._generateDetectionURL(_27e);this._showDetectingBox();try{dojo.xhrGet({"url":_27f,"handleAs":"json","sync":false,"load":dojo.hitch(this,function(_280){this._fetchServerTypeLoadCallback(_27e,_280);}),"error":dojo.hitch(this,function(_281,_282){this._fetchServerTypeErrorCallback(_27e,_281,_282);})});}catch(e){if(e.name&&e.message){this._showError(e.name,e.message);}else{this._showError(this._nlsMessages.docPickerDialog.errorGenericException,e);}}if(this._isTracing){this.traceExit(m);}},_fetchServerTypeErrorCallback:function(_283,_284,_285){var m="_fetchServerTypeErrorCallback(p_url, p_error, p_ioargs)";if(this._isTracing){this.traceEntry(m,[_283,_284,_285]);}this._hideDetectingBox();if(_285.xhr.status==404){if(_283.indexOf("/dm/atom/libraries/feed")==-1){var _286=com.ibm.workplace.wcm.ecm.picker.util.URLUtils._INSTANCE.appendPath(_283,"/dm/atom/libraries/feed");this._fetchServerType(_286);}else{this._showErrorForXHRRequest(_285);}}else{this._showErrorForXHRRequest(_285);}if(this._isTracing){this.traceExit(m);}},_fetchServerTypeLoadCallback:function(_287,_288){var m="_fetchServerTypeLoadCallback(p_url, p_data)";if(this._isTracing){this.traceEntry(m,[_287,_288]);}this._hideDetectingBox();var _289=_288.feedType;if(_289){if(_289===com.ibm.workplace.wcm.ecm.picker.util.FederatedDocumentsDefinitions._unknown){if(_287.indexOf("/dm/atom/libraries/feed")==-1){var _28a=com.ibm.workplace.wcm.ecm.picker.util.URLUtils._INSTANCE.appendPath(_287,"/dm/atom/libraries/feed");this._fetchServerType(_28a);}else{this._showError(this._nlsMessages.docPickerDialog.errorUnknownFeedType,_289);}}else{this._serverTypeMap[_287]=_289;this._widgets[0].setFeedType(_289);if(this._isQuickrFeedType(_289)){this._switchToQuickrPage();}else{this._switchToPage(1);}}}else{this._showError(this._nlsMessages.docPickerDialog.errorCouldNotDetectFeedType,"");}if(this._isTracing){this.traceExit(m);}},_generateDetectionURL:function(_28b){var m="_generateDetectionURL(p_url)";if(this._isTracing){this.traceEntry(m,_28b);}var url=_28b;url=encodeURIComponent(this._encodeUrlIfNeeded(url));var _28c;var _28d=this._widgets[0].getSettings();if((_28d.authProperties.authType==com.ibm.workplace.wcm.ecm.picker.widget.AuthenticationWidget._authTypeVault)&&(_28d.authProperties.vaultSlotID)){_28c=encodeURIComponent(_28d.authProperties.vaultSlotID);}else{if((_28d.authProperties.authType==com.ibm.workplace.wcm.ecm.picker.widget.AuthenticationWidget._authTypeUserPwd)&&(this._transientSlotId)){_28c=encodeURIComponent(this._transientSlotId);}else{_28c="";}}var _28e=this._pageParams.feedTypeBaseURL.replace("%7BtypeFilter%7D","all").replace("%7BfeedUrl%7D",url).replace("%7BmimeType%7D","application%2Fjson").replace("%7BvaultSlotId%7D",_28c).replace("%7BserviceId%7D",_28d.serviceId);if(this._isTracing){this.traceExit(m,_28e);}return _28e;},_getDefaultButton:function(){var m="_getDefaultButton()";if(this._isTracing){this.traceEntry(m);}var _28f=dojo.hasClass(this.dialogConfirm,"lotusBtnDisabled");var _290=dojo.hasClass(this.dialogNext,"lotusBtnDisabled");if(_28f&&_290){this._defaultButton=null;}else{if(_290){this._defaultButton=this.dialogConfirm;}else{this._defaultButton=this.dialogNext;}}if(this._isTracing){this.traceExit(m,this._defaultButton);}return this._defaultButton;},_getTransientSlot:function(_291,_292){var m="_getTransientSlot(userid, password)";if(this._isTracing){this.traceEntry(m,_291,_292);}var _293="name="+this._encodePostDataItem(_291);if(_292!==null){_293=_293+"&pw="+this._encodePostDataItem(_292);}if(this._transientSlotId!==null){_293=_293+"&slotid="+this._encodePostDataItem(this._transientSlotId);}var _294={"Content-Type":"text/plain","Accept":"text/plain"};this._showGettingVaultBox();dojo.xhrPost({"url":this._vaultMgmtDataSinkUrl,"postData":_293,"handleAs":"text","headers":_294,"sync":false,"load":dojo.hitch(this,function(_295){this._hideGettingVaultBox();this._transientSlotId=_295;if(this.usePresetUrl){var _296=this._widgets[0].getSettings();var url=_296.serverUrl;this._fetchServerType(url);}else{this._onGoFwd();}}),"error":dojo.hitch(this,function(_297){this._hideGettingVaultBox();this._showError(this._nlsMessages.docPickerDialog.errorCouldNotGetVault,_297);})});if(this._isTracing){this.traceExit(m);}},_hideDetectingBox:function(){var m="_hideDetectingBox()";if(this._isTracing){this.traceEntry(m);}dojo.style(this.fedDocPickerDetectingDiv,"display","none");dijit.setWaiState(this.fedDocPickerDetectingDiv,"hidden",true);dijit.setWaiState(this.wizardPageContainer,"busy",false);if(this._isTracing){this.traceExit(m);}},_hideGettingVaultBox:function(){var m="_hideGettingVaultBox()";if(this._isTracing){this.traceEntry(m);}dojo.style(this.fedDocPickerGettingVaultDiv,"display","none");dijit.setWaiState(this.fedDocPickerGettingVaultDiv,"hidden",true);dijit.setWaiState(this.wizardPageContainer,"busy",false);if(this._isTracing){this.traceExit(m);}},_initEventHandles:function(){var m="_initEventHandles()";if(this._isTracing){this.traceEntry(m);}this.inherited(arguments);this._eventHandles.push(dojo.connect(this.dialogPrevious,"onclick",this,"_onGoBack"));this._eventHandles.push(dojo.connect(this.dialogFooterForm,"onsubmit",this,"_onSubmit"));this._eventHandles.push(dojo.connect(this.dialogCancel,"onclick",this,"_onCancel"));var _298=this;window.onTerminateDialog=function(){_298._onCancel();};if(this._isTracing){this.traceExit(m);}},_initializePages:function(_299){var m="_initializePages(p_params)";if(this._isTracing){this.traceEntry(m,_299);if(_299){this.trace(m,"p_params.authProperties:",dojo.toJson(_299.authProperties));this.trace(m,"p_params.availableAuthTypes:",dojo.toJson(_299.availableAuthTypes));this.trace(m,"p_params.callingEnvironment:",_299.callingEnvironment);this.trace(m,"p_params.customServiceSelectionEnabled:",_299.customServiceSelectionEnabled);this.trace(m,"p_params.documentsServices:",dojo.toJson(_299.documentsServices));this.trace(m,"p_params.feedBaseURL:",_299.feedBaseURL);this.trace(m,"p_params.feedTypeBaseURL:",_299.feedTypeBaseURL);this.trace(m,"p_params.nlsMessages:",dojo.toJson(_299.nlsMessages));this.trace(m,"p_params.nlsUserInterface:",dojo.toJson(_299.nlsUserInterface));this.trace(m,"p_params.namespace:",_299.namespace);this.trace(m,"p_params.nodeTypes:",dojo.toJson(_299.nodeTypes));this.trace(m,"p_params.onErrorStateChanged",_299.onErrorStateChanged);this.trace(m,"p_params.onLayoutChanged:",_299.onLayoutChanged);this.trace(m,"p_params.onReadyStateChanged:",_299.onReadyStateChanged);this.trace(m,"p_params.pickerContext:",_299.pickerContext);this.trace(m,"p_params.portalContextPath:",_299.portalContextPath);this.trace(m,"p_params.pickerManager:",_299.pickerManager);this.trace(m,"p_params.serviceDocBaseURL:",_299.serviceDocBaseURL);this.trace(m,"p_params.vaultMgmtDataSinkUrl:",_299.vaultMgmtDataSinkUrl);this.trace(m,"p_params.vaultSelectionEnabled:",_299.vaultSelectionEnabled);this.trace(m,"p_params.vaultSelectionEnabledForPZN:",_299.vaultSelectionEnabledForPZN);this.trace(m,"p_params.vaultSelectionEnabledForWCM:",_299.vaultSelectionEnabledForWCM);this.trace(m,"p_params.vaultSlots:",dojo.toJson(_299.vaultSlots));}}var _29a;_29a=new com.ibm.workplace.wcm.ecm.picker.widget.ServerConnectionPageWidget(_299);this._widgets.push(_29a);_29a=new com.ibm.workplace.wcm.ecm.picker.widget.CmisDocumentPickerPageWidget(_299);this._widgets.push(_29a);_29a=new com.ibm.workplace.wcm.ecm.picker.widget.QuickrDocumentPickerPageWidget(_299);this._widgets.push(_29a);if(this._isTracing){this.traceExit(m);}},_initNLS:function(){var m="_initNLS()";if(this._isTracing){this.traceEntry(m);}this._nlsUserInterface=dojo.i18n.getLocalization("com.ibm.workplace.wcm.ecm.picker","FederatedDocumentsPickerUserInterface");this._nlsMessages=dojo.i18n.getLocalization("com.ibm.workplace.wcm.ecm.picker","FederatedDocumentsPickerMessages");if(this._isTracing){this.trace(m,"Initialized NLS object for user interface elements:",dojo.toJson(this._nlsUserInterface));this.trace(m,"Initialized NLS object for messages:",dojo.toJson(this._nlsMessages));this.traceExit(m);}},_isCalledFromPZN:function(){var m="_isCalledFromPZN()";if(this._isTracing){this.traceEntry(m);}var _29b=(this._callingEnvironment===com.ibm.workplace.wcm.ecm.picker.util.FederatedDocumentsDefinitions._pzn);if(this._isTracing){this.traceExit(m,_29b);}return _29b;},_isCalledFromWCM:function(){var m="_isCalledFromWCM()";if(this._isTracing){this.traceEntry(m);}var _29c=(this._callingEnvironment===com.ibm.workplace.wcm.ecm.picker.util.FederatedDocumentsDefinitions._wcm);if(this._isTracing){this.traceExit(m,_29c);}return _29c;},_isCurrentPageReady:function(){var m="_isCurrentPageReady()";if(this._isTracing){this.traceEntry(m);this.trace(m,"Current page:",this._currentPage);}var _29d=false;if((this._currentPage>-1)&&(this._currentPage<this._pages.length)){var _29e=this._widgets[this._currentPage];_29d=_29e.isReady();}if(this._isTracing){this.traceExit(m,_29d);}return _29d;},_isQuickrFeedType:function(_29f){var _2a0;if((_29f===com.ibm.workplace.wcm.ecm.picker.util.FederatedDocumentsDefinitions._qds)||(_29f===com.ibm.workplace.wcm.ecm.picker.util.FederatedDocumentsDefinitions._qdsentry)){_2a0=true;}else{_2a0=false;}return _2a0;},_normalizeFeedTypeParam:function(_2a1){var m="_normalizeFeedTypeParam(p_feedType)";if(this._isTracing){this.traceEntry(m);}var _2a2="";if(typeof _2a1=="string"){var _2a3=_2a1.toLowerCase();if((_2a3==="cmis")||(_2a3==="servicedoc")){_2a2="cmis";}else{if((_2a3==="qds")||(_2a3==="qdsentry")){_2a2="qds";}}}else{_2a2="";}if(this._isTracing){this.traceExit(m,_2a2);}return _2a2;},_onCancel:function(){var m="_onCancel()";if(this._isTracing){this.traceEntry(m);}this._deleteTransientSlot();if(this._onCancelCallbackFn&&dojo.isFunction(this._onCancelCallbackFn)){if(this._isTracing){this.trace(m,"Dispatching to callback function:",this._onCancelCallbackFn);}this._onCancelCallbackFn();}if(this.autoClose){this.hide();setTimeout(dojo.hitch(this,"destroyDialog"),this.duration+200);}if(this._isTracing){this.traceExit(m);}},_onConfirm:function(){var m="_onConfirm()";if(this._isTracing){this.traceEntry(m);}this._deleteTransientSlot();if(!dojo.hasClass(this.dialogConfirm,"lotusBtnDisabled")){var _2a4="";var _2a5="";var url="";var _2a6=this.getSelectedItemJSON();if(this._isTracing){this.trace(m,"Selected item:",_2a6);}if(_2a6!==null){_2a5=_2a6.title;url=_2a6.url;if(this._isCalledFromPZN()){var _2a7=this._widgets[0].getSettings();_2a4=com.ibm.workplace.wcm.ecm.picker.util.URLUtils._INSTANCE.addQueryParameter(url,"feedType",this._normalizeFeedTypeParam(_2a7.serverType));if((_2a7.authProperties.authType==com.ibm.workplace.wcm.ecm.picker.widget.AuthenticationWidget._authTypeVault)&&(_2a7.authProperties.vaultSlotID)){_2a4=com.ibm.workplace.wcm.ecm.picker.util.URLUtils._INSTANCE.addQueryParameter(_2a4,com.ibm.workplace.wcm.ecm.picker.util.FederatedDocumentsDefinitions._proxyVaultSlotParamName,_2a7.authProperties.vaultSlotID);}var dlg=this;this._widgets[1].getLibTree().path.forEach(function(node,i){dlg._selectedPath[i++]=node.id;});}else{_2a4=url;}}if(this._onConfirmCallbackFn&&dojo.isFunction(this._onConfirmCallbackFn)){if(this._isTracing){this.trace(m,"Dispatching to callback function passing title and URL of selection:",[this._onConfirmCallbackFn,_2a5,_2a4]);}this._onConfirmCallbackFn(_2a5,_2a4,this._selectedPath);}if(this.autoClose){this.hide();setTimeout(dojo.hitch(this,"destroyDialog"),this.duration+200);}}if(this._isTracing){this.traceExit(m);}},_onDefaultAction:function(){var m="_onDefaultAction()";if(this._isTracing){this.traceEntry(m);}var _2a8=this._getDefaultButton();if(_2a8===this.dialogConfirm){this._onConfirm();}else{if(_2a8===this.dialogNext){this._onGoFwdPrep();}}if(this._isTracing){this.traceExit(m);}},_onErrorStateChanged:function(_2a9,_2aa,_2ab,_2ac){var m="_onErrorStateChanged(p_sender, p_errorState, p_errorMsg, p_errorDetails)";if(this._isTracing){this.traceEntry(m,[_2a9,_2aa,_2ab,_2ac]);}if(_2aa===true){this._showError(_2ab,_2ac);}else{if(_2aa===false){this._clearError();}else{}}if(this._isTracing){this.traceExit(m);}},_onFocusFirstItem:function(){var m="_onFocusFirstItem()";if(this._isTracing){this.traceEntry(m);}if((this._currentPage>-1)&&(this._currentPage<3)){if(this._widgets[this._currentPage]&&dojo.isFunction(this._widgets[this._currentPage].setFocus)){this._widgets[this._currentPage].setFocus();}}if(this._isTracing){this.traceExit(m);}},_onGoBack:function(_2ad){var m="_onGoBack()";if(this._isTracing){this.traceEntry(m);this.trace(m,"Current page:",this._currentPage);}dojo.stopEvent(_2ad);if(!dojo.hasClass(this.dialogPrevious,"lotusBtnDisabled")){if(this._currentPage>0){this._widgets[0].setFeedType(null);this._switchToPage(0);}}if(this._isTracing){this.traceExit(m);}return false;},_onGoFwdPrep:function(){var m="_onGoFwdPrep()";if(this._isTracing){this.traceEntry(m);this.trace(m,"Current page:",this._currentPage);}if(this.usePresetUrl||(!dojo.hasClass(this.dialogNext,"lotusBtnDisabled"))&&(this._currentPage<this._pages.length-1)){var _2ae=this._widgets[0].getSettings();if(_2ae.authProperties.authType==com.ibm.workplace.wcm.ecm.picker.widget.AuthenticationWidget._authTypeUserPwd){var _2af=_2ae.authProperties.username;var _2b0=_2ae.authProperties.password;this._getTransientSlot(_2af,_2b0);}else{this._onGoFwd();}}if(this._isTracing){this.traceExit(m);}},_onGoFwd:function(){var m="_onGoFwd()";if(this._isTracing){this.traceEntry(m);this.trace(m,"Current page:",this._currentPage);}if(!dojo.hasClass(this.dialogNext,"lotusBtnDisabled")){if(this._currentPage<this._pages.length-1){var _2b1=this._widgets[0].getSettings();var url=_2b1.serverUrl;var _2b2=this._serverTypeMap[url];if(_2b2){this._widgets[0].setFeedType(_2b2);if(this._isQuickrFeedType(_2b2)){this._switchToQuickrPage();}else{this._switchToPage(1);}}else{var _2b3=_2b1.serverType;if(_2b3===com.ibm.workplace.wcm.ecm.picker.util.FederatedDocumentsDefinitions._qds){this._serverTypeMap[url]=_2b3;this._widgets[0].setFeedType(_2b3);this._switchToQuickrPage();}else{this._fetchServerType(url);}}}}if(this._isTracing){this.traceExit(m);}},_onReadyStateChanged:function(_2b4,_2b5){var m="_onReadyStateChanged(p_readyState, p_widgetRef)";if(this._isTracing){this.traceEntry(m,[_2b4,_2b5]);}this._enableDisableButtons();if(this._isTracing){this.traceExit(m);}},_onSubmit:function(_2b6){var m="_onSubmit(p_evt)";if(this._isTracing){this.traceEntry(m,[_2b6]);}dojo.stopEvent(_2b6);this._onDefaultAction();if(this._isTracing){this.traceExit(m,false);}return false;},_setBackBtnEnabled:function(_2b7){var m="_setBackBtnEnabled(p_isEnabled)";if(this._isTracing){this.traceEntry(m,[_2b7]);}this._setBtnEnabled(this.dialogPrevious,_2b7);if(this._isTracing){this.traceExit(m);}},_setBtnEnabled:function(_2b8,_2b9){var m="_setBtnEnabled(p_Btn, p_isEnabled)";if(this._isTracing){this.traceEntry(m,[_2b8,_2b9]);}if(_2b9){dojo.removeClass(_2b8,"lotusBtnDisabled");dojo.removeAttr(_2b8,"disabled");dijit.removeWaiState(_2b8,"disabled");}else{dojo.addClass(_2b8,"lotusBtnDisabled");dojo.attr(_2b8,"disabled","disabled");dijit.setWaiState(_2b8,"disabled",true);}if(this._isTracing){this.traceExit(m);}},_setFinishBtnEnabled:function(_2ba){var m="_setFinishBtnEnabled(p_isEnabled)";if(this._isTracing){this.traceEntry(m,[_2ba]);}this._setBtnEnabled(this.dialogConfirm,_2ba);if(this._isTracing){this.traceExit(m);}},_setNextBtnEnabled:function(_2bb){var m="_setNextBtnEnabled(p_isEnabled)";if(this._isTracing){this.traceEntry(m,[_2bb]);}this._setBtnEnabled(this.dialogNext,_2bb);if(this._isTracing){this.traceExit(m);}},_showDetectingBox:function(){var m="_showDetectingBox()";if(this._isTracing){this.traceEntry(m);}if(dojo.style(this.fedDocPickerDetectingDiv,"display")!="block"){dojo.style(this.fedDocPickerDetectingDiv,"display","block");}dijit.setWaiState(this.fedDocPickerDetectingDiv,"hidden",false);dijit.setWaiState(this.wizardPageContainer,"busy",true);if(this._isTracing){this.traceExit(m);}},_showError:function(_2bc,_2bd){var m="_showError(p_errorMsg, p_errorDetails)";if(this._isTracing){this.traceEntry(m,[_2bc,_2bd]);}this._hideDetectingBox();this._hideGettingVaultBox();if(typeof _2bc=="string"){var _2be=_2bc.substring(0,Math.min(this._maxErrorChars,_2bc.length));dojo.attr(this.wizardErrorSpan,"innerHTML",_2be);dojo.style(this.wizardErrorDiv,"opacity","1");dojo.style(this.wizardErrorDiv,"display","block");dijit.setWaiState(this.wizardErrorDiv,"hidden",false);if(typeof _2bd=="string"){var _2bf=_2bd.substring(0,Math.min(this._maxErrorChars,_2bd.length));dojo.attr(this.wizardErrorDetailsSpan,"innerHTML",_2bf);dojo.style(this.wizardErrorDetailsDiv,"display","block");dijit.setWaiState(this.wizardErrorDetailsDiv,"hidden",false);}}else{this.trace(m,"_showError was called with an undefined error message.");}this._errorState=true;if((this._currentPage>=0)&&(this._currentPage<=2)){this._widgets[this._currentPage]._errorState=true;}this._enableDisableButtons();this.layout();if(this._isTracing){this.traceExit(m);}},_showErrorForXHRRequest:function(_2c0){var m="_showErrorForXHRRequest()";if(this._isTracing){this.traceEntry(m,_2c0);}var _2c1=com.ibm.workplace.wcm.ecm.picker.util.ErrorMsgUtils._INSTANCE.getErrorMessage(_2c0,this._nlsMessages.srvCommunication,(this._widgets[0].getSettings().serverUrl.substring(0,6).toLowerCase()==="https:"));this._showError(_2c1[com.ibm.workplace.wcm.ecm.picker.util.ErrorMsgUtils.ErrorMessage],_2c1[com.ibm.workplace.wcm.ecm.picker.util.ErrorMsgUtils.ErrorDetails]);if(this._isTracing){this.traceExit(m);}},_showGettingVaultBox:function(){var m="_showGettingVaultBox()";if(this._isTracing){this.traceEntry(m);}if(dojo.style(this.fedDocPickerGettingVaultDiv,"display")!="block"){dojo.style(this.fedDocPickerGettingVaultDiv,"display","block");}dijit.setWaiState(this.fedDocPickerGettingVaultDiv,"hidden",false);dijit.setWaiState(this.wizardPageContainer,"busy",true);if(this._isTracing){this.traceExit(m);}},_switchToPage:function(_2c2,_2c3){var m="_switchToPage(p_pageIndex)";if(this._isTracing){this.traceEntry(m,[_2c2]);this.trace(m,"Current page:",this._currentPage);}if((_2c2>-1)&&(_2c2<this._pages.length)){this._clearError();this._hideDetectingBox();this._hideGettingVaultBox();this._currentPage=_2c2;var _2c4=this._widgets[this._currentPage];this._updateStepLabel(_2c4.getStepLabel());this._updateStepDescription(_2c4.getStepDescription());this.wizardPageContainer.selectChild(this._pages[this._currentPage]);if(this._currentPage>0){var _2c5=this._widgets[0].getSettings();if((_2c5.authProperties.authType==com.ibm.workplace.wcm.ecm.picker.widget.AuthenticationWidget._authTypeUserPwd)&&(this._transientSlotId)){_2c5.authProperties.vaultSlotID=this._transientSlotId;}this._widgets[this._currentPage].initializePage(_2c5);}else{}this._enableDisableButtons();this.layout();}if(this._isTracing){this.traceExit(m);}},_switchToQuickrPage:function(){var m="_switchToQuickrPage()";if(this._isTracing){this.traceEntry(m);}if(this._qdsSupportEnabled){this._switchToPage(2);}else{this._showError(this._nlsMessages.docPickerDialog.errorQDSNotEnabled,"");}if(this._isTracing){this.traceExit(m);}},_updateStepDescription:function(_2c6){var m="_updateStepDescription(p_descrText)";if(this._isTracing){this.traceEntry(m,_2c6);}dojo.attr(this.wizardStepDescription,"innerHTML",_2c6);if(this._isTracing){this.traceExit(m);}},_updateStepLabel:function(_2c7){var m="_updateStepLabel(p_labelText)";if(this._isTracing){this.traceEntry(m,_2c7);}dojo.attr(this.wizardStepLabel,"innerHTML","<b>"+_2c7+"</b>");if(this._isTracing){this.traceExit(m);}}});}if(!dojo._hasResource["com.ibm.workplace.wcm.ecm.picker.util.FederatedDocumentsPickerWidgetManager"]){dojo._hasResource["com.ibm.workplace.wcm.ecm.picker.util.FederatedDocumentsPickerWidgetManager"]=true;dojo.provide("com.ibm.workplace.wcm.ecm.picker.util.FederatedDocumentsPickerWidgetManager");dojo.require("com.ibm.widgets._Traceable");dojo.declare("com.ibm.workplace.wcm.ecm.picker.util.FederatedDocumentsPickerWidgetManager",[com.ibm.widgets._Traceable],{_callingEnvId:com.ibm.workplace.wcm.ecm.picker.util.FederatedDocumentsDefinitions._wcm,_dsPickerArgs:{},_fedDocsPickerArgs:{},_federatedDocumentsServiceBean:null,_isTracing:false,_namespace:"fedDocsPckrDlg_",_onCancelCallbackFn:null,_onConfirmCallbackFn:null,constructor:function(_2c8){this._isTracing=this.isTracing();var m="constructor(p_params)";if(this._isTracing){this.traceEntry(m,_2c8);if(_2c8){this.trace(m,"p_params.callingEnvId:",_2c8.callingEnvId);this.trace(m,"p_params.documentServicesPickerArgs:",_2c8.documentServicesPickerArgs);this.trace(m,"p_params.federatedDocumentsPickerArgs:",_2c8.federatedDocumentsPickerArgs);this.trace(m,"p_params.federatedDocumentsServiceBean:",_2c8.federatedDocumentsServiceBean);this.trace(m,"p_params.namespace:",_2c8.namespace);this.trace(m,"p_params.onCancelCallbackFn:",_2c8.onCancelCallbackFn);this.trace(m,"p_params.onConfirmCallbackFn:",_2c8.onConfirmCallbackFn);}}if(typeof _2c8.callingEnvId=="string"){this._callingEnvId=_2c8.callingEnvId;}if(_2c8.federatedDocumentsServiceBean&&typeof _2c8.federatedDocumentsServiceBean=="object"){this._federatedDocumentsServiceBean=_2c8.federatedDocumentsServiceBean;}if(typeof _2c8.namespace=="string"){this._namespace=_2c8.namespace;}if(typeof _2c8.onCancelCallbackFn=="function"){this._onCancelCallbackFn=_2c8.onCancelCallbackFn;}if(typeof _2c8.onConfirmCallbackFn=="function"){this._onConfirmCallbackFn=_2c8.onConfirmCallbackFn;}if(this._federatedDocumentsServiceBean.isQDSSupportEnabled()){this._initFederatedDocumentsPickerArgs(_2c8.federatedDocumentsPickerArgs);this._initDocumentServicesPickerArgs(_2c8.documentServicesPickerArgs);}else{this._initFederatedDocumentsPickerArgs(_2c8.federatedDocumentsPickerArgs);}if(this._isTracing){this.traceExit(m);}},launchDocumentServicesPickerDialog:function(_2c9,_2ca,_2cb){var m="launchDocumentServicesPickerDialog(p_url, p_onConfirmCallbackFn, p_onCloseCallbackFn)";if(this._isTracing){this.traceEntry(m,[_2c9,_2ca,_2cb]);}var _2cc=null;var _2cd=null;if(typeof _2ca=="function"){_2cc=_2ca;}if(typeof _2cb=="function"){_2cd=_2cb;}if(this._isTracing){this.trace(m,"Confirm callback function: ",_2cc);this.trace(m,"Close callback function: ",_2cd);}var _2ce=new com.ibm.workplace.wcm.ecm.quickr.picker.launcher.DocPickerLauncher(_2cc,_2cd,this._dsPickerArgs);var _2cf=_2ce.launchDocumentPicker(_2c9);if(this._isTracing){this.traceExit(m);}return _2cf;},launchFederatedDocumentsPickerDialog:function(){var m="launchFederatedDocumentsPickerDialog()";if(this._isTracing){this.traceEntry(m);}var _2d0=new com.ibm.workplace.wcm.ecm.picker.widget.FederatedDocumentsPickerDialogWidget(this._fedDocsPickerArgs);_2d0.show();if(this._isTracing){this.traceExit(m);}return _2d0;},_initDocumentServicesPickerArgs:function(_2d1){var m="_initDocumentServicesPickerArgs(p_dsPickerArgs)";if(this._isTracing){this.traceEntry(m,_2d1);if(_2d1){this.trace(m,"p_dsPickerArgs.dialogTitleKey",_2d1.dialogTitleKey);this.trace(m,"p_dsPickerArgs.showNodePath",_2d1.showNodePath);this.trace(m,"p_dsPickerArgs.showPlaces",_2d1.showPlaces);this.trace(m,"p_dsPickerArgs.nodeTypes",dojo.toJson(_2d1.nodeTypes));this.trace(m,"p_dsPickerArgs.downloadTypes",dojo.toJson(_2d1.downloadTypes));this.trace(m,"p_dsPickerArgs.viewTypes",dojo.toJson(_2d1.viewTypes));this.trace(m,"p_dsPickerArgs.proxyUrl",_2d1.proxyUrl);}}var _2d2=this._federatedDocumentsServiceBean.getPortalContextPath()+"/proxy";if(this._callingEnvId===com.ibm.workplace.wcm.ecm.picker.util.FederatedDocumentsDefinitions._pzn){this._dsPickerArgs={"dialogTitleKey":"dialogTitleSelectFolder","showNodePath":true,"showPlaces":true,"nodeTypes":["place","library","folder"],"downloadTypes":["library","folder"],"viewTypes":[],"proxyUrl":_2d2};}else{if(this._callingEnvId===com.ibm.workplace.wcm.ecm.picker.util.FederatedDocumentsDefinitions._wcm){this._dsPickerArgs={"dialogTitleKey":"dialogTitleSelectDocument","showNodePath":true,"showPlaces":true,"nodeTypes":["place","library","folder","document","doclink"],"downloadTypes":["document"],"viewTypes":["library","folder","document","doclink"],"proxyUrl":_2d2};}}if(_2d1&&typeof _2d1=="object"){this._mergeArguments(_2d1,this._dsPickerArgs);}if(this._isTracing){this.trace(m,"Document services picker arguments initialized:",this._dsPickerArgs);if(this._dsPickerArgs){this.trace(m,"_dsPickerArgs.dialogTitleKey",this._dsPickerArgs.dialogTitleKey);this.trace(m,"_dsPickerArgs.showNodePath",this._dsPickerArgs.showNodePath);this.trace(m,"_dsPickerArgs.showPlaces",this._dsPickerArgs.showPlaces);this.trace(m,"_dsPickerArgs.nodeTypes",dojo.toJson(this._dsPickerArgs.nodeTypes));this.trace(m,"_dsPickerArgs.downloadTypes",dojo.toJson(this._dsPickerArgs.downloadTypes));this.trace(m,"_dsPickerArgs.viewTypes",dojo.toJson(this._dsPickerArgs.viewTypes));this.trace(m,"_dsPickerArgs.proxyUrl",this._dsPickerArgs.proxyUrl);}this.traceExit(m);}},_initFederatedDocumentsPickerArgs:function(_2d3){var m="_initFederatedDocumentsPickerArgs(p_fedDocsPickerArgs)";if(this._isTracing){this.traceEntry(m,_2d3);if(_2d3){this.trace(m,"p_fedDocsPickerArgs.callingEnvironment",_2d3.callingEnvironment);this.trace(m,"p_fedDocsPickerArgs.customServiceSelectionEnabled",_2d3.customServiceSelectionEnabled);this.trace(m,"p_fedDocsPickerArgs.documentsServices",_2d3.documentsServices);this.trace(m,"p_fedDocsPickerArgs.feedBaseURL",_2d3.feedBaseURL);this.trace(m,"p_fedDocsPickerArgs.feedTypeBaseURL",_2d3.feedTypeBaseURL);this.trace(m,"p_fedDocsPickerArgs.nodeTypes",dojo.toJson(_2d3.nodeTypes));this.trace(m,"p_fedDocsPickerArgs.onCancelCallbackFn",_2d3.onCancelCallbackFn);this.trace(m,"p_fedDocsPickerArgs.onConfirmCallbackFn",_2d3.onConfirmCallbackFn);this.trace(m,"p_fedDocsPickerArgs.pickerManager",_2d3.pickerManager);this.trace(m,"p_fedDocsPickerArgs.qdsSupportEnabled",_2d3.qdsSupportEnabled);this.trace(m,"p_fedDocsPickerArgs.serviceDocBaseURL",_2d3.serviceDocBaseURL);this.trace(m,"p_fedDocsPickerArgs.vaultMgmtDataSinkUrl",_2d3.vaultMgmtDataSinkUrl);this.trace(m,"p_fedDocsPickerArgs.vaultSelectionEnabled",_2d3.vaultSelectionEnabled);this.trace(m,"p_fedDocsPickerArgs.vaultSelectionEnabledForPZN",_2d3.vaultSelectionEnabledForPZN);this.trace(m,"p_fedDocsPickerArgs.vaultSelectionEnabledForWCM",_2d3.vaultSelectionEnabledForWCM);this.trace(m,"p_fedDocsPickerArgs.vaultSlots",_2d3.vaultSlots);this.trace(m,"p_fedDocsPickerArgs.portalContextPath",_2d3.portalContextPath);this.trace(m,"p_fedDocsPickerArgs.usePresetUrl",_2d3.usePresetUrl);}}var _2d4=this._federatedDocumentsServiceBean.isCustomServiceSelectionEnabled();var _2d5=this._federatedDocumentsServiceBean.getFederatedDocumentsServices();var _2d6=this._federatedDocumentsServiceBean.getFeedBaseURL();var _2d7=this._federatedDocumentsServiceBean.getFeedTypeBaseURL();var _2d8=this._federatedDocumentsServiceBean.isQDSSupportEnabled();var _2d9=this._federatedDocumentsServiceBean.isVaultSelectionEnabledForPZN();var _2da=this._federatedDocumentsServiceBean.isVaultSelectionEnabledForWCM();var _2db=this._federatedDocumentsServiceBean.getServiceDocumentBaseURL();var _2dc=this._federatedDocumentsServiceBean.getVaultMgmtDataSinkUrl();var _2dd=this._federatedDocumentsServiceBean.getVaultSlots();var _2de=this._federatedDocumentsServiceBean.getPortalContextPath();var _2df=false;if(_2d3&&_2d3.usePresetUrl){_2df=_2d3.usePresetUrl;}if(this._callingEnvId===com.ibm.workplace.wcm.ecm.picker.util.FederatedDocumentsDefinitions._pzn){this._fedDocsPickerArgs={"callingEnvironment":this._callingEnvId,"customServiceSelectionEnabled":_2d4,"documentsServices":_2d5,"feedBaseURL":_2d6,"feedTypeBaseURL":_2d7,"namespace":this._namespace,"nodeTypes":["repository","folder"],"onCancelCallbackFn":this._onCancelCallbackFn,"onConfirmCallbackFn":this._onConfirmCallbackFn,"pickerManager":this,"qdsSupportEnabled":_2d8,"serviceDocBaseURL":_2db,"vaultMgmtDataSinkUrl":_2dc,"vaultSelectionEnabled":_2d9,"vaultSelectionEnabledForPZN":_2d9,"vaultSelectionEnabledForWCM":_2da,"vaultSlots":_2dd,"portalContextPath":_2de,"usePresetUrl":_2df};}else{if(this._callingEnvId===com.ibm.workplace.wcm.ecm.picker.util.FederatedDocumentsDefinitions._wcm){this._fedDocsPickerArgs={"callingEnvironment":this._callingEnvId,"customServiceSelectionEnabled":_2d4,"documentsServices":_2d5,"feedBaseURL":_2d6,"feedTypeBaseURL":_2d7,"namespace":this._namespace,"nodeTypes":["repository","folder","document"],"onCancelCallbackFn":this._onCancelCallbackFn,"onConfirmCallbackFn":this._onConfirmCallbackFn,"pickerManager":this,"qdsSupportEnabled":_2d8,"serviceDocBaseURL":_2db,"vaultMgmtDataSinkUrl":_2dc,"vaultSelectionEnabled":_2da,"vaultSelectionEnabledForPZN":_2d9,"vaultSelectionEnabledForWCM":_2da,"vaultSlots":_2dd,"portalContextPath":_2de,"usePresetUrl":_2df};}}if(_2d3&&typeof _2d3=="object"){this._mergeArguments(_2d3,this._fedDocsPickerArgs);}if(this._isTracing){this.trace(m,"Federated documents picker arguments initialized:",this._fedDocsPickerArgs);if(this._fedDocsPickerArgs){this.trace(m,"this._fedDocsPickerArgs.callingEnvironment",this._fedDocsPickerArgs.callingEnvironment);this.trace(m,"this._fedDocsPickerArgs.customServiceSelectionEnabled",this._fedDocsPickerArgs.customServiceSelectionEnabled);this.trace(m,"this._fedDocsPickerArgs.documentsServices",this._fedDocsPickerArgs.documentsServices);this.trace(m,"this._fedDocsPickerArgs.feedBaseURL",this._fedDocsPickerArgs.feedBaseURL);this.trace(m,"this._fedDocsPickerArgs.feedTypeBaseURL",this._fedDocsPickerArgs.feedTypeBaseURL);this.trace(m,"this._fedDocsPickerArgs.namespace",this._fedDocsPickerArgs.namespace);this.trace(m,"this._fedDocsPickerArgs.nodeTypes",dojo.toJson(this._fedDocsPickerArgs.nodeTypes));this.trace(m,"this._fedDocsPickerArgs.onCancelCallbackFn",this._fedDocsPickerArgs.onCancelCallbackFn);this.trace(m,"this._fedDocsPickerArgs.onConfirmCallbackFn",this._fedDocsPickerArgs.onConfirmCallbackFn);this.trace(m,"this._fedDocsPickerArgs.pickerManager",this._fedDocsPickerArgs.pickerManager);this.trace(m,"this._fedDocsPickerArgs.qdsSupportEnabled",this._fedDocsPickerArgs.qdsSupportEnabled);this.trace(m,"this._fedDocsPickerArgs.serviceDocBaseURL",this._fedDocsPickerArgs.serviceDocBaseURL);this.trace(m,"this._fedDocsPickerArgs.vaultMgmtDataSinkUrl",this._fedDocsPickerArgs.vaultMgmtDataSinkUrl);this.trace(m,"this._fedDocsPickerArgs.vaultSelectionEnabled",this._fedDocsPickerArgs.vaultSelectionEnabled);this.trace(m,"this._fedDocsPickerArgs.vaultSelectionEnabledForPZN",this._fedDocsPickerArgs.vaultSelectionEnabledForPZN);this.trace(m,"this._fedDocsPickerArgs.vaultSelectionEnabledForWCM",this._fedDocsPickerArgs.vaultSelectionEnabledForWCM);this.trace(m,"this._fedDocsPickerArgs.vaultSlots",this._fedDocsPickerArgs.vaultSlots);this.trace(m,"this._fedDocsPickerArgs.portalContextPath",this._fedDocsPickerArgs.portalContextPath);this.trace(m,"this._fedDocsPickerArgs.usePresetUrl",this._fedDocsPickerArgs.usePresetUrl);}this.traceExit(m);}},_mergeArguments:function(_2e0,_2e1){var m="_mergeArguments(p_sourceArgs, p_targetArgs)";if(this._isTracing){this.traceEntry(m,[_2e0,_2e1]);}for(var _2e2 in _2e0){_2e1[_2e2]=_2e0[_2e2];}if(this._isTracing){this.trace(m,"New set of target arguments:",_2e1);this.traceExit(m);}}});}

}catch(e){console.log("Module 'wp_federated_documents_picker': ",e);}
try{/** Licensed Materials - Property of IBM, 5724-E76 and 5724-E77, (C) Copyright IBM Corp. 2012 - All Rights reserved.  **/
(function(_1){
var _2="copy",_3="move",_4="link",_5="copyMove",_6="copyLink",_7="linkMove",_8="all",_9="none",_a=i$.hasClass,_b=i$.addClass,_c=i$.removeClass,_d=i$.forEach,_e=i$.toQuery,_f=i$.addQueryString,_10="ibmDndColumn",_11="ibmDndRow",_12="portal-drop-target",_13="component-container",_14="dojoDndHandle",_15="portlet-window-ref",_16="isDropTarget",_17="isDragSource",_18="ibmDndDropZoneOver",_19="ibmDndDropZonesActive",_1a="ibmDndDropZoneIllegal",_1b=ibmCfg.portalConfig,_1c=wpModules.dnd.target,_1d=wpModules.dnd.util,_1e=null,_1f=function(e){
return e||window.event;
},_20=function(e,n,v){
e.setAttribute(n,v);
},_21=function(_22){
var _23=_22.className.split(" "),id=null,i,cls,l;
for(i=0,l=_23.length;i<l;++i){
cls=_23[i];
if(cls.indexOf("id-")===0){
id=cls.substring(3);
break;
}
}
return id;
},_24=function(_25){
var n=_25;
while(n&&!_a(n,_13)){
n=n.parentElement;
}
return n;
},_26=function(_27){
var n=_27;
while(n&&!_a(n,_10)&&!_a(n,_11)){
n=n.parentElement;
}
return n;
},_28=function(_29){
var i,_2a,_2b;
for(i=0;i<_29.childNodes.length;i++){
if(_29.childNodes[i].className===_15){
_2a=_29.childNodes[i].href;
_2b=_2a.substring(_2a.lastIndexOf("#")+1);
return _2b;
}
}
},_2c=function(e){
return e.dataTransfer;
},_2d=function(e){
var _2e=wpModules.dnd.target,dt=_2c(e),_2f=dt?dt.dropEffect:null;
if(_2f===_9){
_2f=_2e.getEffectAllowed(e);
if((_2f===_3)||(_2f===_5)||(_2f===_7)||(_2f===_8)){
_2f=_3;
}else{
if((_2f===_2)||(_2f===_6)){
_2f=_2;
}else{
_2f=_4;
}
}
}
return _2f;
},_30=function(e){
return e.srcElement;
},_31=function(e){
return e.target;
},_32=function(_33){
var _34=_33.dataTransfer;
return _34;
},_35=function(_36){
var _37,_38=wpModules.dnd.target;
_37=_38.getEffectAllowed(_36);
return _37;
},_39=function(e,_3a){
var _3b=_a(_3a,_13),_3c=_3b?_3a:_24(_3a),_3d=_21(_3c),_3e={};
_3e.target=_3d;
_3e.action=_2d(e);
return _3e;
},_3f=function(_40,_41,_42){
var _43=_39(_42,_41);
return _f(ibmCfg.portalConfig.contentHandlerURI,{"uri":"dnd:lm:oid:"+_43.target+"@oid:"+_1b.currentPageOID,"source":_40.uri,"action":_43.action,"mime-type":"text/plain"});
},_44=function(_45,_46){
var _47=function(_48,_49){
var _4a=_3f(_48,_45,_49);
return _4a;
},_1c=wpModules.dnd.target,_4b,_4c=_1c.getDropTarget(_1c.getRESTValidator(_47)),_4d=function(_4e){
var _4f=_1f(_4e),_50;
_4c.drop(_4e);
_50=_1c.getDropEffect(_4f),form=_1.getElementById("dnd-drop-form");
if(form){
var _51=[],add=function(o){
_51.push(o);
},_52=ibmCfg.portalConfig.currentPageOID,_53=i$.hasClass(_45,"component-container"),_54=_53?_45:_24(_45),_55=_21(_54),_56=_28(_45);
form.action="?uri=dnd:lm:oid:"+_55+"@oid:"+_52;
add({name:"successURI",value:"nm:oid:"+_52});
add({name:"action",value:_50});
!_53&&_56&&add({name:"position",value:"lm:oid:"+_56+"@oid:"+_52});
i$.forEach(_51,function(i){
var e=_1.createElement("input");
_20(e,"value",i.value);
_20(e,"name",i.name);
_20(e,"type","hidden");
form.appendChild(e);
});
_1c.addPayload(form,_4f);
form.submit();
_4f.preventDefault();
if(_4f){
if(_4f.stopPropagation){
_4f.stopPropagation();
}else{
_4f.cancelBubble=true;
}
}
}
},_57=function(_58){
var _59=_1f(_58);
_4c.dragenter(_59);
_4b=_31(_59)||_30(_59);
_b(_45,_46);
},_5a=function(_5b){
var _5c=_1f(_5b),_5d;
_4c.dragover(_5c);
_5d=_1c.getDropEffect(_5c);
if(_5d===_9){
_b(_45,_1a);
}
},_5e=function(_5f){
var _60=_1f(_5f),t;
_4c.dragleave(_60);
t=_31(_60)||_30(_60);
if(t===_4b){
_c(_45,_46);
_c(_45,_1a);
}
},_61=function(_62){
i$.bindDomEvt(_62,"dragenter",_57);
i$.bindDomEvt(_62,"dragover",_5a);
i$.bindDomEvt(_62,"dragleave",_5e);
i$.bindDomEvt(_62,"drop",_4d);
};
return {"dragenter":_57,"dragover":_5a,"dragleave":_5e,"drop":_4d,"addEventListeners":_61};
},_63=function(){
if(_a(_1.body,"edit-mode")){
if(_1e){
_d(_1e.getNodes("dnd-target"),function(n){
if(!_a(n,_16)){
_44(n,_18).addEventListeners(n);
_b(n,_16);
var _64=_26(n);
if(_64&&!_a(_64,_16)){
_44(_64,_19).addEventListeners(_64);
_b(_64,_16);
}
}
});
}else{
console.error("Cannot handle drop targets with attribute '"+_12+"' because SemTagSvcPortal is not defined.");
}
}
},_65=function(){
if(_a(_1.body,"edit-mode")){
if(_1e){
_d(_1e.getNodes("dnd-source"),function(n){
if(!_a(n,_17)){
var _66=_1.createElement("img");
_66.setAttribute("src","data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7");
_66.setAttribute("class","dragHandle");
_66.setAttribute("draggable","true");
n.appendChild(_66);
_1d.getDragSource(_66,_66,0,0).addEventListeners(_66);
_b(n,_17);
}
});
}
}
};
if(typeof SemTagSvcPortal!=="undefined"){
_1e=SemTagSvcPortal;
_1e.registerService({id:"dnd-target",callback:_63,classnames:["."+_12],test:""});
_1e.registerService({id:"dnd-source",callback:_65,classnames:["."+_14],test:""});
}else{
console.log("SemTagSvcPortal is undefined");
}
})(document);


}catch(e){console.log("Module 'wp_dnd_main': ",e);}
try{(function(){
    i$.merge({
	"create_element_here":"create element here"
},i$.fromPath("wpModules.dnd.nls",true));
})();
}catch(e){console.log("Module 'wp_dnd_main': ",e);}
try{/** Licensed Materials - Property of IBM, 5724-E76 and 5724-E77, (C) Copyright IBM Corp. 2012 - All Rights reserved.  **/
(function(_1,_2,_3){
var _4=_2,_5=_1,_6=_2.console,_7="component-container",_8="component-control",_9="portlet-window",_a="portlet-window-ref",_b=function(nl){
var i,ll,l=[];
for(i=0,ll=nl.length;i!==ll;l.push(nl[i++])){
}
return l;
},_c=function(_d){
var _e=new Object(),_f,_10=0,_11=0;
_e.width=_d.offsetWidth;
_e.height=_d.offsetHeight;
while(_d){
_10+=_d.offsetTop;
_11+=_d.offsetLeft;
_d=_d.offsetParent;
}
_e.left=_11;
_e.top=_10;
_f={"w":_e.width,"h":_e.height,"x":_e.left,"y":_e.top};
return _f;
},_12=function(_13,_14){
var _15;
if(_13.currentStyle){
_15=_13.currentStyle[_14];
}else{
if(_2.getComputedStyle){
_15=_1.defaultView.getComputedStyle(_13,null).getPropertyValue(_14);
}
}
return _15;
},_16=function(_17,_18,_19){
var _1a=_12(_17,_18),_1b=_1a.toLowerCase()===_19;
return _1b;
},_1c={_sortByDelta:function(p1,p2){
var _1d=p1.delta-p2.delta;
return _1d;
},_isContainedIn:function(p1,p2){
var _1e=(p1.x>=p2.x&&(p1.x+p1.w<=p2.x+p2.w))&&(p1.y>=p2.y&&(p1.y+p1.h<=p2.y+p2.h));
return _1e;
},_contains:function(p1,p2){
var _1f=(p1.x<=p2.x&&(p1.x+p1.w>=p2.x+p2.w))&&(p1.y<=p2.y&&(p1.y+p1.h>=p2.y+p2.h));
return _1f;
},_afterDelta:function(p1,p2,_20){
var l=_20==="x"?"w":"h",_21=p1[_20]-(p2[_20]+p2[l]);
return _21;
},_beforeDelta:function(p1,p2,_22){
var _23=_1c._afterDelta.call(this,p2,p1,_22);
return _23;
},_isBefore:function(p1,p2,_24){
var _25=_1c._beforeDelta.call(this,p1,p2,_24)>=0;
return _25;
},_isAfter:function(p1,p2,_26){
var _27=_1c._afterDelta.call(this,p1,p2,_26)>=0;
return _27;
}},_28=function(_29,_2a,dir){
var p=_c(_29),_2b="_beforeDelta",_2c,_2d=[],ret=[],_2e,i,k;
switch(dir){
case _3.DIRECTION_LEFT:
_2c="x";
break;
case _3.DIRECTION_RIGHT:
_2b="_afterDelta";
_2c="x";
break;
case _3.DIRECTION_UP:
_2c="y";
break;
case _3.DIRECTION_DOWN:
_2b="_afterDelta";
_2c="y";
break;
default:
_2b="_afterDelta";
_2c="y";
}
for(i=0;i<_2a.length;i++){
_2e=_2a[i];
if(!_16(_2e,"display","none")){
_2d.push({delta:_1c[_2b](_c(_2e),p,_2c),node:_2e});
}
}
_2d=_2d.sort(_1c["_sortByDelta"]);
for(k=_2d.length-1;k>=0;k--){
if(_2d[k].delta<0){
_2d.splice(0,k+1);
break;
}
ret.unshift(_2d[k].node);
}
return ret;
},_2f=function(id){
var _30=i$.query("."+id+":not(.portlet-window)")[0];
return _30;
},_31=function(_32){
var _33=_32.className,_34=_33.substring(_33.indexOf("id-")+3).split(" ")[0];
return _34;
},_35=function(_36){
var _37=_36.className,_38=_37.indexOf(_7)>=0;
return _38;
},_39=function(_3a){
var _3b=i$.query("."+_7,_3a),_3c=_3b&&_3b.length>=1?true:false;
return _3c;
},_3d=function(_3e){
var n=_3e;
while(n&&!i$.hasClass(n,_7)){
n=n.parentElement;
}
return n;
},_3f=function(_40){
var n=_40;
while(n&&!i$.hasClass(n,_8)){
n=n.parentElement;
}
return n;
},_41=function(_42){
var _43=i$.query(".component-control",_42);
return _43;
},_44=function(){
var _45=i$.query(".component-container:not(.hiddenWidgetsContainer)");
return _45;
},_46=function(_47,_48){
var _49=_3d(_47),_4a=_41(_49).filter(function(c){
return c!==_47;
}),_4b=_28(_47,_4a,_48),_4c=_4b[0];
return _4c;
},_4d=function(_4e,_4f){
var _50=_3d(_4e),_51=_44().filter(function(c){
if(c!==_50){
if(c.classList.contains("g-container")){
var _52=_1.querySelectorAll(".wpGridLayoutEditor");
var _53=0;
while(_53<_52.length){
if(_52[_53].contains(c)){
return false;
}
_53++;
}
}
return true;
}else{
return false;
}
}),_54=_28(_4e,_51,_4f),_55,i,_56=true;
moveInfo=_3.newMoveInfo;
for(i=0;i<_54.length;i++){
if(!_39(_54[i])){
if(_54[i].classList.contains("g-container")){
if(_4f===_3.DIRECTION_UP||_4f===_3.DIRECTION_DOWN){
moveInfo.dir=_3.DIRECTION_LEFT;
if(_3.isMovable(_4e.firstChild.id,moveInfo)){
_55=_54[i+1];
}else{
_55=_54[i];
}
break;
}
if(_4f===_3.DIRECTION_RIGHT){
moveInfo.dir=_3.DIRECTION_UP;
if(_3.isMovable(_4e.firstChild.id,moveInfo)){
_55=_54[i+1];
}else{
_55=_54[i];
}
break;
}else{
_55=_54[i+1];
break;
}
}else{
_55=_54[i];
break;
}
}
}
return _55;
},_57=function(_58){
var _59=_3d(_58),_5a=_41(_59),i,_5b;
for(i=0;i<_5a.length;i++){
if(_5a[i]===_58){
_5b=_5a[i+1];
break;
}
}
return _5b;
},_5c=function(_5d){
var _5e=_35(_5d.parentNode)?_5d.parentNode:_3d(_5d),_5f=_b(_41(_5e)),_60=_5f.indexOf(_5d);
return _60;
},_61=function(_62,_63){
var idx=_5c(_62),_64=_5c(_63),_65=idx<_64;
return _65;
},_66=function(id,dir){
var _67=_2f(id),_68,_69,_6a,ret;
if(_67){
_68=_46(_67,dir);
_69=null;
if(!_68){
_69=_4d(_67,dir);
}
if(_68||_69){
_6a=_3d(_67);
ret={source:_67,parent:_68?_6a:_69,sibling:_68,dir:dir};
return ret;
}
}
},_6b=function(id,_6c){
var _6d,_6e,_6f,_70,_71,_72,pos="last",_73,_74,me=this,_75,_76;
_6d=_66(id,_6c.dir);
_6e=_6d.source;
_6f=_6d.sibling;
_70=_6f?_3d(_6f):null;
_72=_6d.parent;
if(_6d){
if(_6f&&_70&&_70===_72){
_71=_6f;
if(_61(_6e,_6f)){
_6f=_57(_6f);
}
pos="before";
_75=_6f;
if(_75===null){
_75=_71;
pos="after";
}
}else{
_75=_72;
}
}
if(_6c.target){
_76={"node":_6e,"pos":"last","refNode":_2f("id-"+_6c.target)};
}else{
_76={"node":_6e,"pos":pos,"refNode":_75};
}
return _76;
},_77=function(_78){
var i,_79,_7a,_7b=false;
for(i=0;i<_78.childNodes.length;i++){
if(_78.childNodes[i].className&&_78.childNodes[i].className.indexOf(_a)>=0){
_79=_78.childNodes[i].href;
_7a=_79.substring(_79.lastIndexOf("#")+1);
_7b=true;
}
}
if(_7b!==true){
_7a=(_78.className&&_78.className.indexOf(_8)>=0)?_31(_78):"";
}
return _7a;
},_7c=function(e,n,v){
e.setAttribute(n,v);
},_7d=function(_7e){
var _7f=i$.byId("dnd-drop-form"),_80=ibmCfg.portalConfig.currentPageOID,_81=["lm:oid:"+_31(_7e.node)+"@oid:"+_80],_82=[],add=function(o){
_82.push(o);
},_83,_84,_85,_86,_87,_88,_89,_8a,e;
if(_7f){
_83=i$.hasClass(_7e.refNode,_7);
_84=_7e.refNode.className.indexOf(_9)>=0&&_7e.refNode.className.indexOf("id-")<0;
_85=_83?_7e.refNode:_3d(_7e.refNode);
_86=_31(_85);
_87=_31(_7e.refNode);
_88=_86;
_89=!_84?_77(_7e.refNode):"";
_8a=!_84?_89:_86;
_7f.action=i$.addQueryString(ibmCfg.portalConfig.contentHandlerURI,{"uri":"dnd:lm:oid:"+_86+"@oid:"+_80});
add({name:"stateURL",value:location.href});
add({name:"successURI",value:"nm:oid:"+_80});
add({name:"action",value:"move"});
!_83&&!_84&&_8a&&_8a.length>0&&add({name:"position",value:"lm:oid:"+_8a+"@oid:"+_80});
i$.forEach(_81,function(uri){
add({name:"source",value:uri});
});
i$.forEach(_82,function(i){
e=_1.createElement("input");
_7c(e,"value",i.value);
_7c(e,"name",i.name);
_7c(e,"type","hidden");
_7f.appendChild(e);
});
return _7f;
}
},_8b=function(_8c){
var _8d;
if(_8c){
switch(_8c.pos){
case "last":
_8d.appendChild(_8c.node);
break;
case "before":
_8d.insertBefore(_8c.node,_8c.refNode);
break;
}
}
},_8e=function(_8f){
var _90=_7d(_8f);
_90.submit();
},_91=function(id,_92){
var _93=_66("id-"+id,_92.dir),_94;
_94=(_93&&(_93.sibling||_93.parent))?true:false;
return _94;
},_95=function(id,_96){
var _97=_2f("id-"+id),_98=_2f("id-"+_96),_99;
_99={"node":_97,"pos":"last","refNode":_98};
_8e(_99);
},_9a=function(id,_9b){
var _9c,_9d,_9e,_9f;
if(_9b.dir){
_9c=_6b("id-"+id,_9b);
}else{
if(_9b.target){
_9e=_2f("id-"+id);
_9f=_2f("id-"+_9b.target);
_9c={"node":_9e,"pos":"last","refNode":_9f};
}
}
_9d=_9c.refNode;
_8e(_9c);
},_a0=function(dir,_a1){
var _a2={"dir":dir,"target":_a1};
return _a2;
};
_3.isMovable=_91;
_3.move=_9a;
_3.newMoveInfo=_a0;
_3.DIRECTION_UP="UP";
_3.DIRECTION_DOWN="DOWN";
_3.DIRECTION_LEFT="LEFT";
_3.DIRECTION_RIGHT="RIGHT";
_3.DIRECTIONS=[_3.DIRECTION_UP,_3.DIRECTION_DOWN,_3.DIRECTION_LEFT,_3.DIRECTION_RIGHT];
})(document,window,i$.fromPath("wpModules.theme.MoveControls",true));
var DEBUG=false;


}catch(e){console.log("Module 'wp_movecontrols': ",e);}
try{(function(){
    i$.merge({
	"create_element_here":"create element here"
},i$.fromPath("wpModules.movecontrols.nls",true));
})();
}catch(e){console.log("Module 'wp_movecontrols': ",e);}
try{(function(_1){
var _1=_1,_2=_1.document,_3=wpModules.toolbar,_4=wpModules.toolbar.menuActions,_5=wpModules.theme.MoveControls,_6=i$.Promise,_7=i$.byId,_8=i$.forEach,_9={"then":function(){
}},_a=_5.newMoveInfo,_b=_a(_5.DIRECTION_UP),_c=_a(_5.DIRECTION_DOWN),_d=_a(_5.DIRECTION_LEFT),_e=_a(_5.DIRECTION_RIGHT),_f="layoutContainers",_10=function(_11){
var id=_12(_11),_13=_14(id),_15=msg("delete_control_dialog_title")||"Delete Portlet",_16=msg("confirm_delete_control_anonymous"),p=_17();
if(_13){
_16=msg("confirm_delete_control").replace("{0}",_13);
}
_18("confirm_delete_control",_15,_16).then(function(ret){
if(ret.button=="YES"){
p.resolve(_11.actionUrl);
}
});
return p;
},_19=function(_1a){
var r=_1b(_1a)&&_1c();
return r;
},_1d=function(_1e){
var _1f=msg("edit_wiring_dialog_title_anonymous"),url=_1e.actionUrl+"&returnURI=dialog:CloseModalDialog",p=_17(),_20={"url":url,"title":_1f,"modal":true,"window":_1.parent||_1,"autoResize":true,"padding":0,"callbackFn":function(_21){
if(_21&&_21.status!="CANCEL"){
p.resolve(_22().location.href);
}
}};
_23(_20);
return p;
},_24=function(_25){
var r=_1b(_25)&&_1c();
return r;
},_26=function(_27,_28){
var r=_5.isMovable(_27,_28);
return r;
},_29=function(_2a){
var id=_12(_2a),_2b=_2c(_2a);
var r=_1b(_2a)&&_1c()&&_26(id,_2b);
return r;
},_2d=function(_2e,_2f){
var r=_9;
if(_26(_2e,_2f)){
_5.move(_2e,_2f);
}
return r;
},_30=function(_31){
var id=_12(_31),_32=_2c(_31);
var r=_2d(id,_32);
return r;
},_33=function(_34){
var _35=_12(_34),_36=_37(_22()),_38=_39(_36),r=_9;
if(_38){
var _3a=_a(null,_38);
_5.move(_35,_3a);
}
return r;
},_37=function(win){
var _3b=win.document.getElementById(_f);
if(_3b&&_3b.getElementsByClassName){
var _3c=_3b.getElementsByClassName("hiddenWidgetsContainer");
if(_3c&&_3c.length>0){
var r=_3c[0];
return r;
}
}
return null;
},_39=function(_3d){
var _3e=_3d.className.split(" ");
for(var i=0,l=_3e.length;i<l;++i){
var cls=_3e[i];
if(cls.indexOf("id-")===0){
var r=cls.substring(3);
return r;
}
}
return null;
},_3f=function(_40){
var r=_1b(_40)&&_1c();
if(r){
var _41=_37(_22());
if(_41&&_41.getElementsByClassName){
var _42=_12(_40),_43=_41.getElementsByClassName("id-"+_42);
r=!_43||_43.length<=0;
}
}
return r;
},_1c=function(){
var r=_3.isEditModeActive();
return r;
},_1b=function(_44){
var r=_44.visibility!==false;
return r;
},_23=function(_45){
var _46=new wpModules.dialog.Dialog(_45);
_46.open();
},_14=function(_47){
var _48=_7("wpRegionId"+_47);
var r=_48?_49(_48):null;
return r;
},_49=function(n){
if(n.nodeType==3){
var r=n.nodeValue;
return r;
}
var c=n.childNodes;
for(var i=0,l=c.length;i<l;++i){
var r=_49(c[i]);
return r;
}
},_12=function(_4a){
var r=_4b(_4a,"wid");
return r;
},_2c=function(_4c){
var dir=_4b(_4c,"direction"),r=null;
if("up"==dir){
r=_b;
}else{
if("down"==dir){
r=_c;
}else{
if("left"==dir){
r=_d;
}else{
if("right"==dir){
r=_e;
}
}
}
}
return r;
},_4b=function(_4d,key){
var r=_4d.metadata[key];
return r;
},_22=function(){
var r=_3.getViewAreaWindow();
return r;
},_18=function(id,_4e,_4f){
var dlg=wpModules.dialog,r=dlg.confirm({"id":id,"title":_4e,"markup":"<span style=\"font-size: 1.1em;\">"+_4f+"</span>","icon":dlg.confirm.ICON.EXCLAMATION,"buttons":dlg.confirm.BUTTONS.YESNO,"window":_1.parent||_1});
return r;
},_17=function(_50){
var p=new _6();
if(_50){
p.resolve(_50);
}
return p;
},msg=function(key){
var r=_4.nls[key];
return r;
},get=function(obj,key){
var o=obj[key];
if(o){
var v=o.value;
if(v&&v.length>0){
var r=v[0];
return r;
}
}
return null;
};
_4.confirmDeleteControl=_10;
_4.isDeleteControlVisible=_19;
_4.openEditWiringDialog=_1d;
_4.isEditWiringVisible=_24;
_4.isControlMovable=_29;
_4.moveControl=_30;
_4.hideControl=_33;
_4.isHideControlVisible=_3f;
})(window);


}catch(e){console.log("Module 'wp_toolbar_controlactions': ",e);}
try{(function(){
    i$.merge({
	"no_selected_segments_desc":"No segments exist.",
	"add_content_target_btn":"Add Content",
	"content_display_field":"Configure Spot:",
	"segments_target_is":"User Matches Segment",
	"author_field":"Author:",
	"filter_custom":"Custom",
	"filter_label":"Filter:",
	"targeted_desc":"Target content to different segments (audiences). Add web content to the targeted content list. Then, map the content to segments to specify whether to display or hide content for each segment.",
	"remove_btn":"Remove",
	"error_alt_text":"Error",
	"content_properties":"Content Properties",
	"message_targeting_content_not_found":"Content item not found.",
	"set_content_item":"Set Content Item",
	"targeted_in_parentheses":"Web Content Viewer (Targeted)",
	"segments_dialog_desc":"Select segments to add or remove to your content item. You can add more segments to this list.",
	"add_content_target_dialog_title":"Add Content Target",
	"details_tab_btn":"Details",
	"add_segment_btn":"Add Segment...",
	"templates_section_title":"Contents and Templates",
	"targeted_show_page":"Show on Page",
	"appearance_popup_help":"Apply the default presentation template to the content spot. To override the default appearance, replace the presentation template with an HTML component or by selecting another template. You can have one appearance setting for the content spot.",
	"filter_managed_segments":"Managed Segments",
	"contextual_item_desc":"The displayed content item changes depending on the page context.",
	"cam_item_content":"Configure Spot",
	"message_targeted_to_specified":"This spot was previously configured to display targeted content. By saving the settings for specified content, the targeted content settings are lost. To configure this spot for specified content, continue saving the settings in this view. To keep the targeted content settings, click Cancel.",
	"desc_label":"Description",
	"create_date_field":"Created:",
	"show_segment_descriptions_btn":"Show Description",
	"prompt_managed_seg_groups":"Select segments from {0} available managed segment groups.",
	"replace_content_dialog_title":"Replace Content Item",
	"use_page_default_opt":"Use Page Default Content",
	"info_alt_text":"Information",
	"segments_header":"Segments:",
	"replace_component_dialog_title":"Replace Component",
	"segments_popup_help":"Select segments to determine who views this content. Segments help you define your target audience. For example, you can define the audience by users, device class, or other attributes.",
	"appearance_component_opt":"Component",
	"no_description":"No description available",
	"message_targeted_to_contextual":"This spot was previously configured to display targeted content. By saving the settings for contextual content, the targeted content settings are lost. To configure this spot for contextual content, continue saving the settings in this view. To keep the targeted content settings, click Cancel.",
	"use_page_default_desc":"Display the default content item for the page to selected segments.",
	"content_specified_opt":"Specified Content",
	"auth_template_field":"Authoring Template:",
	"message_unsaved_changes":"You have unsaved changes. To confirm that you want to discard your changes, click Cancel or close the form.",
	"segments_target_remove":"Remove This Segment",
	"appearance_default_opt_cf05":"Default Presentation Template",
	"seg_draft":"draft",
	"segments_desc":"Select segments to determine who views this content. For example, you can define the audience by users, device class, or other attributes.",
	"content_targeted_opt":"Targeted Content",
	"page_default_indicator":"Page Default",
	"workflow_stage":"Stage",
	"message_invalid_content_selection":"You must select a content item. For example, content items might include web articles, news, schedules, and more. The content items available to you depend on the templates that are created in a web content library.",
	"appearance_default":"Default",
	"replace_btn":"Replace",
	"appearance_field":"Appearance:",
	"location_label":"Location:",
	"filter_none":"None",
	"segments_tab_btn":"Segments",
	"last_updated_field":"Last Updated:",
	"project_field":"Project:",
	"add_btn":"Add",
	"unknown_contextual_item":"Contextual Item",
	"contextual_in_parentheses":"Web Content Viewer (Contextual)",
	"targeted_default_content":"Default Content",
	"page_default_content_title":"Page Default Content",
	"cam_item_displayed":"Displayed",
	"sel_content_item":"Select Content Item",
	"unknown_contextual_item_desc":"The displayed content item changes depending on the page context. The page default is displayed when there is no context.",
	"targeted_save_show_page":"Save and Show on Page",
	"segments_target_not":"User Does Not Match Segment",
	"filter_segments":"Segments",
	"location_field":"Location:",
	"property_value_none":"None",
	"targeted_content":"Targeted Content Items",
	"delete_targeted_item_btn":"Remove",
	"targeted_spot_title":"Targeted Content Summary",
	"warning_alt_text":"Warning",
	"select_content_opt":"Select Content Item to Display",
	"workflow_field":"Workflow:",
	"hidden_spot_title":"Hidden Spot",
	"targeted_reorder":"When you have multiple targeted content items, you can reorder the content items to set the priority. The first match displays in this spot.",
	"location_section_title":"Location",
	"loading":"Loading...",
	"pzn_popup_help_appearance":"Appearance",
	"segments_title":"Segments",
	"target_specified_content":"Display this content item to the selected segments.",
	"hide_segment_descriptions_btn":"Hide Description",
	"filter_all_segments":"All Segments",
	"hide_spot_btn":"Hide Spot",
	"save_btn":"Save",
	"targeted_item_title":"Targeted Item",
	"update_segments_btn":"Update Segments",
	"edit_authoring_template_dialog_title":"Edit Authoring Template:",
	"add_segments_title":"Add Segments",
	"workflow_stage_field":"Workflow Stage:",
	"replace_presentation_template_dialog_title":"Replace Presentation Template",
	"appearance_default_cf05":"Default Presentation Template",
	"appearance_summary":"Summary Presentation Template",
	"content_contextual_opt":"Contextual Content",
	"specified_item_desc":"This content item always displays in this spot",
	"not_found_segments_desc":"No matching segments.",
	"tooltip_managed":"Managed segments are the segment groups and segments that your developer creates and manages in a web content library.",
	"default_content_desc":"Display this content to users that are not included in segments for targeted content items.",
	"tooltip_non_managed":"Segments in this list were created with personalization rules. You see this view only if your developer previously used personalization rules to create segments.",
	"prompt_seg_groups":"Select segments from {0} available segment groups.",
	"edit_btn":"Edit",
	"more_btn":"More",
	"hide_spot_desc":"Hide this content item from selected segments.",
	"user_must_match_all_opt":"User must match all selected segments to view this content.",
	"appearance_summary_opt":"Summary Presentation Template",
	"hide_spot_opt":"Hide Spot",
	"success_alt_text":"Success",
	"edits_section_title":"Edits and Updates",
	"content_title_field":"Content Item:",
	"appearance_template_opt":"Presentation Template",
	"cam_item_show":"Show",
	"cancel_btn":"Cancel",
	"close_alt_text":"Close",
	"learn_more":"Learn More",
	"more_details":"More Details",
	"add_default_content_target_btn":"Add Default Content",
	"appearance_default_opt":"Default Appearance",
	"message_add_content_item":"You must add one or more segments to save this content item.",
	"appearance_template_opt_cf05":"Specified Presentation Template",
	"type_to_find_segments":"Find Segment",
	"done_btn":"Done",
	"edit_content_dialog_title":"Edit Content Item:"
},i$.fromPath("PznUIUtils.nls",true));
})();
}catch(e){console.log("Module 'wp_content_targeting_cam': ",e);}
try{(function(){
    i$.merge({
	"no_selected_segments_desc":"No segments exist.",
	"add_content_target_btn":"Add Content",
	"content_display_field":"Configure Spot:",
	"segments_target_is":"User Matches Segment",
	"author_field":"Author:",
	"filter_custom":"Custom",
	"filter_label":"Filter:",
	"targeted_desc":"Target content to different segments (audiences). Add web content to the targeted content list. Then, map the content to segments to specify whether to display or hide content for each segment.",
	"remove_btn":"Remove",
	"error_alt_text":"Error",
	"content_properties":"Content Properties",
	"message_targeting_content_not_found":"Content item not found.",
	"set_content_item":"Set Content Item",
	"targeted_in_parentheses":"Web Content Viewer (Targeted)",
	"segments_dialog_desc":"Select segments to add or remove to your content item. You can add more segments to this list.",
	"add_content_target_dialog_title":"Add Content Target",
	"details_tab_btn":"Details",
	"add_segment_btn":"Add Segment...",
	"templates_section_title":"Contents and Templates",
	"targeted_show_page":"Show on Page",
	"appearance_popup_help":"Apply the default presentation template to the content spot. To override the default appearance, replace the presentation template with an HTML component or by selecting another template. You can have one appearance setting for the content spot.",
	"filter_managed_segments":"Managed Segments",
	"contextual_item_desc":"The displayed content item changes depending on the page context.",
	"cam_item_content":"Configure Spot",
	"message_targeted_to_specified":"This spot was previously configured to display targeted content. By saving the settings for specified content, the targeted content settings are lost. To configure this spot for specified content, continue saving the settings in this view. To keep the targeted content settings, click Cancel.",
	"desc_label":"Description",
	"create_date_field":"Created:",
	"show_segment_descriptions_btn":"Show Description",
	"prompt_managed_seg_groups":"Select segments from {0} available managed segment groups.",
	"replace_content_dialog_title":"Replace Content Item",
	"use_page_default_opt":"Use Page Default Content",
	"info_alt_text":"Information",
	"segments_header":"Segments:",
	"replace_component_dialog_title":"Replace Component",
	"segments_popup_help":"Select segments to determine who views this content. Segments help you define your target audience. For example, you can define the audience by users, device class, or other attributes.",
	"appearance_component_opt":"Component",
	"no_description":"No description available",
	"message_targeted_to_contextual":"This spot was previously configured to display targeted content. By saving the settings for contextual content, the targeted content settings are lost. To configure this spot for contextual content, continue saving the settings in this view. To keep the targeted content settings, click Cancel.",
	"use_page_default_desc":"Display the default content item for the page to selected segments.",
	"content_specified_opt":"Specified Content",
	"auth_template_field":"Authoring Template:",
	"message_unsaved_changes":"You have unsaved changes. To confirm that you want to discard your changes, click Cancel or close the form.",
	"segments_target_remove":"Remove This Segment",
	"appearance_default_opt_cf05":"Default Presentation Template",
	"seg_draft":"draft",
	"segments_desc":"Select segments to determine who views this content. For example, you can define the audience by users, device class, or other attributes.",
	"content_targeted_opt":"Targeted Content",
	"page_default_indicator":"Page Default",
	"workflow_stage":"Stage",
	"message_invalid_content_selection":"You must select a content item. For example, content items might include web articles, news, schedules, and more. The content items available to you depend on the templates that are created in a web content library.",
	"appearance_default":"Default",
	"replace_btn":"Replace",
	"appearance_field":"Appearance:",
	"location_label":"Location:",
	"filter_none":"None",
	"segments_tab_btn":"Segments",
	"last_updated_field":"Last Updated:",
	"project_field":"Project:",
	"add_btn":"Add",
	"unknown_contextual_item":"Contextual Item",
	"contextual_in_parentheses":"Web Content Viewer (Contextual)",
	"targeted_default_content":"Default Content",
	"page_default_content_title":"Page Default Content",
	"cam_item_displayed":"Displayed",
	"sel_content_item":"Select Content Item",
	"unknown_contextual_item_desc":"The displayed content item changes depending on the page context. The page default is displayed when there is no context.",
	"targeted_save_show_page":"Save and Show on Page",
	"segments_target_not":"User Does Not Match Segment",
	"filter_segments":"Segments",
	"location_field":"Location:",
	"property_value_none":"None",
	"targeted_content":"Targeted Content Items",
	"delete_targeted_item_btn":"Remove",
	"targeted_spot_title":"Targeted Content Summary",
	"warning_alt_text":"Warning",
	"select_content_opt":"Select Content Item to Display",
	"workflow_field":"Workflow:",
	"hidden_spot_title":"Hidden Spot",
	"targeted_reorder":"When you have multiple targeted content items, you can reorder the content items to set the priority. The first match displays in this spot.",
	"location_section_title":"Location",
	"loading":"Loading...",
	"pzn_popup_help_appearance":"Appearance",
	"segments_title":"Segments",
	"target_specified_content":"Display this content item to the selected segments.",
	"hide_segment_descriptions_btn":"Hide Description",
	"filter_all_segments":"All Segments",
	"hide_spot_btn":"Hide Spot",
	"save_btn":"Save",
	"targeted_item_title":"Targeted Item",
	"update_segments_btn":"Update Segments",
	"edit_authoring_template_dialog_title":"Edit Authoring Template:",
	"add_segments_title":"Add Segments",
	"workflow_stage_field":"Workflow Stage:",
	"replace_presentation_template_dialog_title":"Replace Presentation Template",
	"appearance_default_cf05":"Default Presentation Template",
	"appearance_summary":"Summary Presentation Template",
	"content_contextual_opt":"Contextual Content",
	"specified_item_desc":"This content item always displays in this spot",
	"not_found_segments_desc":"No matching segments.",
	"tooltip_managed":"Managed segments are the segment groups and segments that your developer creates and manages in a web content library.",
	"default_content_desc":"Display this content to users that are not included in segments for targeted content items.",
	"tooltip_non_managed":"Segments in this list were created with personalization rules. You see this view only if your developer previously used personalization rules to create segments.",
	"prompt_seg_groups":"Select segments from {0} available segment groups.",
	"edit_btn":"Edit",
	"more_btn":"More",
	"hide_spot_desc":"Hide this content item from selected segments.",
	"user_must_match_all_opt":"User must match all selected segments to view this content.",
	"appearance_summary_opt":"Summary Presentation Template",
	"hide_spot_opt":"Hide Spot",
	"success_alt_text":"Success",
	"edits_section_title":"Edits and Updates",
	"content_title_field":"Content Item:",
	"appearance_template_opt":"Presentation Template",
	"cam_item_show":"Show",
	"cancel_btn":"Cancel",
	"close_alt_text":"Close",
	"learn_more":"Learn More",
	"more_details":"More Details",
	"add_default_content_target_btn":"Add Default Content",
	"appearance_default_opt":"Default Appearance",
	"message_add_content_item":"You must add one or more segments to save this content item.",
	"appearance_template_opt_cf05":"Specified Presentation Template",
	"type_to_find_segments":"Find Segment",
	"done_btn":"Done",
	"edit_content_dialog_title":"Edit Content Item:"
},i$.fromPath("PznUIUtils.nls",true));
})();
}catch(e){console.log("Module 'wp_content_targeting_cam': ",e);}
try{/** Licensed Materials - Property of IBM, 5724-E76 and 5724-E77, (C) Copyright IBM Corp. 2015 - All Rights reserved.  **/
(function(){
var _1=i$.fromPath("PznUIUtils",true);
_1.MSG_TYPE_ERROR="lotusError";
_1.MSG_TYPE_WARNING="lotusWarning";
_1.MSG_TYPE_INFO="lotusInfo";
_1.MSG_TYPE_SUCCESS="lotusSuccess";
_1.PATH_AUTO_CLOSE_REFRESH="wpModules.ct.pageRefresh";
_1.EL_DIALOG_POPUP_MENU=i$.byId("pznDialogPopupMenu");
_1.EL_DIALOG_POPUP_MENU_CONTAINER=i$.byId("pznDialogPopupMenuItemsContainer");
_1._pznContentSettings=null;
_1._pznDialogNavigator=null;
_1._popupHelpDialog=null;
_1._portletPageId=null;
_1._portletWindowId=null;
_1._componentId=null;
_1._altPresentationTemplatePath=null;
_1.contextPath="";
_1.pocUrlBase="";
_1.ContentSelectorPOCURL="";
_1.ComponentSelectorPOCURL="";
_1.PresentationTemplateSelectorPOCURL="";
_1.ContentEditorPOCURL="";
_1.PresentationTemplateEditorPOCURL="";
_1.ComponentEditorPOCURL="";
_1._appearanceReplaceOptions=null;
_1._contentOptions=null;
_1._contentEdited=false;
_1._currentMessageId=null;
_1._isRTL=false;
_1._autoClosed=true;
_1._segFilterOptions=[{text:"All Segments"}];
_1.escapeHTML=function(_2){
if(!_2){
return _2;
}
return _2.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;");
};
_1.escapeJS=function(_3){
if(!_3){
return _3;
}
return _3.replace(/\\/g,"\\\\").replace(/\'/g,"\\'").replace(/\"/g,"\\\"").replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;");
};
_1.toXML=function(_4){
if(!_4){
return _4;
}
var _5=null;
if(window.ActiveXObject){
_5=new ActiveXObject("Microsoft.XMLDOM");
_5.async="false";
_5.loadXML(_4);
}else{
var _6=new DOMParser();
_5=_6.parseFromString(_4,"text/xml");
}
return _5;
};
_1.getIframe=function(){
if(!_1._iframe){
var wp=window.parent,i;
if(wp){
var _7=wp.document.getElementsByTagName("iframe");
if(_7){
for(i=0;i<_7.length;i++){
if(_7[i].contentWindow==window){
_1._iframe=_7[i];
break;
}
}
}
}
}
return _1._iframe;
};
_1.init=function(_8){
document.body.style.backgroundColor="#ffffff";
var s=document.getElementsByTagName("section"),sc;
if(s){
for(i=0;i<s.length;i++){
if(i$.hasClass(s[i],"wpthemeControl")){
s[i].style.margin="0";
}
sc=s[i].childNodes;
for(a=0;a<sc.length;a++){
i$.removeClass(sc[a],"wpthemeOverflowAuto");
}
}
}
_1._pznContentSettings=new PznContentSettings(_8);
window.onbeforeunload=function(){
if(_1._autoClosed){
var _9=i$.fromPath(_1.PATH_AUTO_CLOSE_REFRESH,false,window.parent);
if(!_9){
_9={ctwindow:window,refresh:false};
}
if(_1.isContentEdited()){
_9.refresh=true;
i$.toPath(_1.PATH_AUTO_CLOSE_REFRESH,_9,window.parent);
}else{
_9.refresh=false;
i$.toPath(_1.PATH_AUTO_CLOSE_REFRESH,_9,window.parent);
}
if(_1.getContentSettings().isChanged()){
_1.getContentSettings().cancel();
return false;
}
}
};
};
_1.setRTL=function(_a){
if(_a){
_1._isRTL=true;
}else{
_1._isRTL=false;
}
};
_1.isRTL=function(){
return _1._isRTL;
};
_1.isInfoMode=function(){
var f=window.top.frames["wpViewFrameContainer-iframe"];
if(f){
return i$.hasClass(f.document.body,"info-mode");
}
return false;
};
_1.getContextPath=function(){
return _1.contextPath;
};
_1.setContextPath=function(cp){
_1.contextPath=cp;
};
_1.getContentSettings=function(){
return _1._pznContentSettings;
};
_1.getDialogNavigator=function(){
if(!_1._pznDialogNavigator){
_1._pznDialogNavigator=new PznDialogNavigator();
}
return _1._pznDialogNavigator;
};
_1.getContentOptions=function(){
if(_1._contentOptions==null){
_1._contentOptions=[{text:_1.escapeHTML(_1.nls["content_specified_opt"])},{text:_1.escapeHTML(_1.nls["content_contextual_opt"])},{text:_1.escapeHTML(_1.nls["content_targeted_opt"])}];
}
return _1._contentOptions;
};
_1.isContentEdited=function(){
return _1._contentEdited;
};
_1.refreshContentSettingsNavigation=function(){
var cs=_1.getContentSettings();
var _b=_1.getDialogNavigator();
if(cs&&_b){
if(cs.isSpecified()){
_b.showSpecified();
}else{
if(cs.isContextual()){
_b.showContextual();
}else{
if(cs.isTargeted()){
_b.showTargeted();
}
}
}
}
};
_1.getContextualContentId=function(){
return _1._componentId;
};
_1.renderContentTitle=function(_c){
if(!_c.divId){
return;
}
var d=i$.byId(_c.divId);
if(!d){
return;
}
var _d=[],_e=_c.wcmContentProps,_f=_e&&_e.getId();
_d.push("<div class=\"pznHeader\">");
_d.push("<img id=\"",_c.divId,"_contentItemIcon_img\" alt=\"\" src=\"",_1.getContextPath(),"/images/blank.gif\" class=\"");
if(_f&&PznContentSettings.isLrpId(_f)){
_d.push("pznDialogIconLRPContentLarge");
}else{
_d.push("pznDialogIconWcmContentLarge");
}
_d.push(" pznDialogTitleIcon lotusLeft\">");
_d.push("<div class=\"pznDialogContentItemTitle\">");
_d.push("<span id=\"",_c.divId,"_pznDialog_title\" class=\"pznDialogBoldFont pznDialogFontComputed18px\">");
if(_e){
var _10="message_targeting_content_not_found";
if(_e.isAvailable()){
_d.push(_1.escapeHTML(_e.getTitle()));
_1.hideMessage(_10);
}else{
_1.displayMessage(_1.escapeHTML(_1.nls[_10]),_1.MSG_TYPE_ERROR,_10);
}
}
_d.push("</span>");
if(_1.getDialogNavigator().isShowingContextual()){
_d.push("<span class=\"pznDialogFontComputed11px pznDialogGreyText\">&nbsp;&nbsp;",_1.escapeHTML(_1.nls["contextual_in_parentheses"]),"</span>");
}
if(_f&&!PznContentSettings.isLrpId(_f)){
_d.push("<br/>");
_d.push("<span class=\"pznDialogGreyText pznDialogFontComputed11px\">");
var ws=_e.getWorkflowState();
if(ws){
_d.push(ws);
}
if(_e.getWorkflowStage()){
if(ws){
_d.push("&nbsp;&nbsp;|&nbsp;&nbsp;");
}
_d.push(_1.escapeHTML(_1.nls["workflow_stage"]),"&nbsp;",_e.getWorkflowStage().getTitle());
}
_d.push("</span>");
}
if(_1.isInfoMode()){
if(_c.desc){
_d.push("<br/>");
_d.push("<h3 class=\"pznDescription pznDialogElementDisplayInline\">",_c.desc,"</h3>");
}
if(_c.learnMoreUrl){
_d.push("&nbsp;<a id=\"",_c.learnMoreId,"\" class=\"pznDialogFontComputed11px pznDialogBlueLink pznDialogNoWrapText\" href=\"\" ");
_d.push("onclick=\"PznUIUtils.openLearnMoreWindow('",_c.learnMoreUrl,"'); return false;\">");
_d.push(_1.escapeHTML(_1.nls["learn_more"]),"</a>");
}
}
_d.push("</div>");
_d.push("<div class=\"lotusClear\"></div>");
_d.push("</div>");
d.innerHTML=_d.join("");
};
_1.renderButtons=function(_11,_12){
var _13=null,bt="<input id=\"$id\" type=\"button\" value=\"$value\" title=\"$value\" role=\"button\" class=\"lotusBtn pznDialogBtn\" onclick=\"$onclick\" />",out=[],_14=null,_15=null,nav=_1.getDialogNavigator();
if(_11){
_15=_11.getId();
if(!PznContentSettings.isLrpId(_15)){
_14=bt.replace(/\$value/g,_1.escapeHTML(_1.nls["replace_btn"])).replace("$onclick","PznUIUtils.openContentSelector(true);return false;");
}
}
if(nav.isShowingSpecified()){
_13=i$.byId("pznSpecifiedContentBtns");
if(!_11){
out.push(bt.replace("$id","pznSpecifiedContentSetBtn").replace(/\$value/g,_1.escapeHTML(_1.nls["set_content_item"])).replace("$onclick","PznUIUtils.openContentSelector(false);return false;"));
}else{
if(_14){
out.push(_14.replace("$id","pznSpecifiedContentReplaceBtn"));
}
}
}else{
if(nav.isShowingContextual()){
_13=i$.byId("pznContextualContentBtns");
}else{
if(nav.isShowingTargetedSpot()){
_13=i$.byId("pznTargetedSpotBtns");
out.push(bt.replace("$id","pznTargetedAddContentBtn").replace(/\$value/g,_1.escapeHTML(_1.nls["add_content_target_btn"])).replace("$onclick","PznUIUtils.openAddContentTargetDialog();return false;"));
out.push(bt.replace("$id","pznTargetedHideSpotBtn").replace(/\$value/g,_1.escapeHTML(_1.nls["hide_spot_btn"])).replace("$onclick","PznUIUtils.addNewTargetedItem(PznContentSettings.HIDDEN_SPOT_ID);return false;"));
}else{
if(nav.isShowingEditTargetedItem()){
_13=i$.byId("pznTargetItemEditBtns");
if(_14){
out.push(_14.replace("$id","pznTargetItemReplaceBtn"));
}
var cep=nav.getCurrentTargetedItemEditPosition();
if(cep!=null&&cep!=PznWCMConstants.DEFAULT){
out.push(bt.replace("$id","pznTargetItemDeleteBtn").replace(/\$value/g,_1.escapeHTML(_1.nls["delete_targeted_item_btn"])).replace("$onclick","PznUIUtils.deleteTargetedContentItem("+cep+");PznUIUtils.getDialogNavigator().showTargeted();return false;"));
}
var _16=_15;
if(_11.isPageDefault()){
_16=PznContentSettings.PAGE_DEFAULT_CONTENT_ID;
}
out.push(bt.replace(/\$value/,_1.escapeHTML(_1.nls["more_btn"])+"&nbsp;&#9660;").replace(/\$value/,_1.escapeHTML(_1.nls["more_btn"])).replace("$onclick","PznUIUtils.showTagertedItemMoreMenu(this,event,'"+_16+"');return false;").replace("$id","pznTargetItemMoreBtn").replace("role=\"button\""," tabindex=\"0\" onkeydown=\"return PznUIUtils.showTagertedItemMoreMenu(this,event,'"+_16+"');\" aria-haspopup=\"true\" aria-owns=\"pznDialogPopupMenuItemsContainer\""));
}
}
}
}
if(_13){
i$.addClass(_13,"pznDialogDefaultMarginTop");
_13.innerHTML=out.join(" ");
}
};
_1.renderTabPanelControls=function(_17,_18){
var _19=i$.byId(_17);
if(_19){
_19.innerHTML="";
}
var _1a=null;
if(_18){
_1a=_18.getId();
}
var nav=_1.getDialogNavigator(),sC=nav.isShowingContextual(),sS=nav.isShowingSpecified(),_1b=nav.isShowingEditTargetedItem(),_1c=PznContentSettings.isLrpId(_1a);
if(_1b){
var cep=_1.getDialogNavigator().getCurrentTargetedItemEditPosition();
if(_1c&&cep==PznWCMConstants.DEFAULT){
return;
}
}
if(!_19||(_1c&&(sC||sS))){
return;
}
if(this.lastDiv){
this.lastDiv.innerHTML="";
}
this.lastDiv=_19;
var tct=["<td class=\"pznDialogPanelTab pznDialogPanelTabWithControl $classes\">","<a id=\"$id\" href=\"\"","onmouseover=\"PznTargetedItemEdit.tabMoused(this);\"","onmouseout=\"PznTargetedItemEdit.tabMoused(this);\"","onclick=\"PznTargetedItemEdit.tabClicked(this);return false;\"","><span class=\"pznDialogElementDisplayBlock\">$tabLabel</span>","</a></td>"].join(" ");
var tlf="<td><div class=\"pznDialogPanelTabLineFiller\">&nbsp;</div></td>";
out=["<div id=\"",_17,"Ctrls\" class=\"pznDialogPanelTabsContainer\">"];
out.push("<table class=\"pznDialogPanelTabsTable pznDialogDefaultMarginTop\" role=\"presentation\" cellspacing=\"0\" cellpadding=\"0\"><tr>");
if(_1b){
out.push(tct.replace("$classes","pznDialogPanelTabActive").replace("$id","pznDialogPanelTabSegmentsLink").replace("$tabLabel",_1.escapeHTML(_1.nls["segments_tab_btn"])));
if(!_1c){
out.push(tct.replace("$classes","").replace("$id","pznDialogPanelTabDetailsLink").replace("$tabLabel",_1.escapeHTML(_1.nls["details_tab_btn"])));
}
out.push(tlf);
}else{
if(sC||sS){
out.push(tct.replace("$classes","pznDialogPanelTabActive").replace("$id","pznDialogPanelTabDetailsLink").replace("$tabLabel",_1.escapeHTML(_1.nls["details_tab_btn"])));
out.push(tlf);
}
}
out.push("</tr></table></div>");
i$.addClass(_19,"pznDialogDefaultMarginTop");
_19.innerHTML=out.join("");
};
_1.renderContentProperties=function(_1d,_1e){
var d=i$.byId(_1e);
if(!d||!_1d||!_1d.isAvailable()||PznContentSettings.isLrpId(_1d.getId())){
if(d){
d.innerHTML="";
}
return;
}
if(_1d){
var ht="<div class=\"pznDialogContentPropertiesHeading\"><div></div><span>$label&nbsp;</span></div>";
var pt="<div class=\"pznDialogContentProperty $propClass\" $other ><div class=\"pznDialogContentPropertyText\"><span class=\"pznDialogPropertyLabel\">$label</span>$value</div>$actions</div>";
var at="<a href=\"\" alt=\"$alt\" class=\"pznDialogContentPropertyAction pznDialogBlueLink pznDialogFontComputed11px lotusRight\" onclick=\"$onclick\"><span class=\"pznDialogContentPropertyActionCtrl\">$label</span></a>";
var _1f="<img id=\"$buttonid\" src=\""+_1.getContextPath()+"/images/blank.gif"+"\" alt=\"\" class=\"pznDialogContentPropertyEditImg\" >";
var _20=function(_21){
var m=pt.replace(/\$label/g,_21.label).replace("$value",_21.value);
if(_21.action){
m=m.replace("$propClass","pznDialogMouseHighlight").replace("$actions",at.replace("$label",_21.action.label).replace("$onclick","").replace(/\$alt/g,_21.action.alt)).replace("$other","onclick=\""+_21.action.script+"\" role=\"link\"");
}else{
m=m.replace("$propClass","pznDialogNoMouseHighlight").replace("$actions","").replace("$other","");
}
return m;
};
var _22=_1d.getOther();
var out=[];
var v="";
out.push("<div class=\"pznDialogPropertiesList pznDialogFontComputed12px\">");
out.push(ht.replace("$label",_1.escapeHTML(_1.nls["templates_section_title"])));
out.push(_20({label:_1.escapeHTML(_1.nls["content_title_field"]),value:_1d.getTitle(),action:{label:_1f.replace("$buttonid",_1e+"_edit_content"),script:"PznUIUtils.openContentEditor('"+_1d.getId()+"');return false;",alt:_1.escapeHTML(_1.nls["edit_btn"])}}));
var _23=_1d.getAuthoringTemplate();
if(_23&&_23.getTitle()){
var _24=_1.AuthoringTemplateEditorPOCURL+_23.getId(),_25=_1.escapeHTML(_1.nls["edit_authoring_template_dialog_title"])+"&nbsp;"+_23.getTitle();
var _26={label:_1.escapeHTML(_1.nls["auth_template_field"]),value:_23.getTitle(),action:{label:_1f.replace("$buttonid",_1e+"_edit_auth_template"),script:"PznUIUtils.openDialog({url:'"+_24+"',title:'"+_25+"',callbackFn:PznUIUtils.dialogContentEdit});return false;",alt:_1.escapeHTML(_1.nls["edit_btn"])}};
out.push(_20(_26));
}
out.push(ht.replace("$label",_1.escapeHTML(_1.nls["edits_section_title"])));
if(_22&&_22.getDateLastModified()){
out.push(_20({label:_1.escapeHTML(_1.nls["last_updated_field"]),value:_22.getDateLastModified()}));
}
if(_22&&_22.getDateCreated()){
out.push(_20({label:_1.escapeHTML(_1.nls["create_date_field"]),value:_22.getDateCreated()}));
}
if(_1d.getAuthorName()){
out.push(_20({label:_1.escapeHTML(_1.nls["author_field"]),value:_1d.getAuthorName()}));
}
if(_1d.getWorkflow()&&_1d.getWorkflow().getTitle()){
v=_1d.getWorkflow().getTitle();
}else{
v=_1.escapeHTML(_1.nls["property_value_none"]);
}
out.push(_20({label:_1.escapeHTML(_1.nls["workflow_field"]),value:v}));
if(_1d.getWorkflowStage()){
var t=_1d.getWorkflowStage().getTitle();
if(t){
v=t;
}else{
v=_1.escapeHTML(_1.nls["property_value_none"]);
}
out.push(_20({label:_1.escapeHTML(_1.nls["workflow_stage_field"]),value:v}));
}
out.push(ht.replace("$label",_1.escapeHTML(_1.nls["location_section_title"])));
var v=_1.escapeHTML(_1.nls["property_value_none"]);
if(_22&&_22.getLocation()){
v=_22.getLocation();
}
out.push(_20({label:_1.escapeHTML(_1.nls["location_field"]),value:v.replace(/&nbsp;/g," ")}));
if(_1d.getProject()){
v=_1d.getProject().getTitle();
}else{
v=_1.escapeHTML(_1.nls["property_value_none"]);
}
out.push(_20({label:_1.escapeHTML(_1.nls["project_field"]),value:v}));
out.push("</div>");
d.innerHTML=out.join("");
}
};
_1.isAppearanceDefault=function(){
var cs=_1.getContentSettings();
if(cs&&(cs.getPresentationTemplateId()||cs.getComponentId())){
return false;
}
return true;
};
_1.renderContentAppearance=function(_27){
if(!_27){
return;
}
var d=i$.byId(_27);
if(!d){
return;
}
var o=null,_28="",out=[],cs=_1.getContentSettings(),_29={},_2a=[];
_2a.push("<a id=\"pznDialogReplaceWithMenuSelected\" href=\"\" ");
_2a.push("aria-haspopup=\"true\"  aria-owns=\"pznDialogPopupMenuItemsContainer\" tabindex=\"0\" onkeydown=\"return PznUIUtils.showAppearanceMenu(this,event,'",_27,"');\" ");
_2a.push("onclick=\"PznUIUtils.showAppearanceMenu(this,event,'",_27,"');return false;\" ");
_2a.push(" >");
_2a.push("<span class=\"pznDialogAppearance pznDialogElementDisplayBlock\">");
if(cs.getPresentationTemplateId()){
o=new PznWCMOther(cs.getPresentationTemplateId());
_28=_1.PresentationTemplateEditorPOCURL;
_2a.push("<img id=\"",_27,"_presentationTemplateIcon_img\" alt=\"\" src=\"",_1.getContextPath(),"/images/wcm_presentation_template_18.png\" class=\"lotusLeft pznDialogElementBgImageNone\">");
}else{
if(cs.getComponentId()){
o=new PznWCMOther(cs.getComponentId());
_28=_1.ComponentEditorPOCURL;
_2a.push("<img id=\"",_27,"_appearanceIcon_img\" alt=\"\" src=\"",_1.getContextPath(),"/images/blank.gif\" class=\"pznDialogComponentAppearanceIcon lotusLeft\">");
}else{
_2a.push("<img id=\"",_27,"_presentationTemplateIcon_img\" alt=\"\" src=\"",_1.getContextPath(),"/images/wcm_presentation_template_18.png\" class=\"lotusLeft pznDialogElementBgImageNone\">");
}
}
_2a.push("<span class=\"pznLabel pznDialogGreyText pznDialogFontComputed12px pznDialogBoldFont\">",_1.escapeHTML(_1.nls["appearance_field"]),"</span>");
_2a.push("<span id=\"pznDialogCurrentAppearance_",_27,"\" class=\"pznDialogDefaultColorText pznDialogFontComputed12px\">");
if(o){
_2a.push(_1.escapeHTML(o.getTitle()));
}else{
if(cs.getType()==PznContentSettings.TYPE_SUMMARY){
_2a.push(_1.escapeHTML(_1.nls["appearance_summary"]));
}else{
_2a.push(_1.escapeHTML(_1.nls["appearance_default_cf05"]));
}
}
_2a.push("&nbsp;<img id=\"",_27,"_dropDownIcon_img\" src=\"",_1.getContextPath(),"/images/blank.gif\" alt=\"\" class=\"pznDialogDropDownIcon\"><span aria-hidden=\"true\" class=\"lotusAltText\">&#9660;</span>");
_2a.push("</span>");
_2a.push("<div class=\"lotusClear\"></div>");
_2a.push("</span>");
_2a.push("</a>");
_29.mainLink=_2a.join("");
_2a.length=0;
_29.controlLinks=[];
if(_1.isInfoMode()){
_2a.push("<a id=\"pznDialogHelp_appearance\" href=\"\" class=\"pznDialogBlueLink\" onclick=\"PznUIUtils.openPopupHelp(this, '",_27,"');return false;\" aria-labelledby=\"",_27,"_help12_img\" aria-haspopup=\"true\" role=\"button\">");
_2a.push("<span class=\"\"><img id=\"",_27,"_help12_img\" class=\"pznDialogElementBgImageNone\" src=\"",_1.getContextPath(),"/images/");
if(_1._locale&&_1._locale.indexOf("ar")==0){
_2a.push("Help12_ar.png");
}else{
_2a.push("Help12.png");
}
_2a.push("\" alt=\"",_1.escapeHTML(_1.nls["pzn_popup_help_appearance"]),"\"></span></a>");
_29.controlLinks.push(_2a.join(""));
}
_2a.length=0;
if(o){
_2a.push("<a href=\"\" alt=\"",_1.escapeHTML(_1.nls["edit_btn"]),"\" class=\"pznDialogBlueLink\" onclick=\"PznUIUtils.openAppearanceEditor('",_28,"','",o.getId(),"');return false;\">");
_2a.push("<span class=\"\"><img id=\"",_27,"_edit_presnt_template\" src=\"",_1.getContextPath(),"/images/blank.gif"+"\" alt=\"\" class=\"pznDialogContentPropertyEditImg\" ></span></a>");
_29.controlLinks.push(_2a.join(""));
}
d.innerHTML=_1.getLinkControlMarkup(_29);
};
_1.getLinkControlMarkup=function(_2b){
var cl=_2b.controlLinks,out=["<table width=\"100%\" cellspacing=\"0\" cellpadding=\"0\" role=\"presentation\" class=\"pznDialogLinkControlTable pznDialogMouseHighlight pznDialogElementDisplayBlock\"><tr>"];
out.push("<td style=\"width:100%\">");
out.push(_2b.mainLink);
out.push("</td>");
if(cl&&cl.length>0){
var l=_2b.controlLinks.length;
for(var i=0;i<l;i++){
out.push("<td>");
out.push("<div class=\"pznDialogSubLink pznDialogContentProperty\" >");
out.push(_2b.controlLinks[i]);
out.push("</div>");
out.push("</td>");
}
}else{
out.push("<td class=\"pznDialogCursorPointer\">&nbsp;</td>");
}
out.push("</tr></table>");
return out.join("");
};
_1.showPopupMenu=function(_2c,_2d,_2e,_2f,_30,_31,_32){
if(_2e.keyCode&&_1.isItemHidden(_1.EL_DIALOG_POPUP_MENU)){
if(_2e.keyCode!=13&&_2e.keyCode!=40&&(!(_2e.altKey&&_2e.keyCode==40))){
return false;
}
}
PznDialogPopupMenu.getInstance().show(_2c,_2d,_2e,_2f,_30,_31,_32);
_1.resize();
return true;
};
_1.hidePopupMenu=function(){
PznDialogPopupMenu.getInstance().hide(true);
};
_1.showAppearanceMenu=function(_33,_34,_35){
if(!_1.isMenuAvailable(_34)){
return false;
}
var _36=i$.byId("pznDialogPopupMenuItemsContainer");
if(_36){
_36.setAttribute("role","listbox");
}
var _37=null,cs=_1.getContentSettings(),_38=[{text:_1.escapeHTML(_1.nls["appearance_default_opt_cf05"]),selected:(cs.getType()==PznContentSettings.TYPE_CONTENT)},{text:_1.escapeHTML(_1.nls["appearance_summary_opt"]),selected:(cs.getType()==PznContentSettings.TYPE_SUMMARY)},{text:_1.escapeHTML(_1.nls["appearance_component_opt"]),selected:(cs.getType()==PznContentSettings.TYPE_COMPONENT)},{text:_1.escapeHTML(_1.nls["appearance_template_opt_cf05"]),selected:(cs.getType()==PznContentSettings.TYPE_ALTERNATE)}];
var _39=_1.showPopupMenu(_33,_38,_34,function(_3a){
var cs=_1.getContentSettings();
if(cs){
if(_3a==0){
cs.setPresentationTemplateId(null);
cs.setComponentId(null);
cs.setType(PznContentSettings.TYPE_CONTENT);
}else{
if(_3a==1){
cs.setPresentationTemplateId(null);
cs.setComponentId(null);
cs.setType(PznContentSettings.TYPE_SUMMARY);
}else{
if(_3a==2){
var sid=_1.openComponentSelection();
}else{
if(_3a==3){
var sid=_1.openPresentationTemplateSelection();
}
}
}
}
_1.renderContentAppearance(_35);
}
},{x:-80},_37,{positionAt:i$.byId("pznDialogCurrentAppearance_"+_35)});
return !_39;
};
_1.showFilterMenu=function(_3b,_3c,_3d){
if(!_1.isMenuAvailable(_3c)){
return false;
}
var _3e=i$.byId("pznDialogPopupMenuItemsContainer");
if(_3e){
_3e.setAttribute("role","listbox");
}
var _3f=null,_40=_1.getSegmentFilterOptions();
var _41=_1.showPopupMenu(_3b,_40,_3c,function(_42){
_1.handleFilterChange(_42);
SegmentSelector.doTypeAhead();
},{x:-20},_3f,{positionAt:i$.byId("pznDialogCurrentAppearance_"+_3d),multiSelect:true});
return !_41;
};
_1.handleFilterChange=function(_43){
var _44=SegmentSelector.getNonManagedFilterIndex();
var _45=SegmentSelector.getManagedFilterIndex();
var _46=SegmentSelector.haveManagedSegments()&&SegmentSelector.haveNonManagedSegments();
var _47=SegmentSelector.haveManagedSegments()&&!SegmentSelector.haveNonManagedSegments();
var _48=!SegmentSelector.haveManagedSegments()&&SegmentSelector.haveNonManagedSegments();
var _49=_46&&_43==0;
var _4a=(_46&&_43>0&&_43<_1.getSegmentFilterOptions().length-1)||(_47)||false;
if(_49){
var _4b=PznDialogPopupMenu.getInstance().isSelected(_43);
for(var i=0;i<_1.getSegmentFilterOptions().length;i++){
PznDialogPopupMenu.getInstance().select(i,!_4b);
}
}else{
if(_4a){
if(!_47){
PznDialogPopupMenu.getInstance().unSelect(0);
}
var _4b=PznDialogPopupMenu.getInstance().isSelected(_45);
if(_43==_45){
if(SegmentSelector.filterOptions&&SegmentSelector.filterOptions.length>0&&_45>=0){
var _4c=SegmentSelector.filterOptions[_45].getChildrenIndices();
i$.each(_4c,function(_4d){
PznDialogPopupMenu.getInstance().select(_4d,!_4b);
});
}
PznDialogPopupMenu.getInstance().select(_43);
}else{
PznDialogPopupMenu.getInstance().select(_43);
PznDialogPopupMenu.getInstance().unSelect(_45);
}
}else{
PznDialogPopupMenu.getInstance().select(_43);
var _4e=false;
if(SegmentSelector.filterOptions&&SegmentSelector.filterOptions.length>0&&_45>=0){
_4c=SegmentSelector.filterOptions[_45].getChildrenIndices();
_4e=i$.every(_4c,function(_4f){
return PznDialogPopupMenu.getInstance().isSelected(_4f);
});
}
if(!_4e){
PznDialogPopupMenu.getInstance().unSelect(_45);
}else{
if(!PznDialogPopupMenu.getInstance().isSelected(_45)){
PznDialogPopupMenu.getInstance().select(_45);
}
}
if(_43==_44){
if(_46){
_1.toggleSegment(PznDialogPopupMenu.getInstance().isSelected(_44)&&PznDialogPopupMenu.getInstance().isSelected(_45),0);
}else{
if(_48){
_1.toggleSegment(PznDialogPopupMenu.getInstance().isSelected(_44),0);
}else{
if(_47){
_1.toggleSegment(PznDialogPopupMenu.getInstance().isSelected(_45),0);
}
}
}
}
}
}
};
_1.toggleSegment=function(_50,_51){
if(_50){
PznDialogPopupMenu.getInstance().select(_51);
}else{
PznDialogPopupMenu.getInstance().unSelect(_51);
}
};
_1.getSegmentFilterOptions=function(){
return _1._segFilterOptions;
};
_1.clearSegmentFilterOptions=function(){
return _1._segFilterOptions=[];
};
_1.addSegmentFilterOption=function(_52,_53){
if(_53){
_1._segFilterOptions.push({text:_1.escapeHTML(_52),parentIndex:_1.getIndexOfFilterOption(_53)});
}else{
_1._segFilterOptions.push({text:_1.escapeHTML(_52)});
}
};
_1.getIndexOfFilterOption=function(_54){
for(var i=0;i<_1._segFilterOptions.length;i++){
if(_1._segFilterOptions[i].text==_54){
return i;
}
}
return -1;
};
_1.isMenuAvailable=function(_55){
if(i$.isFF&&_55.type=="click"&&_55.timeStamp==0){
return false;
}
return true;
};
_1.showContentMenu=function(_56,_57){
if(!_1.isMenuAvailable(_57)){
return false;
}
var _58=_1.getContentOptions(),nav=_1.getDialogNavigator();
for(var i=0;i<_58.length;i++){
_58[i].selected=false;
}
if(nav.isShowingSpecified()){
_58[0].selected=true;
}else{
if(nav.isShowingContextual()){
_58[1].selected=true;
}else{
if(nav.isShowingTargeted()){
_58[2].selected=true;
}
}
}
var _59=_1.showPopupMenu(_56,_58,_57,function(_5a){
if(_5a==0){
nav.showSpecified();
}else{
if(_5a==1){
nav.showContextual();
}else{
if(_5a==2){
nav.showTargeted();
}
}
}
},null,null,{positionAt:i$.byId("pznContentDisplayedStr")});
return !_59;
};
_1.showTagertedItemMoreMenu=function(_5b,_5c,_5d){
if(!_1.isMenuAvailable(_5c)){
return false;
}
var _5e=null;
var cs=_1.getContentSettings(),_5f,_60=PznContentSettings.isLrpId(_5d),_61=[{text:_1.escapeHTML(_1.nls["hide_spot_opt"])},{text:_1.escapeHTML(_1.nls["use_page_default_opt"])}],_62=cs.getRuleDataObject().getEditModeProfile(),_63=_62.getConditions(),_64=cs.isChanged()||_62.isChanged(),_65=_62.getPosition()==PznWCMConstants.DEFAULT;
var _66=i$.byId("pznTargetItemMoreBtn");
_66.setAttribute("role","combobox");
if(_60){
if(_5d==PznContentSettings.HIDDEN_SPOT_ID){
_61[0].selected=true;
}else{
if(_5d==PznContentSettings.PAGE_DEFAULT_CONTENT_ID){
_61[1].selected=true;
}
}
_61.push({text:_1.escapeHTML(_1.nls["select_content_opt"])});
}
if(_65||(_63&&_63.length>0)){
if(_64){
_5f=_1.escapeHTML(_1.nls["targeted_save_show_page"]);
}else{
_5f=_1.escapeHTML(_1.nls["targeted_show_page"]);
}
_61.push({text:_5f,separator:true});
}
var nav=_1.getDialogNavigator(),_67=_1.showPopupMenu(_5b,_61,_5c,function(_68){
if(_68==0){
_1.setContentItem(PznContentSettings.HIDDEN_SPOT_ID);
}else{
if(_68==1){
_1.setContentItem(PznContentSettings.PAGE_DEFAULT_CONTENT_ID);
}else{
if(_68==2){
if(_60){
_1.openContentSelector(true);
}else{
_1.showOnPage(_5d);
}
}else{
if(_68==3&&_60){
_1.showOnPage(_5d);
}
}
}
}
},{x:-16},_5e);
return !_67;
};
_1.showOnPage=function(_69){
var _6a=_1.getPreviewContentUrl(_69,_1._portletWindowId,_1._portletPageId),cs=_1.getContentSettings();
if(_1.saveEditModeProfile()){
cs.save(function(_6b){
});
}
window.onbeforeunload=null;
if(i$.isIE&&i$.isIE<10){
_1.getViewAreaWindow().location=_6a;
}else{
window.top.location=_6a;
}
};
_1.getPreviewContentUrl=function(_6c,_6d,_6e){
var _6f=(i$.isIE&&i$.isIE<10)?_1.getViewAreaWindow().location.href:window.top.location.href,_70=(_6f.indexOf("?")>-1)?"&":"?",url=[_6f,_70,"uri=ctpreview:"];
if(_6c){
url.push("ITEM:",_6c);
}else{
url.push("NONE");
}
url.push("&portletWindowId=",_6d,"&pageId=",_6e);
return url.join("");
};
_1.getViewAreaWindow=function(){
wu=i$.fromPath("wpModules.theme.WindowUtils");
if(wu){
result=wu.getWindow(wu.VIEW_AREA);
}else{
result=window;
}
return result;
};
_1.deleteTargetedContentItem=function(_71){
var rd=_1.getContentSettings().getRuleDataObject();
if(rd){
var r=rd.removeProfile(_71);
if(r){
return _1.updateRuleData();
}
}
return false;
};
_1.moveTargetedContentItem=function(_72,_73){
var rd=_1.getContentSettings().getRuleDataObject();
if(rd){
if(rd.moveProfile(_72,_73)){
return _1.updateRuleData();
}
}
return false;
};
_1.updateRuleData=function(){
var rd=_1.getContentSettings().getRuleDataObject();
if(rd){
_1.getContentSettings().setRuleData(rd);
_1.getDialogNavigator().updateContentAreas();
return true;
}
return false;
};
_1.saveEditModeProfile=function(){
var cs=_1.getContentSettings();
var rdo=cs.getRuleDataObject();
if(rdo){
var emp=rdo.getEditModeProfile();
if(emp){
if(emp.isChanged()){
cs.setChanged(true);
}
return rdo.saveEditModeProfile();
}
}
return false;
};
_1.discardEditModeProfile=function(){
var cs=_1.getContentSettings();
if(cs.getRuleDataObject()){
if(cs.getRuleDataObject().getEditModeProfile()){
cs.getRuleDataObject().discardEditModeProfile();
return true;
}
}
return false;
};
_1.openAppearanceEditor=function(_74,id){
id=PznWCMContent.removeValuePrefix(id);
_1.openDialog({url:_74+id,title:"&nbsp;",callbackFn:_1.dialogContentEdit});
};
_1.openDialog=function(_75){
var _76,w=window;
i$.xhrGet({url:_1.PznProfilerAliveUrl,responseType:"text",sync:true}).then(function(v){
if(!_75.window){
_75.window=top;
}
if(typeof _75.modal=="undefined"){
_75.modal=true;
}
if(typeof _75.autoResize=="undefined"){
_75.autoResize=true;
}
_76=new wpModules.dialog.Dialog(_75);
_76.open();
},function(e){
w.onbeforeunload=undefined;
_1.xhrJsonError({error:e,message:"Error session has timed out"});
});
return _76;
};
_1.displayMessage=function(_77,_78,id){
var _79="";
var _7a="";
var _7b="";
if(!_78||_78==_1.MSG_TYPE_ERROR){
_79="";
_7a="lotusIconMsgError";
_7b=_1.escapeHTML(_1.nls["error_alt_text"]);
}else{
if(_78==_1.MSG_TYPE_INFO){
_79="lotusInfo";
_7a="lotusIconMsgInfo";
_7b=_1.escapeHTML(_1.nls["info_alt_text"]);
}else{
if(_78==_1.MSG_TYPE_WARNING){
_79="lotusWarning";
_7a="lotusIconMsgWarning";
_7b=_1.escapeHTML(_1.nls["warning_alt_text"]);
}else{
if(_78==_1.MSG_TYPE_SUCCESS){
_79="lotusSuccess";
_7a="lotusIconMsgSuccess";
_7b=_1.escapeHTML(_1.nls["success_alt_text"]);
}
}
}
}
var _7c=[];
_7c.push("<div class=\"lotusMessage2 ",_79,"\">");
_7c.push("<img id=\"alertImg\" alt=\"",_7b,"\" src=\"",_1.getContextPath(),"/images/blank.gif\" class=\"lotusIcon ",_7a,"\">");
_7c.push("<span class=\"lotusAltText\">",_7b,":</span>");
_7c.push("<div class=\"lotusMessageBody\" >",_77,"</div>");
_7c.push("<a id=\"alert_close_link\" title=\"",_1.escapeHTML(_1.nls["close_alt_text"]),"\" role=\"button\" class=\"lotusDelete\" href=\"\" onclick=\"PznUIUtils.hideMessage();return false;\">");
_7c.push("<img id=\"alert_close_img\" src=\"",_1.getContextPath(),"/images/blank.gif\" alt=\"",_1.escapeHTML(_1.nls["close_alt_text"]),"\">");
_7c.push("<span class=\"lotusAltText\">X</span>");
_7c.push("</a>");
_7c.push("</div>");
_1.getDialogNavigator().messageDiv.innerHTML=_7c.join("");
_1.showItem(_1.getDialogNavigator().messageDiv);
_1.resize();
if(id){
_1._currentMessageId=id;
}else{
_1._currentMessageId=null;
}
};
_1.hideMessage=function(id){
if(id&&id!=_1._currentMessageId){
return;
}
_1.getDialogNavigator().messageDiv.innerHTML="";
_1.hideItem(_1.getDialogNavigator().messageDiv);
_1.resize();
_1._currentMessageId=null;
};
_1.showHideItem=function(_7d){
var _7e=false;
if(_7d){
if(_1.isItemHidden(_7d)){
_1.showItem(_7d);
_7e=true;
}else{
_1.hideItem(_7d);
}
_1.resize();
}
return _7e;
};
_1.showItem=function(_7f){
if(_7f){
i$.removeClass(_7f,"pznDialogElementDisplayNone");
}
};
_1.hideItem=function(_80){
if(_80){
i$.addClass(_80,"pznDialogElementDisplayNone");
}
};
_1.isItemHidden=function(_81){
if(_81){
return i$.hasClass(_81,"pznDialogElementDisplayNone");
}
};
_1.showTooltip=function(_82,_83){
if(_83){
if(i$.isIE){
_1.showTooltipForIE11(_82,_83);
}else{
var _84=_82.getBoundingClientRect();
console.log("bounds.top = "+_84.top);
_83.style.top=_82.offsetTop-25+"px";
if(_1.isRTL()){
if(_83.children[0]&&i$.hasClass(_83.children[0],"pznSgmntTooltipPointerLeft")){
i$.removeClass(_83.children[0],"pznSgmntTooltipPointerLeft");
i$.addClass(_83.children[0],"pznSgmntTooltipPointerRight");
}
var dlg=i$.query("[class='pznDialogMainContent']");
if(dlg&&dlg.length>0&&dlg[0]){
_83.style.right=(dlg[0].getBoundingClientRect().right-_84.left+10)+"px";
}
}else{
if(_83.children[0]&&i$.hasClass(_83.children[0],"pznSgmntTooltipPointerRight")){
i$.removeClass(_83.children[0],"pznSgmntTooltipPointerRight");
i$.addClass(_83.children[0],"pznSgmntTooltipPointerLeft");
}
_83.style.left=(_84.right+20)+"px";
}
}
_1.showItem(_83);
_83.focus();
}
};
_1.showTooltipForIE11=function(_85,_86){
var obj=_85,rtl=_1.isRTL(),_87=obj.offsetWidth,top=0,_88=0;
if(!isNaN(obj.offsetHeight)){
top+=obj.offsetHeight;
}
while(obj&&!isNaN(obj.offsetTop)&&!isNaN(obj.offsetLeft)){
top+=obj.offsetTop-obj.scrollTop;
_88+=obj.offsetLeft-obj.scrollLeft;
obj=obj.offsetParent;
}
var pr;
if(rtl){
pr=_88+_87;
_88=pr-_86.offsetWidth;
if(_1.isRTL()){
if(_86.children[0]&&i$.hasClass(_86.children[0],"pznSgmntTooltipPointerLeft")){
i$.removeClass(_86.children[0],"pznSgmntTooltipPointerLeft");
i$.addClass(_86.children[0],"pznSgmntTooltipPointerRight");
}
}else{
if(_86.children[0]&&i$.hasClass(_86.children[0],"pznSgmntTooltipPointerRight")){
i$.removeClass(_86.children[0],"pznSgmntTooltipPointerRight");
i$.addClass(_86.children[0],"pznSgmntTooltipPointerLeft");
}
}
}
var _89={x:32,y:-46};
if(_89){
if(_89.x){
_88+=(rtl)?-_89.x:_89.x;
}
if(_89.y){
top+=_89.y;
}
if(top<0){
top=0;
}
if(_88<0){
_88=0;
}
if(pr&&pr<_88+_86.offsetWidth){
_88-=(_88+_86.offsetWidth-pr);
}
}
_86.style.top=(top+7)+"px";
if(rtl){
var dlg=i$.query("[class='pznDialogMainContent']");
if(dlg&&dlg.length>0&&dlg[0]){
_88=(dlg[0].getBoundingClientRect().right-_88+10);
}
_86.style.right=_88+"px";
}else{
_86.style.left=_88+"px";
}
};
_1.hideTooltip=function(_8a,_8b){
if(_8b){
_1.hideItem(_8b);
}
};
_1.resize=function(){
_1.initWidth();
if(window.resize){
window.resize();
}
};
_1.initWidth=function(){
if(!_1._langWidthSet){
var _8c=_1._locale,_8d=window.resize,_8e=380;
if(!_8c){
return;
}
if(_8c.indexOf("de")==0){
_8e=420;
}else{
if(_8c.indexOf("el")==0){
_8e=425;
}
}
if(_8d){
_8d({width:_8e});
_1._langWidthSet=true;
}else{
var _8f=_1.getIframe();
if(_8f){
_8f.style.width=_8e+"px";
i$.addOnLoad(function(){
window.setTimeout(function(){
_1.resize();
},10);
},window);
}
}
}
};
_1.setContentItem=function(id){
var nav=_1.getDialogNavigator();
if(id&&id!=""){
if(nav.isShowingSpecified()){
ok=_1.getContentSettings().setContentId(id);
nav.updateContentAreas();
}else{
if(nav.isShowingTargeted()){
_1.getContentSettings().getRuleDataObject().getEditModeProfile().setName(id);
nav.updateContentAreas();
}
}
}else{
_1.displayMessage(_1.escapeHTML(_1.nls["message_invalid_content_selection"]),_1.MSG_TYPE_WARNING);
}
};
_1.dialogContentEdit=function(dr){
_1._contentEdited=true;
_1.getDialogNavigator().updateContentAreas();
};
_1.dialogDefaultTargetedContentSelection=function(dr){
if(dr&&dr[0]){
if(dr[0].selectedId){
var rd=_1.getContentSettings().getRuleDataObject();
if(!rd){
rd=PznRuleData.getInstanceWithDefaultTemplate();
}
rd.setOtherwise(dr[0].selectedId);
_1.getContentSettings().setRuleData(rd);
_1.getDialogNavigator().updateContentAreas();
}else{
_1.displayMessage(_1.escapeHTML(_1.nls["message_invalid_content_selection"]),_1.MSG_TYPE_WARNING);
}
}
};
_1.openPresentationTemplateSelection=function(){
var _90=null;
if(_1.getContentSettings().getPresentationTemplateId()!=null){
_90=_1.PresentationTemplateSelectorPOCURL+"&selection="+_1.getContentSettings().getPresentationTemplateId();
}else{
_90=_1.PresentationTemplateSelectorPOCURL;
}
_1.openDialog({url:_90,title:_1.escapeHTML(_1.nls["replace_presentation_template_dialog_title"]),callbackFn:function(dr){
if(dr&&dr[0]&&dr[0].selectedId){
if(_1.getContentSettings().setPresentationTemplateId(dr[0].selectedId)){
_1.getDialogNavigator().updateContentAreas();
}
}
}});
};
_1.openComponentSelection=function(){
var _91=null;
if(_1.getContentSettings().getComponentId()!=null){
_91=_1.ComponentSelectorPOCURL+"&selection="+_1.getContentSettings().getComponentId();
}else{
_91=_1.ComponentSelectorPOCURL;
}
_1.openDialog({url:_91,title:_1.escapeHTML(_1.nls["replace_component_dialog_title"]),callbackFn:function(dr){
if(dr&&dr[0]&&dr[0].selectedId){
if(_1.getContentSettings().setComponentId(dr[0].selectedId)){
_1.getDialogNavigator().updateContentAreas();
}
}
}});
};
_1.openContentEditor=function(_92){
_92=PznWCMContent.removeValuePrefix(_92);
var _93=PznWCMStorage.get(_92);
PznWCMStorage.remove(_92);
_1.openDialog({url:_1.ContentEditorPOCURL+_92,title:_1.escapeHTML(_1.nls["edit_content_dialog_title"])+"&nbsp;"+_93.getTitle(),callbackFn:_1.dialogContentEdit});
};
_1.openContentSelector=function(_94){
var _95=(_1.getContentSettings().getContentId()!=null)?_1.ContentSelectorPOCURL+"&selection="+_1.getContentSettings().getContentId():_1.ContentSelectorPOCURL;
var _96=(_94)?_1.escapeHTML(_1.nls["replace_content_dialog_title"]):_1.escapeHTML(_1.nls["sel_content_item"]);
_1.openDialog({url:_95,title:_96,callbackFn:function(dr){
if(dr&&dr[0]&&dr[0].selectedId){
_1.setContentItem(dr[0].selectedId);
}
}});
};
_1.openAddContentTargetDialog=function(){
_1.openDialog({url:_1.ContentSelectorPOCURL,title:_1.escapeHTML(_1.nls["add_content_target_dialog_title"]),callbackFn:function(dr){
if(dr&&dr[0]&&dr[0].selectedId){
_1.addNewTargetedItem(dr[0].selectedId);
}
}});
};
_1.addNewTargetedItem=function(_97){
_1.getContentSettings().setChanged(true);
_1.getDialogNavigator().showTargetingOverview(_97);
};
_1.openaddcontentDefaultTarget=function(){
_1.openDialog({url:_1.ContentSelectorPOCURL,title:_1.escapeHTML(_1.nls["add_content_target_dialog_title"]),callbackFn:_1.dialogDefaultTargetedContentSelection});
};
_1.openPopupHelp=function(_98,_99){
var o=_1._popupHelpDialog;
if(o!=null){
o.close();
o=null;
}
var od=false,_9a={templateStyle:"help",callbackFn:function(){
_1._popupHelpDialog=null;
},autoPosition:_98,};
if(_99=="pznctSegment"){
_9a.title=_1.escapeHTML(_1.nls["segments_title"]);
_9a.markup=_1.escapeHTML(_1.nls["segments_popup_help"]);
_9a.learnMore={url:_1.learnMoreSegmentsUrl,width:700,height:780};
_9a.metrics={width:200};
od=true;
}else{
if(_99.indexOf("Appearance")>-1){
_9a.title=_1.escapeHTML(_1.nls["pzn_popup_help_appearance"]);
_9a.markup=_1.escapeHTML(_1.nls["appearance_popup_help"]);
_9a.metrics={width:200};
od=true;
}
}
if(od){
_1._popupHelpDialog=_1.openDialog(_9a);
}
};
_1.openLearnMoreWindow=function(_9b){
window.open(_9b,"","location=no,menubar=no,scrollbars=yes,status=no,toolbar=no,height=600,width=800",false);
};
_1.refreshPage=function(_9c){
if(_9c&&_9c.portletWindowId&&_9c.pageId){
if(i$.isIE&&i$.isIE<10){
_1.getViewAreaWindow().location=_1.getPreviewContentUrl(null,_9c.portletWindowId,_9c.pageId);
}else{
window.top.location=_1.getPreviewContentUrl(null,_9c.portletWindowId,_9c.pageId);
}
}else{
if(window.parent){
window.parent.location.reload(true);
}
}
};
_1.closeDialog=function(_9d){
_1._autoClosed=false;
if(_1.isContentEdited()){
if(_9d){
_9d.ctwindow=window;
_9d.refresh=true;
}else{
_9d={refresh:true,ctwindow:window};
}
}
window.closeDialog(_9d);
};
_1.onClose=function(_9e){
var _9f=i$.fromPath(_1.PATH_AUTO_CLOSE_REFRESH,false,window);
if(_9f){
if(_9e){
_9e.refresh=_9f.refresh;
_9e.ctwindow=_9f.ctwindow;
}else{
_9e=_9f;
}
i$.toPath(_1.PATH_AUTO_CLOSE_REFRESH,null,window);
}
if(_9e){
if(_9e.ctwindow){
_9e.ctwindow.onbeforeunload=undefined;
}
if(_9e.refresh){
_1.refreshPage(_9e);
}
}
};
_1.xhrJsonError=function(_a0){
var _a1=_a0.error.xhr.getResponseHeader("Content-Type")||"";
if((_a1.indexOf("text/html")==0)||(_a0.error.xhr.status==401)){
window.setTimeout(function(){
_1.refreshPage();
},0);
}
if(_a0.message&&console){
console.log(_a0.message);
}
};
_1.preventCache=function(_a2){
_a2+=(_a2?"&":"")+"ct.preventCache="+new Date().getTime();
return _a2;
};
})();
(function(){
PznContentSettings=function(_a3){
this.changed=false;
this.confirmCancel=true;
this.confirmNotTargeted=true;
this.pocURL=_a3;
this.ruleDataObj=null;
this.origJson=null;
this.jsonObj=null;
var _a4=this;
_a3=(i$.isIE)?PznUIUtils.preventCache(_a3):_a3;
i$.xhrGet({url:_a3,responseType:"json",sync:true}).then(function(v){
_a4.jsonObj=v.data;
},function(e){
PznUIUtils.xhrJsonError({error:e,message:"Error trying to load the PZN Content Settings feed for content item"});
});
};
PznContentSettings.TYPE_CONTENT="content";
PznContentSettings.TYPE_ELEMENT="element";
PznContentSettings.TYPE_COMPONENT="component";
PznContentSettings.TYPE_SUMMARY="summary";
PznContentSettings.TYPE_ALTERNATE="alternate";
PznContentSettings.MODE_ABS="abs";
PznContentSettings.MODE_RULE="rule";
PznContentSettings.MODE_REL="rel";
PznContentSettings.MODE_CONTEXTUAL="contextual";
PznContentSettings.LISTEN_TO_NONE="none";
PznContentSettings.LISTEN_TO_SELF="self";
PznContentSettings.LISTEN_TO_OTHER="other";
PznContentSettings.HIDDEN_SPOT_ID="LRP:HIDDEN";
PznContentSettings.PAGE_DEFAULT_CONTENT_ID="LRP:DEFAULT";
PznContentSettings.isLrpId=function(id){
return (id==PznContentSettings.HIDDEN_SPOT_ID||id==PznContentSettings.PAGE_DEFAULT_CONTENT_ID);
};
PznContentSettings.prototype={getType:function(){
if(this.jsonObj){
return this.jsonObj.type;
}
return null;
},setType:function(_a5){
if(this.jsonObj.type!=_a5){
this.jsonObj.type=_a5;
this.setChanged(true);
return true;
}
return false;
},getContentMode:function(){
if(this.jsonObj){
return this.jsonObj.contentMode;
}
return null;
},setContentMode:function(_a6){
if(_a6==PznContentSettings.MODE_CONTEXTUAL){
if(this.jsonObj.contentMode!=PznContentSettings.MODE_ABS){
this.jsonObj.contentMode=PznContentSettings.MODE_ABS;
this.jsonObj.relativePath=null;
this.setChanged(true);
}
this.setListenTo(PznContentSettings.LISTEN_TO_OTHER);
}else{
if(_a6==PznContentSettings.MODE_ABS){
if(this.getContentMode()!=PznContentSettings.MODE_ABS){
this.jsonObj.contentMode=PznContentSettings.MODE_ABS;
this.jsonObj.relativePath=null;
this.setChanged(true);
}
this.setListenTo(PznContentSettings.LISTEN_TO_NONE);
}else{
if(_a6==PznContentSettings.MODE_RULE){
if(this.getContentMode()!=PznContentSettings.MODE_RULE){
this.jsonObj.contentMode=PznContentSettings.MODE_RULE;
this.jsonObj.relativePath=null;
this.setChanged(true);
}
this.setListenTo(PznContentSettings.LISTEN_TO_NONE);
}else{
if(_a6==PznContentSettings.MODE_REL){
if(this.getContentMode()!=PznContentSettings.MODE_REL){
this.jsonObj.contentMode=PznContentSettings.MODE_REL;
this.setChanged(true);
}
this.setListenTo(PznContentSettings.LISTEN_TO_NONE);
}
}
}
}
},getContentId:function(){
if(this.jsonObj){
return this.jsonObj.contentId;
}
return null;
},setContentId:function(id){
if(!id||id.length<1){
return false;
}
if(this.jsonObj.contentId!=id){
this.jsonObj.contentId=id;
this.setChanged(true);
}
return true;
},getRelativePath:function(){
if(this.jsonObj){
return this.jsonObj.relativePath;
}
return null;
},setRelativePath:function(rp){
if(this.jsonObj.relativePath!=rp){
this.setContentMode(PznContentSettings.MODE_REL);
this.jsonObj.relativePath=rp;
this.setChanged(true);
return true;
}
return false;
},getRuleDataObject:function(){
if(this.ruleDataObj!=null){
return this.ruleDataObj;
}
if(this.jsonObj&&this.jsonObj.ruleData&&this.jsonObj.ruleData.length>0){
var _a7=i$.fromJson(this.jsonObj.ruleData);
this.ruleDataObj=new PznRuleData(_a7);
return this.ruleDataObj;
}
return null;
},toStringArray:function(_a8){
var _a9=new Array();
var len=_a8.length;
for(var i=0;i<len;i++){
_a9.push(i$.toJson(_a8[i]));
}
return _a9;
},setRuleData:function(_aa){
if(_aa){
if(_aa.toJson){
this.jsonObj.ruleData=_aa.toJson();
this.ruleDataObj=_aa;
this.setChanged(true);
return true;
}else{
this.jsonObj.ruleData=i$.toJson(_aa);
this.setChanged(true);
return true;
}
}
return false;
},getComponentId:function(){
if(this.jsonObj){
return this.jsonObj.componentId;
}
return null;
},setComponentId:function(id){
if(this.jsonObj.componentId!=id){
this.jsonObj.componentId=id;
this.jsonObj.presentationTemplateId=null;
if(id){
this.setType(PznContentSettings.TYPE_COMPONENT);
}
this.setChanged(true);
return true;
}
return false;
},getListenTo:function(){
if(this.jsonObj){
return this.jsonObj.listenTo;
}
return null;
},setListenTo:function(_ab){
if(this.getListenTo()!=_ab){
this.jsonObj.listenTo=_ab;
this.setChanged(true);
}
},getPresentationTemplateId:function(){
if(this.jsonObj){
return this.jsonObj.presentationTemplateId;
}
return null;
},setPresentationTemplateId:function(id){
if(this.jsonObj.presentationTemplateId!=id){
this.jsonObj.presentationTemplateId=id;
if(id){
this.setType(PznContentSettings.TYPE_ALTERNATE);
}
this.jsonObj.componentId=null;
this.setChanged(true);
return true;
}
return false;
},getElementName:function(){
if(this.jsonObj){
return this.jsonObj.elementName;
}
return null;
},setElementName:function(_ac){
if(this.jsonObj.elementName!=_ac){
this.setModeSpecified();
this.jsonObj.elementName=_ac;
this.jsonObj.type=PznContentSettings.TYPE_ELEMENT;
this.setChanged(true);
return true;
}
return false;
},isSpecified:function(){
return (this.getContentMode()!=PznContentSettings.MODE_RULE&&this.getListenTo()==PznContentSettings.LISTEN_TO_NONE);
},isContextual:function(){
return (this.getContentMode()!=PznContentSettings.MODE_RULE&&(this.getListenTo()!=PznContentSettings.LISTEN_TO_NONE));
},isTargeted:function(){
return (this.getContentMode()==PznContentSettings.MODE_RULE);
},setModeSpecified:function(){
this.setContentMode(PznContentSettings.MODE_ABS);
},setModeContextual:function(){
this.setContentMode(PznContentSettings.MODE_CONTEXTUAL);
},setModeTargeted:function(){
this.setContentMode(PznContentSettings.MODE_RULE);
},setChanged:function(_ad){
this.changed=_ad;
this.confirmCancel=_ad;
},isChanged:function(){
return this.changed;
},cancel:function(){
if(this.isChanged()){
if(this.confirmCancel){
PznUIUtils.displayMessage(PznUIUtils.nls["message_unsaved_changes"],PznUIUtils.MSG_TYPE_WARNING);
this.confirmCancel=false;
return false;
}
if(this.origJson){
this.jsonObj=i$.fromJson(this.origJson);
}
}
return true;
},save:function(_ae){
var nav=PznUIUtils.getDialogNavigator();
if(this.isTargeted()&&!nav.isShowingTargeted()&&this.confirmNotTargeted){
var msg;
if(nav.isShowingContextual()){
msg=PznUIUtils.nls["message_targeted_to_contextual"];
}else{
msg=PznUIUtils.nls["message_targeted_to_specified"];
}
PznUIUtils.displayMessage(msg,PznUIUtils.MSG_TYPE_WARNING);
this.confirmNotTargeted=false;
this.confirmCancel=false;
return false;
}
if(!this.getType()){
this.setType(PznContentSettings.TYPE_CONTENT);
}
if(nav.isShowingContextual()){
this.setModeContextual();
this.jsonObj.ruleData=null;
this.jsonObj.contentId=null;
}else{
if(nav.isShowingTargeted()){
this.setModeTargeted();
this.setRuleData(this.getRuleDataObject());
this.jsonObj.contentId=null;
}else{
if(nav.isShowingSpecified()){
this.setModeSpecified();
this.jsonObj.ruleData=null;
}
}
}
if(this.jsonObj){
var _af=this;
var _b0=i$.toJson(this.jsonObj,false);
var _b1={success:false};
var _b2=i$.toJson(SegmentSelector.previousState);
i$.xhrPut({url:PznUIUtils.openSegLibStateSubmitUrl+"?"+PznUIUtils.openSegLibStateSubmitParamName+"="+_b2,sync:true}).then(function(v){
console.log("posted");
},function(e){
console.log("post state returned error:"+e);
});
i$.xhrPost({url:this.pocURL,headers:{"Content-Type":"application/json"},postData:_b0,responseType:"json",sync:true}).then(function(v){
_b1.success=true;
_b1.jsonCheck=(i$.toJson(v.data)==_b0);
_b1.responseText=v.data;
if(_b1.jsonCheck){
_af.setChanged(false);
}
_ae(_b1);
},function(e){
_b1.error=e.data;
_ae(_b1);
});
return true;
}
return false;
}};
PznRuleData=function(_b3){
this.rdObj=_b3;
this.editModeProfile=null;
};
PznRuleData.getInstanceWithDefaultTemplate=function(){
var obj=new PznRuleData(null);
obj.rdObj={profileList:[],contentProfiler:{profiles:[]}};
return obj;
};
PznRuleData.prototype={toJson:function(){
return i$.toJson(this.rdObj);
},getJsonObject:function(){
return this.rdObj;
},setJsonObject:function(obj){
this.rdObj=obj;
},setProfileList:function(pl){
if(this.rdObj){
this.rdObj.profileList=pl;
return true;
}
return false;
},getProfileList:function(){
if(this.rdObj&&this.rdObj.profileList){
return this.rdObj.profileList;
}
return [];
},updateProfileList:function(){
var _b4=new Array();
this.setProfileList(_b4);
var _b5=this.getProfiles();
var len=_b5.length;
for(var i=0;i<len;i++){
var _b6=_b5[i].predicate.conditions;
var _b7=_b6.length;
for(var j=0;j<_b7;j++){
var _b8=_b6[j].right.name;
var _b9=_b8.split(".");
var _ba=_b9[0];
var _bb=_b9[1];
if(!this.isInProfileList(_ba)){
var _bc={};
_bc.profiler=_ba;
_bc.referencedProfiles=[_bb];
_b4.push(_bc);
}else{
this.addSegmentToProfileList(_ba,_bb);
}
}
}
return _b4;
},isInProfileList:function(_bd){
var pl=this.getProfileList();
var len=pl.length;
for(var i=0;i<len;i++){
if(pl[i].profiler==_bd){
return true;
}
}
return false;
},isInReferencedProfiles:function(_be,_bf){
var len=_bf.length;
for(var i=0;i<len;i++){
if(_bf[i]==_be){
return true;
}
}
return false;
},addSegmentToProfileList:function(_c0,_c1){
var pl=this.getProfileList();
var len=pl.length;
for(var i=0;i<len;i++){
if((pl[i].profiler==_c0)&&(!this.isInReferencedProfiles(_c1,pl[i].referencedProfiles))){
pl[i].referencedProfiles.push(_c1);
}
}
return pl;
},setOtherwise:function(_c2){
if(this.rdObj){
if(!this.rdObj.contentProfiler){
this.rdObj.contentProfiler={};
}
_c2=PznWCMContent.addPrefix(_c2,PznWCMConstants.PREFIX_ITEM);
this.rdObj.contentProfiler.otherwise=_c2;
}
},getOtherwise:function(){
return (this.rdObj&&this.rdObj.contentProfiler&&this.rdObj.contentProfiler.otherwise)||null;
},getEditModeProfile:function(){
return this.editModeProfile;
},setEditModeProfile:function(_c3,_c4){
this.editModeProfile=new PznEditModeProfile(_c3);
if(_c3==PznWCMConstants.NEW){
this.editModeProfile.setName(_c4);
this.editModeProfile.setOperator("or");
this.editModeProfile.setConditions([]);
}else{
if(_c3==PznWCMConstants.DEFAULT){
var _c5=null;
if(this.getOtherwise()&&this.getOtherwise().length>0){
_c5=this.getOtherwise().slice(0);
}
this.editModeProfile.setName(_c5);
}else{
var _c6=this.getProfiles()[_c3];
if(_c6){
this.editModeProfile.setName(_c6.name.slice(0));
this.editModeProfile.setOperator(_c6.predicate.operator.slice(0));
var c=_c6.predicate.conditions;
if(c&&c.length>0){
c=_c6.predicate.conditions.slice(0);
}else{
c=[];
}
this.editModeProfile.setConditions(c);
}
}
}
},saveEditModeProfile:function(){
var _c7=false;
if(this.editModeProfile){
var pos=this.editModeProfile.getPosition();
var _c8=this.editModeProfile.getName();
var _c9=this.editModeProfile.getConditions();
var _ca=this.editModeProfile.getOperator();
if(pos==PznWCMConstants.DEFAULT){
if(_c8){
this.setOtherwise(_c8);
_c7=true;
}
}else{
if(_c9&&_c9.length>0){
if(pos==PznWCMConstants.NEW){
this.addProfile(_c8,_c9,_ca);
}else{
this.setProfileName(pos,_c8);
this.setProfileConditions(pos,_c9);
this.setProfileOperator(pos,_ca);
}
_c7=true;
}else{
PznUIUtils.displayMessage(PznUIUtils.escapeHTML(PznUIUtils.nls["message_add_content_item"]),PznUIUtils.MSG_TYPE_WARNING);
}
}
if(_c7){
this.discardEditModeProfile();
}
}
return _c7;
},discardEditModeProfile:function(){
this.editModeProfile=null;
},setProfiles:function(_cb){
if(this.rdObj){
if(!this.rdObj.contentProfiler){
this.rdObj.contentProfiler={};
}
this.rdObj.contentProfiler.profiles=_cb;
this.updateProfileList();
return true;
}
return false;
},getProfiles:function(){
if(this.rdObj&&this.rdObj.contentProfiler&&this.rdObj.contentProfiler.profiles){
return this.rdObj.contentProfiler.profiles;
}
return [];
},setProfileName:function(_cc,_cd){
if(this.rdObj){
var p=this.getProfiles()[_cc];
if(p){
p.name=_cd;
return true;
}
}
return false;
},setProfileOperator:function(_ce,_cf){
if(this.rdObj){
var p=this.getProfiles()[_ce];
if(p){
if(!p.predicate){
p.predicate={};
}
p.predicate.operator=_cf;
return true;
}
}
return false;
},setProfileConditions:function(_d0,_d1){
if(this.rdObj){
var p=this.getProfiles()[_d0];
if(p){
if(!p.predicate){
p.predicate={};
}
p.predicate.conditions=_d1;
this.updateProfileList();
return true;
}
}
return false;
},addProfile:function(_d2,_d3,_d4){
if(!_d2||!_d3){
return -1;
}
if(!_d4){
_d4="or";
}
_d2=PznWCMContent.addPrefix(_d2,PznWCMConstants.PREFIX_ITEM);
var np={name:_d2,predicate:{operator:_d4,conditions:_d3}};
var l=this.getProfiles().push(np);
this.updateProfileList();
return l;
},removeProfile:function(pos){
if(pos>=0&&this.getProfiles().length>0){
this.getProfiles().splice(pos,1);
this.updateProfileList();
return true;
}
return false;
},moveProfile:function(_d5,_d6){
var pa=this.getProfiles();
var len=pa.length;
if(len>0&&_d5<len&&_d6<len){
var mi=pa.splice(_d5,1)[0];
pa.splice(_d6,0,mi);
return true;
}
return false;
},getEditingPosition:function(){
if(this.editModeProfile){
return this.editModeProfile.getPosition();
}
return null;
},getContentIdAtPosition:function(pos){
if(typeof pos!=="undefined"){
if(pos==PznWCMConstants.DEFAULT){
return PznWCMContent.removeValuePrefix(this.getOtherwise());
}else{
if(!isNaN(pos)){
profiles=this.getProfiles();
if(profiles.length>pos){
return PznWCMContent.removeValuePrefix(profiles[pos].name);
}
}
}
}
return null;
}};
PznEditModeProfile=function(_d7){
this._pos=_d7;
this._changed=false;
this._confirmCancel=true;
};
PznEditModeProfile.prototype={getPosition:function(){
return this._pos;
},getName:function(){
return this.name;
},setName:function(_d8){
_d8=PznWCMContent.addPrefix(_d8,PznWCMConstants.PREFIX_ITEM);
if(this.name&&this.name!=_d8){
this._changed=true;
}
this.name=_d8;
},getOperator:function(){
if(this.predicate){
return this.predicate.operator;
}
return null;
},setOperator:function(_d9){
if(!this.predicate){
this.predicate={};
}
if(this.predicate.operator&&this.predicate.operator!=_d9){
this._changed=true;
}
this.predicate.operator=_d9;
},getConditions:function(){
if(this.predicate){
return this.predicate.conditions;
}
return null;
},setConditions:function(_da){
if(!this.predicate){
this.predicate={};
}
if(this.predicate.conditions){
this._changed=true;
}
this.predicate.conditions=_da;
if(_da.length>0){
PznUIUtils.hideMessage();
}
},isChanged:function(){
return this._changed;
},isConfirmCancel:function(){
return this._confirmCancel;
},setConfirmCancel:function(_db){
this._confirmCancel=_db;
}};
})();
(function(){
PznWCMConstants=function(){
};
PznWCMConstants.DEFAULT="default";
PznWCMConstants.NEW="new";
PznWCMConstants.PREFIX_ITEM="ITEM:";
PznWCMConstants.VALUE_PREFIX_ARRAY=["wcmrest:","ITEM:"];
PznWCMStorage=function(){
};
PznWCMStorage._store={};
PznWCMStorage.get=function(id){
id=PznWCMContent.removeValuePrefix(id);
var pdc=(id==PznContentSettings.PAGE_DEFAULT_CONTENT_ID);
if(pdc&&PznUIUtils._pageDefaultContentId){
id=PznUIUtils._pageDefaultContentId;
}
var c=PznWCMStorage._store[id],_dc=PznContentSettings.isLrpId(id);
if(!c){
if(_dc){
c=new PznLRPContent(id);
}else{
c=new PznWCMContent(id);
PznWCMStorage._store[id]=c;
}
}
if(!_dc&&c.isContentLink()){
var _dd=c.getLinkAlternate();
if(_dd&&_dd.getId()){
c=PznWCMStorage.get(_dd.getId());
}else{
throw "PznWCMStorage Error : ContentLink : could not get id of linked content item";
}
}
if(pdc){
c.setPageDefault(true);
}else{
c.setPageDefault(false);
}
return c;
};
PznWCMStorage.remove=function(id){
id=PznWCMContent.removeValuePrefix(id);
delete PznWCMStorage._store[id];
};
PznLRPContent=function(id){
this.id=id;
};
PznLRPContent.prototype={getId:function(){
return this.id;
},getTitle:function(){
if(this.id==PznContentSettings.HIDDEN_SPOT_ID){
return PznUIUtils.escapeHTML(PznUIUtils.nls["hidden_spot_title"]);
}else{
if(this.id==PznContentSettings.PAGE_DEFAULT_CONTENT_ID){
return PznUIUtils.escapeHTML(PznUIUtils.nls["page_default_content_title"]);
}
}
return false;
},isAvailable:function(){
return this.id!=undefined&&this.id!=null&&this.id!="";
},isPageDefault:function(){
return (this.id==PznContentSettings.PAGE_DEFAULT_CONTENT_ID);
},setPageDefault:function(b){
}};
PznWCMContent=function(id){
this.jsonObj=null;
this.otherObj=null;
this.links=null;
this.available=false;
this.pdc=false;
if(PznUIUtils.pocUrlBase.indexOf("?")==-1){
var _de=PznUIUtils.pocUrlBase+"?uri=wcmrest:item/"+id+"&mime-type=application/json";
}else{
var _de=PznUIUtils.pocUrlBase+"&uri=wcmrest:item/"+id+"&mime-type=application/json";
}
var _df=this;
i$.xhrGet({url:_de,responseType:"json",sync:true}).then(function(v){
_df.jsonObj=v.data;
_df.links=(!_df.jsonObj.entry||!_df.jsonObj.entry.link)?null:_df.jsonObj.entry.link;
_df.available=true;
},function(e){
_df.available=false;
PznUIUtils.xhrJsonError({error:e,message:"Error trying to load the WCM Content Item feed for '"+id+"'"});
});
};
PznWCMContent.removeValuePrefix=function(v){
if(PznContentSettings.isLrpId(v)){
return v;
}
if(v){
var len=PznWCMConstants.VALUE_PREFIX_ARRAY.length;
for(var i=0;i<len;i++){
if(v.indexOf(PznWCMConstants.VALUE_PREFIX_ARRAY[i])>-1){
return v.substring(PznWCMConstants.VALUE_PREFIX_ARRAY[i].length);
}
}
}
return v;
};
PznWCMContent.addPrefix=function(str,_e0){
if(PznContentSettings.isLrpId(str)){
return str;
}
if(str.indexOf(_e0)!=0){
str=_e0+str;
}
return str;
};
PznWCMContent.prototype={isAvailable:function(){
return this.available;
},isPageDefault:function(){
return this.pdc;
},isContentLink:function(){
return (this.getType()==="ContentLink");
},setPageDefault:function(b){
this.pdc=b;
},getId:function(){
return (!this.jsonObj||!this.jsonObj.entry||typeof this.jsonObj.entry.id==="undefined")?null:PznWCMContent.removeValuePrefix(this.jsonObj.entry.id);
},getTitle:function(){
if(this.jsonObj||this.jsonObj.entry||this.jsonObj.entry.title){
var t=this.jsonObj.entry.title;
if(typeof t.value!=="undefined"){
return t.value;
}else{
return t;
}
}
return null;
},getDisplayTitle:function(){
return (!this.jsonObj||!this.jsonObj.entry||!this.jsonObj.entry.displayTitle||typeof this.jsonObj.entry.displayTitle.value==="undefined")?null:this.jsonObj.entry.displayTitle.value;
},getSummary:function(){
return (!this.jsonObj||!this.jsonObj.entry||!this.jsonObj.entry.summary||typeof this.jsonObj.entry.summary.value==="undefined")?null:this.jsonObj.entry.summary;
},getName:function(){
return (!this.jsonObj||!this.jsonObj.entry||typeof this.jsonObj.entry.name==="undefined")?null:this.jsonObj.entry.name;
},getType:function(){
return (!this.jsonObj||!this.jsonObj.entry||typeof this.jsonObj.entry.type==="undefined")?null:this.jsonObj.entry.type;
},getUpdated:function(){
return (!this.jsonObj||!this.jsonObj.entry||typeof this.jsonObj.entry.updated==="undefined")?null:this.jsonObj.entry.updated;
},getAuthorName:function(){
if(!this.jsonObj||!this.jsonObj.entry||typeof this.jsonObj.entry.author==="undefined"){
return null;
}
var a=this.jsonObj.entry.author[0];
if(a){
return a.name;
}
return null;
},getWorkflow:function(){
if(this.workflowObj){
return this.workflowObj;
}
var _e1=this.getLinkValue("workflow");
if(_e1!=null){
this.workflowObj=new PznWCMLinkObject(_e1);
return this.workflowObj;
}
return null;
},getWorkflowStage:function(){
if(this.workflowStageObj){
return this.workflowStageObj;
}
var _e2=this.getLinkValue("workflow-stage");
if(_e2!=null){
this.workflowStageObj=new PznWCMLinkObject(_e2);
return this.workflowStageObj;
}
return null;
},getWorkflowState:function(){
var c=this.getCategories();
for(var i in c){
if(c[i].scheme=="wcmrest:workflowState"){
return c[i].label;
}
}
return null;
},getCategories:function(){
if(!this.jsonObj||!this.jsonObj.entry||typeof this.jsonObj.entry.category==="undefined"){
return null;
}
return this.jsonObj.entry.category;
},getAuthoringTemplate:function(){
if(this.templateObj){
return this.templateObj;
}
var _e3=this.getLinkValue("content-template");
if(!_e3){
_e3=this.getOther().getAuthoringTemplateLink();
}
if(_e3!=null){
this.templateObj=new PznWCMLinkObject(_e3);
return this.templateObj;
}
return null;
},getLibrary:function(){
if(this.libraryObj){
return this.libraryObj;
}
var _e4=this.getLinkValue("library");
if(_e4!=null){
this.libraryObj=new PznWCMLinkObject(_e4);
return this.libraryObj;
}
return null;
},getLinkAlternate:function(){
if(this.linkAlternateObj){
return this.linkAlternateObj;
}
var _e5=this.getLinkValue("alternate");
if(_e5!=null){
this.linkAlternateObj=new PznWCMLinkObject(_e5);
return this.linkAlternateObj;
}
return null;
},getLinkValue:function(_e6){
if(this.links!=null){
var len=this.links.length;
for(var i=0;i<len;i++){
if(this.links[i].rel==_e6){
return this.links[i].href;
}
}
}
return null;
},getProject:function(){
if(this.projectObj){
return this.projectObj;
}
var _e7=this.getLinkValue("project");
if(_e7!=null){
this.projectObj=new PznWCMLinkObject(_e7);
return this.projectObj;
}
return null;
},getOther:function(){
if(!this.otherObj){
if(this.getId()){
this.otherObj=new PznWCMOther(PznWCMContent.removeValuePrefix(this.getId()));
}
}
return this.otherObj;
}};
PznWCMLinkObject=function(_e8){
this.jsonObj=null;
var _e9=this;
i$.xhrGet({url:""+_e8+"?mime-type=application/json",responseType:"json",sync:true}).then(function(v){
_e9.jsonObj=v.data;
},function(e){
PznUIUtils.xhrJsonError({error:e,message:"Error trying to load the WCM Link Item feed"});
});
};
PznWCMLinkObject.prototype={getId:function(){
return (!this.jsonObj||!this.jsonObj.entry||typeof this.jsonObj.entry.id==="undefined")?null:PznWCMContent.removeValuePrefix(this.jsonObj.entry.id);
},getTitle:function(){
if(this.jsonObj||this.jsonObj.entry||this.jsonObj.entry.title){
var t=this.jsonObj.entry.title;
if(typeof t.value!=="undefined"){
return t.value;
}else{
return t;
}
}
return null;
},getName:function(){
return (!this.jsonObj||!this.jsonObj.entry||typeof this.jsonObj.entry.name==="undefined")?null:this.jsonObj.entry.name;
},getType:function(){
return (!this.jsonObj||!this.jsonObj.entry||typeof this.jsonObj.entry.type==="undefined")?null:this.jsonObj.entry.type;
},getDisplayTitle:function(){
return (!this.jsonObj||!this.jsonObj.entry||!this.jsonObj.entry.displayTitle||typeof this.jsonObj.entry.displayTitle.value==="undefined")?null:this.jsonObj.entry.displayTitle.value;
},getSummary:function(){
return (!this.jsonObj||!this.jsonObj.entry||!this.jsonObj.entry.summary||typeof this.jsonObj.entry.summary.value==="undefined")?null:this.jsonObj.entry.summary;
},getUpdated:function(){
return (!this.jsonObj||!this.jsonObj.entry||typeof this.jsonObj.entry.updated==="undefined")?null:this.jsonObj.entry.updated;
}};
PznWCMOther=function(id){
this.id=id;
this.jsonObj=null;
this.fallbackJsonObj=null;
var _ea="&prop=titlepathArray&prop=title&prop=dateLastMod&prop=dateCreated&prop=workflowStatus";
if(PznUIUtils.pocUrlBase.indexOf("?")==-1){
var _eb=PznUIUtils.pocUrlBase+"?uri=wcm:oid:"+id+_ea;
}else{
var _eb=PznUIUtils.pocUrlBase+"&uri=wcm:oid:"+id+_ea;
}
var _ec=this;
i$.xhrGet({url:_eb,responseType:"json",sync:true}).then(function(v){
_ec.jsonObj=v.data;
},function(e){
PznUIUtils.xhrJsonError({error:e,message:"Error trying to load the Extra WCM Content Item detail feed for '"+id+"'"});
});
};
PznWCMOther.prototype={getFallbackJson:function(){
if(this.fallbackJsonObj){
return this.fallbackJsonObj;
}
var _ed=this;
var url=PznUIUtils.pocUrlBase+"wcmrest/Content/"+this.id+"?mime-type=application%2Fjson";
i$.xhrGet({url:url,responseType:"json",sync:true}).then(function(v){
_ed.fallbackJsonObj=v.data;
},function(e){
PznUIUtils.xhrJsonError({error:e,message:"Error trying to load the fallback WCM Content Item detail feed for '"+id+"'"});
});
return this.fallbackJsonObj;
},getLocation:function(){
if(this.jsonObj&&this.jsonObj.titlepathArray){
var loc="";
var len=this.jsonObj.titlepathArray.length;
for(var i=0;i<len-1;i++){
if(i!=0){
loc+="&nbsp;&gt;&nbsp;";
}
loc+=this.jsonObj.titlepathArray[i];
}
return loc;
}
return null;
},getId:function(){
if(this.jsonObj&&this.jsonObj.id){
return this.jsonObj.id;
}
return null;
},getTitle:function(){
if(this.jsonObj&&this.jsonObj.title){
return this.jsonObj.title;
}
return null;
},getType:function(){
if(this.jsonObj&&this.jsonObj.type){
return this.jsonObj.type;
}
return null;
},getDateLastModified:function(){
if(this.jsonObj&&this.jsonObj.dateLastMod){
return this.jsonObj.dateLastMod;
}
return null;
},getDateCreated:function(){
if(this.jsonObj&&this.jsonObj.dateCreated){
return this.jsonObj.dateCreated;
}
return null;
},getWorkflowStatus:function(){
if(this.jsonObj&&this.jsonObj.workflowStatus){
return this.jsonObj.workflowStatus;
}
return null;
},isPublished:function(){
var p=this.getWorkflowStatus();
if(p=="1"){
return true;
}
return false;
},getAuthoringTemplateLink:function(){
var _ee=null;
var _ef=this.getFallbackJson();
if(_ef&&_ef.entry&&_ef.entry.link){
i$.each(_ef.entry.link,function(_f0,_f1,_f2){
if(_f0.rel=="content-template"){
_ee=_f0.href;
}
});
}
return _ee;
}};
})();
(function(){
PznDialogNavigator=function(){
this.messageDiv=i$.byId("pznDisplayMessageDiv");
this.specifiedDiv=i$.byId("pznSpecifiedContentDiv");
this.contextualDiv=i$.byId("pznContextualContentDiv");
this.contextualUnresolvedDiv=i$.byId("pznContextualUnresolvedDiv");
this.targetedDiv=i$.byId("pznTargetedContentDiv");
this.targetingOverviewDiv=i$.byId("pznTargetingOverviewDiv");
this.contentDisplayedStrEl=i$.byId("pznContentDisplayedStr");
this.pznSegmentSelectorDiv=i$.byId("pznSegmentSelectorDiv");
this.currentEditPos=null;
this.bannerContentTypeDiv=i$.byId("pznSelectContentTypeDiv");
this.bannerTargetingOverviewDiv=i$.byId("pznTargetingOverviewBannerDiv");
this.bannerSegmentSelectorDiv=i$.byId("pznSegmentSelectorBannerDiv");
this.currentDiv=null;
};
PznDialogNavigator.prototype={showTemplateAction:function(_f3){
var _f4,_f5;
if((PznUIUtils.getContentSettings().getPresentationTemplateId()==null)&&(PznUIUtils.getContentSettings().getComponentId()==null)){
_f5="templateDefault";
_f4="templateEdit";
}else{
_f5="templateEdit";
_f4="templateDefault";
}
var _f6=_f3.getElementsByTagName("li");
var len=_f6.length;
for(var i=0;i<len;i++){
var _f7=_f6[i];
if(_f7.id.indexOf(_f4,_f7.id.length-_f4.length)!=-1){
PznUIUtils.hideItem(_f7);
}else{
if(_f7.id.indexOf(_f5,_f7.id.length-_f5.length)!=-1){
PznUIUtils.showItem(_f7);
}
}
}
},showDialogArea:function(_f8,_f9){
PznUIUtils.hidePopupMenu();
if(this.currentDiv!=_f9){
this.hideAllContent();
this.showContentTypeBanner();
PznUIUtils.showItem(_f9);
this.showTemplateAction(_f9);
this.currentDiv=_f9;
if(_f8){
this.setContentDisplayedStr(_f8);
}
PznUIUtils.hideMessage();
this.updateContentAreas();
}
},showSpecified:function(){
this.showDialogArea(PznUIUtils.getContentOptions()[0].text,this.specifiedDiv);
},isShowingTargetedSpot:function(){
return this.currentDiv==this.targetedDiv;
},isShowingTargeted:function(){
return (this.currentDiv==this.targetedDiv)||(this.currentDiv==this.targetingOverviewDiv);
},isShowingSegments:function(){
return (this.currentDiv==this.pznSegmentSelectorDiv);
},showContextual:function(){
if(PznUIUtils.getContextualContentId()){
this.showDialogArea(PznUIUtils.getContentOptions()[1].text,this.contextualDiv);
}else{
this.showDialogArea(PznUIUtils.getContentOptions()[1].text,this.contextualUnresolvedDiv);
}
},showTargeted:function(){
this.showDialogArea(PznUIUtils.getContentOptions()[2].text,this.targetedDiv);
},showTargetingOverview:function(_fa,_fb){
this.currentEditPos=_fb;
PznUIUtils.hidePopupMenu();
var rdo=PznUIUtils.getContentSettings().getRuleDataObject();
if(!rdo){
rdo=PznRuleData.getInstanceWithDefaultTemplate();
}
if(_fa&&typeof _fb=="undefined"){
if(!rdo.getOtherwise()){
rdo.setOtherwise(_fa);
rdo.setEditModeProfile(PznWCMConstants.DEFAULT);
}else{
rdo.setEditModeProfile(PznWCMConstants.NEW,_fa);
}
}
if(!rdo.getEditModeProfile()&&typeof _fb!=="undefined"){
rdo.setEditModeProfile(_fb);
}
if(rdo.getEditModeProfile()){
this.hideAllContent();
this.showTargetingOverviewBanner();
PznUIUtils.showItem(this.targetingOverviewDiv);
this.currentDiv=this.targetingOverviewDiv;
this.updateContentAreas();
}
},getCurrentTargetedItemEditPosition:function(){
if(!this.isShowingEditTargetedItem()){
this.currentEditPos=null;
}
return this.currentEditPos;
},showSegmentSelector:function(){
PznUIUtils.hidePopupMenu();
this.hideAllContent();
this.showSegmentSelectorBanner();
PznUIUtils.showItem(this.pznSegmentSelectorDiv);
this.currentDiv=this.pznSegmentSelectorDiv;
this.updateContentAreas();
},updateContentAreas:function(){
if(this.isShowingSpecified()&&PznUIUtils.getContentSettings()){
var _fc=PznUIUtils.getContentSettings().getContentId(),_fd={wcmContentProps:null,divId:"pznSpecifiedContentItemTitle",desc:PznUIUtils.escapeHTML(PznUIUtils.nls["specified_item_desc"])};
if(!_fc){
_fc=PznUIUtils.getContextualContentId();
if(_fc){
PznUIUtils.getContentSettings().setContentId(_fc);
}
}
if(_fc){
var _fe=PznWCMStorage.get(_fc);
_fd.wcmContentProps=_fe;
PznUIUtils.renderContentTitle(_fd);
PznUIUtils.renderButtons(_fe);
PznUIUtils.renderTabPanelControls("pznSpecifiedPanelTab",_fe);
PznUIUtils.renderContentAppearance("pznSpecifiedContentAppearance");
PznUIUtils.renderContentProperties(_fe,"pznSpecifiedContentProperties");
}else{
PznUIUtils.renderContentTitle(_fd);
PznUIUtils.renderButtons(null);
}
}else{
if(this.isShowingContextual()){
var _fc=PznUIUtils.getContextualContentId();
if(_fc){
var _fe=PznWCMStorage.get(_fc),_fd={wcmContentProps:_fe,divId:"pznContextualContentItemTitle",desc:PznUIUtils.escapeHTML(PznUIUtils.nls["contextual_item_desc"]),learnMoreId:"openLearnMoreContextual",learnMoreUrl:PznUIUtils.learnMoreContextualUrl};
PznUIUtils.renderContentTitle(_fd);
PznUIUtils.renderButtons(_fe);
PznUIUtils.renderTabPanelControls("pznContextualContentPanelTab",_fe);
PznUIUtils.renderContentAppearance("pznContextualContentAppearance");
PznUIUtils.renderContentProperties(_fe,"pznContextualContentProperties");
}
}else{
if(this.isShowingUnresolvedContextual()){
PznUIUtils.renderContentAppearance("pznContextualContentUresolvedAppearance");
}else{
if(this.isShowingTargetedSpot()){
var _ff=i$.byId("pznDialogTargetedInfo");
if(PznUIUtils.isInfoMode()){
PznUIUtils.showItem(_ff);
}else{
PznUIUtils.hideItem(_ff);
}
PznUIUtils.renderContentAppearance("pznTargetedContentAppearance");
PznUIUtils.renderButtons(null);
PznTargetedItems.renderTargetedItems();
}else{
if(this.isShowingEditTargetedItem()){
var rdo=PznUIUtils.getContentSettings().getRuleDataObject(),_fc=null,_100=i$.byId("pznDialogTargetedItemSegmentsInfo");
if(PznUIUtils.isInfoMode()){
PznUIUtils.showItem(_100);
}else{
PznUIUtils.hideItem(_100);
}
if(rdo&&rdo.getEditModeProfile()){
_fc=rdo.getEditModeProfile().getName();
}
if(_fc){
var d=PznUIUtils.escapeHTML(PznUIUtils.nls["target_specified_content_desc"]);
if(_fc==PznContentSettings.HIDDEN_SPOT_ID){
d=PznUIUtils.escapeHTML(PznUIUtils.nls["hide_spot_desc"]);
}else{
if(_fc==PznContentSettings.PAGE_DEFAULT_CONTENT_ID){
d=PznUIUtils.escapeHTML(PznUIUtils.nls["use_page_default_desc"]);
}
}
var _101=PznWCMStorage.get(_fc),_fd={wcmContentProps:_101,divId:"pznTargetingOverviewContentItemTitle",desc:d};
PznUIUtils.renderContentTitle(_fd);
PznUIUtils.renderButtons(_101);
PznUIUtils.renderTabPanelControls("pznTargetedSpotEditPanelTab",_101);
PznUIUtils.renderContentProperties(_101,"pznTargetingOverviewContentItemProperties");
PznTargetedItemEdit.renderSegmentsArea();
}else{
this.showTargeted();
}
}else{
if(this.isShowingSegments()){
PznTargetedItemEdit.renderSelectSegments();
}
}
}
}
}
}
PznUIUtils.resize();
},isShowingContextual:function(){
return this.currentDiv==this.contextualDiv;
},isShowingUnresolvedContextual:function(){
return this.currentDiv==this.contextualUnresolvedDiv;
},isShowingSpecified:function(){
return this.currentDiv==this.specifiedDiv;
},isShowingEditTargetedItem:function(){
return this.currentDiv==this.targetingOverviewDiv;
},setContentDisplayedStr:function(str){
this.contentDisplayedStrEl.innerHTML=str;
},showContentTypeBanner:function(){
PznUIUtils.hideItem(this.bannerTargetingOverviewDiv);
PznUIUtils.showItem(this.bannerContentTypeDiv);
},showTargetingOverviewBanner:function(){
PznUIUtils.hideItem(this.bannerContentTypeDiv);
PznUIUtils.showItem(this.bannerTargetingOverviewDiv);
},showSegmentSelectorBanner:function(){
var _102=PznUIUtils.getContentSettings().getRuleDataObject(),_103=PznUIUtils.nls["targeted_item_title"];
if(_102){
var p=_102.getEditModeProfile();
if(p){
var ci=PznWCMStorage.get(p.getName());
if(ci&&ci.getTitle()){
_103=ci.getTitle();
}
}
}
SegmentSelector.setBannerTitle(_103);
PznUIUtils.hideItem(this.bannerTargetingOverviewDiv);
PznUIUtils.showItem(this.bannerSegmentSelectorDiv);
},hideAllContent:function(){
PznUIUtils.hideItem(this.specifiedDiv);
PznUIUtils.hideItem(this.contextualDiv);
PznUIUtils.hideItem(this.contextualUnresolvedDiv);
PznUIUtils.hideItem(this.targetedDiv);
PznUIUtils.hideItem(this.targetingOverviewDiv);
PznUIUtils.hideItem(this.pznSegmentSelectorDiv);
PznUIUtils.hideItem(this.bannerSegmentSelectorDiv);
}};
})();
(function(){
PznTargetedItems=function(){
};
var _104=i$.byId("pznTargetedItemsList"),_105=i$.byId("pznTargetedAddContentBtn"),_106=i$.byId("pznTargetedAddDefaultContentBtn"),_107=i$.byId("pznDefaultTargetedItem"),_108=i$.byId("pznTargetedSpotBtns");
PznTargetedItems.ERR_CONTENT_NOT_FOUND=["<span class=\"pznDialogErrorText\">",PznUIUtils.escapeHTML(PznUIUtils.nls["message_targeting_content_not_found"]),"</span>"].join("");
PznTargetedItems.getRuleDataObject=function(){
if(!PznUIUtils.getContentSettings()){
return null;
}
return PznUIUtils.getContentSettings().getRuleDataObject();
};
PznTargetedItems.renderTargetedItems=function(){
ruleData=PznTargetedItems.getRuleDataObject();
if(ruleData==null){
var _109=null;
if(PznUIUtils.getContextualContentId()){
_109=PznUIUtils.getContextualContentId();
}else{
if(PznUIUtils.getContentSettings().getContentId()){
_109=PznUIUtils.getContentSettings().getContentId();
}
}
if(_109){
PznUIUtils.showItem(_108);
PznUIUtils.showItem(_105);
PznUIUtils.hideItem(_106);
ruleData=PznRuleData.getInstanceWithDefaultTemplate();
ruleData.setOtherwise(_109);
PznUIUtils.getContentSettings().setRuleData(ruleData);
PznTargetedItems.renderDefaultTargetedItem();
}else{
PznUIUtils.hideItem(_108);
PznUIUtils.showItem(_106);
}
}else{
PznUIUtils.showItem(_108);
PznUIUtils.hideItem(_106);
var _10a=ruleData.getProfileList();
var _10b=ruleData.getProfiles();
var _10c=[];
var len=_10b.length;
for(var j=0;j<len;j++){
var _10d=_10b[j].name;
var _10e=_10b[j].predicate.operator;
var _10f=_10b[j].predicate.conditions;
var _110={};
_110.contentId=_10d;
_110.segmentsStr="<div class=\"pznDialogFontComputed11px pznDialogDefaultColorText\">";
_10c.push(_110);
var clen=_10f.length;
for(var i=0;i<clen;i++){
if(PznContentSettings.isLrpId(_10d)||_10d.indexOf("ITEM")==0){
var _111=_10f[i].right.name;
var _112=PznTargetedItems.getOperator(_10f[i].operator);
if(_111.indexOf(".")>0){
var _113=_111.substring(_111.indexOf(".")+1,_111.length);
if(i>0&&_10e=="and"){
if(_112){
_110.segmentsStr+=" + ";
}else{
_110.segmentsStr+=" ";
}
}
if(i==0){
if(_10e=="and"){
_110.segmentsStr+="<div class=\"pznDialogSegmentGreyBox pznDialogSegmentAndBox\">";
}else{
_110.segmentsStr+="<div class=\"pznDialogSegmentOrBox\">";
}
}
if(_10e=="and"&&_112){
_110.segmentsStr+=PznUIUtils.escapeHTML(_113);
}else{
var _114="pznDialogSegmentGreyBox pznDialogSegmentBoxMargin pznDialogSegmentIsBox";
var _115="";
if(!_112){
_115="- ";
_114="pznDialogSegmentIsNotBox";
if(_10e=="and"){
_114+=" pznDialogSegmentIsNotBoxInner";
}else{
_114+=" pznDialogSegmentBoxMargin";
}
}
_110.segmentsStr+="<div class=\""+_114+"\">"+_115+PznUIUtils.escapeHTML(_113)+"</div>";
}
}
}
}
_110.segmentsStr+="</div>";
_110.segmentsStr+="</div>";
}
PznTargetedItems.renderTargetedItemsList(_10c);
PznTargetedItems.renderDefaultTargetedItem();
}
};
PznTargetedItems.getOperator=function(_116){
if(_116=="includes"){
return true;
}else{
return false;
}
};
PznTargetedItems.getTitleTextClasses=function(_117){
var c="pznDialogFontComputed12px pznDialogBoldFont pznDialogDefaultColorText";
if(_117&&!PznContentSettings.isLrpId(_117.getId())&&_117.getOther()&&!_117.getOther().isPublished()){
c+=" pznDialogItalicFont";
}
return c;
};
PznTargetedItems.titleAppendTemplate="<span class=\"pznDialogFontComputed11px pznDialogGreyText\">&nbsp;&nbsp;$text</span>";
PznTargetedItems.renderTargetedItemsList=function(_118){
var _119=_118.length,out=[],_11a=PznUIUtils.getContextPath(),_11b=PznUIUtils.escapeHTML(PznUIUtils.nls["moveUp"]),_11c=PznUIUtils.escapeHTML(PznUIUtils.nls["moveDown"]),_11d=PznUIUtils.escapeHTML(PznUIUtils.nls["remove_btn"]),_11e;
if(_119>1){
_11e="pznDialogSectionRuleCellWithUpDown";
}else{
_11e="pznDialogSectionRuleCell";
}
if(_119>0){
out.push("<div class=\"pznDialogAreaHeader pznDialogFontComputed12px\">");
out.push("<span>",PznUIUtils.escapeHTML(PznUIUtils.nls["targeted_content"]),"&nbsp;</span>");
if(_119>1&&PznUIUtils.isInfoMode()){
out.push("<br/><h3 class=\"pznDescription pznDialogElementDisplayInline\">",PznUIUtils.escapeHTML(PznUIUtils.nls["targeted_reorder"]),"</h3>");
}
out.push("</div>");
out.push("<div class=\"pznDialogTargetedItemsContainer\">");
for(var pos=0;pos<_119;pos++){
var _11f=PznWCMContent.removeValuePrefix(_118[pos].contentId);
var _120=PznWCMStorage.get(_11f);
var _121="";
if(_120.isAvailable()){
_121=_120.getTitle();
}
if(_121){
_121=PznUIUtils.escapeHTML(_121);
}else{
_121=PznTargetedItems.ERR_CONTENT_NOT_FOUND;
}
out.push("<div class=\"pznDialogTargetedItem\" id=\"",_11f,"\"");
if(pos==0){
out.push(" style=\"border-top-width:0");
if(_119==1){
out.push(";border-bottom-width:0");
}
out.push("\" ");
}
if(pos==(_119-1)){
out.push(" style=\"border-bottom-width:0\" ");
}
out.push(" >");
if(_119>1){
out.push("<div class=\"pznDialogMoveContainer\">");
out.push("<div class=\"pznDialogMoveRules\">");
if(pos!=0){
out.push("<a href=\"\" onclick=\"PznUIUtils.moveTargetedContentItem(",pos,",",(pos-1),");return false;\" alt=\"",_11b,"\">");
out.push("<img alt=\"\" src=\"",_11a,"/images/blank.gif\" class=\"pznDialogUpIcon\" alt=\"",_11b,"\" />");
out.push("</a>");
}else{
out.push("<span><img src=\"",_11a,"/images/blank.gif\" class=\"pznDialogUpDisabledIcon\" alt=\"",_11b,"\" /></span>");
}
out.push("</div>");
out.push("<div class=\"pznDialogMoveRules\">");
if(pos<(_119-1)){
out.push("<a href=\"\" onclick=\"PznUIUtils.moveTargetedContentItem(",pos,",",(pos+1),");return false;\" alt=\"",_11c,"\">");
out.push("<img src=\"",_11a,"/images/blank.gif\" class=\"pznDialogDownIcon\" alt=\"",_11c,"\" />");
out.push("</a>");
}else{
out.push("<span><img src=\"",_11a,"/images/blank.gif\" class=\"pznDialogDownDisabledIcon\" alt=\"",_11c,"\" /></span>");
}
out.push("</div>");
out.push("</div>");
}
out.push("<div class=\"",_11e,"\" >");
out.push("<input type=\"image\" alt=\"",_11d,"\" class=\"lotusRight pznDialogTargetedDeleteIcon\" href=\"\" onclick=\"PznUIUtils.deleteTargetedContentItem(",pos,");return false;\" src=\"",_11a,"/images/remove.gif\" />");
out.push("<a href=\"\" onclick=\"PznUIUtils.getDialogNavigator().showTargetingOverview(null,",pos,");return false;\">");
out.push("<span class=\"pznDialogElementDisplayBlock\"");
out.push("<header class=\"pznDialogSectionHeader\">");
out.push("<div class=\"pznDialogTargetedItemTitleArea\">");
if(PznContentSettings.isLrpId(_11f)){
out.push("<img src=\"",_11a,"/images/blank.gif\" alt=\"\" class=\"pznDialogIconLRPContent\">");
}else{
out.push("<img src=\"",_11a,"/images/blank.gif\" alt=\"\" class=\"pznDialogTargetedContentIcon pznDialogIconWcmContent\">");
}
out.push("<span class=\"",PznTargetedItems.getTitleTextClasses(_120),"\">",_121,"</span>");
out.push("</div>");
out.push("</header>");
out.push("<div class=\"pznDialogSectionContent\" id=\"pznDialogSectionContent",_11f,"\">");
out.push(_118[pos].segmentsStr);
out.push("</div>");
out.push("</span>");
out.push("</a>");
out.push("</div>");
out.push("<div style=\"clear:both\"></div>");
out.push("</div>");
}
out.push("</div>");
}else{
out.push("<div class=\"pznDialogDefaultTargetedItemSpace\">&nbsp;</div>");
}
_104.innerHTML=out.join("");
};
PznTargetedItems.renderDefaultTargetedItem=function(){
var out=["<div class=\"pznDialogAreaHeader pznDialogFontComputed12px pznDialogSectionSpacing\">",PznUIUtils.escapeHTML(PznUIUtils.nls["targeted_default_content"])];
if(PznUIUtils.isInfoMode()){
out.push("<br/><h3 class=\"pznDescription pznDialogElementDisplayInline\">",PznUIUtils.escapeHTML(PznUIUtils.nls["default_content_desc"]),"</h3>");
}
out.push("</div>");
var _122=PznTargetedItems.getRuleDataObject();
if(_122&&_122.getOtherwise()!=null){
var _123=PznWCMContent.removeValuePrefix(_122.getOtherwise());
var _124=PznWCMStorage.get(_123);
var _125;
if(_124.isAvailable()){
_125=_124.getTitle();
}
if(_125){
_125=PznUIUtils.escapeHTML(_125);
}else{
_125=PznTargetedItems.ERR_CONTENT_NOT_FOUND;
}
out.push("<div class=\"pznDialogTargetedItemsContainer pznDialogWhiteBackground\" id=\"",_123,"\">");
out.push("<div class=\"pznDialogSectionRuleCell pznDialogTargetedDefault\" >");
out.push("<a href=\"\" onclick=\"PznUIUtils.getDialogNavigator().showTargetingOverview(null,'",PznWCMConstants.DEFAULT,"');return false;\">");
out.push("<span class=\"pznDialogElementDisplayBlock\"");
out.push("<header class=\"pznDialogSectionHeader\">");
out.push("<div class=\"pznDialogTargetedItemTitleArea\">");
if(PznContentSettings.isLrpId(_123)){
out.push("<img src=\"",PznUIUtils.getContextPath(),"/images/blank.gif\" alt=\"\" class=\"pznDialogIconLRPContent\">");
}else{
out.push("<img src=\"",PznUIUtils.getContextPath(),"/images/blank.gif\" alt=\"\" class=\"pznDialogTargetedContentIcon pznDialogIconWcmContent\">");
}
out.push("<span class=\"",PznTargetedItems.getTitleTextClasses(_124),"\">",_125,"</span>");
out.push("</div>");
out.push("</header>");
out.push("</span>");
out.push("</a>");
out.push("</div>");
out.push("</div>");
}else{
PznUIUtils.showItem(_106);
}
_107.innerHTML=out.join("");
};
})();
(function(){
PznTargetedItemEdit=function(){
};
PznTargetedItemEdit.EL_TARGETED_ITEM_SEGMENTS_CONTAINER=i$.byId("pznSegmentsContainer");
PznTargetedItemEdit.EL_TARGETED_ITEM_MULTI_SEGMENTS_CONTAINER=i$.byId("pznMultiSegmentsContainer");
PznTargetedItemEdit.EL_TARGETED_ITEM_SEGMENT_CHECKBOX=i$.byId("pznMatchAllSegmentsCheckbox");
PznTargetedItemEdit.EL_TARGETED_ITEM_DONE_BTN=i$.byId("pznEditTargetedItemDoneBtn");
PznTargetedItemEdit.EL_TARGETED_ITEM_SEGMENT_DIV=i$.byId("pznMatchAllSegmentsDiv");
PznTargetedItemEdit.EL_TARGETED_ITEM_SEGMENT_TEXT=i$.byId("pznMatchAllSegmentsText");
PznTargetedItemEdit.tabPanelSegments="pznTargetedSpotEditSegments";
PznTargetedItemEdit.tabPanelDetails="pznTargetedSpotEditDetails";
PznTargetedItemEdit.tabLinkSegments="pznDialogPanelTabSegmentsLink";
PznTargetedItemEdit.tabLinkDetails="pznDialogPanelTabDetailsLink";
PznTargetedItemEdit.activeTabPanelId="pznTargetedSpotEditSegments";
PznTargetedItemEdit.getPanelId=function(tab){
if(tab.id==PznTargetedItemEdit.tabLinkSegments){
return PznTargetedItemEdit.tabPanelSegments;
}else{
return PznTargetedItemEdit.tabPanelDetails;
}
};
PznTargetedItemEdit.tabMoused=function(tab){
var _126=PznTargetedItemEdit.getPanelId(tab);
if(_126!=PznTargetedItemEdit.activeTabPanelId){
var p=tab.parentNode;
if(i$.hasClass(p,"pznDialogPanelTabActive")){
i$.removeClass(p,"pznDialogPanelTabActive");
}else{
i$.addClass(p,"pznDialogPanelTabActive");
}
}
};
PznTargetedItemEdit.tabClicked=function(tab){
var _127=PznTargetedItemEdit.getPanelId(tab);
if(_127!=PznTargetedItemEdit.activeTabPanelId){
var prev=i$.byId(PznTargetedItemEdit.activeTabPanelId);
PznUIUtils.hideItem(prev);
var tr=tab.parentNode.parentNode;
var a=tr.getElementsByTagName("a");
for(var i=0;i<a.length;i++){
i$.removeClass(a[i],"pznDialogCursorDefault");
i$.removeClass(a[i].parentNode,"pznDialogPanelTabActive");
}
i$.addClass(tab,"pznDialogCursorDefault");
i$.addClass(tab.parentNode,"pznDialogPanelTabActive");
PznTargetedItemEdit.activeTabPanelId=_127;
var cur=i$.byId(_127);
PznUIUtils.showItem(cur);
PznUIUtils.resize();
}
};
PznTargetedItemEdit.tabShowDetailsOnly=function(bool){
var sl=i$.byId(PznTargetedItemEdit.tabLinkSegments);
if(bool){
if(sl){
PznUIUtils.hideItem(sl.parentNode);
}
PznUIUtils.hideItem(i$.byId(PznTargetedItemEdit.tabPanelSegments));
PznTargetedItemEdit.activeTabPanelId="";
var dl=i$.byId(PznTargetedItemEdit.tabLinkDetails);
if(dl){
PznTargetedItemEdit.tabClicked(dl);
}
}else{
if(sl){
PznUIUtils.showItem(sl.parentNode);
PznTargetedItemEdit.tabClicked(sl);
}
}
};
PznTargetedItemEdit.getEditModeProfile=function(){
var _128=PznUIUtils.getContentSettings().getRuleDataObject();
if(_128){
return _128.getEditModeProfile();
}
return null;
};
PznTargetedItemEdit.renderSegmentsArea=function(){
var _129=PznTargetedItemEdit.getEditModeProfile();
if(!_129){
return;
}
PznTargetedItemEdit.setControlsEnabled(false);
var pos=_129.getPosition();
if(pos==PznWCMConstants.DEFAULT||typeof pos=="undefined"){
PznTargetedItemEdit.tabShowDetailsOnly(true);
PznTargetedItemEdit.setControlsEnabled(true);
}else{
PznTargetedItemEdit.EL_TARGETED_ITEM_SEGMENTS_CONTAINER.innerHTML="";
PznTargetedItemEdit.EL_TARGETED_ITEM_MULTI_SEGMENTS_CONTAINER.innerHTML="";
PznTargetedItemEdit.tabShowDetailsOnly(false);
contentSegments=_129.getConditions();
PznTargetedItemEdit.setControlsEnabled(contentSegments.length>0);
if(_129.getOperator()=="or"){
PznTargetedItemEdit.EL_TARGETED_ITEM_SEGMENT_CHECKBOX.checked=false;
PznTargetedItemEdit.createSegmentDivs(contentSegments);
}else{
PznTargetedItemEdit.EL_TARGETED_ITEM_SEGMENT_CHECKBOX.checked=true;
if(contentSegments&&contentSegments.length==1){
PznTargetedItemEdit.createSegmentDivs(contentSegments);
}else{
PznTargetedItemEdit.createMultiSegmentDivs(contentSegments);
}
}
}
};
PznTargetedItemEdit.setControlsEnabled=function(_12a){
if(_12a){
PznTargetedItemEdit.EL_TARGETED_ITEM_SEGMENT_CHECKBOX.disabled=false;
i$.addClass(PznTargetedItemEdit.EL_TARGETED_ITEM_SEGMENT_DIV,"pznDialogMouseHighlight");
i$.addClass(PznTargetedItemEdit.EL_TARGETED_ITEM_SEGMENT_TEXT,"pznDialogCursorPointer");
}else{
PznTargetedItemEdit.EL_TARGETED_ITEM_SEGMENT_CHECKBOX.disabled=true;
i$.removeClass(PznTargetedItemEdit.EL_TARGETED_ITEM_SEGMENT_DIV,"pznDialogMouseHighlight");
i$.removeClass(PznTargetedItemEdit.EL_TARGETED_ITEM_SEGMENT_TEXT,"pznDialogCursorPointer");
}
};
PznTargetedItemEdit.getSegmentNameFromId=function(id){
var _12b=id.indexOf(".");
if(_12b>0){
return id.substring(_12b+1,id.length);
}
return "";
};
PznTargetedItemEdit.renderSelectSegments=function(){
var _12c=PznTargetedItemEdit.getEditModeProfile();
if(!_12c){
return;
}
var _12d=_12c.getPosition();
var _12e=_12c.getConditions();
var _12f="";
var len=_12e.length;
for(var i=0;i<len;i++){
if(i>0){
_12f+=",";
}
_12f+=_12e[i].right.name+"."+_12e[i].operator;
}
if(PznUIUtils.openSegLibState&&PznUIUtils.openSegLibState!="undefined"&&PznUIUtils.openSegLibState.length>0){
SegmentSelector.previousState=i$.fromJson(PznUIUtils.openSegLibState);
}
SegmentSelector.selectedSegments=_12f;
SegmentSelector.showSegmentList();
};
PznTargetedItemEdit.toggleCheckBox=function(evt){
if(evt){
if(evt.stopPropagation){
evt.stopPropagation();
}else{
evt.cancelBubble=true;
}
}
if(PznTargetedItemEdit.EL_TARGETED_ITEM_SEGMENT_CHECKBOX.disabled){
return;
}
var _130=PznTargetedItemEdit.getEditModeProfile();
if(!_130){
return;
}
if(_130.getPosition()==PznWCMConstants.DEFAULT){
return;
}
if(_130.getOperator()=="and"){
_130.setOperator("or");
PznTargetedItemEdit.EL_TARGETED_ITEM_SEGMENT_CHECKBOX.checked=false;
}else{
_130.setOperator("and");
PznTargetedItemEdit.EL_TARGETED_ITEM_SEGMENT_CHECKBOX.checked=true;
}
PznTargetedItemEdit.renderSegmentsArea();
PznUIUtils.resize();
};
PznTargetedItemEdit.cancel=function(){
return true;
};
PznTargetedItemEdit.translateOperatorName=function(_131){
if(_131=="includes"){
return PznUIUtils.nls["OPERATION_IS"];
}else{
return PznUIUtils.nls["OPERATION_IS_NOT"];
}
};
PznTargetedItemEdit.addSegmentLinkTemplate=["<a class=\"pznDialogBlueLink\" tabindex=\"0\" href=\"\" ","onclick=\"PznUIUtils.getDialogNavigator().showSegmentSelector();return false;\"",">","<span id=\"$id\" class=\"pznDialogAddSegmentLink pznDialogElementDisplayBlock pznDialogMouseHighlight\">",PznUIUtils.escapeHTML(PznUIUtils.nls["add_segment_btn"]),"</span>","</a>"].join("");
PznTargetedItemEdit.singleSegmentDivTemplate=["<div id=\"segContainer$segmentIdHTML\" class=\"pznDialogTargetItemSegmentContainer\">","<div class=\"pznDialogTargetedItemSegmentItem\">","<div tabindex=\"0\" class=\"$classNames\" role=\"button\" onkeydown=\"return PznTargetedItemEdit.showOperatorMenu(this,event,$index,'$negate');\">","<a id=\"pznDialogIsIsNotComboBox$segmentIdHTML\" href=\"\" tabindex=\"-1\" class=\"pznDialogFontComputed12px pznDialogElementDisplayBlock\" aria-haspopup=\"true\" role=\"button\" aria-owns=\"pznDialogPopupMenuItemsContainer\""," onkeydown=\"return PznTargetedItemEdit.showOperatorMenu(this,event,$index,'$negate');\" "," onclick=\"PznTargetedItemEdit.showOperatorMenu(this,event,$index,'$negate');return false;\">","<span class=\"pznDialogTargetedItemSegmentItemSingleLine $hover pznDialogDefaultColorText pznDialogFontComputed11px pznDialogBoldFont\">","$segmentStatusIcon<div class=\"pznDialogTargetedItemSegmentTitle\">$segmentNameHTML</div>","<img id=\"pznDialogMenuIcon$segmentIdHTML\" class=\"pznDialogTargetedItemSegmentItemDropdownImg\" alt=\"\" src=\"$contextPath/images/blank.gif\">","<span class=\"lotusAltText\">&#9660;</span>","</span>","</a>","</div>","</div>","<div class=\"lotusClear\"></div>","</div>"].join("");
PznTargetedItemEdit.createSegmentDivs=function(_132){
PznUIUtils.showItem(PznTargetedItemEdit.EL_TARGETED_ITEM_SEGMENTS_CONTAINER);
PznUIUtils.hideItem(PznTargetedItemEdit.EL_TARGETED_ITEM_MULTI_SEGMENTS_CONTAINER);
var _133=[],len=_132.length,_134=PznUIUtils.getContextPath(),_135=PznUIUtils.escapeHTML(PznUIUtils.nls["remove_btn"]);
_133.push("<div class=\"pznDialogTargetItemSegmentsParent\" >");
_133.push(PznTargetedItemEdit.addSegmentLinkTemplate.replace(/\$id/g,"pznSegmentsContainerAddSegments"));
for(var i=0;i<len;i++){
var _136=PznUIUtils.escapeHTML(_132[i].right.name),_137=PznUIUtils.escapeHTML(PznTargetedItemEdit.getSegmentNameFromId(_132[i].right.name)),_138=PznUIUtils.escapeHTML(PznTargetedItemEdit.translateOperatorName(_132[i].operator)),out=PznTargetedItemEdit.singleSegmentDivTemplate.replace(/\$segmentIdHTML/g,_136).replace(/\$index/g,""+i).replace(/\$segmentNameHTML/g,_137).replace(/\$contextPath/g,_134);
if(_132[i].operator!="includes"){
out=out.replace(/\$classNames/g,"pznDialogSegmentControl pznDialogSegmentPink").replace(/\$segmentStatusIcon/g,"<img id=\"pznDialogNegIcon"+_136+"\" class=\"pznDialogTargetedItemSegmentImg\" alt=\"\" src=\""+_134+"/images/negateSegment.png\">").replace(/\$negate/g,"true").replace(/\$hover/g,"pznDialogTargetedItemSegmentItemNotMatch");
}else{
out=out.replace(/\$classNames/g,"pznDialogSegmentControl pznDialogSegmentGrey").replace(/\$segmentStatusIcon/g,"<img id=\"pznDialogNegIcon"+_136+"\" class=\"pznDialogTargetedItemSegmentImg\" alt=\"\" src=\""+_134+"/images/segmentIcon.png\">").replace(/\$negate/g,"false").replace(/\$hover/g,"pznDialogTargetedItemSegmentItemSingleLineMatch");
}
_133.push(out);
}
_133.push("</div>");
PznTargetedItemEdit.EL_TARGETED_ITEM_SEGMENTS_CONTAINER.innerHTML=_133.join("");
};
PznTargetedItemEdit.multiSegmentDivTemplate=["<div id=\"multiSegmentsContainer_row$segmentIdHTML\">","<div tabindex=\"0\" class=\"$classNames\"  onkeydown=\"return PznTargetedItemEdit.showOperatorMenu(this,event,$index, '$negate');\" role=\"listitem\">","<a id=\"pznDialogIsIsNotComboBox$segmentIdHTML\" tabindex=\"-1\" href=\"\" class=\"pznDialogFontComputed12px pznDialogElementDisplayBlock\""," aria-haspopup=\"true\" role=\"button\" aria-owns=\"pznDialogPopupMenuItemsContainer\" onkeydown=\"return PznTargetedItemEdit.showOperatorMenu(this,event,$index, '$negate');\" "," onclick=\"PznTargetedItemEdit.showOperatorMenu(this,event,$index,'$negate');return false;\">","<span class=\"pznDialogTargetedItemSegmentItemMultiLine pznDialogDefaultColorText pznDialogFontComputed11px pznDialogBoldFont\">","$segmentStatusIcon<div class=\"pznDialogTargetedItemSegmentTitle\">$segmentNameHTML</div>","<img id=\"pznDialogMenuIcon$segmentIdHTML\" class=\"pznDialogTargetedItemSegmentItemDropdownImg\" alt=\"\" src=\"$contextPath/images/blank.gif\">","<span class=\"lotusAltText\">&#9660;</span>","</span>","</a>","</div>","<div class=\"lotusClear\"></div>","</div>"].join("");
PznTargetedItemEdit.createMultiSegmentDivs=function(_139){
PznUIUtils.showItem(PznTargetedItemEdit.EL_TARGETED_ITEM_MULTI_SEGMENTS_CONTAINER);
PznUIUtils.hideItem(PznTargetedItemEdit.EL_TARGETED_ITEM_SEGMENTS_CONTAINER);
var _13a=PznUIUtils.getContextPath(),_13b=PznUIUtils.escapeHTML(PznUIUtils.nls["remove_btn"]),_13c=[],_13d=_139.length;
_13c.push("<div class=\"pznDialogTargetItemSegmentsParent\" >");
_13c.push(PznTargetedItemEdit.addSegmentLinkTemplate.replace(/\$id/g,"pznMultiSegmentsContainerAddSegments"));
if(_13d>0){
_13c.push("<div id=\"pznTargetItemSegmentContainer\" class=\"pznDialogTargetItemSegmentContainer\" role=\"list\">");
_13c.push("<div class=\"pznDialogTargetedItemSegmentMultiItem\">");
_13c.push("<div class=\"pznDialogSegmentGreyBox\">");
for(var i=0;i<_13d;i++){
var _13e=PznUIUtils.escapeHTML(_139[i].right.name),_13f=PznUIUtils.escapeHTML(PznTargetedItemEdit.getSegmentNameFromId(_139[i].right.name)),_140=PznUIUtils.escapeHTML(PznTargetedItemEdit.translateOperatorName(_139[i].operator)),out=PznTargetedItemEdit.multiSegmentDivTemplate.replace(/\$segmentIdHTML/g,_13e).replace(/\$segmentNameHTML/g,_13f).replace(/\$nls_REMOVE/g,_13b).replace(/\$operatorNameHTML/g,_140).replace(/\$index/g,""+i).replace(/\$contextPath/g,_13a);
if(_139[i].operator!="includes"){
out=out.replace(/\$classNames/g,"pznDialogTargetedItemSegmentItemNotMatch pznDialogSegmentControl pznDialogSegmentMultiItemNotMatch").replace(/\$segmentStatusIcon/g,"<img id=\"pznDialogNegIcon"+_13e+"\" class=\"pznDialogTargetedItemSegmentImg\" alt=\"\" src=\""+_13a+"/images/negateSegment.png\">").replace(/\$negate/g,"true");
}else{
out=out.replace(/\$classNames/g,"pznDialogMouseHighlight pznDialogSegmentControl").replace(/\$segmentStatusIcon/g,"<img id=\"pznDialogNegIcon"+_13e+"\" class=\"pznDialogTargetedItemSegmentImg\" alt=\"\" src=\""+_13a+"/images/segmentIcon.png\">").replace(/\$negate/g,"false");
}
_13c.push(out);
}
_13c.push("</div>");
_13c.push("</div>");
_13c.push("<div class=\"lotusClear\"></div>");
_13c.push("</div>");
}
_13c.push("</div>");
PznTargetedItemEdit.EL_TARGETED_ITEM_MULTI_SEGMENTS_CONTAINER.innerHTML=_13c.join("");
};
PznTargetedItemEdit.showOperatorMenu=function(_141,_142,_143,_144){
if(!PznUIUtils.isMenuAvailable(_142)){
return false;
}
var nav=PznUIUtils.getDialogNavigator();
var opt=[{text:PznUIUtils.escapeHTML(PznUIUtils.nls["segments_target_is"])},{text:PznUIUtils.escapeHTML(PznUIUtils.nls["segments_target_not"])},{text:PznUIUtils.escapeHTML(PznUIUtils.nls["segments_target_remove"])}];
if(_144=="true"){
opt[1].selected=true;
}else{
opt[0].selected=true;
}
var _145=PznUIUtils.showPopupMenu(_141,opt,_142,function(_146){
PznTargetedItemEdit.changeOperator(_146,_143);
},{x:-16},null);
return !_145;
};
PznTargetedItemEdit.changeOperator=function(_147,_148){
var _149=PznTargetedItemEdit.getEditModeProfile();
if(!_149){
return;
}
var _14a=_149.getConditions();
var i=parseInt(_148);
if(_14a.length<i){
return;
}
if(_147==2){
_14a.splice(_148,1);
}else{
if(_147==1){
_14a[_148].operator="isNot";
}else{
_14a[_148].operator="includes";
}
}
PznUIUtils.getContentSettings().getRuleDataObject().getEditModeProfile().setConditions(_14a);
PznTargetedItemEdit.renderSegmentsArea();
};
})();
(function(){
SegmentSelector=function(){
};
SegmentSelector._changed=false;
SegmentSelector._showingDesc=false;
SegmentSelector.iframeWidth="";
SegmentSelector.selectedSegments="";
SegmentSelector.jsonSegments=[];
SegmentSelector._elStore={};
SegmentSelector.managedSegments=[];
SegmentSelector.segments=[];
SegmentSelector.indexToFilterClassMap=[];
SegmentSelector.filterOptions=[];
SegmentSelector.nonManagedFilterClass="nonManagedSegmentGroupFilter";
SegmentSelector.managedFilterClass="managedSegmentGroupFilter";
SegmentSelector.libraryFilterClassSuffix="LibraryFilter";
SegmentSelector.segmentsKeyedByHtmlId=new Object();
SegmentSelector.sgmtGrpsKeyedByHtmlId=new Object();
SegmentSelector.availableSegmentDivTemplate=["<div class=\"pznDialogSegmentSelectorSegment pznDialogCursorPointer \" id=\"$segmentIDXml\" "," aria-labelledby=\"$segmentIDXmlSegmentName $segmentIDXmlAddLink\""," onmouseout=\"i$.addClass(i$.byId('$segmentIDJsAddLink'),'pznDialogTransparentText');\""," onmouseover=\"if(!i$.hasClass(i$.byId('$segmentIDXml'),'pznSelected')){i$.removeClass(i$.byId('$segmentIDJsAddLink'),'pznDialogTransparentText');}\""," onblur=\"i$.addClass(i$.byId('$segmentIDJsAddLink'),'pznDialogTransparentText');\""," onfocus=\"if(!i$.hasClass(i$.byId('$segmentIDXml'),'pznSelected')){i$.removeClass(i$.byId('$segmentIDJsAddLink'),'pznDialogTransparentText');}\""," onkeypress=\"if(event.keyCode == 13 || event.charCode == 13){ i$.byId('$segmentIDXml_TitlePane').click()}\" tabindex=\"0\" role=\"treeitem\" aria-level=\"2\" ",">","<div id=\"$segmentIDXml_TitlePane\" onclick=\"if(!i$.hasClass(i$.byId('$segmentIDXml'),'pznSelected'))SegmentSelector.addSegment('$segmentIDJs','includes');else SegmentSelector.removeSegment('$segmentIDJs','$segmentNameJs');\" role=\"button\"onkeypress=\"if(event.keyCode!=9){this.onclick();}\">","<div style=\"display:inline;height:100%;padding:0 0 0 10px\" id=\"$segmentIDXmlAddLink\" class=\"pznDialogSegmentSelectorControl lotusRight pznDialogTransparentText\" >&nbsp;",,PznUIUtils.escapeHTML(PznUIUtils.nls["add_btn"]),"&nbsp;</div>","<span id=\"$segmentIDXmlRemLink\" class=\"pznDialogSegmentSelectorControl lotusRight pznDialogElementDisplayNone\">&nbsp;",,PznUIUtils.escapeHTML(PznUIUtils.nls["remove_btn"]),"&nbsp;</span>","<span id=\"$segmentIDXmlSegmentName\" title=\"$segmentNameXml\" class=\"segmentFilter pznLabel pznDialogFontComputed12px pznSgmtTruncate pznDialogDefaultColorText\">$segmentNameXml</span>","<span class=\"pznDialogSegmentSelectorSegmentDraft\">$segmentDraftXml</span>","</div>","<div class=\"lotusClear\"></div>","</div>"].join("");
(function(){
SegmentFilter=function(_14b,_14c,_14d,_14e,_14f){
this.idx=_14b;
this.title=_14c;
this.filterClass=_14d;
this.parentIdx=_14e;
if(_14f){
this.childrenIndices=_14f;
}else{
this.childrenIndices=[];
}
if(SegmentSelector.filterOptions[_14e]){
PznUIUtils.addSegmentFilterOption(_14c,SegmentSelector.filterOptions[_14e].getTitle());
}else{
PznUIUtils.addSegmentFilterOption(_14c);
}
};
SegmentFilter.prototype={addChildIndex:function(_150){
this.childrenIndices.push(_150);
PznUIUtils.getSegmentFilterOptions()[_150].parentIndex=this.idx;
},getFilterClass:function(){
return this.filterClass;
},getChildrenIndices:function(){
return this.childrenIndices;
},getTitle:function(){
return this.title;
},getIndex:function(){
return this.idx;
},getParentIndex:function(){
return this.parentIdx;
}};
})();
SegmentSelector.showSegmentList=function(){
document.body.style.backgroundColor="#ffffff";
var _151=i$.query("div[id$=\"_Container\"]");
i$.each(_151,function(_152){
_152.innerHTML="";
PznUIUtils.showItem(_152);
});
SegmentSelector.jsonSegments=[];
i$.byId("showTargetedOverViewLinked").onclick=function(){
PznUIUtils.getDialogNavigator().showTargetingOverview(null,PznUIUtils.getDialogNavigator().getCurrentTargetedItemEditPosition());
return false;
};
this.jsonObj=null;
var self=this;
var _153=(i$.isIE)?PznUIUtils.preventCache(PznUIUtils.PznProfilerListUrl):PznUIUtils.PznProfilerListUrl;
i$.xhrGet({url:_153,responseType:"text",sync:true}).then(function(v){
self.jsonObj="{ \"rules\": "+v.data+"}";
},function(e){
PznUIUtils.xhrJsonError({error:e,message:"Error trying to load the PZN Profile List"});
});
SegmentSelector.jsonParser(i$.fromJson(self.jsonObj));
SegmentSelector.addSelectedSegments();
SegmentSelector._changed=false;
SegmentSelector.showInformation();
};
SegmentSelector.hideNonManagedSegments=function(){
PznUIUtils.hideItem(i$.byId("segments"));
};
SegmentSelector.hideManagedSegments=function(){
PznUIUtils.hideItem(i$.byId("managedSegments"));
};
SegmentSelector.showNonManagedSegments=function(){
PznUIUtils.showItem(i$.byId("segments"));
};
SegmentSelector.showManagedSegments=function(){
PznUIUtils.showItem(i$.byId("managedSegments"));
};
SegmentSelector.jsonParser=function(_154){
PznUIUtils.hideItem(i$.byId("pznSegmentProgressLoading"));
PznUIUtils.showItem(i$.byId("pznDialogSegmentsSelectorContainer"));
var _155="";
SegmentSelector.segments=[];
SegmentSelector.managedSegments=[];
PznUIUtils.clearSegmentFilterOptions();
SegmentSelector.indexToFilterClassMap=[];
SegmentSelector.filterOptions=[];
if(!SegmentSelector.previousState||SegmentSelector.previousState.length==0){
SegmentSelector.previousState={};
}
var _156=_154.rules.managed&&_154.rules.managed.length>0;
var _157=_154.rules.legacy&&_154.rules.legacy.length>0;
SegmentSelector.noSegmentsExist=false;
if(!_156&&!_157){
SegmentSelector.hideManagedSegments();
SegmentSelector.hideNonManagedSegments();
SegmentSelector.showNoSegmentsInfo();
SegmentSelector.noSegmentsExist=true;
}else{
if(_156){
if(!_157){
SegmentSelector.hideNonManagedSegments();
i$.byId("managedSegments_TitlePane").children[1].innerHTML=i$.byId("segments_TitlePane").children[1].innerHTML;
SegmentSelector.allSegmentsFilter=SegmentSelector.managedFilter=SegmentSelector.filterOptions[0]=new SegmentFilter(0,PznUIUtils.nls["filter_all_segments"],SegmentSelector.managedFilterClass);
}else{
SegmentSelector.allSegmentsFilter=SegmentSelector.filterOptions[0]=new SegmentFilter(0,PznUIUtils.nls["filter_all_segments"]);
SegmentSelector.allManagedFilter=SegmentSelector.filterOptions[1]=new SegmentFilter(1,PznUIUtils.nls["filter_managed_segments"],SegmentSelector.managedFilterClass);
}
SegmentSelector.showManagedSegments();
SegmentSelector.parseRulesPerLibrary("managedSegments_Container",_154.rules.managed);
SegmentSelector.doA11y(SegmentSelector.sgmtGrpsKeyedByHtmlId);
}
if(_157){
SegmentSelector.showNonManagedSegments();
if(!_156){
SegmentSelector.hideManagedSegments();
SegmentSelector.filterOptions[0]=new SegmentFilter(0,PznUIUtils.nls["filter_all_segments"]);
PznUIUtils.hideItem(i$.byId("pznDialogSgmtContainerTitlePaneLegacy"));
}else{
SegmentSelector.segmentsFilter=SegmentSelector.filterOptions[SegmentSelector.filterOptions.length]=new SegmentFilter(SegmentSelector.filterOptions.length,PznUIUtils.nls["filter_segments"],SegmentSelector.nonManagedFilterClass);
}
var _158=_154.rules.legacy;
var _159=i$.byId("segments_Container");
var _15a=SegmentSelector.escapeHTML(PznUIUtils.nls["prompt_seg_groups"].replace("{0}",_158.length));
_159.setAttribute("aria-label",_15a);
_159.setAttribute("role","tree");
var _15b=SegmentSelector.parseSegmentGroups("segments_Container","",_158,false);
SegmentSelector.doA11y(_15b);
}
}
var _15c=[];
if(!SegmentSelector.isSearchCriteriaDefault()){
if(SegmentSelector.previousState){
_15c=SegmentSelector.previousState.filters;
if(_15c){
i$.forEach(_15c,function(idx){
PznDialogPopupMenu.getInstance().select(idx,true);
});
}else{
PznDialogPopupMenu.getInstance().select(0,true);
PznUIUtils.handleFilterChange(0);
}
}else{
PznDialogPopupMenu.getInstance().select(0,true);
PznUIUtils.handleFilterChange(0);
}
PznDialogPopupMenu.getInstance().setSelectedFilterLabel();
if(SegmentSelector.previousState&&SegmentSelector.previousState.searchString&&SegmentSelector.previousState.searchString.length>0){
i$.byId("pznDialogSearchInput").value=SegmentSelector.previousState.searchString;
}
SegmentSelector.doTypeAhead();
if(SegmentSelector.previousState&&SegmentSelector.previousState.lastAddedSgmt){
var _15d=SegmentSelector.previousState.lastAddedSgmt.split(".")[0];
SegmentSelector.openSection(undefined,_15d);
}
}else{
PznDialogPopupMenu.getInstance().select(0,true);
if(SegmentSelector.previousState&&SegmentSelector.previousState.lastAddedSgmt){
var _15d=SegmentSelector.previousState.lastAddedSgmt.split(".")[0];
SegmentSelector.openSection(undefined,_15d);
}
}
PznUIUtils.resize();
};
SegmentSelector.doA11y=function(_15e){
var _15f=new Array();
var i=0;
i$.each(_15e,function(_160){
_15f.push(SegmentSelector.getHtmlIdFromSgmtGrpId(_160));
});
i=0;
var _161="_TitlePane";
i$.each(_15f,function(_162){
var _163=i$.byId(_162);
var _164="",_165="";
if(i<_15f.length-1){
_164=_15f[i+1]+_161;
}
if(i>0){
_165=_15f[i-1]+_161;
}
titlePaneDiv=i$.byId(_162+_161);
if(titlePaneDiv){
titlePaneDiv.setAttribute("data-a11y-first",_15f[0]+_161);
titlePaneDiv.setAttribute("data-a11y-last",_15f[_15f.length-1]+_161);
titlePaneDiv.setAttribute("data-a11y-up",_165);
titlePaneDiv.setAttribute("data-a11y-down",_164);
var _166=_15f[i]+".";
var _167=i$.query("div[id^='"+_166+"']");
if(_167&&_167.length>0){
titlePaneDiv.setAttribute("data-a11y-next",_167[0].id);
}
i++;
i$.bindDomEvt(titlePaneDiv,"keydown",function(evt){
wpModules.a11y.navigateSequence(this,evt);
});
i$.bindDomEvt(titlePaneDiv,"keydown",function(evt){
var _168=evt.target;
if(evt.keyCode==40){
var _169=_168.getAttribute("data-a11y-down");
if(_169){
var _16a=i$.byId(_169);
if(_16a){
_16a.setAttribute("aria-selected",true);
}
}
}
if(evt.keyCode==38){
var _16b=_168.getAttribute("data-a11y-up");
if(_16b){
var _16c=i$.byId(_16b);
if(_16c){
_16c.setAttribute("aria-selected",true);
}
}
}
if(evt.keyCode==39||evt.charCode==39){
var _16d=_168.id.split("_TitlePane")[0];
SegmentSelector.openSection(evt,_16d);
}
if(evt.keyCode==37||evt.charCode==37){
var _16d=_168.id.split("_TitlePane")[0];
SegmentSelector.closeSection(evt,_16d);
}
if(evt.keyCode==13||evt.charCode==13){
_168.click();
}
});
}
});
};
SegmentSelector.isSearchCriteriaDefault=function(){
var _16e=SegmentSelector.previousState.filters;
return _16e&&_16e.length==1&&_16e[0]==0&&(SegmentSelector.previousState.searchString==undefined||i$.trim(SegmentSelector.previousState.searchString).length==0||SegmentSelector.previousState.searchString=="Find Segment");
};
SegmentSelector.parseRulesPerLibrary=function(_16f,_170){
if(_170.length>0){
i$.byId(_16f).setAttribute("role","tree");
var i=SegmentSelector.filterOptions.length;
var _171=0;
for(var idx=i,_172=0;_172<_170.length;idx++,_172++){
var _173=_170[_172];
var _174=""+_173.libuuid+SegmentSelector.libraryFilterClassSuffix;
var _175=SegmentSelector.getManagedFilterIndex();
SegmentSelector.filterOptions[idx]=new SegmentFilter(idx,_173.libtitle,_174,_175);
if(SegmentSelector.filterOptions[_175]){
SegmentSelector.filterOptions[_175].addChildIndex(idx);
}
SegmentSelector.parseSegmentGroups(_16f,_173.libtitle+"/"+"Segments",_173.rules,_174,true);
_171+=_173.rules.length;
}
var _176=i$.byId("managedSegments_Container");
var _177=SegmentSelector.escapeHTML(PznUIUtils.nls["prompt_managed_seg_groups"].replace("{0}",_171));
_176.setAttribute("aria-label",_177);
_176.setAttribute("role","tree");
}
};
SegmentSelector.getCurrentLibraryTitle=function(){
var rdo=PznUIUtils.getContentSettings().getRuleDataObject();
if(rdo&&rdo.getEditModeProfile()){
contentId=rdo.getEditModeProfile().getName();
}
other=PznWCMStorage.get(contentId).getOther();
if(other.jsonObj.titlepathArray&&other.jsonObj.titlepathArray.length>1){
return other.jsonObj.titlepathArray[0];
}
return undefined;
};
SegmentSelector.parseSegmentGroups=function(_178,_179,_17a,_17b,_17c){
var _17d="_TitlePane";
var _17e=i$.byId(_178);
var _17f=new Object();
for(var i=0;i<_17a.length;i++){
var _180=_17a[i];
var _181=new Array();
var _182=SegmentSelector.escapeHTML(""+_17a[i].uuid).replace(/ /g,"_");
SegmentSelector.sgmtGrpsKeyedByHtmlId[_182]=_17a[i].uuid;
var _183=i$.createDom("div",{"id":_182,},_17e);
if(_17c){
_183.className+=" "+SegmentSelector.managedFilterClass+" "+_17b;
}else{
_183.className+=" "+SegmentSelector.nonManagedFilterClass;
_17f[_182]=_17a[i].uuid;
}
var _184=SegmentSelector.createSgmtGrpTitleBar(_182,_180);
SegmentSelector.processSegments(_182,_179,_180,_181,_17c);
var _185=i$.createDom("div",{"id":_182+"_Container","class":" pznSgmtGrpContainer pznDialogElementDisplayNone"},i$.byId(_182));
SegmentSelector.createSegmentDiv(_185,_179,_181);
SegmentSelector.createSgmtGrpInfo(_185,_180);
for(var j=0;j<_181.length;j++){
var _186=i$.byId(SegmentSelector.getHtmlIdFromSegmentId(_181[j].id));
var _187="",_188="";
if(j<_181.length-1){
_187=SegmentSelector.getHtmlIdFromSegmentId(_181[j+1].id);
}
if(j>0){
_188=SegmentSelector.getHtmlIdFromSegmentId(_181[j-1].id);
}
if(j==_181.length-1){
}
if(_186){
_186.setAttribute("data-a11y-first",SegmentSelector.getHtmlIdFromSegmentId(_181[0].id));
_186.setAttribute("data-a11y-last",SegmentSelector.getHtmlIdFromSegmentId(_181[_181.length-1].id));
_186.setAttribute("data-a11y-up",_188);
_186.setAttribute("data-a11y-down",_187);
_186.setAttribute("data-a11y-prev",_182+"_TitlePane");
i$.bindDomEvt(_186,"keydown",function(evt){
wpModules.a11y.navigateSequence(this,evt);
});
i$.bindDomEvt(_186,"keydown",function(evt){
var _189=evt.target;
if(evt.keyCode==40){
var _18a=_189.getAttribute("data-a11y-down");
var _18b=i$.byId(_18a);
if(_18b){
_18b.setAttribute("aria-selected",true);
}
}
if(evt.keyCode==38){
var _18c=_189.getAttribute("data-a11y-up");
var _18d=i$.byId(_18c);
if(_18d){
_18d.setAttribute("aria-selected",true);
}
}
});
}
}
}
return _17f;
};
SegmentSelector.createSgmtGrpInfo=function(_18e,_18f){
var id=SegmentSelector.getHtmlIdFromSgmtGrpId(_18f.uuid)+"_info";
var _190=i$.createDom("div",{"id":id,"class":" pznDialogDisplayNone"},_18e);
var _191=id+"_TitlePane";
var _192=i$.createDom("div",{"id":id+"_TitlePane","tabindex":0,"role":"treeitem","aria-expanded":false,"aria-label":SegmentSelector.escapeHTML(PznUIUtils.nls["more_details"]),"class":"pznSgmtGrpInfoHeader pznDialogGreyText pznDialogFontComputed11px","onclick":"SegmentSelector.toggleSegmentContainer(event,'"+id+"')","onKeydown":"if(event.keyCode == 13) {event.target.click();}"},_190);
i$.createDom("img",{"id":_191+"Twistee","class":"pznDialogSegmentContainerHide","alt":"","src":PznUIUtils.getContextPath()+"/images/blank.gif",},_192);
_192.innerHTML+=SegmentSelector.escapeHTML(PznUIUtils.nls["more_details"]);
var _193=i$.createDom("div",{"id":id+"_Container","class":"pznDialogGreyText pznDialogFontComputed11px pznDialogElementDisplayNone pznSgmtInfoBorder"},_190);
var desc=_18f.description!=undefined&&_18f.description.length>0?_18f.description:SegmentSelector.escapeHTML(PznUIUtils.nls["no_description"]);
i$.createDom("p",{"class":"pznSgmtInfoPadding","tabindex":"0","aria-label":desc,"role":"treeitem"},_193).innerHTML+=desc;
if(_18f.titlepath){
var _194="";
i$.each(_18f.titlepath,function(_195){
_194+=_195+"/";
});
var _196=SegmentSelector.escapeHTML(PznUIUtils.nls["location_label"]);
i$.createDom("p",{"class":"pznSgmtInfoPadding","tabindex":"0","aria-label":_196+_194,"role":"treeitem"},_193).innerHTML+="<b> "+_196+" </b>"+_194;
}
};
SegmentSelector.createSgmtGrpTitleBar=function(_197,_198){
var _199=SegmentSelector.getHtmlIdFromSgmtGrpId(_198.uuid)+"_TitlePane";
var _19a=_198.titlepath;
var _19b=_198.title?_198.title:_198.name;
var _19c=i$.byId(_197);
var _19d=i$.createDom("div",{"id":_199,"tabindex":0,"aria-level":1,"role":"treeitem","aria-expanded":false,"onclick":"SegmentSelector.toggleSegmentContainer(event,'"+SegmentSelector.getHtmlIdFromSgmtGrpId(_198.uuid)+"')","class":"pznDialogSgmtGrpTitlePane pznDialogDisplayNone"},_19c);
i$.createDom("img",{"id":_199+"Twistee","class":"pznDialogSegmentContainerHide","alt":"","src":PznUIUtils.getContextPath()+"/images/blank.gif",},_19d);
var _19e=i$.createDom("span",{"id":_199+"Text","class":"pznSgmtTruncate",},_19d);
var _19f=i$.createDom("span",{"id":_199+"seperator","class":"pznDialogVerticalAlignMiddle",},_19d);
var _1a0=i$.createDom("span",{"id":_199+"SegCount","class":"pznDialogVerticalAlignMiddle",},_19d);
_19e.title=_19e.innerHTML+=_19b;
_19f.title=_19f.innerHTML=" - ";
var _1a1=_198.profiles&&_198.profiles.length;
_1a0.title=_1a0.innerHTML=_1a1;
_19d.setAttribute("aria-label",_19b);
if(_198.draft){
var _1a2=i$.createDom("span",{"class":"pznDialogSegmentSelectorSegmentDraft"},_19d);
_1a2.innerHTML+=SegmentSelector.escapeHTML(PznUIUtils.nls["seg_draft"]);
}
return _19d;
};
SegmentSelector.getRulesFromAllLibraries=function(_1a3){
var s=new Array();
i$.forEach(_1a3,function(_1a4){
for(var i=0;i<_1a4.rules.length;i++){
s.push(_1a4.rules[i]);
}
});
return s;
};
SegmentSelector.processSegments=function(_1a5,_1a6,_1a7,_1a8,_1a9){
var _1aa=null;
var _1ab=0;
var _1ac={};
_1aa=_1a7.profiles;
var i=0;
_1ab=_1aa.length;
for(;i<_1ab;i++){
var _1ad=_1a7.name;
if(!_1ad){
_1ad=_1a7.title;
}
_1ac={"rulename":""+_1ad,"description":""+_1a7.description,"name":""+_1aa[i].name,"ruleId":""+_1a7.uuid,"id":""+_1a7.uuid+"."+_1aa[i].name,"draft":_1a7.draft};
if(_1a9){
_1ac.titlepath=[].concat.apply(new Array(_1a6),_1a7.titlepath);
}
if(_1a7.draft){
_1ac.draft=_1a7.draft;
}
if(_1a9){
SegmentSelector.managedSegments.push(_1ac);
}else{
SegmentSelector.segments.push(_1ac);
}
_1a8.push(_1ac);
}
};
SegmentSelector.fixDuplicates=function(_1ae){
var _1af=[];
_1af=_1af.concat.apply(_1af,_1ae);
var _1b0=_1af.length;
var i=0;
var _1b1="";
var _1b2=-1;
for(;i<_1b0;i++){
_1b1=_1af[i].rulename;
_1b2=SegmentSelector.nextIndexOf(_1b1,_1af,i);
var _1b3="_TitlePane";
if(_1b2!=-1){
SegmentSelector.showTitlePath(_1af[i].ruleId+_1b3,_1af[i].titlepath);
SegmentSelector.showTitlePath(_1af[_1b2].ruleId+_1b3,_1af[_1b2].titlepath);
_1b2=SegmentSelector.nextIndexOf(_1b1,_1af,_1b2);
while(_1b2!=-1){
SegmentSelector.showTitlePath(_1af[i].ruleId+_1b3,_1af[i].titlepath);
SegmentSelector.showTitlePath(_1af[_1b2].ruleId+_1b3,_1af[_1b2].titlepath);
_1b2=SegmentSelector.nextIndexOf(_1b1,_1af,_1b2);
}
}
}
};
SegmentSelector.showTitlePath=function(_1b4,_1b5){
if(_1b5&&i$.isArray(_1b5)&&_1b5.length>0){
var path="Location: ";
i$.each(_1b5,function(_1b6){
path+=_1b6+"/";
});
var _1b7=i$.byId(_1b4);
if(_1b7){
_1b7.title=path;
}
}
};
SegmentSelector.createSegmentDiv=function(_1b8,_1b9,_1ba){
var _1bb="";
var _1bc="";
var _1bd="";
var _1be="";
var _1bf="";
var _1c0=false;
var _1c1=SegmentSelector.escapeHTML(PznUIUtils.nls["desc_label"])+"&nbsp;&nbsp;";
var _1c2=SegmentSelector.escapeHTML(PznUIUtils.nls["location_label"])+"&nbsp;&nbsp;";
var _1c3=SegmentSelector.escapeHTML(PznUIUtils.nls["seg_draft"]);
var _1c4="";
var _1c5=false;
var _1c6=_1ba.length;
var i=0;
var _1c7;
var _1c8=new Array();
for(;i<_1c6;i++){
_1c7=_1ba[i];
_1bb=SegmentSelector.escapeHTML(""+_1c7.name);
_1bc=SegmentSelector.escapeHTML(""+_1c7.id).replace(/ /g,"_");
_1bd=SegmentSelector.escapeHTML(""+_1c7.description);
_1be=SegmentSelector.escapeJS(""+_1c7.name);
_1bf=SegmentSelector.escapeJS(""+_1c7.id).replace(/ /g,"_");
i$.each(_1c7.titlepath,function(_1c9){
_1c4+=_1c9+"/";
});
SegmentSelector.segmentsKeyedByHtmlId[_1bc]=_1c7.id;
var out=SegmentSelector.availableSegmentDivTemplate.replace(/\$segmentIDXml/g,_1bc).replace(/\$segmentDescriptionLabelXml/g,_1c1).replace(/\$segmentDescriptionXml/g,_1bd).replace(/\$segmentNameJs/g,_1be).replace(/\$segmentIDJs/g,_1bf).replace(/\$segmentNameXml/g,_1bb);
if(_1b9){
out=out.replace(/\$segmentLocationLabelXML /g,_1c2).replace(/\$segmentLocationXml/g,_1c4);
}else{
out=out.replace(/\$segmentLocationLabelXML/g,"").replace(/\$segmentLocationXml/g,"");
}
_1c5=_1c7.draft;
if(_1c5){
out=out.replace(/\$segmentDraftXml/g,_1c3);
}else{
out=out.replace(/\$segmentDraftXml/g,"");
}
_1c8.push(out);
}
i$.createDom("img",{"id":_1bc+"Twistee","class":"pznDialogSegmentContainerHide pznDialogDisplayNone","alt":"","src":PznUIUtils.getContextPath()+"/images/blank.gif",},i$.byId(_1bc));
_1b8.innerHTML=_1c8.join("");
};
SegmentSelector.getSegmentDivForTitleSpanId=function(_1ca){
var _1cb=_1ca.split("SegmentName")[0];
return i$.byId(_1cb);
};
SegmentSelector.openTwistee=function(_1cc){
var _1cd=_1cc+"_TitlePane";
var _1ce=i$.byId(_1cd+"Twistee");
i$.addClass(_1ce,"pznDialogSegmentContainerShow");
i$.removeClass(_1ce,"pznDialogSegmentContainerHide");
var _1cf=i$.byId(_1cd);
if(_1cf){
_1cf.setAttribute("aria-expanded",true);
}
};
SegmentSelector.closeTwistee=function(_1d0){
var _1d1=_1d0+"_TitlePane";
var _1d2=i$.byId(_1d1+"Twistee");
var _1d3=i$.byId(_1d1);
if(_1d3){
_1d3.setAttribute("aria-expanded",false);
}
i$.removeClass(_1d2,"pznDialogSegmentContainerShow");
i$.addClass(_1d2,"pznDialogSegmentContainerHide");
};
SegmentSelector.isTwistee=function(_1d4){
if(_1d4){
var a=_1d4.split("Twistee");
if(a&&a.length>1&&a[a.length-1].length==0){
return true;
}
}
return false;
};
SegmentSelector.toggleSegmentContainer=function(_1d5,_1d6){
var _1d7=i$.byId(_1d6+"_Container");
var _1d8=_1d6+"_TitlePaneTwistee";
if(PznUIUtils.isItemHidden(_1d7)){
SegmentSelector.openSection(_1d5,_1d6);
}else{
SegmentSelector.closeSection(_1d5,_1d6);
}
PznUIUtils.resize();
if(_1d5&&_1d5.target){
if(i$.isIE){
if(_1d5.target.ownerDocument&&_1d5.target.ownerDocument.frames&&_1d5.target.ownerDocument.frames.frameElement&&_1d5.target.ownerDocument.frames.frameElement.contentWindow){
var y=0;
var _1d9=_1d5.target;
if(_1d9.offsetParent){
do{
y+=_1d9.offsetTop;
}while(_1d9=_1d9.offsetParent);
}
_1d5.target.ownerDocument.frames.frameElement.contentWindow.scroll(0,y);
}
}else{
_1d5.target.scrollIntoView();
}
}
};
SegmentSelector.isSectionClosed=function(_1da,_1db){
var _1dc=i$.byId(_1db+"_Container");
return PznUIUtils.isItemHidden(_1dc);
};
SegmentSelector.openSection=function(_1dd,_1de){
var _1df=i$.byId(_1de+"_Container");
PznUIUtils.showItem(_1df);
SegmentSelector.openTwistee(_1de);
};
SegmentSelector.closeSection=function(_1e0,_1e1){
var _1e2=i$.byId(_1e1+"_Container");
PznUIUtils.hideItem(_1e2);
SegmentSelector.closeTwistee(_1e1);
};
SegmentSelector.addSelectedSegments=function(){
if(typeof SegmentSelector.selectedSegments!=="undefined"){
SegmentSelector.selectedSegments=SegmentSelector.selectedSegments.replace(/^\s+|\s+$/g,"").replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,"\"").replace(/&#39;/g,"'");
if(SegmentSelector.selectedSegments!==""){
var _1e3=SegmentSelector.selectedSegments.split(",");
var _1e4=_1e3.length;
for(var i=0;i<_1e4;i++){
var li=_1e3[i].lastIndexOf("."),id=_1e3[i].substr(0,li),_1e5=_1e3[i].substr(li+1);
this.addSegment(id,_1e5);
}
}
}
};
SegmentSelector.addSegment=function(id,_1e6){
try{
if(event&&event.target&&event.target.nodeName=="IMG"){
return;
}
}
catch(err){
console.debug("SegmentSelector.addSegment: event is undefined.");
}
if(this.setSegmentSelected(id)){
this.createAddedSegmentDiv(id,_1e6);
SegmentSelector._changed=true;
}
SegmentSelector.showInformation();
SegmentSelector.previousState.lastAddedSgmt=id;
};
SegmentSelector.removeSegment=function(id,name){
try{
if(event&&event.target&&event.target.nodeName=="IMG"){
return;
}
}
catch(err){
console.debug("SegmentSelector.removeSegment: event is undefined.");
}
this.removeAddedSegmentDiv(id);
this.setSegmentUnselected(id);
SegmentSelector._changed=true;
};
SegmentSelector.createAddedSegmentDiv=function(_1e7,_1e8){
var _1e9={"left":{"source":"/.personalization/objects/ibmpersonalization:aoRequest","name":"pzn.targeted.segments","type":"list","isDynamic":"true"},"operator":"includes","right":{"name":"PLACEHOLDER","type":"string"}};
if(SegmentSelector.segmentsKeyedByHtmlId[_1e7]){
_1e9.right.name=SegmentSelector.segmentsKeyedByHtmlId[_1e7];
}else{
_1e9.right.name=_1e7;
}
_1e9.operator=_1e8;
SegmentSelector.jsonSegments.push(_1e9);
};
SegmentSelector.removeAddedSegmentDiv=function(id){
var _1ea=SegmentSelector.jsonSegments.length,_1eb=SegmentSelector.jsonSegments,i=0;
for(;i<_1ea;i++){
if(_1eb[i].right.name==SegmentSelector.segmentsKeyedByHtmlId[id]){
_1eb.splice(i,1);
break;
}
}
SegmentSelector.jsonSegments=_1eb;
};
SegmentSelector.getHtmlIdFromSegmentId=function(_1ec){
var _1ed;
for(key in SegmentSelector.segmentsKeyedByHtmlId){
if(SegmentSelector.segmentsKeyedByHtmlId[key]==_1ec){
_1ed=key;
break;
}
}
return _1ed;
};
SegmentSelector.getHtmlIdFromSgmtGrpId=function(_1ee){
var _1ef;
for(key in SegmentSelector.sgmtGrpsKeyedByHtmlId){
if(SegmentSelector.sgmtGrpsKeyedByHtmlId[key]==_1ee){
_1ef=key;
break;
}
}
return _1ef;
};
SegmentSelector.setSegmentSelected=function(_1f0){
var _1f1=SegmentSelector.getHtmlIdFromSegmentId(_1f0);
if(!_1f1){
_1f1=_1f0;
}
var _1f2=i$.byId(_1f1),_1f3=i$.byId(_1f1+"AddLink"),_1f4=i$.byId(_1f1+"RemLink");
if(!_1f2){
return false;
}
i$.addClass(_1f2,"pznSelected");
_1f2.setAttribute("aria-labelledby",_1f1+"SegmentName "+_1f1+"RemLink");
PznUIUtils.hideItem(_1f3);
PznUIUtils.showItem(_1f4);
return true;
};
SegmentSelector.setSegmentUnselected=function(_1f5){
var _1f6=_1f5;
var _1f7=i$.byId(_1f6),_1f8=i$.byId(_1f6+"AddLink"),_1f9=i$.byId(_1f6+"RemLink");
if(!_1f7){
return false;
}
i$.removeClass(_1f7,"pznSelected");
_1f7.setAttribute("aria-labelledby",_1f6+"SegmentName "+_1f6+"AddLink");
PznUIUtils.showItem(_1f8);
PznUIUtils.hideItem(_1f9);
SegmentSelector.showInformation();
return true;
};
SegmentSelector.showInformation=function(){
if(!PznUIUtils.isInfoMode()){
return;
}
var _1fa=(SegmentSelector.segments)?SegmentSelector.segments.length>0:false,_1fb=(SegmentSelector.managedSegments)?SegmentSelector.managedSegments.length>0:false,_1fc=i$.byId("pznDialogSegmentsInfo"),_1fd=i$.byId("pznSelectedSegmentsNoSelectionInfo");
var _1fe=i$.byId("pznDialogSearchInput").value;
if(!(_1fe==SegmentSelector.escapeHTML(PznUIUtils.nls["type_to_find_segments"]))&&_1fe!=""){
SegmentSelector.doTypeAhead();
}else{
if(_1fa||_1fb){
PznUIUtils.showItem(_1fc);
PznUIUtils.hideItem(_1fd);
}else{
PznUIUtils.showItem(_1fd);
PznUIUtils.hideItem(_1fc);
}
SegmentSelector.hideNotFoundSegmentsInfo();
PznUIUtils.resize();
}
};
SegmentSelector.showDescriptions=function(show){
var link=i$.byId("pznDialogSegementSelectorDescriptionLink");
link.innerHTML="";
var _1ff=i$.query("div[id^='pznAvailableSegmentsContainer']");
i$.each(_1ff,function(_200){
var divs=_200.getElementsByTagName("span");
var l=divs.length;
for(var i=0;i<l;i++){
if(divs[i].id.indexOf("pznDescription")>-1){
if(show){
PznUIUtils.showItem(divs[i]);
}else{
PznUIUtils.hideItem(divs[i]);
}
}
}
});
if(show){
link.innerHTML=PznUIUtils.escapeHTML(PznUIUtils.nls["hide_segment_descriptions_btn"]);
}else{
link.innerHTML=PznUIUtils.escapeHTML(PznUIUtils.nls["show_segment_descriptions_btn"]);
}
SegmentSelector._showingDesc=show;
PznUIUtils.resize();
};
SegmentSelector.toggleDescriptions=function(){
if(SegmentSelector._showingDesc){
SegmentSelector.showDescriptions(false);
}else{
SegmentSelector.showDescriptions(true);
}
};
SegmentSelector.getFilterClassForIndex=function(_201){
if(SegmentSelector.filterOptions[_201]){
return SegmentSelector.filterOptions[_201].getFilterClass();
}else{
console.debug("SegmentSelector.filterOptions["+_201+"] doesnt exist");
return undefined;
}
};
SegmentSelector.doTypeAhead=function(_202){
if(SegmentSelector.noSegmentsExist){
return;
}
var _203=false;
var _204=false;
var _205=false;
SegmentSelector._changed=true;
var str=i$.byId("pznDialogSearchInput").value;
if(str==SegmentSelector.escapeHTML(PznUIUtils.nls["type_to_find_segments"])){
str="";
}
var _206=new RegExp(str.replace("^\\s*",""),"i");
var _207=[];
if(PznDialogPopupMenu.getInstance().isHidden()){
_207=PznDialogPopupMenu.getInstance().getSelectedIndices();
}else{
i$.each(i$.query("img[class*= 'pznDialogPopupMenuSelectedImg']"),function(_208){
_207.push(parseInt(_208.parentNode.getAttribute("menuindex")));
});
}
if(_207&&_207.length>0){
var _209=_207.indexOf(0)>-1;
var _20a=_207.indexOf(SegmentSelector.filterOptions.indexOf(SegmentSelector.allManagedFilter))>-1;
var _20b=_207.indexOf(SegmentSelector.filterOptions.indexOf(SegmentSelector.segmentsFilter))>-1;
if(_209){
_203=SegmentSelector.searchSegmentGroups(_206,true);
_204=SegmentSelector.searchSegmentGroups(_206,false);
}else{
if(_20b){
_204=SegmentSelector.searchSegmentGroups(_206,false);
}else{
SegmentSelector.hideNonManagedSegments();
}
if(_20a){
_203=SegmentSelector.searchSegmentGroups(_206,true);
}else{
var _20c=[];
i$.each(_207,function(_20d){
var _20e=SegmentSelector.getFilterClassForIndex(_20d);
if(_20e.indexOf(SegmentSelector.libraryFilterClassSuffix)>-1){
_20c.push(_20e);
}
});
if(_20c.length>0){
_203=SegmentSelector.searchSegmentGroups(_206,true,_20c);
}else{
SegmentSelector.hideManagedSegments();
}
}
}
}
if(!_203&&!_204){
SegmentSelector.hideNoSegmentsInfo();
SegmentSelector.hideManagedSegments();
SegmentSelector.hideNonManagedSegments();
SegmentSelector.hideAddSegmentsInfomodeMessage();
SegmentSelector.showNotFoundSegmentsInfo();
}else{
SegmentSelector.hideNoSegmentsInfo();
SegmentSelector.hideNotFoundSegmentsInfo();
if(PznUIUtils.isInfoMode()){
SegmentSelector.showAddSegmentsInfomodeMessage();
}
if(_203){
SegmentSelector.showManagedSegments();
}
if(_204){
SegmentSelector.showNonManagedSegments();
}
}
PznUIUtils.resize();
};
SegmentSelector.searchSegmentGroups=function(_20f,_210,_211){
var _212=false;
var _213,_214;
if(_210){
_213=i$.byId("managedSegments_Container");
_214=SegmentSelector.managedFilterClass;
}else{
_213=i$.byId("segments_Container");
_214=SegmentSelector.nonManagedFilterClass;
}
if(_213){
var _215=i$.query("div[class*=\""+_214+"\"]");
i$.forEach(i$.query("div[class*=\""+_214+"\"]:(div[class*=\"pznDialogElementDisplayNone\"])"),function(_216){
PznUIUtils.showItem(_216);
i$.forEach(i$.query("div[class*=\"pznDialogSegmentSelectorSegment\"]:(div[class*=\"pznDialogElementDisplayNone\"])",_216),function(_217){
PznUIUtils.showItem(_217);
});
});
var _218=false;
if(_211){
_218=i$.some(_211,function(_219){
if(_219.indexOf(SegmentSelector.libraryFilterClassSuffix)>0){
return true;
}
});
}
if(_218){
var _21a="div[class*=\""+_214+"\"]";
i$.forEach(_211,function(_21b){
_21a+=":not(div[class*=\""+_21b+"\"])";
});
i$.forEach(i$.query(_21a),function(_21c){
PznUIUtils.hideItem(_21c);
if(_215.indexOf(_21c)>-1){
_215.splice(_215.indexOf(_21c),1);
}
});
}
i$.each(_215,function(_21d){
var _21e=i$.byId(_21d.id+"_TitlePane");
var _21f=_21e.childNodes[1].textContent;
if(_20f.test(_21f)){
_212=true;
SegmentSelector.closeSection(undefined,_21d.id);
}else{
_212|=SegmentSelector.searchSegmentsForGroup(_21d,_20f);
}
SegmentSelector.updateSgmtCount(_21d);
return;
});
if(!_212){
if(_210){
SegmentSelector.hideManagedSegments();
}else{
SegmentSelector.hideNonManagedSegments();
}
}
}
return _212;
};
SegmentSelector.searchSegmentsForGroup=function(_220,_221){
var _222=false;
var _223=i$.byId(_220.id+"_Container");
if(_223){
var _224=i$.query("span[class^=\"segmentFilter\"]",_223);
i$.each(_224,function(_225){
var _226=SegmentSelector.getSegmentDivForTitleSpanId(_225.id);
if(_221.test(_225.innerHTML)){
_222=true;
SegmentSelector.openSection(undefined,_220.id);
PznUIUtils.showItem(_226);
return;
}else{
PznUIUtils.hideItem(_226);
_222|=false;
}
});
if(!_222){
PznUIUtils.hideItem(_220);
}
}
return _222;
};
SegmentSelector.searchLibrarySegmentGroups=function(_227,_228){
var _229=false;
var _22a=i$.query("div[class*=\""+_227+"\"]");
i$.each(_22a,function(_22b){
var _22c=i$.byId(_22b.id+"_TitlePane");
var _22d=_22c.childNodes[1].textContent;
if(_228.test(_22d)){
_229=true;
return;
}else{
_229|=SegmentSelector.searchManagedSegmentsForGroup(managedSgmtGrp,_228);
}
});
return _229;
};
SegmentSelector.updateSgmtCount=function(_22e){
var _22f=i$.query("div[class *='pznDialogSegmentSelectorSegment']:not(div[class *='pznDialogElementDisplayNone'])",_22e);
if(_22f&&_22f.length>0){
var _230=i$.byId(_22e.id+"_TitlePaneSegCount");
if(_230){
_230.innerHTML=_22f.length;
}
}
};
SegmentSelector.showNoSegmentsInfo=function(){
PznUIUtils.showItem(i$.byId("pznSelectedSegmentsNoSelectionInfo"));
};
SegmentSelector.hideNoSegmentsInfo=function(){
PznUIUtils.hideItem(i$.byId("pznSelectedSegmentsNoSelectionInfo"));
};
SegmentSelector.showAddSegmentsInfomodeMessage=function(){
PznUIUtils.showItem(i$.byId("pznDialogSegmentsInfo"));
};
SegmentSelector.hideAddSegmentsInfomodeMessage=function(){
PznUIUtils.hideItem(i$.byId("pznDialogSegmentsInfo"));
};
SegmentSelector.showNotFoundSegmentsInfo=function(){
PznUIUtils.showItem(i$.byId("pznSelectedSegmentsNotFoundInfo"));
};
SegmentSelector.hideNotFoundSegmentsInfo=function(){
PznUIUtils.hideItem(i$.byId("pznSelectedSegmentsNotFoundInfo"));
};
SegmentSelector.resetTypeAhead=function(){
i$.byId("pznDialogSearchInput").value="";
SegmentSelector.doTypeAhead();
};
SegmentSelector.getNonManagedFilterIndex=function(){
for(var i=0;i<SegmentSelector.filterOptions.length;i++){
filter=SegmentSelector.filterOptions[i];
if(filter.filterClass==SegmentSelector.nonManagedFilterClass){
return filter.getIndex();
}
}
return -1;
};
SegmentSelector.getManagedFilterIndex=function(){
for(var i=0;i<SegmentSelector.filterOptions.length;i++){
filter=SegmentSelector.filterOptions[i];
if(filter.filterClass==SegmentSelector.managedFilterClass){
return filter.getIndex();
}
}
return -1;
};
SegmentSelector.haveManagedSegments=function(){
return (SegmentSelector.managedSegments)?SegmentSelector.managedSegments.length>0:false;
};
SegmentSelector.haveNonManagedSegments=function(){
return (SegmentSelector.segments)?SegmentSelector.segments.length>0:false;
};
SegmentSelector.setBannerTitle=function(_231){
i$.byId("pznSegmentSelectorBannerTitle").innerHTML=_231;
};
SegmentSelector.Save=function(){
if(SegmentSelector._changed||PznDialogPopupMenu.getInstance().isDirty()){
var rd=PznUIUtils.getContentSettings().getRuleDataObject();
if(rd&&rd.getEditModeProfile()){
if(SegmentSelector.jsonSegments){
rd.getEditModeProfile().setConditions(SegmentSelector.jsonSegments);
}
}
SegmentSelector.previousState.filters=PznDialogPopupMenu.getInstance().getSelectedIndices();
SegmentSelector.previousState.searchString=i$.byId("pznDialogSearchInput").value;
PznUIUtils.openSegLibState=i$.toJson(SegmentSelector.previousState);
}
SegmentSelector._changed=false;
PznUIUtils.getDialogNavigator().showTargetingOverview(null,PznUIUtils.getDialogNavigator().getCurrentTargetedItemEditPosition());
return false;
};
SegmentSelector.Cancel=function(){
SegmentSelector._changed=false;
PznUIUtils.getDialogNavigator().showTargetingOverview(null,PznUIUtils.getDialogNavigator().getCurrentTargetedItemEditPosition());
return false;
};
SegmentSelector.escapeHTML=function(text){
return text.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;");
};
SegmentSelector.escapeJS=function(text){
return text.replace(/\\/g,"\\\\").replace(/\'/g,"\\'").replace(/\"/g,"\\\"").replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;");
};
SegmentSelector.nextIndexOf=function(text,_232,_233){
var len=_232.length;
var i=_233+1;
for(;i<len;i++){
if(_232[i].rulename==text){
return i;
}
}
return -1;
};
})();
(function(){
PznDialogPopupMenu=function(){
this.keyPos=null;
this.parent=null;
this.popupDiv=PznUIUtils.EL_DIALOG_POPUP_MENU;
this.menuContainer=PznUIUtils.EL_DIALOG_POPUP_MENU_CONTAINER;
this.mouseActive=null;
this.callback=null;
this.disabled=null;
this.multiSelect=false;
this.selectedIndices=[];
this._dirty=false;
};
PznDialogPopupMenu._pznDialogPopupMenu=null;
PznDialogPopupMenu.getInstance=function(){
if(!PznDialogPopupMenu._pznDialogPopupMenu){
PznDialogPopupMenu._pznDialogPopupMenu=new PznDialogPopupMenu();
}
return PznDialogPopupMenu._pznDialogPopupMenu;
};
PznDialogPopupMenu.prototype={show:function(_234,_235,evt,_236,_237,_238,args){
if(!this.popupDiv){
this.popupDiv=PznUIUtils.EL_DIALOG_POPUP_MENU;
}
if(!this.menuContainer){
this.menuContainer=PznUIUtils.EL_DIALOG_POPUP_MENU_CONTAINER;
}
if(this.parent){
if(this.parent!=_234){
this.hide(true);
}
}
this.args=(args)?args:{};
if(!this.args.positionAt){
this.args.positionAt=_234;
}
if(this.args.multiSelect){
this.multiSelect=true;
}
this.ieBodyFocus=true;
this.parent=_234;
var ref=this;
this.parent.focus();
this.parent.onblur=function(){
if((i$.isIE&&ref.ieBodyFocus)||!ref.hide(false)){
ref.ieBodyFocus=false;
setTimeout(function(){
ref.parent.focus();
},10);
}
};
this.callback=_236;
this.disabled=_238;
if(PznUIUtils.isItemHidden(this.popupDiv)){
this.cleanPopup();
if(_235&&_235.length>0){
var _239=-1,len=_235.length;
for(var i=0;i<len;i++){
if(_235[i].separator){
i$.createDom("hr",{"class":"pznDialogPopupMenuItemSeparator"},this.menuContainer);
}
var mi=i$.createDom("div",{"menuIndex":i,"id":i,"aria-selected":"false","role":"option",},this.menuContainer),out=["<img src=\""+PznUIUtils.getContextPath()+"/images/blank.gif\" class=\"pznDialogPopupMenuItemImg"];
if(_235[i].selected||(this.args&&this.args.multiSelect&&this.selectedIndices&&this.selectedIndices.indexOf(i)>-1)){
out.push(" pznDialogPopupMenuSelectedImg");
mi.setAttribute("aria-selected","true");
_239=i;
if(this.args&&this.args.multiSelect&&this.selectedIndices.indexOf(parseInt(i))==-1){
this.selectedIndices.push(parseInt(i));
}
}
out.push("\" alt=\"\" >");
out.push(_235[i].text);
if(_235[i].parentIndex&&_235[i].parentIndex>-1){
}
mi.innerHTML=out.join("");
i$.addClass(mi,"pznDialogPopupMenuItem");
if(_235[i].parentIndex!=undefined&&_235[i].parentIndex>-1){
i$.addClass(mi,"pznDialogPopupSubMenuBtn");
}
if(this.isPositionDisabled(i)){
i$.addClass(mi,"pznDialogDisabledItemText");
}
i$.bindDomEvt(mi,"click",function(evt){
ref.keyPos=ref.getEventMenuIndex(evt);
ref.setValue();
return false;
});
i$.bindDomEvt(mi,"mouseout",function(){
ref.mouseOut();
});
i$.bindDomEvt(mi,"mouseover",function(evt){
var i=ref.getEventMenuIndex(evt);
ref.mouseOver(i);
});
}
PznUIUtils.showItem(this.popupDiv);
this.setMenuPosition(_237);
if(_239>-1){
this.keyPos=_239;
this.setSelected();
}else{
for(var a=0;a<len;a++){
if(!this.isPositionDisabled(a)){
this.keyPos=a;
this.setSelected();
break;
}
}
}
}
}else{
if(evt.keyCode==38&&evt.altKey){
this.hide(true);
}
if(evt.keyCode==40){
if(typeof this.keyPos==="undefined"){
this.keyPos=0;
}else{
this.keyPos++;
}
this.setSelected();
}else{
if(evt.keyCode==38){
if(typeof this.keyPos==="undefined"){
this.keyPos=this.menuContainer.getElementsByTagName("div").length-1;
}else{
this.keyPos--;
}
this.setSelected();
}else{
if(evt.keyCode==13||evt.keyCode==39){
if(typeof this.keyPos!=="undefined"){
this.setValue();
}
}else{
if(evt.keyCode==27||evt.keyCode==37){
this.hide(true);
}
}
}
}
}
if(_235&&_235.length>1){
var _23a=(String.fromCharCode(evt.keyCode)).toLowerCase();
valueText="",checkPos=0;
for(var i=0;i<_235.length;i++){
valueText=_235[i].text;
if(valueText){
if(PznUIUtils.isRTL()){
checkPos=valueText.length-1;
}
if((_23a==(valueText.charAt(checkPos)).toLowerCase())){
this.selectByLetter(this.keyPos,_23a,_235);
break;
}
}
}
}
},isHidden:function(){
return PznUIUtils.isItemHidden(this.popupDiv);
},select:function(_23b,_23c){
var _23d=i$.byId(_23b);
_23b=parseInt(_23b);
if(_23d){
if(_23c){
i$.addClass(_23d.childNodes[0],"pznDialogPopupMenuSelectedImg");
if(this.selectedIndices.indexOf(_23b)==-1){
this.selectedIndices.push(_23b);
}
}else{
if(i$.hasClass(_23d.childNodes[0],"pznDialogPopupMenuSelectedImg")){
i$.removeClass(_23d.childNodes[0],"pznDialogPopupMenuSelectedImg");
if(this.selectedIndices.indexOf(_23b)>-1){
this.selectedIndices.splice(this.selectedIndices.indexOf(_23b),1);
}
}else{
i$.addClass(_23d.childNodes[0],"pznDialogPopupMenuSelectedImg");
if(this.selectedIndices.indexOf(_23b)==-1){
this.selectedIndices.push(_23b);
}
}
}
PznUIUtils.resize();
}else{
if(_23c){
if(this.selectedIndices.indexOf(_23b)==-1){
this.selectedIndices.push(_23b);
}
}
}
this._dirty=true;
},isSelected:function(idx){
var _23e=i$.byId(idx);
idx=parseInt(idx);
if(_23e){
return i$.hasClass(_23e.childNodes[0],"pznDialogPopupMenuSelectedImg");
}else{
return this.selectedIndices&&this.selectedIndices.length>0&&this.selectedIndices.indexOf(idx)>-1;
}
},unSelect:function(idx){
var _23f=i$.byId(idx);
idx=parseInt(idx);
if(_23f){
i$.removeClass(_23f.childNodes[0],"pznDialogPopupMenuSelectedImg");
if(this.selectedIndices.indexOf(idx)>-1){
this.selectedIndices.splice(this.selectedIndices.indexOf(idx),1);
}
}
this._dirty=true;
},isDirty:function(){
return this._dirty;
},toggle:function(idx){
var _240=i$.byId(idx);
if(i$.hasClass(_240.childNodes[0],"pznDialogPopupMenuSelectedImg")){
PznDialogPopupMenu.getInstance().unSelect(idx);
}else{
PznDialogPopupMenu.getInstance().select(idx);
}
},selectByLetter:function(elem,_241,_242){
var _243=this.keyPos,_244=this.getStartCharacterPosition(_242[this.keyPos]);
if(_241==(_242[this.keyPos].text.charAt(_244)).toLowerCase()){
if(this.keyPos==2){
_243=0;
}else{
_243++;
}
if(_242[_243]){
_244=this.getStartCharacterPosition(_242[_243]);
if(_241==(_242[_243].text.charAt(_244)).toLowerCase()){
this.keyPos=_243;
this.setSelected();
}else{
if(_243==2){
_243=0;
}else{
_243++;
}
if(_242[_243]){
_244=this.getStartCharacterPosition(_242[_243]);
if(_241==(_242[_243].text.charAt(_244)).toLowerCase()){
this.keyPos=_243;
this.setSelected();
}
}
}
}
}else{
var i;
for(i=0;i<_242.length;i++){
_244=this.getStartCharacterPosition(_242[i]);
if(_241==(_242[i].text.charAt(_244)).toLowerCase()){
break;
}
}
this.keyPos=i;
this.setSelected();
}
},getStartCharacterPosition:function(_245){
if(PznUIUtils.isRTL()){
return _245.text.length-1;
}else{
return 0;
}
},isPositionDisabled:function(pos){
if(this.disabled){
var dl=this.disabled.length;
for(var i=0;i<dl;i++){
if(pos==this.disabled[i]){
return true;
}
}
}
return false;
},getEventMenuIndex:function(evt){
var _246=null;
if(evt.target){
if(evt.target.hasAttribute("menuIndex")){
_246=evt.target.getAttribute("menuIndex");
}else{
_246=evt.target.parentNode.getAttribute("menuIndex");
}
}else{
if(evt.srcElement){
if(evt.srcElement.hasAttribute("menuIndex")){
_246=evt.srcElement.getAttribute("menuIndex");
}else{
_246=evt.srcElement.parentNode.getAttribute("menuIndex");
}
}
}
return _246;
},setMenuPosition:function(_247){
var obj=this.args.positionAt,rtl=PznUIUtils.isRTL(),_248=obj.offsetWidth,top=0,left=0;
if(!isNaN(obj.offsetHeight)){
top+=obj.offsetHeight;
}
while(obj&&!isNaN(obj.offsetTop)&&!isNaN(obj.offsetLeft)){
top+=obj.offsetTop-obj.scrollTop;
left+=obj.offsetLeft-obj.scrollLeft;
obj=obj.offsetParent;
}
var pr;
if(rtl){
pr=left+_248;
left=pr-this.popupDiv.offsetWidth;
}
if(_247){
if(_247.x){
left+=(rtl)?-_247.x:_247.x;
}
if(_247.y){
top+=(rtl)?-_247.y:_247.y;
}
if(top<0){
top=0;
}
if(left<0){
left=0;
}
if(pr&&pr<left+this.popupDiv.offsetWidth){
left-=(left+this.popupDiv.offsetWidth-pr);
}
}
this.popupDiv.style.top=(top+5)+"px";
this.popupDiv.style.left=(left+0)+"px";
},setSelected:function(){
var mc=this.menuContainer,_249=mc.getElementsByTagName("div"),c=_249.length,pos=this.keyPos;
if(pos>(c-1)){
pos=0;
}
if(pos<0){
pos=c-1;
}
if(this.isPositionDisabled(pos)){
for(var a=0;a<c;a++){
if(a!=pos){
if(!this.isPositionDisabled(a)){
pos=a;
break;
}
}
}
}
this.keyPos=pos;
for(var i=0;i<c;i++){
i$.removeClass(_249[i],"pznDialogPopupMenuSelected");
}
i$.addClass(_249[pos],"pznDialogPopupMenuSelected");
if(this.parent){
this.parent.setAttribute("aria-activedescendant",pos);
}
},setValue:function(){
if(!this.isPositionDisabled(this.keyPos)){
if(this.callback){
this.callback(this.keyPos);
}
if(this.args&&this.args.multiSelect){
this.hide(false);
}else{
this.hide(true);
this.parent.focus();
}
}
},mouseOver:function(pos){
this.keyPos=pos;
this.setSelected();
this.mouseActive=true;
},mouseOut:function(){
this.mouseActive=false;
},getSelectedIndices:function(){
return this.selectedIndices;
},hide:function(_24a){
if(!_24a&&this.mouseActive){
return false;
}
var _24b=this.selectedIndices;
if(this.args&&this.args.multiSelect){
i$.each(i$.query("img[class*= 'pznDialogPopupMenuSelectedImg']"),function(_24c){
var idx=parseInt(_24c.parentNode.getAttribute("menuindex"));
if(_24b.indexOf(idx)==-1){
_24b.push(_24c.parentNode.getAttribute("menuindex"));
}
});
this.setSelectedFilterLabel();
}
this.mouseActive=false;
PznUIUtils.hideItem(this.popupDiv);
this.cleanPopup();
this.keyPos=null;
PznUIUtils.resize();
return true;
},setSelectedFilterLabel:function(){
var _24d;
if(this.isSelected(0)&&SegmentSelector.filterOptions[0]){
_24d=SegmentSelector.filterOptions[0].getTitle();
}else{
if(this.selectedIndices.length==1&&SegmentSelector.filterOptions[this.selectedIndices[0]]){
_24d=SegmentSelector.filterOptions[this.selectedIndices[0]].getTitle();
}else{
if(this.selectedIndices.length>1){
var _24e=this.selectedIndices;
var _24f=[];
i$.forEach(SegmentSelector.filterOptions,function(_250){
if(_24f.indexOf(_250.getIndex())==-1){
_24f.push(_250.getIndex());
}
});
var _251=[];
var _252=this;
i$.forEach(_24e,function(idx){
if(SegmentSelector.filterOptions[idx]){
var _253=SegmentSelector.filterOptions[idx].getChildrenIndices();
_24e=_24e.filter(function(el){
return _253.indexOf(el)<0;
});
if(_253&&_253.length>0){
_251=_24f.filter(function(el){
return _253.indexOf(el)<0;
});
_251.splice(_251.indexOf(0),1);
if(_24e.length>1&&_24e.length==_251.length){
_24d=SegmentSelector.filterOptions[0].getTitle();
_252.select(0);
return false;
}else{
if(_24e.length==1){
_24d=SegmentSelector.filterOptions[_24e[0]].getTitle();
}
}
}else{
var _254=SegmentSelector.filterOptions[idx].getParentIndex();
if((_254==0||_254==1)&&_24e.indexOf(_254)==-1){
_24d=PznUIUtils.escapeHTML(PznUIUtils.nls["filter_custom"]);
return false;
}
}
}
});
if(_24d&&i$.trim(_24d).length==0){
_24d=PznUIUtils.escapeHTML(PznUIUtils.nls["filter_custom"]);
}
}else{
_24d=PznUIUtils.escapeHTML(PznUIUtils.nls["filter_none"]);
}
}
}
if(_24d==undefined||i$.trim(_24d).length==0){
_24d=PznUIUtils.escapeHTML(PznUIUtils.nls["filter_none"]);
}
i$.byId("pznSgmtFilterSelected").innerHTML=_24d;
},cleanPopup:function(){
while(this.menuContainer.firstChild){
this.menuContainer.removeChild(this.menuContainer.firstChild);
}
}};
})();


}catch(e){console.log("Module 'wp_content_targeting_cam': ",e);}